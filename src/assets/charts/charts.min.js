/*!
	Copyright 2015 Axibase Corporation - Licensed under the terms of Axibase Master Program License Agreement (AMPLA).
	All other rights reserved. No parts of this source code can be used with any products or sites other than those licensed under AMPLA.
	Source code in this file can be copied only with prior written approval of Axibase Corporation.
	THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED,
	INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE.
*/
!function e(t,n,r){function a(o,l){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return a(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){function r(e){var t=[];if(e.options_.forEach(function(e){if(!e.text&&!e.value)throw Error("either value or text setting should be specified in option section");e.value?t.push({text:e.text,value:e.value}):t.push({text:e.text,value:e.text})}),e.options){var n=/^\s*javascript:/;if(e.options.match(n)){var r=e.options.replace(n,""),a=["requestMetricsSeriesValues","requestEntitiesMetricsValues","requestPropertiesValues","requestMetricsSeriesOptions","requestEntitiesMetricsOptions","requestPropertiesOptions"];e.optionsFunction=getCfgFunction(a.join(","),r,null)}else e.options=e.options.split(/\s*,\s*/).forEach(function(e){t.push({value:e})})}return t}n.inheritedPropertiesSettings=["keys","exactmatch","keytagexpression","entity","entities","entitygroup","entityexpression","limit","last","offset","tagoffset","url","contextpath","path","pathparameters"],n.processPropertyConfig=function(e){return{type:e.type,keys:e.keys,exactMatch:"true"===e.exactmatch,keyTagExpression:e.keytagexpression,entity:e.entity,entities:parseCfgValue(e.entities,"list"),entityGroup:e.entitygroup,entityExpression:e.entityexpression,limit:parseInt(e.limit),last:"true"===e.last,offset:parseInt(e.offset),tagOffset:parseInt(e.tagoffset)}},n.DropdownConfig=function(){this.options_=[]},n.processDropdownConfig=function(e){var t=extendObject({},e);if(!t.changefield&&!t.onchange)throw Error("either change-field or on-change setting should be specified in dropdown section");return t.onchange&&(t.onChange=new Function("widget",t.onchange),delete t.onchange),t.changefield&&(t.changeField=t.changefield,delete t.changefield),t.options=r(t),delete t.options_,setCfgFormat(t,null,!0),t}},{}],2:[function(e,t,n){var r=e("./preprocessor"),a=e("./configs");t.exports=function(e,t){function n(e){for(var t,n=[],r=0;t=$(e),!r&&n.push(t[0]),t[1];r=Math.max(0,r+(t[1][1]?1:-1)));return n.join("").replace(Y,function(e,t){return t?e.replace("\\",""):""})}function i(e,t){if(t){for(var n,r=[];n=Z(e),r.push(n[0]),n[1];){var a=n[1][1].toLowerCase();r.push(t.hasOwnProperty(a)?t[a]:n[1][0])}e=r.join("")}return e}function o(e){for(var t,n=[].concat(e).filter(identity).join(" "),r=[];t=J(n),r.push(t[0]),t[1];)r.push(t[1][1]);var a=-1;return r.reduce(function(e,t,n){var i=r[n-1],o=r[n+1];if(Q.test(t)){if(i){var l="-"==t?0:"<-"==t?-1:"->"==t?1:null;if(null==l)a<n-1&&e.push(i);else if(o)return e.push([i,o,l]),void(a=n+1)}}else a<n&&n==r.length-1&&t&&e.push(t)},[])}function l(e){for(var t,n=[].concat(e).filter(identity).join(" "),r=[];t=J(n),t[0]&&r.push(t[0]),t[1];);return r}function s(){this.groups=[],this.script=[]}function u(){this.widgets=[]}function c(){this.series=[],this.columns=[],this.placeholders={},this.links=[],this.nodes=[],this.dropdowns=[]}function d(){this.series=[],this._update="full",this.display="true"}function f(){extendObject(this,ee,d3.functor(!1)),this.properties=[]}function p(e,t){var n=le.some(function(e){return t[e]});n||le.forEach(function(n){e[n]&&(t[n]=e[n])})}function h(e,t){var n=t.map(function(t){return R(e,t,"styles")}).filter(function(e){return null!=e});return function(){var e=arguments,t=n.map(function(t){return t.apply(this,e)}).filter(function(e){return null!=e});return t.join(";")}}function g(e){return e=extendObject(new c,e),e.columns=e.columns.map(function(e){return extendObject(new d,e)}),[e].concat(e.columns).forEach(function(e){e.series=e.series.map(function(e){return extendObject(new f,e)})}),e}function v(e){var n=e.group_,r=n.configuration_;p(n,e),extendObject(e,n,function(t,n){return null==t||null!=e[n]||oe.groups.indexOf(n)>=0||le.indexOf(n)>=0});var i=[e].concat(e.columns).filter(function(e){return e.hasOwnProperty("type")&&e.type!=se})[0];i!=e&&(e.type=i?i.type:defaultWidgetType,i&&i!=n&&delete i.type);var o=e.type.toLowerCase(),l=e.originType?e.originType.toLowerCase():null,s=re[l||o];e=g(e),e.dropdowns=e.dropdowns.map(function(t){return a.processDropdownConfig(t,e)}),e.tagsDropdowns=U(e.tagsdropdowns,"boolean"),null===e.tagsDropdowns&&(e.tagsDropdowns=U(e.tagsdropdowns,"list")),e.tagsDropdowns&&(e.multipleseries=!0,e.tagsDropdownsStyle=e.tagsdropdownsstyle,delete e.tagsdropdownsstyle),delete e.tagsdropdowns,e.columns.forEach(function(t){function n(e){return!s||s.indexOf(e)<0}t.series&&t.series.forEach(function(e){T(!1,t,e,n)}),T(!0,t,e,n)}),k(e),e.buttons=P(e.buttons),e.menu=P(e.menu),e.dialogwidget=toCapitalCase(U(e.dialogwidget,"string")||"")||t,["ontitleclick","onseriesclick","onseriesdoubleclick"].forEach(function(n,r){var a=lib.parseValue(e[n]);e[n]=a?new Function(r?"series,widget,config,interval":"widget,config",a):t}),e.headerStyle=h("",[r.headerstyle,n.headerstyle,e.headerstyle]),delete e.headerstyle;var u=["treemap","calendar","gauge"].indexOf(o)>=0,c=[];switch([e].concat(e.columns).forEach(function(t){t.series&&(t.series=t.series.map(function(t){return delete t.lastIsUnknown,t.value&&!t.entity&&(t.entity=se),t.metric||!t.table&&!t.attribute||(t.metric=se),null==t.colorrange&&null!=t.colors&&t.colors!=se&&(t.colorrange=se),p(e,t),te.forEach(function(n){if(n&&le.indexOf(n)<0&&!(null!=t[n]||null==e[n]||t.isOther&&"size"===n&&e.totalsize)){var r=e[n];ne.indexOf(n)<0&&Array.isArray(r)&&r.length&&(r=r[r.length-1]),t[n]=r}}),k(t),!t.metric&&t.table&&t.attribute&&(t.metric=t.table+","+t.attribute),w(t),_(t,u),j(t,o)}),c=c.concat(t.series))}),w(e),_(e,u),e.series=c,o){case"chart":e.periods=lib.getIntervalValue([].concat(e.periods).join(" "),null,!0),G(e);break;case"page":e.unscale=[].concat(e.unscale).some(identity)&&R("scale",e.unscale,"label");break;case"box":G(e);break;case"text":G(e);break;case"treemap":G(e),G(e,"formatsize");break;case"calendar":G(e);break;case"pie":G(e),G(e,"formatother");break;case"histogram":G(e);break;case"gauge":G(e),G(e,"formattip"),G(e,"formataxis"),G(e,"formatcounter");break;case"bar":I(e);break;case"graph":S(e);break;case"property":E(e);break;case"table":C(e),G(e);break;case"console":e.timespan||"message"===e.source||(e.timespan="all"),C(e)}return e}function m(e,t,n){var r={};for(var a in e){var i=!0,o=e[a];for(var l in t)if(t[l].indexOf(a)>-1){o=U(o,l.toLowerCase().replace(/^_/,"")),i=!1;break}!n&&i||(i||null!=o)&&(r[a]=o)}return r}function y(n,r,a,i){var o,l=toCapitalCase(n.type),s=e.portalConfig,u=e["default"+l+"Config"],d=r&&e["defaultDialog"+l],f=[].concat(u&&u.script||[]).concat(d&&d.script||[]).concat(n&&n.script||[]),p=[].concat(null==n.buttons?u&&u.buttons||[]:n.buttons).concat(d&&d.buttons||[]),h="Page"!==l||t;if(n instanceof c?(o=v(n),o=m(o,a,i)):o=n,o=extendObjects({series:[],isDialog:r,type:l,originalConfig:n},u,d,s&&h&&{url:s.url},o),o.script=f,o.buttons=p,o.series=[].concat(o.series),e.setCfgTimeSpan(o,"timespan"),e.setCfgTimeSpan(o,"updatetimespan"),e.setCfgTimeSpan(o,"expiretimespan"),e.setCfgTimeSpan(o,"updateinterval"),o.updateDelay=o.updateinterval>0?o.updateinterval:s&&s.updateinterval>0?s.updateinterval:d&&d.updateinterval>0?d.updateinterval:u&&u.updateinterval>0?u.updateinterval:15e3,o.isUTC=/^utc$/i.test(o.timezone),null==o.endTime){var g=o.endtime;if(Array.isArray(g)&&(g=g[g.length-1]),("number"==typeof g||"string"==typeof g)&&g<=0)throw Error("end-time should be positive");o.endTime=lib.getTime(g,o.isUTC)}if(null==o.startTime){var y=o.starttime;if(Array.isArray(y)&&(y=y[y.length-1]),("number"==typeof y||"string"==typeof y)&&y<=0)throw Error("start-time should be positive");o.startTime=lib.getTime(y,o.isUTC)}return o}function x(t,o){function l(e,t,n,r){if(e&&(e!=(y||F)||"series"!=t)){var a=e[t];e[t]=null==a?n||r?n:se:Array.isArray(a)?(a.push(n),a):a==se?n:[a,n]}}function h(){var e=A||F||S||x;return e.tags||(e.tags={}),e}function g(){if(C&&v)return null;var e=C||F||S||x;return e.keys||(e.keys={}),e.keys}t=i(n(t),o);var v,m=r.preprocessConfig(t.split(/\r\n|\r|\n/),lib.stringUtil),y=null,x=null,_=null,w=null,T=null,S=null,E=null,M=null,I=null,C=null,A=null,P=null,L=null,N=null,F=null,V=getEscapedRegExp("="),z=getEscapedRegExp(",");return e.widgetConfig=m.join("\n"),m.forEach(function(t,n){if(t=t.trim(),0==t.length)return void(N=null);if(0===t.indexOf("[configuration]"))T=w=C=I=y=P=E=M=N=L=A=_=S=F=null,x=new s;else if(0===t.indexOf("[group]"))T=w=C=I=y=P=E=M=N=L=A=_=F=null,S=new u,x||(x=new s),x.groups.push(S);else if(0===t.indexOf("[widget]"))T=w=C=I=y=P=E=M=N=L=A=_=null,F=new c,x||(x=new s),S||x.groups.push(S=new u),S.widgets.push(F);else if(0===t.indexOf("[dropdown]"))T=w=I=P=E=M=N=L=C=A=y=null,F&&(_=new a.DropdownConfig,F.dropdowns.push(_));else if(0===t.indexOf("[option]"))E=N=L=null,_&&(M={},_.options_.push(M));else if(0===t.indexOf("[property]"))T=w=I=P=E=M=N=L=A=_=y=null,F&&(n<m.length-1&&(v="{"===m[n+1].trim()[0]),v?(C=[],(F.jsonProperties||(F.jsonProperties=[])).push(C)):(C={},(F.properties||(F.properties=[])).push(C)));else if(0===t.indexOf("[placeholders]"))T=w=C=P=E=M=N=L=A=_=y=null,I=F&&!0;else if(0===t.indexOf("[column]"))T=w=C=P=E=M=N=L=A=_=I=null,y=new d,(F.columns||(F.columns=[])).push(y);else if(0===t.indexOf("[series]")||0==t.indexOf("[threshold]")||0==t.indexOf("[other]"))T=w=C=_=I=P=E=M=N=L=null,A=new f,0===t.indexOf("[threshold]")&&(A.isThreshold=!0),0===t.indexOf("[other]")&&(A.isOther=!0),(y||F).series.push(A);else if(0===t.indexOf("[link]"))y=A=_=T=C=I=P=E=M=N=L=null,w={series:[],properties:[]},F.links.push(w);else if(0===t.indexOf("[node]"))y=A=_=w=C=I=P=E=M=N=L=null,T={series:[],properties:[]},F.nodes.push(T);else if(0===t.indexOf("[tags]"))N=h()&&!0,L=_=P=null;else if(0===t.indexOf("[tag]"))L=h()&&!0,N=_=P=null;else if(0===t.indexOf("[properties]"))E=_=M=N=L=null,P=A&&!0,w?w.properties.push(P=[]):T?T.properties.push(P=[]):A&&A.properties.push(P=[]);else{if(0!==t.indexOf("[keys]")){if(C&&v)return void C.push(t);if(P){for(var r,p=[];r=V(t),p.push(D(r[0])[0]),r[1];);return void P.push(p)}if(N){var b=t.match(/^\s*([\w\s-]+)\s*=/);if(b){var k=O(b[1].replace(/[^\w]/g,""));k&&A&&ee.hasOwnProperty(k)&&(N=null)}if(N){var r=V(t);if(r[1]){for(var k=D(r[0])[0],R=D(t.substring(V.exp.lastIndex))[0],p=[];r=z(R),p.push(D(r[0])[0]),r[1];);V.exp.lastIndex=0;var W=h(),j=W.tags[k];W.tags[k]=instanceofArray(j)?j.concat(p):p.length>1?p:p[0]}else N=null;return}}var U=t.indexOf("=");if(U<=0)return;var k=t.substring(0,U).trim(),H=D(t.substring(U+1)),R=H[0],q=H[1];if(E)return void(E[k]=R);if(I)return void(F.placeholders[k.toLowerCase()]=R);if(k=k.replace(/[^\w\.]/g,""),!k)return;if(!S&&(U=k.indexOf("."))>=0){var G=e[k.substring(0,U)],K=k.substring(U+1).replace(/[^\w-]/g,"");if(K&&G&&G==o&&!o.hasOwnProperty(K=K.toLowerCase())){var B={};B[K]=R;for(var $=n;++$<m.length;)m[$]=i(m[$],B)}return void l(G,K,R,!0)}if("columnlabelformat"!==k&&F&&k.length>(k=k.replace(/^column/i,"")).length&&(k||(k="column",!1))){if(y=A=N=L=P=null,/^s$/i.test(k))return void(R&&F.columns.push({key:R,_update:"move",display:"true"}));q||"null"!=R||(R=null),F.columns.push({key:k,label:R,display:null==R?"false":"true",_update:"true"}),k="column"+k}if(k=O(k),L){if("name"==k){var j=h().tags;return instanceofArray(j[R])||(j[R]=[]),!instanceofArray(L)||null!=L._name&&L._name!=R||(j[R]=j[R].concat(L)),L=j[R],void(L._name=R)}if("value"==k)return void(instanceofArray(L)?L:L=[]).push(R);L=null}if(M)return void("value"===k?M.value=R:"text"===k&&(M.text=R));if(C&&!v)return void(C[k]=R);if(A)if(A.hasOwnProperty(k)){if(A.lastIsUnknown=!1,ne.indexOf(k)<0)return void(A[k]=R)}else A.lastIsUnknown?A=N=L=P=null:A.lastIsUnknown=!0;if(_)return void("options"===k&&_[k]?_[k]+="\n"+R:_[k]=R);var G=A&&!A.lastIsUnknown&&A||w||T||I||y||F||S||x;return void l(G,k,R,q)}_=null,E=g()}A&&(A.lastIsUnknown=!1)}),!!x&&(k(x),x.url=U(x.url,"string")||"",e.templates=d3.map(),x.groups.forEach(function(t){p(x,t),extendObject(t,x,function(e,n){return null==e||null!=t[n]||oe.configuration.indexOf(n)>=0||le.indexOf(n)>=0}),k(t),t.configuration_=x,t.widgets.forEach(function(e){e.group_=t}),t.widgets=t.widgets.filter(function(t){return!t.template||(e.templates.set(t.template,t),!1)})}),b(x,function(e){e.isThreshold&&(e.labelFormat="label")}),x)}function b(e,t){e.groups.forEach(function(e){e.widgets&&e.widgets.forEach(function(e){null!=e.series&&e.series.forEach(t),e.columns&&e.columns.forEach(function(e){e.series&&e.series.forEach(t)})})})}function _(e,t){var n=H(e.colors,"color");e.colors=t?null:n,e.paletteColors=t?n:null,e.palette=L(H(e.colorrange,"color"),H(e.gradientcount,"int"))||e.paletteColors}function w(e){var t=U(e.mode,"string");e.mode=t&&t.toLowerCase().replace(/[ -_]/,"")}function k(e){for(var t in e)e.hasOwnProperty(t)&&e[t]==se&&(e[t]=null)}function T(e,t,n,r){for(var a in t){var i=t[a];r(a,i)&&(null==n[a]?n[a]=i:instanceofArray(i)&&!i.length||(n[a]=(instanceofArray(n[a])?n[a]:[n[a]]).concat(i)),e&&delete t[a])}}function S(e){e.nodes=e.nodes.forEach(k).map(V),e.links=e.links.forEach(k).map(F),e.linkThresholds=lib.parseValue(e.linkthresholds,!0),e.nodeThresholds=lib.parseValue(e.nodethresholds,!0),e.linkColors=L(H(e.linkcolorrange,"color"),H(e.linkgradientcount,"int"))||H(e.linkcolors,"color"),e.nodeColors=L(H(e.nodecolorrange,"color"),H(e.nodegradientcount,"int"))||H(e.nodecolors,"color"),delete e.linkcolorrange,delete e.nodecolorrange,G(e)}function E(e){if(e.path=e.path||axibase.defaultPropertiesPath,e.properties||(e.properties=[]),e.properties=e.properties.map(function(t){var n={};return p(e,n),a.inheritedPropertiesSettings.forEach(function(r){!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&le.indexOf(r)<0&&(n[r]=e[r])}),extendObject(n,t),a.processPropertyConfig(n)}),e.jsonProperties){var t=U(e.jsonProperties,"arrayjson");t.forEach(function(t){var n={};a.inheritedPropertiesSettings.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n=a.processPropertyConfig(n),extendObject(n,t),e.properties.push(n)}),delete e.jsonProperties}var n=P(e.join,!0);n&&(e.join=1===n.length?"true"===n[0]||"false"!==n[0]&&n:n),C(e)}function M(e){var t=e.columns.map(function(e){return e.series}).reduce(function(e,t){return e.concat(t)},[]);return e.series.filter(function(e){return t.indexOf(e)===-1})}function I(e){M(e).forEach(function(t){var n=new d;n.dummy=!0,n.series.push(t),e.columns.push(n)}),e.barColumns=e.columns.reduce(function(t,n){if(k(n),!n.series)return t;var r=null==n.alertstyle?e.columnalertstyle:n.alertstyle,a=null==n.alertexpression?e.columnalertexpression:n.alertexpression;return n.alertStyle=R("alert",r,"styles"),n.alertExp=lib.parseValue(a),delete n.alertexpression,delete n.alertstyle,t.push(n),t},[]),A(e),delete e.columns,G(e)}function C(e){e.columns=e.columns.map(function(t){return ae.forEach(function(n){null==t[n]&&null!=e[n]&&(t[n]=e[n])}),k(t),z(t)}),e.defaultColumn={onClick:R(ce,e.onclick,null,!0),columnlabelformat:q(e.columnlabelformat,!0),hideColumn:R(ce,e.hidecolumn,null,!0)}}function A(e){e.columns.forEach(function(t){ie.forEach(function(n){null==t[n]&&null!=e[n]&&(t[n]=e[n])})})}function D(e){var t=e.match(/^(\s*\"(.*?)\"\s*|\s*(.*?)\s*)$/),n=!(!t||null==t[2]),r=n?t[2]:t?t[3]:e;return[r,n]}function O(e){return e.toLowerCase().replace(/(statistic|hidecolumn)s$/,"$1")}function P(e,t){return e=[].concat(e).join(" "),(t?e:e.replace(/[-]+/g,"").toLowerCase()).match(t?/[\w-]+/g:/\w+/g)}function L(e,t){if(!e)return null;if(e.length<2)return defaultPalette[e[0].toLowerCase()];for(var n=[],r=1;r<e.length;r++){1==r&&n.push(e[0]);var a=t&&Math.floor(t[Math.min(r,t.length)-1]),i=a>0?a:ue;if(--i>1)for(var o=1,l=d3.interpolateRgb(e[r-1],e[r]);o<i;o++)n.push(l(o/i));n.push(e[r])}return n}function N(e){var t="",n=e.context;return n&&(t+=n.join?n.join(""):n),e.properties.forEach(function(e){var n=0;e=e.filter(function(e){return e.some(function(e){return e})&&(n=Math.max(n,e.length),!0)}),n&&(e.forEach(function(e){for(var t=e.length;t<n;t++)e.push("")}),t+='<table class="axi-table axi-table-striped">'+e.map(function(e,t){return"<tr><td>"+e.join("</td><td>")+"</td></tr>"}).join("")+"</table>")}),t}function F(e){e.id=U(e.id,"string");var t=o(e.nodes);return e.nodes="object"==typeof t[0]?t[0]:"string"==typeof t[0]&&"string"==typeof t[1]?[t[0],t[1],0]:[],e.alertStyle=R("alert",e.alertstyle,"styles"),e.tooltipHtml=N(e),delete e.alertstyle,e}function V(e){return e.id=U(e.id,"string"),e.alertStyle=R("alert",e.alertstyle,"styles"),e.tooltipHtml=N(e),delete e.alertstyle,e}function z(e){if(e.Initialized||!e||"object"!=typeof e)return e;e._update=(U(e._update,"string")||"").toLowerCase(),e.hidden=!U(e.display,"boolean");var n=U(e.format,"boolean");return null!=n?e.format=n:G(e,null,!0),e.label=R(ce,e.label,"label"),e.title=R(ce,e.title,"label"),e.icon=R(ce,e.icon,"label"),e.columnlabelformat=R(ce,e.columnlabelformat),e.value=R(ce,e.value),e.style=R(ce,e.style,"styles"),e.rowStyle=R(ce,e.rowstyle,"styles"),e.alertExpression=R(ce,e.alertexpression),e.alertStyle=R(ce,e.alertstyle,"styles"),e.alertRowStyle=R(ce,e.alertrowstyle,"styles"),e.onClick=R(ce,e.onclick,null,!0),e.hideColumn=R(ce,e.hidecolumn,null,!0),e.script=R(ce,e.script,"script"),e.seriesvalue===t&&["entity","metric","time","value"].indexOf(e.key)===-1&&(e.seriesvalue=e.key+"()"),e.seriesValue=lib.parseValue(e.seriesvalue),delete e.hidecolumn,delete e.seriesvalue,delete e.onclick,delete e.alertexpression,delete e.alertstyle,delete e.rowstyle,delete e.alertrowstyle,e.Initialized=!0,e}function R(e,t,n,r){function a(){for(var e=0;e<d.length;e++)try{var n=d[e].apply(this,arguments),r=typeof n;if(!o)return n;if("undefined"===r)continue;if("function"===r)continue;if("object"===r&&n!=t&&null!=n)continue;return n}catch(e){}}if(!(t=[].concat(t).filter(function(e){return null!=e})).length)return null;var i="styles"==n,o="label"==n,l="script"==n,s=i&&t.join(";"),u=i&&/^(\s*\w+\s*:\s*[+.\w-]+\s*(;|$))+$/i.test(s),c=t.join("\n")||'""',d=[];if(!u){if(!l)try{d.push(Function(e,"return ("+c+");"))}catch(e){}try{d.push(Function(e,c))}catch(e){}}return i?d.push(d3.functor(s)):o&&d.push(d3.functor(t)),a.body=c,d.length?r?[a]:a:null}function W(e,t){if(t=t||"interpolate",e[t]&&("boolean"!==e[t]||e[t].toLowerCase)){var n=null;e[t]!==!1&&"false"!==e[t]&&"none"!==e[t].toLowerCase()||(n={type:"NONE"}),"true"!==e[t]&&1!=e[t]&&"linear"!==e[t].toLowerCase()||(n={type:"LINEAR"}),"step"!==e[t].toLowerCase()&&"previous"!==e[t].toLowerCase()||(n={type:"PREVIOUS"}),"next"===e[t].toLowerCase()&&(n={type:"NEXT"});var r;if((r=/^value\((-?\d+)\)$/i.exec(e[t]))&&(n={type:"VALUE",value:parseInt(r[1])}),n)return null!=e[t+"Extend"]&&(n.extend=e[t+"Extend"]),e[t]=n,delete e[t+"Extend"],!0}return delete e[t+"Extend"],delete e[t],!1}function j(e,t){if(e.Initialized)return e;e instanceof f||(e=extendObjects(new f,e)),G(e),e.value&&(delete e.statistic,delete e.period,delete e.interpolate),e.tooltipHtml=N(e),e.axisIndex="right"===e.axis?1:"left"===e.axis?0:null,e.filterRange=U(e.filterrange,"boolean")||!1,e.minRange=U(e.minrange,"float"),e.maxRange=U(e.maxrange,"float"),e.minimum=U(e.minimum,"float")||0,e.maximum=U(e.maximum,"float"),e.value=lib.parseValue(e.value),e.lastValue=U(e.value,"float"),e.threshold=U(e.threshold,"float"),e.hideIfEmpty=U(e.hideifempty,"boolean"),e.stepline=U(e.stepline,"boolean"),e.hidden=U(e.hidden,"boolean"),e.alertStyle=R("alert",e.alertstyle,"styles"),e.linkAlertStyle=R("alert",e.linkalertstyle,"styles"),e.nodeAlertStyle=R("alert",e.nodealertstyle,"styles"),e.iconAlertStyle=R("alert",e.iconalertstyle,"styles"),e.negativeStyle=R("",e.negativestyle,"styles"),e.forecastStyle=R("",e.forecaststyle,"styles"),e.currentPeriodStyle=R("",e.currentperiodstyle,"styles"),e.lastValueLabel=e.lastvaluelabel,e.minThreshold=U(e.minthreshold,"float")||0,e.maxThreshold=U(e.maxthreshold,"float"),e.startWorkingMinutes=Math.max(U(e.startworkingminutes,"int")||0,0),e.endWorkingMinutes=Math.max(U(e.endworkingminutes,"int")||1440,0),e.alertExp=lib.parseValue(lib.replaceTags(e.alertexpression,e.tags)),e.nodeAlertExp=lib.parseValue(lib.replaceTags(e.nodealertexpression,e.tags)),e.linkAlertExp=lib.parseValue(lib.replaceTags(e.linkalertexpression,e.tags)),e.lastMarker=U(e.lastmarker,"boolean"),e.markers=U(e.markers,"boolean"),e.links=o(e.links),e.nodes=l(e.nodes),e.disconnectCount=U(e.disconnectcount,"float"),e.disconnectInterval=lib.parseInterval(e.disconnectinterval),e.refreshInterval=lib.parseInterval(e.refreshinterval),e.emptyRefreshInterval=lib.parseInterval(e.emptyrefreshinterval),e.emptyThreshold=lib.parseInterval(e.emptythreshold),e.errorRefreshInterval=lib.parseInterval(e.errorrefreshinterval),e.movingAverage=U(e.movingaverage,"boolean"),e.entityLabel=e.entitylabel,e.metricLabel=e.metriclabel,e.groupLabel=e.grouplabel,e.multipleSeries=U(e.multipleseries,"boolean"),e.displayInLegend=U(e.displayinlegend,"boolean"),e.nodeValue=lib.parseValue(e.nodevalue),e.linkValue=lib.parseValue(e.linkvalue),e.disconnectValue=lib.parseValue(e.disconnectvalue),e.serverAggregate=U(e.serveraggregate,"boolean"),e.last=U(e.last,"boolean"),e.thresholdValues=lib.parseValue(e.thresholds,!0),e.rateCounter=U(e.ratecounter,"boolean"),e.counter=U(e.counter,"boolean"),e.expand=U(e.expand,"boolean"),e.percentiles=U(e.percentiles,"percentiles"),e.summarizeType=e.summarizestatistic,e.axisLabel=e.axislabel,e.icon=e.icon&&R("value",e.icon,"label"),e.audioAlert=e.audioalert&&R("alert",e.audioalert,"label"),e.audioOnLoad=e.audioonload,e.iconPosition=U(e.iconposition,"string")||"top",e.iconColor=U(e.iconcolor,"string"),e.loadFutureData=U(e.loadfuturedata,"boolean"),e.minFontSize=U(e.minfontsize,"int"),e.maxFontSize=U(e.maxfontsize,"int"),e.forecastName=e.forecastname,e.size=lib.parseValue(e.size),e.rangeMerge=U(e.rangemerge,"boolean"),e.frequency=lib.getIntervalValue(e.frequency,!0)||null,e.replaceValue=lib.parseValue(e.replacevalue),e.cache=U(e.cache,"boolean"),e.seriesClass=lib.series.getTypeValue(e.seriestype)[0],e.labelFormat=U(e.labelformat,"escaped"),e.dataType=e.datatype,e.markerFormat=U(e.markerformat,"escaped"),e.entityGroup=e.entitygroup,e.entities=U(e.entities,"list"),e.entityExpression=e.entityexpression,e.exactMatch=U(e.exactmatch,"boolean"),e.limit=U(e.limit,"int"),e.seriesLimit=U(e.serieslimit,"int"),e.addMeta=U(e.addmeta,"boolean"),e.groupFirst=null!=e.groupfirst&&U(e.groupfirst,"boolean"),e.groupPeriod=e.groupperiod,B(e),e.align&&(e.serverAggregate=!0),e.interpolateMode=U(e.fillvalue,"boolean"),e.interpolateExtend=U(e.interpolateextend,"boolean"),W(e)&&(e.serverAggregate=!0),e.groupInterpolate=e.groupinterpolate,e.groupInterpolateExtend=e.groupinterpolateextend,W(e,"groupInterpolate"),e.groupStatistic=lib.series.getTypeValue(e.groupstatistic),e.groupStatistic[1]>-1?(e.serverAggregate=!0,e.groupRequest=!0):e.groupRequest=!1,"message-stat"===e.source&&(e.serverAggregate=!0);var n=U(e.path,"string");e.path=n?n:"message-stat"===e.source?axibase.DEFAULT_MESSAGE_STAT_PATH:axibase.defaultSeriesPath;var r=U(e.contextpath,"string");e.contextpath=null==r?axibase.defaultContextPath:r,e.url=U(e.url,"string"),e.urlparameters=U(e.urlparameters,"string")||"";var a=[].concat(e.serieslabels);if(a.every(function(e){return null!=e&&/^[a-z]+$/i.test(e)})&&(a='"'+a[a.length-1]+'"'),e.ticks=lib.parseValue(a),e.palette&&e.palette!=e.paletteColors||(e.gradientIntensity=U(e.gradientintensity,"quantiles"),e.gradientCount=H(e.gradientcount,"int"),e.gradientCount||null==e.gradientIntensity||(e.gradientCount=[ue])),e.display=Array.isArray(e.display)?e.display[0]:e.display,"string"==typeof e.display?e.displayExp=lib.parseValue(lib.replaceTags(e.display,e.tags)):null===e.display&&(e.display=!0),"table"!==t){var i=null==e.enabled||U(e.enabled,"boolean");e.enabledExp=lib.parseValue(lib.replaceTags(e.enabled,e.tags)),e.enabled=i,"chart"!==t&&(e.hidden=null!=e.enabled?!e.enabled:e.hidden)}var s=e.color;return null==(e.color=U(s,"color"))&&(e.colorValue=lib.parseValue(s)),e.groupkeys&&(e.groupKeys=e.groupkeys.split(/\s*,\s*/)),e.mergeFields=e.mergefields&&"all"!==e.mergefields?e.mergefields.split(/\s*,\s*/).map(function(e){return e.toLowerCase()}):"all",delete e.markerformat,delete e.negativestyle,delete e.forecaststyle,delete e.currentperiodstyle,delete e.datatype,delete e.lastmarker,delete e.labelformat,delete e.replacevalue,delete e.audioalert,delete e.audioonload,delete e.serieslabels,delete e.rangemerge,delete e.chartmode,delete e.forecastname,delete e.loadfuturedata,delete e.axislabel,delete e.summarizestatistic,delete e.ratecounter,delete e.serveraggregate,delete e.nodevalue,delete e.linkvalue,delete e.displayinlegend,delete e.multipleseries,delete e.entitylabel,delete e.metriclabel,delete e.grouplabel,delete e.movingaverage,delete e.thresholds,delete e.gradientintensity,delete e.gradientcount,delete e.errorrefreshinterval,delete e.emptythreshold,delete e.emptyrefreshinterval,delete e.refreshinterval,delete e.disconnectcount,delete e.disconnectinterval,delete e.seriestype,delete e.filterrange,delete e.endworkingminutes,delete e.startworkingminutes,delete e.maxthreshold,delete e.minthreshold,delete e.properties,delete e.context,delete e.hideifempty,delete e.alertexpression,delete e.nodealertexpression,delete e.linkalertexpression,delete e.alertstyle,delete e.nodealertstyle,delete e.linkalertstyle,delete e.iconalertstyle,delete e.iconcolor,delete e.iconposition,delete e.minrange,delete e.maxrange,delete e.lastvaluelabel,delete e.disconnectvalue,delete e.minfontsize,delete e.maxfontsize,delete e.groupkeys,delete e.groupperiod,delete e.groupstatistic,delete e.groupfirst,delete e.mergefields,delete e.entitygroup,delete e.entityexpression,delete e.exactmatch,delete e.fillvalue,delete e.interpolateextend,delete e.groupinterpolate,delete e.groupinterpolateextend,delete e.serieslimit,delete e.addmeta,e.Initialized=!0,e}function U(e,t){function n(e){var t;try{t=JSON.parse(e)}catch(n){try{t=Function("return ("+e+");")()}catch(e){t=null}}return t}function r(e,t){switch(a=!1,t){case"escaped":e="string"==typeof e?e.replace(/(\\+)(n)/g,function(e,t,n){return t.slice(0,t.length/2).concat(t.length%2?"\n":n)}):null;break;case"boolean":e="true"===e||e===!0||"false"!==e&&e!==!1&&null;break;case"int":if(null==e)return e;e=Math.floor(e),isFinite(e)||(e=null);break;case"float":if(null==e)return e;e="string"==typeof e&&"%"==e[e.length-1]?.01*parseFloat(e):+e,isFinite(e)||(e=null);break;case"quantiles":e="string"==typeof e?e.split("/").reduce(function(e,t){e.push(r(t.trim(),"float"))},[]):null;break;case"percentiles":e="string"==typeof e?e.split("/").reduce(function(e,t){e.push(isFinite(t=parseFloat(t.trim()))?t/100:null)},[]):null;break;case"json":("object"!=typeof e||e.join&&(e=e.join(""),!0))&&(e=n(e));break;case"string":"string"!=typeof e&&(e=null);break;case"merge":e=/^(\s*(entity|tags|metric)\s*(\s|,|$)){1,2}$/i.test(e)?(e=e.match(/\w+/g))&&Function("a,b","return ("+e.map(function(e){return'a["'+e+'"] == b["'+e+'"]'}).concat('"'+(e.indexOf("metric")<0?"metric":e.indexOf("entity")<0?"entity":"type")+'")').join(" && ")):(e=lib.parseValue(e))&&Function("a,b","try{"+e+"}catch(e) {}");break;case"sort":var i=e.match(/[-\w\.]+/g);i?(e=[],i.forEach(function(t){var n=t.match(/^(asc|(desc))(ending)?$/i);if(n){var r=n[2]?-1:1;e.length?e[e.length-1].sign=r:1==i.length&&e.push({key:"value",sign:r})}else e.push({key:t,sign:1})})):e=null;break;case"color":var o="string"==typeof e&&d3.rgb(e);o&&(o.r||o.g||o.b||/^(black|#000)$/i.test(e))||(e=null);break;case"display":var i=/^((true)|(hover)|false)$/i.exec(e);e=i?!!i[2]||!!i[3]&&"hover":null;break;case"expand":var i=/^((all|true)|(compact|auto|default)|none|false)$/i.exec(e);e=i?!!i[2]||!!i[3]&&"default":null;break;case"alertstyle":e=R("alert",e,"styles");break;case"rotate":var l=U(e,"boolean");l=null==l?U(e,"int"):l?90:0,e=l;break;case"list":e=null==e?null:e.split(/\s*,\s*/);break;default:a=!0}return e}var a=!1,i=instanceofArray(e);if(t.indexOf("array")>-1){t=t.replace("array",""),i||(e=[e]);for(var o=[],l=0;l<e.length;l++){var s=r(e[l],t);(a||null!=s)&&o.push(s)}return o}return r(i?e[e.length-1]:e,t)}function H(e,t,n){null==n&&(n="color"==t?/((rgb|hsl)\(.*?\)|#?\w+)/gi:"float"==t||"int"==t?/[0-9.e%-]+/gi:/\w+/g);var r=[].concat(e).join("\n").match(n);if(r)return r=r.reduce(function(e,n){null!=t&&null==(n=U(n,t||"float"))||e.push(n)},[]),r.length?(r.parsedArray=!0,r):null}function q(e,t){if(instanceofArray(e)&&(e=e.join("\n")),"string"!=typeof e||!e.length)return d3.functor(e);if("string"==typeof e&&/^\s*javascript\s*:.*$/i.test(e))return e=e.substr(e.indexOf(":")+1).trim(),parseFormatString(e,t);var n=/^numeric$/i.test(e)?["","",""]:e.replace(/\s|-/g,"").match(ge);if(n){n[0]&&(n=n.map(function(e){return e&&e.replace(/[^\w]/g,"").toLowerCase()}));var r,a=n[2],i="byte"===a?2:10;de.some(function(e,t){return e.indexOf(n[1])>=0&&(r=t,!0)});var o=NumberFormat(2==i?1024:1e3,pe[a],r);return o.radix=i,o}return parseFormatString(e,t)||d3Format(U(e,"escaped"))}function G(e,t,n){var r=e[t=t||"format"];"function"!=typeof r&&null!=r&&(r=q(r,n)),null==r?delete e[t]:e[t]=r}function K(e,t){var n;if("timespan"!==t)n=lib.parseInterval(e[t]);else{if(n=lib.parseTimespan(e),"number"==typeof n&&n<=0)throw Error("invalid timespan");"all"===n&&(n=0)}return null==n?delete e[t]:e[t]=n,n}function B(e){if(e.align&&e.align.toLowerCase){var t=e.align.toLowerCase();switch(t){case"start_time":return void(e.align="START_TIME");case"end_time":return void(e.align="END_TIME");case"calendar":return void(e.align="CALENDAR");case"first_value_time":return void(e.align="FIRST_VALUE_TIME")}}delete e.align}var $=getEscapedRegExp("(\\/\\*)|\\*\\/"),Y=/^[\t ]*(\\*)(#|\/\/).*?$/gm,Z=getEscapedRegExp("\\{([\\w-]+)\\}"),X="(<-|->|-|,|\\s)",J=getEscapedRegExp("\\s*"+X+"\\s*"),Q=new RegExp("^"+X+"$"),ee={audioalert:null,audioonload:null,alias:null,align:null,alertstyle:null,alertexpression:null,attribute:null,axis:null,axislabel:null,color:null,context:null,colors:null,colorrange:null,counter:null,caption:null,captionstyle:null,cache:null,currentperiodstyle:null,disconnectinterval:null,disconnectcount:null,display:null,displayinlegend:null,disconnectvalue:null,datatype:null,entities:null,entity:null,entitygroup:null,entitylabel:null,entityexpression:null,endworkingminutes:null,emptyrefreshinterval:null,emptythreshold:null,errorrefreshinterval:null,exactmatch:null,expand:null,enabled:null,fillvalue:null,filterrange:null,forecastname:null,frequency:null,forecaststyle:null,format:null,grouplabel:null,gradientintensity:null,gradientcount:null,groupkeys:null,groupperiod:null,groupstatistic:null,groupfirst:null,hideifempty:null,hidden:null,icon:null,iconposition:null,iconalertstyle:null,iconcolor:null,interpolate:null,interpolateextend:null,label:null,lastvaluelabel:null,lastmarker:null,links:"",linkalertexpression:null,linkalertstyle:null,linkvalue:null,last:null,loadfuturedata:null,labelformat:null,markerformat:null,metric:null,minimum:null,maximum:null,minthreshold:null,maxthreshold:null,multipleseries:null,metriclabel:null,minrange:NaN,maxrange:NaN,markers:null,movingaverage:null,mode:null,minfontsize:null,maxfontsize:null,mergefields:null,nodes:"",nodealertexpression:null,nodealertstyle:null,nodevalue:null,negativestyle:null,period:null,contextpath:null,path:null,percentiles:null,percentilemarkers:null,rate:null,refreshinterval:null,ratecounter:null,rangemerge:null,replacevalue:null,statistic:null,style:null,stepline:null,size:null,startworkingminutes:null,seriestype:null,serveraggregate:null,summarizestatistic:null,serieslabels:null,table:null,threshold:null,tooltip:null,thresholds:null,timeoffset:null,url:null,urlparameters:null,value:null},te=["alertexpression","alertstyle","align","attribute","addmeta","audioalert","audioonload","axis","cache","color","colorrange","colors","contextpath","counter","currentperiodstyle","datatype","disconnectcount","disconnectinterval","disconnectvalue","display","displayinlegend","emptyrefreshinterval","emptythreshold","enabled","endworkingminutes","entities","entity","entityexpression","entitygroup","errorrefreshinterval","exactmatch","expand","fillvalue","filterrange","forecastname","forecaststyle","format","frequency","gradientcount","gradientintensity","groupfirst","groupinterpolate","groupinterpolateextend","groupkeys","groupperiod","groupstatistic","hidden","iconalertstyle","iconcolor","iconposition","interpolate","interpolateextend","label","labelformat","last","lastmarker","lastvaluelabel","limit","linkalertexpression","linkvalue","loadfuturedata","markerformat","markers","maxfontsize","maxrange","maxrangeright","maxthreshold","mergefields","metric","minfontsize","minrange","minrangeright","minthreshold","mode","movingaverage","multipleseries","negativestyle","nodealertexpression","nodevalue","palette","path","percentilemarkers","percentiles","period","rangemerge","rate","ratecounter","refreshinterval","replacevalue","serieslabels","serieslimit","seriestype","serveraggregate","size","startworkingminutes","statistic","stepline","source","summarizestatistic","table","tags","threshold","thresholds","timeoffset","url","urlparameters"],ne=["alertexpression","alertstyle","audioalert","axislabel","caption","color","colorrange","colors","context","disconnectvalue","display","enabled","entities","entitylabel","format","gradientcount","grouplabel","iconalertstyle","label","linkalertexpression","linkalertstyle","linkvalue","metriclabel","nodealertexpression","nodealertstyle","nodevalue","replacevalue","serieslabels","size","thresholds","value"],re={bar:["alertexpression","alertstyle","columnlabelformat","dummy","label","series"],table:["seriesvalue","title","tag","icon","script","onclick","key","value","label","display","_update","tooltip","format","style","alertstyle","alertrowstyle","rowstyle","alertexpression","hidecolumn","columnlabelformat"]},ae=["onclick","hidecolumn","alertstyle","alertexpression","columnlabelformat"],ie=["columnlabelformat"],oe={configuration:["groups","title","script","widthunits","heightunits"],groups:["widgets"]};re.property=re.console=re.table.slice(1);var le=["entity","entities","entitygroup"],se={},ue=5,ce=["value","alert","row","column","widget","el","rowEl","td","filter","dialog","series"].join(","),de=[[""],["kilo","thousand"],["mega","million"],["giga","billion"],["tera","trillion"],["peta","quadrillion"]],fe=de.map(function(e,t){return(e=e[0])&&(e=e[0]),t>1?e.toUpperCase():e}),pe={byte:fe.map(function(e){return e+"B"}),hertz:fe.map(function(e){return e+"Hz"}),joule:fe.map(function(e){return e+"J"}),watt:fe.map(function(e){return e+"W"}),watthour:fe.map(function(e){return e+"Wh"}),"":fe},he=function(e){for(var t in pe)e.push(t);return e}([]),ge=new RegExp("^("+de.join(",").replace(/,/g,"|")+")("+he.join("|")+")s?$","i");e.defaultWidgetType="Chart",e.getCfgFunction=R,e.getCfgFormat=q,e.setCfgFormat=G,e.setCfgTimeSpan=K,e.getSeriesConfig=j,e.getWidgetConfig=y,e.parseConfiguration=x,e.CfgWidget=c,e.CfgWidgetConfiguration=s,e.parseCfgValue=U,e.defaultSeriesConfig=ee,e.inheritSeriesSettings=te}},{"./configs":1,"./preprocessor":4}],3:[function(e,t,n){function r(e,t,n,r,i,o){var l=a(e,n,r,i,o),s=l.map(function(e){return e.tags[t]}).filter(function(e){return null!=e});return s}function a(e,t,n,r,a){if(e){e=encodeURIComponent(e),a=a||"",a+=l+"/metrics/"+e+"/series";var s={entity:t,minInsertDate:n,maxInsertDate:r};a+=o(s);var u=i(a);return u}}function i(e){var t,n=new XMLHttpRequest;n.open("GET",e,!1),n.send();var t;if(200!==n.status)throw Error("metadata loading failed");if(!n.responseText)throw Error("malformed response");return t=JSON.parse(n.responseText)}function o(e){if("string"!=typeof e&&"object"!=typeof e&&(e=""),"object"==typeof e){var t="";Object.keys(e).forEach(function(n){"tags"===n?Object.keys(e.tags).forEach(function(n){e.tags[n]&&(t+="tags."+n+"="+encodeURIComponent(e.tags[n])+"&")}):e[n]&&(t+=n+"="+encodeURIComponent(e[n])+"&")}),e=t.slice(0,-1)}return"?"!==e[0]&&(e="?"+e),e}var l="/api/v1";n.getTags=r,n.getSeries=a},{}],4:[function(e,t,n){function r(e,t){function n(e,t){var n=Object.keys(t),r=n.map(function(e){return t[e]});n.push("return ("+e+");");var a=Function.apply(null,n);return a.apply(null,r)}var i=a;"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]});for(var o,l,s,u,c,d,f,p=[],h=0;h<e.length;h++){var g=e[h];if(/^\s*script\s*$/i.test(g)){f=!1,h++;for(var v=[];h<e.length&&!/^\s*script.*$/i.test(e[h]);){if(/^\s*endscript\s*$/i.test(e[h])){f=!0;break}v.push("script = "+e[h]),h++}f&&(p=p.concat(r(v,i)))}else if(/^\s*var .*$/i.test(g)){if(g=g.substr(g.toLowerCase().indexOf("var")+4),s=g.indexOf("="),s!==-1){for(o=g.substr(0,s).trim(),l=g.substr(s+1).trim(),c=h,f=!1,h++;h<e.length&&!/^\s*var .*$/i.test(e[h]);){if(/^\s*endvar\s*$/i.test(e[h])){f=!0;break}h++}if(f)for(d=c+1;d<h;d++)l+="\n"+e[d];else h=c;if(void 0===i[o])try{i[o]=n(l,i)}catch(e){}}}else if(/^\s*list .*$/i.test(g)){if(g=g.substr(g.toLowerCase().indexOf("list")+5),s=g.indexOf("="),s!==-1){for(o=g.substr(0,s).trim(),l=g.substr(s+1).trim(),c=h,f=!1,h++;h<e.length&&!/^\s*list .*$/i.test(e[h]);){if(/^\s*endlist\s*$/i.test(e[h])){f=!0;break}h++}if(f)for(d=c+1;d<h;d++)l+=e[d];else h=c;i[o]=l.trim().split(/\s*,\s*/)}}else if(/^\s*for .*$/i.test(g)){g=g.substr(g.toLowerCase().indexOf("for")+4);var m=g.indexOf(" in ");if(m!==-1){o=g.substr(0,m).trim();var y=g.substr(m+4);try{y=n(y,i),Array.isArray(y)||(y=[])}catch(e){y=[]}u=0,h++;for(var x=[];h<e.length;){if(/^\s*for .*$/i.test(e[h]))u++;else if(/^\s*endfor\s*$/i.test(e[h])){if(!(u>0))break;u--}x.push(e[h]),h++}y.forEach(function(e,t){i[o]=e,i[o+"_index"]=t,p=p.concat(r(x,i))}),delete i[o],delete i[o+"_index"]}}else if(/^\s*if .*$/i.test(g)){var b=g.substr(g.toLowerCase().indexOf("if")+3);try{b=n(b,i)}catch(e){b=!1}var _,w=[{condition:b,lines:[]}];for(u=0,h++;h<e.length;){if(/^\s*if .*$/i.test(e[h]))u++,_=!0;else if(/^\s*endif\s*$/i.test(e[h])){if(!(u>0))break;u--,_=!0}else if(/^\s*else ?if .*$/i.test(e[h]))if(u>0)_=!0;else{b=e[h].substr(e[h].toLowerCase().indexOf("else")+7);try{b=n(b,i)}catch(e){b=!1}w.push({condition:b,lines:[]}),_=!1}else/^\s*else\s*$/i.test(e[h])?u>0?_=!0:(w.push({condition:!0,lines:[]}),_=!1):_=!0;_&&w[w.length-1].lines.push(e[h]),h++}w.some(function(e){if(e.condition)return p=p.concat(r(e.lines,i)),!0})}else{for(var k,T=/@\{/g,S=[],E=g;k=T.exec(g);)S.push(k.index);S.forEach(function(e,t){var r=t!==S.length-1?S[t+1]:g.length;if(r=e+g.substr(e,r-e).lastIndexOf("}")+1,0!==r){var a=g.substr(e,r-e);try{l=n(a.substr(2,a.length-3),i),E=E.replace(a,l)}catch(e){}}}),g=E;var M=g.match(/@[^\{][^@]*/g);M=null==M?[]:M,M.forEach(function(e){l=e.substr(1),Object.keys(i).some(function(t){if(0===l.indexOf(t))return g=g.replace(e,i[t]+l.substr(t.length)),!0})}),p.push(g)}}return p}var a=e("./load_functions");n.preprocessConfig=r},{"./load_functions":3}],5:[function(e,t,n){e("./shared")(window),window.lib=e("./lib"),e("./config_parser")(window),e("./widget_init")(window),e("./prototype_portal")(window.jQuery),e("./widgets/bar")(window),e("./widgets/box")(window),e("./widgets/calendar")(window),e("./widgets/console")(window),e("./widgets/gauge")(window),e("./widgets/graph_widget")(window),e("./widgets/histogram")(window),e("./widgets/page_widget")(window),e("./widgets/pie")(window),e("./widgets/property_table")(window),e("./widgets/t4")(window),e("./widgets/table_widget")(window),e("./widgets/text_widget")(window),e("./widgets/treemap")(window)},{"./config_parser":2,"./lib":10,"./prototype_portal":19,"./shared":35,"./widget_init":52,"./widgets/bar":53,"./widgets/box":54,"./widgets/calendar":55,"./widgets/console":56,"./widgets/gauge":57,"./widgets/graph_widget":62,"./widgets/histogram":63,"./widgets/page_widget":64,"./widgets/pie":65,"./widgets/property_table":66,"./widgets/t4":67,"./widgets/table_widget":73,"./widgets/text_widget":74,"./widgets/treemap":75}],6:[function(e,t,n){function r(){function e(e,n,r){if(w=b&&!g){g=!0;var a=!m.domain,i=!m.caller,o=null!=r;a&&(m.domain=[e,e+1]),i&&(m.caller=this),o&&(m.updateMode=r);var l=t(e,n);return a&&(m.domain=null),i&&(m.caller=null),o&&(m.updateMode=null),g=!1,l}}function t(e,t){if(arguments.length&&(y.t=e,y.mode=t),k.length>3)if(1===b.length)k=[k[3]];else if(b.length>0)for(var n=0;n<3;n++)k[n]&&"function"==typeof k[n]&&(k[n]=k[n]());var r=b.apply(m.caller,k);return w=_(o.isEvalMethod(r)?r=r():r),r}function n(e,n){function a(){return x=null,t.apply(this,arguments),null!=x}r.apply(this,arguments);var o;if(p)o=[n,n+1];else if(v){var l=i.roundTime(e[0],v,!1,h);for(o=[l];l<l+1?(l=i.roundTime(l+1,v,!0,h))<e[1]:l<(l=e[1]);)o.push(l)}else{var s=e[0],u=e[e.length-1];o=(a(s,-2)||a(s,-1))&&(s=x,s<u&&(a(--u,2)||a(u,1)))&&(u==x?u++:u=x,s<u)&&[s,u],y.mode=0}return o}function r(){g=!!arguments.length,d=g?null:c;for(var e=0;e<l.length;e++)m[l[e]]=e<arguments.length?arguments[e]:null}function s(t,n){function r(e){return"string"==typeof e&&e}var a,i=r(t);if(!i){if(!r(t&&t.varName))return;return"function"!=typeof t.varValue?t:(a=o.getEvalMethod(function(){return t.varValue.call(this,arguments,e)}),{varName:t.varName,varValue:a})}return a=o.getEvalMethod(function(){var e=f(arguments,y,m);if(null!=e){var t=y.mode,n=t?e:e[0];return!t&&null==n||null!=x&&!(t==-2||1==t?x<n:x>n)||(x=n),t||void 0===e[1]?d:e[1]}return d}),a.varName=i,a.varIndex=n,a}var u,c=NaN,d=c,f=d3.functor(null),p=!1,h=!1,g=!1,v=null,m=e.meta={},y=e.point={t:0,mode:0},x=0,b=!1,_=lib.isFiniteNumber,w=!1,k=[];e.isConstant=function(){return p},e.constantValue=function(){return u},e.isProcessing=function(){return g},e.valueIsProper=function(){return w},e.getData=function(e,a,i,o){if(g)return null;if(!b)return null;if(m.domain=n.apply(this,arguments),!m.domain)return r(),null;var l,s,u,c={t:[],v:[],get len(){return this.t.length},set len(e){}},d=m.domain;if(p){if(u=t(a,0),w)for(l=0;l<e.length;l++)c.t.push(e[l]),c.v.push(u)}else if(v){for(l=0;l<d.length;l++)u=t(s=d[l],0),w&&(c.t.push(s),c.v.push(u));1===d.length&&d.push(d[0]+1)}else{x=d[0];var f=!0;for(l=1;x<d[l]&&f||++l<d.length;)s=y.t=x,x=d[l],u=t(),f=s<x,w&&(c.t.push(y.t),c.v.push(u))}return o&&c.len&&null!=m.period&&(i.period=m.period,i.setTransformInterval()),r(),c};var T="";return e.vars=function(t,n){return arguments.length?(k=t.map(s).filter(identity),T=null==n?k.map(function(e){return e.varName}).join(","):n,k=k.map(function(e){return e.varValue||e}),e):k},e.value=function(t,n){if(!arguments.length)return b;var r="function"==typeof t;if(b=r?t:a(T,t),u=void 0,null==n&&!v)try{var i=(r?t:new Function(t))();(n=_(i))&&(u=i)}catch(e){}return p=!!n,e},e.frequency=function(t){return arguments.length?(v=t,e):v},e.valueFilter=function(t){return arguments.length?(_=t,e):_},e.getPointValue=function(t){return arguments.length?(f=t,e):f},e.isUTC=function(t){return arguments.length?(h=t,e):h},e}function a(e,t){return new Function(e,"try{"+t+"}catch(e) {if(doLog())log(e.stack)}")}var i=e("./time"),o=e("./utils"),l=["domain","updateTime","caller","isMainValue","updateMode","period","transformMethod"];n.Calculator=r,n.getCalcValue=a},{"./time":15,"./utils":17}],7:[function(e,t,n){function r(){function e(n,r,a){function i(){var t=[T.apply(p,o),N.apply(p,o)];t.every(function(e){return e!==!1})&&s.sent.push(e.loadData.apply(p,t.concat(o)))}var o=Array.prototype.slice.call(arguments,0);null==n&&(n=o[0]=y.UPDATE_MODE),null==r&&(r=o[1]=Date.now()),d=r,null==a&&(a=e.getInterval.apply(this,o));var l,s={sent:[],intv:a},u=A.apply(this,o),c=o[2]=t(u,a,r);if(c&&(s.series=u,u&&!u.length||!e.processURLs(u)?c=null:(l=c[1]<r?c[1]-1:r,o=[u,_].concat(o),o.splice(5,0,l),c=o[4]=I.apply(this,o))),!c)return s;var p=this;if(u){null==S&&(S=r);var h=u.reduce(function(e,t){var a,i=t.data;if(i&&!i.calculator&&null!=(a=t.url||_).href&&(n!=y.UPDATE_MODE||!i.updating&&(null==i.refreshTime||null==i.refreshInterval||!(i.refreshTime+i.refreshInterval>r)))&&!e.some(function(e){return e.some(function(e){return e.data==i})})){var o=b&&!!i.hasError,l=!o&&e.some(function(e){return!e.single&&e.url.href==a.href});l||(l=[],l.single=o,l.url=a,e.push(l)),l.push(t)}},[]);h.forEach(function(e){function n(e){return e.data.intervals.standby}function a(e){return e.data.maxReloadInterval}function l(e,t){return(e.keys.key.entity==t.keys.key.entity)*(1+(e.keys.key.metric==t.keys.key.metric))}function s(){return b&&x}o[1]=e.url,f(e,n,a,e.length<200&&l,s()).forEach(function(e){(o[4]=t(e.ss,e.intv,r))&&((o[0]=e.ss).initialSeries=u,i())})})}else i();return s.sent=s.sent.filter(identity),s}function t(e,t,n){return t&&(e||(t[0]=Math.max(t[0],P(n,t[0])),t[1]=Math.min(t[1],O(n,t[1]))),t[0]=Math.floor(t[0]),t[1]=Math.ceil(t[1]),t[0]<t[1]||(t=null)),t}function n(e,t){var n=h(e),r=k?(n?n.data.last.t:Math.min(t[3],t[4][1]))-k:null;e.forEach(function(e){e.data.last&&(e.data.last.expired=null!=r&&e.data.intervals.ready&&e.data.last.t<r)})}function r(e,t,n){var r=n[0],a=n[1],i=e.keys.key.timeOffset;return i&&(r<r+1&&(r=g.shiftDate(new Date(r),i,-1,E).getTime()),a<a+1&&(a=g.shiftDate(new Date(a),i,-1,E).getTime())),r=Math.max(r,P(t,r)),a=Math.min(a,O(t,a)),r<a&&[r,a]}function i(e,t,n){"string"==typeof e&&(e=t?u(e):function(){try{return JSON.parse(e)}catch(e){}return null}()),e&&e.series&&(e=e.series);var r=o(e,!t);return r?[null,r]:(t&&(e=s(e,t,n,n.full==_.full,E),e.forEach(function(e){var t=e.series;t&&l(e.meta,t)})),[e,!1])}function o(e,t){var n=instanceofArray(e),r=n&&!e.length,a=!r&&(n?e[0]:e),i=!!a&&a.hasOwnProperty("error"),o=i?a.error:!n,l=[!t&&r&&"No data received",o,i];return!!l.some(identity)&&l}function l(e,t){if(e&&t.data&&t.keys&&!t.keys.meta){t.keys.meta=e,t.fire("metaset",t),t.rel.forEach(function(t){l(e,t)});var n=t.getAggregatingSeries();n.forEach(function(t){l(e,t)})}}function c(e,t,n,r,a,i){var o=t.data,l=t.params,s=null,u=o.hasError,c=o.hasError=r[2],d=c&&(1===i.length||!b),f=p(a);if(f&&(o.refreshTime=r&&!c?null:e.requestTime),d)s=l.errorRefreshInterval;else{if(r)return void(c&&f&&(o.refreshInterval=null));if(f){var h=o.last;n&&n.len&&(!h||h.t<Math.floor(n.t[n.len-1]))?o.lastUpdateTime=e.requestTime:null!=l.emptyThreshold&&e.requestTime-(h?o.lastUpdateTime:S)>l.emptyThreshold&&(s=l.emptyRefreshInterval)}else if(!u)return}o.refreshInterval=null==s?l.refreshInterval:s}var d,x=8,b=!1,_=!1,w=null,k=0,T=null,S=null,E=!1,M=!0,I=null,C=null,A=d3.functor(null),D=0,O=function(){return 0xe677d21fdbff},P=function(){return 1},L=e.phMap=GetPlaceholders(),N=null,F=d3.functor(null),V=e.sentRequests=Group().methods(["abort"]),z=null,R=g.getIntervalValue("1 hour")[1],W=R,j=!1,U=!0,H=g.getIntervalValue("15 minute")[1],q=H;return e.getInterval=function(e,t,n){var r;if(e==y.RELOAD_MODE)r=F.apply(this,arguments);else{var a=g.evalTime(z),i=g.evalTime(w),o=e==y.UPDATE_MODE,l=null==a||null==i||(!(a<i)||j&&null!=W)&&(a=null,!0),s=l?M&&o&&null==a?q||W:null==W?R:W:null,u=null==i?s?null==a?t:a+s:1/0:i,c=null==a?s?u-s:-(1/0):a;D&&0!=n&&s&&!o&&null==a&&null==i&&(u+=D*s),r=[c,u],r.tspan=s,r.t0=a,r.t1=i,r.fixed=0!=s&&(null!=a||null!=i),r.updateMode=e,r.now=t}return r},e.getTimeSpan=function(){return null==W?(!z||!w)&&R:W},e.isUpdateable=function(){return U},e.processURLs=function(e){function t(e){if(e&&n.indexOf(e)<0&&n.push(e)){null==e.phExp&&L.exp(e.phExp=getPlaceholdersExp(e.full),!0);var t=L.getValue(e.full,e.phExp);null!=(e.href=null==t?null:getLocation(t).href)&&(r=!0)}}var n=[],r=!1;return e?e.forEach(function(e){t(e.url||_)}):t(_),r},EventListener(e).on("reqload",function(t,r,a){var i=a[0];if(i){var o=!1,l=!1,s=a[2],u=(a[3],a[4]),c=a[5],d=s==y.RESET_MODE;r.forEach(function(t,n){var a=t.data,s=!t.series&&t.requestId,f=s?t.series=e.getNewSeries(t,i):t.series,p=f&&f.data;if(p){var h=u.slice(0),v=a&&a.len;if(p.setLastRequestTime(d?c:Math.max(p.lastRequestTime,c)),p.loadPrevPeriod&&v&&!f.keys.isDetail){var m=g.roundTime(h[0]+1,p.period,!0,E),y=searchIndex(m,a.t);y>0&&(a.t.splice(0,y),a.v.splice(0,y),a.len-=y,h[0]=m,h[0]>=h[1]&&(h=null))}var x=d;if(x&&!s)for(var b=n-1;b>=0;--b)if(r[b].series==f){x=!1;break}v&&h&&(a.t[0]>h[1]||a.t[a.len-1]<h[0])&&(h=null),p.spliceData(!v||a,h,x)&&(l=!0),o=!0}}),l&&n(i,a),o&&e.fire("dataupdate",t,r,a)}}),e.getNewSeries=function(e,t){var n,r,a,i,o,s=t.initialSeries,u={};if(s)return r=t.some(function(t){return t.requestId===e.requestId&&t}),i=r.getAggregatingSeries(),o=r.keys.key.multipleSeries,a=!r.config&&o&&1===i.length?i[0].config:r.config,extendObject(u,s.parameters().defaultValues),extendObject(u,a),extendObject(u,e),delete u.data,delete u.meta,n=new m.Series(u,lib.series.getKeys.apply(this,e.key)),null==r.derived?r.derived=[n]:r.derived.push(n),n.derivedFrom=r,n.lastIntv=r.lastIntv,n.contextOnly=r.contextOnly,s.addSeries(n),o&&(i.forEach(function(t){var n={};extendObject(n,t.config),extendObject(n,s.parameters().defaultValues),n.entity=e.entity,n.tags=e.tags,delete n.entities,delete n.entityGroup,delete n.entityExpression,n.multipleSeries=!1;var r=m.getSeriesKey(n,!0),a=m.getSeriesKeys(r[0],r[1]),i=new m.Series(n,a);null==t.derived?t.derived=[i]:t.derived.push(i),i.derivedFrom=t,s.addSeries(i).setValue(i)}),i.length&&(n.params.display=r.params.display)),l(e.meta,n),s.setValue(n),n},e.getDefaultPostParams=function(e,t){var n=null!=t.t0||t.tspan,r=null!=t.t1||null!=t.t0&&t.tspan;return e.queries.forEach(function(e){n&&(!e.hasOwnProperty("startTime")&&(e._stSet=void 0)||e.hasOwnProperty("_stSet"))&&(e.startTime=t[0]),r&&(!e.hasOwnProperty("endTime")&&(e._etSet=void 0)||e.hasOwnProperty("_etSet"))&&(e.endTime=t[1])}),e},e.getGetParams=T=d3.functor(null),e.getPostParams=N=function(e,t,n,a,i){if(e){var o,l=[',"startDate":"',null,'","endDate":"',null,'","requestId":',null,',"timeFormat":"milliseconds"}'],s=e.reduce(function(e,t,n){var r=t.keys.loadId;e.some(function(e){return e.id==r&&e.push(n)})||((e[e.length]=[n]).id=r)},[]).reduce(function(t,s){function u(e){var t=r(e,a,i);if(t){var n=e.data.last.t;return e.config&&e.config.serverAggregate&&0!==e.keys.key.statistic[1]||n++,e.lastIntv&&t[0]>=e.lastIntv[0]&&n>t[0]&&n<t[1]&&(t=[n,t[1]]),t}}var c=s.reduce(function(t,n){if(e[n].derived){var r=[];e[n].derived.forEach(function(e){o=u(e),e.lastIntv=i,o&&r.push(o)}),t.push([d3.min(r.map(function(e){return e[0]})),d3.max(r.map(function(e){return e[1]}))])}else o=u(e[n]),e[n].lastIntv=i,o&&t.push(o)},[]);switch(c.length){case 0:return;case 1:break;default:c=v.Intervals.getIntervals(c)}var d=e[s[0]],f=!d.keys.key.last||null==w&&p(n)?d.keys.jsonId:d.keys.jsonIdLimit;d.requestId=s.join(","),l[5]='"'+d.requestId+'"',c.forEach(function(e){l[1]=new Date(e[0]).toISOString(),l[3]=new Date(e[1]).toISOString(),t.push(f.replace(/}$/,l.join("")))})},[]);return!!s.length&&"["+s.join(",")+"]"}},e.loadData=function(t,n,r,a,o,l,s){if(null!=a.href&&(!r||r.length)){var u=m.composeURL(a.href,t);n||(u=u.replace(/([^?#]*)(\?[^#]*)?(#.*)?/,function(e,t,r,a){return n=r?r.substring(1):null,t+(a||"")}));var d=p(o),f=o==y.RESET_MODE?[-(1/0),1/0]:s;r&&r.forEach(function(e){d&&e.data.updating++,e.data.intervals.loading.push(f),e.data.intervals.total.add(f)});var h=Array.prototype.slice.call(arguments,2),g=C||lib.defaultLoadMethod||r&&loadText||loadJson,v=g(u,function(t){function n(e){d&&e.data.updating--,e.data.intervals.loading.splice(e.data.intervals.loading.indexOf(f),1),e.data.intervals.reset(m)}var u=V.indexOf(v);if(u<0){var p=this,g=arguments;return void setTimeout(function(){g.callee.apply(p,g)},1)}if(V.splice(u,1),r){var m=s[1]>=l;r.forEach(function(e){n(e),e.derived&&e.derived.forEach(function(e){n(e)})})}if(v.aborted)return void e.fire("reqabort",v,h);var y=i(t,r,a),x=y[0],b=y[1];r&&(x||r).forEach(function(e){var t=x?e.series:e;t&&c(v,t,x&&e.data,b,o,r)}),b?e.fire("reqerror",v,b.some(identity),h):e.fire("reqload",v,x,h)},n);return v.isUpdate=o==y.UPDATE_MODE,v.requestTime=l,V.push(v),e.fire("reqsend",v,h),v}},e.endTime=function(t){return arguments.length?(w=g.getTime(t,E),U="function"==typeof w,e):w},e.startTime=function(t){return arguments.length?(z=g.getTime(t,E),e):z},e.getLastRequestTime=function(){return d},e.getTimespanWindow=function(e){var t,n;return w||z?w?(n=w(),t=n-W):(t=z(),n=t+W):(n=e||Date.now(),t=n-W),new a(t,n)},e.isUTC=function(t){return arguments.length?(E=t,e):E},e.loadSeries=function(t){return arguments.length?(A=d3.functor(t),e):A},e.loadInterval=function(t){return arguments.length?(I=d3.functor(t),e):I},e.reloadInterval=function(t){return arguments.length?(F=d3.functor(t),e):F},e.minTime=function(t){return arguments.length?(P=d3.functor(t),e):P},e.maxTime=function(t){return arguments.length?(O=d3.functor(t),e):O},e.getParams=function(t){return arguments.length?(T=d3.functor(t),e):T},e.postParams=function(t){return arguments.length?(N=d3.functor(t),e):N},e.lastQuery=function(t){return arguments.length?(M=t,e):M},e.batchSize=function(t){return arguments.length?(x=t,e):x},e.batchUpdate=function(t){return arguments.length?(b=t,e):b},e.defaultURL=function(t){return arguments.length?(_=t,e):_},e.loadMethod=function(t){return arguments.length?(C=t,e):C},e.timeSpan=function(t,n){return arguments.length?(arguments.length>1&&(j=n),W=t,e):W},e.updateTimeSpan=function(t){return arguments.length?(q=t,e):q},e.expireTimeSpan=function(t){return arguments.length?(k=t,e):k},e.lookAhead=function(t){return arguments.length?(D=t,e):D},e}function a(e,t){this.start=e,this.end=t}function i(e,t,n){var r=[[],t.map(function(){return[]})];return e.forEach(function(e){var a=o(e.requestId,t),i=e.data,l=!0;if("string"==typeof i&&(a&&1===a.length&&(l=!1),i=e.data=c(i,!l&&t[a[0]],n)),a&&i&&i.len){var s=!1;a.forEach(function(a){var o,u=t[a];if(l){var c=d(i,u,n);if(!c.len)return;o=s?lib.object.copy(e):(s=!0,e),o.data=c}r[1][a].push(o||(s=!0,e))})}else a||r[0].push(e)}),r}function o(e,t){var n;if(null!=e)try{var r=JSON.parse("["+e+"]");r&&r.length&&r.every(function(e){return"number"==typeof e})&&(n=r)}catch(e){}var a=n&&n.reduce(function(e,n){var r=t[n];r&&!e.some(function(e){return t[e].data===r.data})&&e.push(n)},[]);return a&&a.length?a:null}function l(e,t,n,r,a){var i=Array.isArray(e),o=i?e[0]:e;if(o.multipleSeries=!1,!o.series){o.serverAggregate=!0,a&&a.config&&(o.serverAggregate=a.config.serverAggregate);var l=o.key=m.getSeriesKey(o),s=l[0].url=t.full;if(l[1].urlKey=t.key,a&&(l[0].timeOffset=a.keys.key.timeOffset,l[0].source=a.keys.key.source,l[0].replaceValue=a.keys.key.replaceValue),r){if(n){l[0].url=void 0;var u=m.stringifyObject(l[0]);l[0].url=s}var c=m.stringifyObject(l[0]);o.series=r.some(function(e){return e.keys.id===c||n&&e.keys.id===u})}}return i&&(o.data=v.combineData(e.map(function(e){return e.data}))),o}function s(e,t,n,r,a){function o(e,a){s=s.concat(l(e,n,r,t.initialSeries,a))}var s=[],u=i(e,t,a);return u[0].forEach(function(e){o(e)}),u[1].forEach(function(e,n){function r(e){var t=["entity"];if(e.tags)for(var n in e.tags)e.tags.hasOwnProperty(n)&&t.push(n);t.forEach(function(t){l.indexOf(t)<0&&("entity"===t?e[t]=i[t]:i.tags&&i.tags[t]&&i.tags[t].length?e.tags[t]=i.tags[t][0]:delete e.tags[t])})}var a=t[n],i=a.keys.key;if(!e.length)return void o({series:a});if(i.multipleSeries){var l=a.keys.key.mergeFields,s=[];"all"!==l?e.forEach(function(e){var t={};if(l.forEach(function(n){var r;"entity"===n?r=e[n]:null!=e.tags&&(r=e.tags[n]),null==r&&(r=""),t[n]=r}),r(e),!s.some(function(n){if(l.every(function(e){return t[e]===n.id[e]}))return n.push(e),!0})){var n=[e];n.id=t,s.push(n)}}):s=e.map(function(e){return[e]}),s.forEach(function(e){o(e,a)})}else e[0].series=a,o(e)}),s}function u(e){var t=[];e=e.replace(/\"data\":\[[^\]]*\]/g,function(e){return'"data":'+(t.push(e)-1)});var n;try{n=JSON.parse(e)}catch(e){n=null}return n&&Array.isArray(n)&&n.forEach(function(e){e.hasOwnProperty("data"),e.data=t[e.data]}),n}function c(e,t,n){for(var r,a=/\"t\":([^,]*),\"v\":([^}]*)/g,i=[],o=[],l=t&&t.keys.key,s=l&&l.replaceValue,u=l&&l.timeOffset,c=!!s,d=!!u;r=a.exec(e);){var f=+r[1],p=+r[2];c&&(p=s(p,f),!lib.isFiniteNumber(p))||(d&&(f=g.shiftDate(new Date(f),u,1,n).getTime()),i.push(f),o.push(p))}return{t:i,v:o,get len(){return this.t.length},set len(e){}}}function d(e,t,n){var r=t&&t.keys.key,a=r.replaceValue,i=r.timeOffset;if(!a&&!i)return e;for(var o=[],l=[],s=!!a,u=!!i,c=0;c<e.len;c++){var d=e.t[c],f=e.v[c];s&&(f=a(f,d),!lib.isFiniteNumber(f))||(u&&(d=g.shiftDate(new Date(d),i,1,n).getTime()),o.push(d),l.push(f))}return{t:o,v:l,get len(){return this.t.length},set len(e){}}}function f(e,t,n,r,a){function i(e){return d.indexOf(e)<0&&u.ss.indexOf(e)<0}function o(){return f?!a||f<a?r?e.reduce(function(e,t){if(i(t)){var n=u.ss.reduce(function(e,n){return e+r(n,t)},0);(null==e[0]||e[1]<n)&&(e[0]=t,e[1]=n)}},[null,0])[0]:e.some(i):null:e.reduce(function(e,n){return t(n)[0][0]<t(e)[0][0]?n:e})}var l=[];if(e=e.filter(function(e){return!e.derivedFrom&&t(e).length}),!e.length)return l;for("function"==typeof n&&(n=n(e[0])),n>=0||(n=1/0),a>=0||(a=0);e.length;){for(var s,u={ss:[]},c=null,d=[],f=0;s=o();){var p=t(s),h=null,g=c&&p[0][0]-c[0]||0;if(!(g>n)){for(var v=0;v<p.length;v++){var m=p[v];if(h&&m[0]-h[1]>n)break;if(c&&m[1]>c[1]&&g+(m[1]-c[1])*f>n)break;h?h[1]=m[1]:h=[m[0],m[1]]}h&&(c&&(h[1]<c[1]?g+(c[1]-h[1])>n&&(h=null):c[1]=h[1]),h&&(p.splice(0,v),p.length||e.splice(e.indexOf(s),1),c||(c=h)))}h?f=u.ss.push(s):d.push(s)}u.intv=c||[],l.push(u)}return l}function p(e){return e!=y.RELOAD_MODE}function h(e,t,n){return e.reduce(function(e,r){return!r.data.last||t&&!t(r)||e&&!(n?r.data.last.t<e.data.last.t:r.data.last.t>e.data.last.t)?e:r},null)}var g=e("./time"),v=e("./dataseries"),m=e("./series"),y=e("./utils");a.prototype.contains=function(e){return this.start<=e&&e<this.end},n.loader=r,n.isUpdating=p,n.getLastSeries=h},{"./dataseries":8,"./series":12,"./time":15,"./utils":17}],8:[function(e,t,n){function r(e){this.t=e[0]?new e[0](0):[],this.v=e[1]?new e[1](0):[],this.last=0,this.interpolate=g,this.rangeFn=null,this.processIntervals=null,(this.intervals=x()).standby=x(),(this.domains=[]).methods=[],(this.callees=[]).methods=[];var t=(this.callers=[]).methods=[],n=this;EventListener(this).on("change",function(e){n.callers.forEach(function(r,a){r.calculator.isProcessing()||r.fire("calleechange",u(e,t[a]),n)})}).on("calleechange",function(e){n.spliceData(null,e,!!n.isConstant(),!0)}),this.roundTo=null,this.interpolateMode=1,this.series=[],this.period=_.getIntervalValue(),this.typeIndex=-1,this.loadPrevPeriod=!1,this.movingAverage=!1,this.lastRequestTime=-(1/0),this.transformInterval=o(this.period),this.isUTC=!1,this.maxAggregatorPeriod=_.getIntervalValue()}function a(e,t){var n=e.filter(function(e){return e&&e.len});if(1===n.length)return n[0];for(var r=n.map(function(){return 0}),a={len:0,t:[],v:[]};r.length;){var i=r.map(function(e,t){return n[t].t[e]}),o=Math.min.apply(null,i),l=i.reduce(function(e,t,n){return t===o&&e.push(n),e},[]),s=l[0],u=r[s],c=n[s].v[u];a.t.push(o),a.v.push(c),l.forEach(function(e){r[e]++});var d=[];n=n.filter(function(e,t){var n=r[t]<e.len;return n||d.push(t),n}),r=r.filter(function(e,t){return d.indexOf(t)<0})}return a.len=a.t.length,a}function i(e,t,n){var r=(e[e.length-1]-e[0])/n;if(lib.isFinite(r)&&r>0){var a=e.reduce(function(e,n){return t(n),Math.max(e,t.maxPow)},1),i=a/r;return i>=1?Math.ceil(Math.log(i)/Math.LN10):null}return null}function o(e,t,n,r,a){var i=e[1]&&(e[1]<0?-1:k.typeIsDelta(t)?n?1:2:r?3:0),o=[e[0],i,a].join(":");return E[o]||(E[o]=function(t,n,r,o){switch(e.isTimespan||!(e[1]>0)||e.align&&"CALENDAR"!==e||(t=t.map(function(t,n){return _.roundTime(t,e,n,a)})),n){case 0:3==i&&o==T.RESET_MODE&&_.roundTime(t[0]+1,e,!0,a)>r&&(t[0]=_.roundTime(t[0]-1,e,!1,a));break;case 1:2==i?t[1]=_.roundTime(t[1]+1,e,!0,a):i==-1&&(t=[-(1/0),1/0]);break;case 2:}return t})}function l(e,t,n){var r=null;return n||(n={ds:[],intvs:[]}),e.forEach(function(e){e.callees.forEach(function(a,i){var o=n.ds.indexOf(a),s=o<0?n.intvs[o=n.intvs.length]=l([n.ds[o]=a],t,n):n.intvs[o];s&&(r=e.callees.methods[i].reduce(function(e,t){return extend(e,t(s,2))},r),s.hasFutureData&&(r.hasFutureData=!0))});var a=e.isConstant(),i=t||!a&&s(e);i&&(r=extend(r,a?i:e.transformInterval(i,2)),e.intervals.loading&&!e.intervals.ready&&(r.hasFutureData=!0))}),r}function s(e){return e&&e.len?[e.t[0],e.t[e.len-1]+1]:null}function u(e,t){return t.map(function(t){return t(e,1)}).reduce(extend)}function c(e,t){return e&&[t?Math.floor(e[0]/t)*t:e[0],t?Math.ceil(e[1]/t)*t:e[1]]}function d(e,t,n){var r=e.indexOf(t),a=r<0,i=a?[n]:e.methods[r];return a?(e.push(t),e.methods.push(i),i):i.indexOf(n)<0&&(i.push(n),!0)}function f(e,t){var n=0,r=(e&&e.len?e.len:0)-1;if(n>r)return null;var a=t&&p(t.t,e.t[n],e.t[r],1,2);if(a){for(var i=a[0],o=a[1];n<=r&&i<=o&&e.t[n]==t.t[i]&&e.v[n]==t.v[i];)i++,n++;for(;n<=r&&i<=o&&e.t[r]==t.t[o]&&e.v[r]==t.v[o];)o--,r--;if(n>r)return null}return[n,r]}function p(e,t,n,r,a){var i=e.length-1;if(i<0)return null;var o=searchIndex(t,e,!(r%2),0,i)-(r>=2);if(o>i)return null;o<0&&(o=0);var l=searchIndex(n,e,!(a%2),0,i)-(a>=2);return l>i&&(l=i),o>l?null:[o,l]}function h(e){var t=this;return t.last?e.mode?e.t:[null,t.last.v]:null}function g(e,t,n,r){function a(e){return r?Math.round(e/r)*r:e}var i=this,o=a("number"==typeof e?e:e.t),l=searchIndex(function(e){return o<a(i.t[e])},0,i.len-1)-1;switch(l){case-2:return null;case-1:return e.mode?e.mode==-1?i.t[0]:null:[i.t[0]]}var s=i.t[l],u=o-a(s),c=u>0,d=l==i.len-1,f=c&&!d,p=d&&c;if(e.mode)switch(e.mode){case-2:return p?null:s;case-1:return p?null:s;case 1:return(f?i.t[l+1]:s)+1;case 2:return p?null:(f?i.t[l+1]:s)+1}if(p&&(null==t?n<0:u>=t))return null;var h=d?null:i.t[l+1];if(c&&0==n)return[h];var g=i.v[l],v=g;return f&&!i.period[1]&&(g=i.v[l+1]-g)&&(v+=g*u/(i.t[l+1]-i.t[l])),[h,v]}function v(e){return e.calculator=S.Calculator().isUTC(e.isUTC),e.processIntervals=function(t,n,r){if(t=y(e,t,n,r),e.isConstant()){if(r||!e.len){var a=[-(1/0),1/0],i=e.calculator.getData(a,n,e,!0,r);e.spliceData(i,null,!0)}}else b(e,t,r).forEach(function(t){if(!(e.calculator.frequency()&&(e.loadFutureData||(t[1]=Math.min(t[1],n)),!t.every(lib.isFinite)||t[0]>t[1]))){var a=e.calculator.getData(t,n,e,!0,r);e.spliceData(a||!0,t)}});e.processed=!0},e}function m(e){return e.calculator=null,extendObject(e.intervals,{loading:[],ready:null,total:x(),reset:function(t){var n=this.ready,r=this.total;if(r.splice(0),this.forEach(function(e){r.push(e)}),this.loading.forEach(r.add),null!=n){var a=r.length;if(!a&&null==t)return void(this.ready=!1);if(n)n.splice(0);else{if(!t)return;n=this.ready=x()}if(e.last){var i=e.last.t;r.some(function(e){return i<e[1]?(e[0]<i&&n.push([e[0],i]),!0):(n.push(e),!1)})}a&&(r[a-1]=[r[a-1][0],1/0])}}}),e.processIntervals=function(t,n,r){w.isUpdating(r)&&(t=y(e,t,n,r),b(e,t,r).forEach(e.intervals.standby.add))},e}function y(e,t,n,r){return t.map(function(t){return e.transformInterval(t,0,n,r)})}function x(e){return x.isIntervals(e)?e:(e||(e=[]),e.coverIndices=function(t){var n=searchIndex(function(n){return t[0]<=e[n][1]},0,e.length-1);if(n<0||n==e.length)return[n,n-1,!0];var r=searchIndex(function(n){return t[1]<e[n][0]},n,e.length-1)-1;return[n,r,n!=r||t[0]<e[n][0]||t[1]>e[r][1]]},e.add=function(t){var n=e.coverIndices(t);if(n[2]){var r=n[0]-(--n[0]>=0&&t[0]<=e[n[0]][1]),a=n[1]+(++n[1]>=0&&n[1]<e.length&&t[1]>=e[n[1]][0]);e.splice(r,a-r+1,r>a?t.slice(0):[Math.min(t[0],e[r][0]),Math.max(t[1],e[a][1])])}},e.remove=function(t){var n=e.coverIndices(t),r=n[0],a=n[1];if(r<=a){var i=[r,a-r+1];return t[0]>e[r][0]&&(i.push([e[r][0],t[0]]),e[r][0]=t[0]),t[1]<e[a][1]&&(i.push([t[1],e[a][1]]),e[a][1]=t[1]),e.splice.apply(e,i)}return[]},e.inside=function(t){var n=searchIndex(function(n){return t<e[n][1]},0,e.length-1);return n>=0&&n<e.length&&t>=e[n][0]},e)}function b(e,t,n){if(t.length){var r=n!=T.RESET_MODE&&(n==T.UPDATE_MODE&&e.intervals.ready||e.intervals.total||e.intervals);if(r&&r.length&&(t=x.getIntervals(t),r.forEach(t.remove)),e.loadPrevPeriod&&t.length){var a=x.isIntervals(t),i=a||t.length>1&&(a=!0)?x():[],o=e.period[1]>e.maxAggregatorPeriod[1]?e.period:e.maxAggregatorPeriod;t=t.reduce(function(t,n){n=[_.roundTime(n[0]-1,o,!1,e.isUTC),n[1]],a?t.add(n):t.push(n)},i)}}return t}var _=e("./time"),w=e("./dataloader"),k=e("./series"),T=e("./utils"),S=e("./calculator");n.DataSeries=r,Object.defineProperty(r.prototype,"len",{get:function(){return this.t.length},set:function(){}}),r.prototype.isConstant=function(){return this.calculator&&this.calculator.isConstant()},r.prototype.setLastRequestTime=function(e){arguments.length?this.lastRequestTime!=e&&(null!=this.lastRequestTime&&this.callers.forEach(function(e){e.setLastRequestTime(null)}),this.lastRequestTime=e,null!=e&&this.callers.forEach(function(e){e.setLastRequestTime()})):null==this.lastRequestTime&&(e=this.callees.reduce(function(e,t){return t.setLastRequestTime(),Math.max(e,t.lastRequestTime)},-(1/0)),this.setLastRequestTime(e))},n.combineData=a,n.getRangePrecision=i,r.prototype.setTransformInterval=function(){this.calculator||(this.transformInterval=o(this.period,this.typeIndex,!0,this.movingAverage,this.isUTC))};var E={},M=[o(_.getIntervalValue(),-1,null,null,!1),o(_.getIntervalValue(),-1,null,null,!0)];n.getTransformMethod=o,n.getVisibleInterval=l,n.getDataInterval=s,n.roundInterval=c,r.prototype.process=function(e){var t=this;if(d(t.domains,e.domain,e.transformMethod)){if(t.processIntervals){var n=[e.domain[0],e.domain[e.domain.length-1]];n=e.transformMethod(n,0,e.updateTime,e.updateMode),t.processIntervals([n],e.updateTime,e.updateMode)}if(e.isMainValue){var r=d(e.caller.callees,t,e.transformMethod);r.length&&(t.callers.push(e.caller),t.callers.methods.push(r),t.fire("newcaller",e.caller))}}},r.prototype.removeCallee=function(e){var t=this,n=t.callees.indexOf(e);if(n>=0){t.callees.splice(n,1),t.callees.methods.splice(n,1),e.callers.splice(n=e.callers.indexOf(t),1);var r=e.callers.methods.splice(n,1)[0],a=s(e);if(t.setLastRequestTime(),a)return t.spliceData(null,u(e.transformInterval(a,1),r))}},r.prototype.spliceData=function(e,t,n,r){var a=this,i=!1,o=0,l=0,u=!e,c=u?null:f(e,n?null:a),d=c&&c[0],p=c&&c[1],h=c&&[e.t[d],e.t[p]+1];if(t=extend(t,h),n||null==n&&u&&!t){if(a.intervals.length&&(a.intervals.splice(0),i=!0),t&&!u&&(a.intervals.add(t),i=!0),l=a.len){var g=s(a);t=extend(t,g),h=extend(h,g)}}else if(t){var v=a.len&&(u?t:h);if(v){o=searchIndex(v[0],a.t),l=o==a.len?0:searchIndex(v[1],a.t,!1,o,a.len-1)-o;var m=M.indexOf(a.transformInterval)<0?0:1,y=Math.max(0,o-m),x=Math.min(o+l-1+m,a.len-1);y<=x&&(h=extend(h,[a.t[y],a.t[x]+1]))}(u?a.intervals.remove:a.intervals.add)(t),i=!0}if(l||h){var b=spliceArray(a.t,o,l,c&&e.t,d,null==p?p:++p),_=b&&spliceArray(a.v,o,l,c&&e.v,d,p);_&&(a.t=b,a.v=_,a.len=a.t.length,a.last=a.len&&{t:a.t[a.len-1],v:a.v[a.len-1]},a.rangeFn&&a.rangeFn.array(null))}return i&&a.intervals.reset&&a.intervals.reset(),r&&(h=extend(h,t)),h&&a.fire("change",a.transformInterval(h,1)),t&&a.fire("intvchange",a.transformInterval(t,1)),h},n.constantInterpolator=h,n.ComputedDataSeries=v,n.LoadedDataSeries=m,x.isIntervals=function(e){return!(!e||!e.coverIndices)},x.getIntervals=function(e){return x.isIntervals(e)?e:e&&e.length>1?e.reduce(function(e,t){e.add(t)},x()):x(e)},n.Intervals=x,n.getStandbyIntervals=b},{"./calculator":6,"./dataloader":7,"./series":12,"./time":15,"./utils":17}],9:[function(e,t,n){var r=e("./time"),a=e("./dataseries");n.getDisconnectData=function(){function e(e,r,o){function s(s){if(!e.len)return u(!0),e;if(y&&(x=r(),b=!("number"==typeof x?p.step==x:p.step[0]==x[0])),b&&(u(),p.step=x),_&&d(l(e)),(_||b)&&f(x?i(e,v,x,e.isUTC):[]),_=b=!1,!s)return e;if(m.length){var w=o&&g.length&&n(e,h.len&&m);w&&w.length?t(e,h,x,e.isUTC,o,g,w):h.len&&h.spliceData(),m.length&&c(a.Intervals())}return h.len?(h.isUTC=e.isUTC,h.series=e.series,h.period=e.period,h.typeIndex=e.typeIndex,h.transformInterval=e.transformInterval,h.lastRequestTime=e.lastRequestTime,h):e}function u(e){h.len&&h.spliceData(),g.length&&f([]),e&&(m.length&&c(a.Intervals()),v.length&&d([]))}function c(e){m=s.intvs=e}function d(e){v=s.intvGaps=e}function f(e){g=s.dataGaps=e}var p=s.prev={},h=new a.DataSeries([e.t.constructor,e.v.constructor]),g=s.dataGaps=[],v=s.intvGaps=[],m=s.intvs=a.Intervals(),y="function"==typeof r,x=!y&&r,b=!y,_=!1;return e.on("change",function(e){_=!0,m.add(e)}),s}function t(e,t,n,r,a,i,l){var s=[];l.forEach(function(t,l){var u=searchIndex(t[0],e.t),c=searchIndex(t[1],e.t,!1,u,e.len-1)-1;if(!(u>c)){var d=searchIndex(u,i);u&&d&&u-1==i[d-1]&&(u--,d--);for(var f,p=s[l]={t:[],v:[],i0:u,i1:c};(f=i[d])<=c;d++)for(var h=e.t[f],g=e.t[f+1];(h=o(h,n,r))<g;){var v=a.call(e,h,0);a.valueIsProper()&&(p.v.push(v),p.t.push(h))}p.len=p.t.length}}),(t.len||s.some(function(e){return e&&e.len}))&&l.forEach(function(n,r){var a=s[r];if(!a)return void t.intervals.add(n);if(a.len){for(var i=[],o=[],l=a.i0,u=0,c=e.t[l];l<=a.i1;l++){i.push(c),o.push(e.v[l]),c=e.t[l+1];for(var d;u<a.len&&(d=a.t[u])<c;u++)i.push(d),o.push(a.v[u])}a.t=i,a.v=o}else a.t=Array.prototype.slice.call(e.t,a.i0,a.i1+1),a.v=Array.prototype.slice.call(e.v,a.i0,a.i1+1);a.len=a.t.length,t.spliceData(a,n)})}function n(e,t){return e.intervals.reduce(function(e,n){t?t.remove(n).forEach(function(t){e.push(t)}):e.push(n.slice(0))},[])}function i(e,t,n,r){for(var a=[],i=0,l=0;i<t.length;i++,l++)for(var s=t[i];l<s;l++)o(e.t[l],n,r)<e.t[l+1]&&a.push(l);return a}function o(e,t,n){return"number"==typeof t?e+t:r.shiftDate(new Date(e),t,n).getTime()}function l(e){return e.intervals.reduce(function(t,n){var r=searchIndex(n[1],e.t)-1;n[0]<=e.t[r]&&t.push(r)},[])}return e}()},{"./dataseries":8,"./time":15}],10:[function(e,t,n){function r(e){return arguments.length?new Date(e):new Date}function a(e){return"number"==typeof e&&i(e)}function i(e){return e>0?e<10*e:e<0?e>10*e:0==e}function o(e,t){return e-t}function l(e,t){return t-e}function s(e,t){var n;return t.length<b?t.indexOf(e):e>=t[n=searchIndex(e,t)]?n:-1}var u=e("./time"),c=e("./dataloader"),d=e("./dataseries"),f=e("./disconnect"),p=e("./series"),h=e("./seriesgroup"),g=e("./updater"),v=e("./thresholds"),m=e("./utils"),y=e("./calculator"),x=e("./metadata_loader"),b=100;t.exports={shiftDate:u.shiftDate,evalTime:u.evalTime,parseInterval:u.parseInterval,parseTimespan:u.parseTimespan,adjustPeriod:u.adjustPeriod,getTime:u.getTime,roundTime:u.roundTime,getIntervalValue:u.getIntervalValue,getIntervalValueTitle:u.getIntervalValueTitle,getMaximumPeriod:u.getMaximumPeriod,getMiddleInterval:u.getMiddleInterval,getAggregateInterval:u.getAggregateInterval,loader:c.loader,RELOAD_MODE:m.RELOAD_MODE,UPDATE_MODE:m.UPDATE_MODE,RESET_MODE:m.RESET_MODE,composeURL:p.composeURL,data:{calculator:y.Calculator,combine:d.combineData,getAggregateValue:h.getAggregateValue,getCalcValue:y.getCalcValue,getInterval:d.getDataInterval,getDisconnectData:f.getDisconnectData,getTransformMethod:d.getTransformMethod,getVisibleInterval:d.getVisibleInterval,process:g.processDataSeries,roundInterval:d.roundInterval},defaultLoadMethod:null,findInSortedArray:s,getDate:r,getEvalMethod:m.getEvalMethod,isEvalMethod:m.isEvalMethod,getLoadingSeries:g.getLoadingSeries,getRangePrecision:d.getRangePrecision,falseFunctor:d3.functor(!1),intervals:d.Intervals,isFinite:i,isFiniteNumber:a,number:{ascending:o,descending:l},object:{copy:p.copyObject,sort:p.sortObject,ascending:p.objectAscending,descending:p.objectDescending},parseValue:p.parseValue,replaceTags:p.replaceTags,setPeriod:g.setPeriod,series:{addAggregate:h.addAggregateSeries,create:p.newSeries,forEach:g.forEachRelatedDataSeries,formatTags:p.formatTags,getColor:p.getSeriesColor,getLabel:p.getSeriesLabel,getLast:c.getLastSeries,getLevelValue:p.getLevelValue,getKey:p.getSeriesKey,getKeys:p.getSeriesKeys,getRangeIndex:p.getRangeIndex,getTypeValue:p.getTypeValue,getTypeTitle:p.getTypeTitle,getTypeWeight:p.getTypeWeight,getUnifiedTags:p.getUnifiedTags,getUpdateTime:g.getUpdateTime,group:h.SeriesGroup,tagsToArray:p.tagsToArray,typeIndices:p.typeIndices,types:p.seriesTypes},setThresholds:v.setThresholds,stringUtil:{escape:m.escape,keepAfter:m.keepAfter,keepAfterLast:m.keepAfterLast,keepBefore:m.keepBefore,keepBeforeLast:m.keepBeforeLast,replace:m.replace,capFirst:m.capFirst,capitalize:m.capitalize,lowerCase:m.lowerCase,upperCase:m.upperCase,removeBeginning:m.removeBeginning,removeEnding:m.removeEnding},thresholds:v.Thresholds,trueFunctor:d3.functor(!0),updater:g.Updater,MetadataLoader:x}},{"./calculator":6,"./dataloader":7,"./dataseries":8,"./disconnect":9,"./metadata_loader":11,"./series":12,"./seriesgroup":13,"./thresholds":14,"./time":15,"./updater":16,"./utils":17}],11:[function(e,t,n){function r(e){function t(t,n,r,a,o){if(r=r||e.metric){r=encodeURIComponent(r);var l=u+c+"/metrics/"+r+"/series";return i(l,o,t,n,a)}}function n(t,n,r,a,o){if(r=r||e.entity){r=encodeURIComponent(r);var l=u+c+"/entities/"+r+"/metrics";return i(l,o,t,n,a)}}function r(t,n,r,a,i,l){var s=u+c+axibase.defaultPropertiesPath;if(!l){a=a||"$entity_tags";var d=Array.isArray(r)&&r||e.entities;r=!d&&(r||e.entity)||void 0,entityGroup=e.entitygroup,entityExpression=e.entityexpression,l={startDate:"1970-01-01T00:00:00.001Z",endDate:"9999-12-31T23:59:59.999Z",type:a,entity:r,entities:d,entityGroup:entityGroup,entityExpression:entityExpression}}return Array.isArray(l)||(l=[l]),l=JSON.stringify(l),o(s,t,n,i,l)}function i(e,t,n,r,a){return t=l(t),e+=t,loadJson(e,function(e){s(e,n,r,a)})}function o(e,t,n,r,a){return e=e,loadText(e,function(e){s(e,t,n,r)},a)}function l(e){if("string"!=typeof e&&"object"!=typeof e&&(e=""),"object"==typeof e){var t="";Object.keys(e).forEach(function(n){"tags"===n?Object.keys(e.tags).forEach(function(n){e.tags[n]&&(t+="tags."+n+"="+encodeURIComponent(e.tags[n])+"&")}):e[n]&&(t+=n+"="+encodeURIComponent(e[n])+"&")}),e=t.slice(0,-1)}return"?"!==e[0]&&(e="?"+e),e}function s(e,t,n,r){if(!e)throw Error("malformed response");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)||(e=[e]),e.length&&e[0].hasOwnProperty("error"))throw Error(e[0].error);if(t&&(e=e.map(function(e){return a.getFieldValue(e,t)})),r||void 0===r){var i=[];e.forEach(function(e){i.indexOf(e)<0&&void 0!==e&&i.push(e)}),e=i}"function"==typeof n&&n(e)}var u=e.url||window.location.origin,c=e.contextpath||axibase.defaultContextPath;this.requestMetricsSeries=t,this.requestEntitiesMetrics=n,this.requestProperties=r}var a=e("./utils");t.exports=r},{"./utils":17}],12:[function(require,module,exports){function typeIsRaw(e){return!(typeIndices.lower_confidence<=e&&e<=typeIndices.count)}function typeIsDelta(e){return typeIndices.delta<=e&&e<=typeIndices.counter}function typeIsTime(e){return typeIndices.min_value_time<=e&&e<=typeIndices.max_value_time}function typeIsSla(e){return typeIndices.threshold_count<=e&&e<=typeIndices.threshold_duration}function typeIsStat(e){return typeIndices.forecast<=e&&e<=typeIndices.upper_confidence}function typeIsDetail(e){return e==typeIndices.detail}function typeIsConfidence(e){return typeIndices.lower_confidence<=e&&e<=typeIndices.upper_confidence}function typeHasLevel(e){return typeIndices.lower_confidence<=e&&e<=typeIndices.percentile}function typeHasInterval(e){return typeIndices.percentile<=e}function typeIsAggr(e){return typeIndices.percentile<=e}function Series(e,t){EventListener(this),null==t&&(t=getSeriesKeys.apply(this,getSeriesKey(e,!0)));var n=null==t.key.url?null:{full:t.key.url,key:t.rec.urlKey},r=extendObject({},e,function(e,n){return null==e||t.key.hasOwnProperty(n)||t.rec.hasOwnProperty(n)||urlKeyNames.indexOf(n)>=0});this.config=e,this.keys=t,this.url=n,this.params=r,this.related={},this.original=!0,this.dataReceived=!1}function newSeries(e,t){return new Series(e,t)}function getSeriesKeys(e,t){var n={},r=!t.value,a=e.statistic[1],i=r&&!!e.raw,o=r&&isStatKey(e),l=i&&getSeriesJson(e,t);return n.rec=t,n.key=e,n.json=l,n.isReal=r,n.isRaw=i,n.isStat=o,n.isSla=typeIsSla(a),n.isDetail=typeIsDetail(a),n.isConfidence=o&&typeIsConfidence(a),n.isThreshold=!1,setSeriesKeysIds(n),n}function setSeriesKeysIds(e,t){var n=e.key;if(e.id=stringifyObject(n),!t){var r=n.period,a=n.statistic,i=n.dataType,o=n.forecastName,l=n.last,s=n.raw,u=n.cache,c=n.groupKeys;e.fullTypeId=(n.period=void 0,stringifyObject(n)),e.typeId=(n.last=n.raw=n.cache=void 0,stringifyObject(n)),e.metricId=(n.statistic=n.dataType=n.forecastName=void 0,stringifyObject(n)),n.period=r,n.statistic=a,n.dataType=i,n.forecastName=o,n.last=l,n.raw=s,n.cache=u,n.groupKeys=c}var d=e.json;if(d){var f=e.id,p={},h=["url","replaceValue"].filter(function(e){var t=n[e];return void 0!==t&&(p[e]=t,n[e]=void 0,!0)});h.length&&(f=stringifyObject(n),h.forEach(function(e){n[e]=p[e]})),e.loadId=f,e.jsonId=stringifyObject(d),d.last&&(d.last=void 0,d.limit=1,e.jsonIdLimit=stringifyObject(d),d.last=l,delete d.limit)}e.label=getSeriesLabel({keys:e},defaultSeriesTitleFormat)}function getSeriesKey(e,t){var n=e.value===!0||parseValue(e.value),r=!n&&(isFullString(e.entity)||isFullString(e.entityGroup)||isFullString(e.entityExpression)||e.entities&&e.entities.length>0)&&(isFullString(e.metric)||isFullString(e.table)&&isFullString(e.attribute));if(!t||r||n||(n=!0,e.value=!0),!r&&!n)return null;var a={},i={};if(r){isFullString(e.entity)&&(i.entity=e.entity,a.entity=e.entity.toLowerCase()),isFullString(e.entityGroup)&&(i.entityGroup=e.entityGroup,a.entityGroup=e.entityGroup.toLowerCase()),isFullString(e.entityExpression)&&(i.entityExpression=e.entityExpression,a.entityExpression=e.entityExpression.toLowerCase()),e.entities&&e.entities.length>0&&(i.entities=e.entities,a.entities=e.entities),null!=e.exactMatch&&(i.exactMatch=e.exactMatch,a.exactMatch=e.exactMatch),null!=e.seriesLimit&&(i.seriesLimit=e.seriesLimit),null!=e.addMeta&&(i.addMeta=e.addMeta),null!=e.limit&&(i.limit=e.limit),i.metric=isFullString(e.metric)?e.metric:e.table+","+e.attribute,i.tags=formatTags(e.tags),i.serverAggregate=!!e.serverAggregate,a.source=e.source,"message-stat"!==e.source&&(i.cache=a.cache=!!e.cache,i.last=!!(null==e.last?i.cache||e.defaultLast:e.last)),i.forecastName=isFullString(e.forecastName)?e.forecastName:void 0,a.metric=i.metric.toLowerCase(),a.tags=getUnifiedTags(i.tags),a.rate=getSeriesPeriodValue(e,"rate"),a.groupKeys=e.groupKeys;var o=isFullObject(e.rate)?null==e.rate.counter||e.rate.counter:e.rateCounter;(a.rate||null!=o&&(a.rate=time.getIntervalValue()))&&(a.rateCounter=o===!1?o:void 0);var l=i.urlKey=urlKeyNames.reduce(function(t,n){t[n]="string"==typeof e[n]?e[n]:null},{});a.url=null==l.url?void 0:composeURL(l.url,l.contextpath,l.path,l.urlparameters),a.wildcardInTags=!!someOwnProperty(a.tags,function(e){return e=Array.isArray(e)?e[0]:e,utils.containsWildcards(e)},0),a.wildcardInEntity=isFullString(a.entity)?utils.containsWildcards(a.entity):a.entities&&a.entities.length>0||isFullString(a.entityGroup)||isFullString(a.entityExpression),a.multipleSeries=e.multipleSeries===!0||(a.wildcardInTags||a.wildcardInEntity||a.groupKeys)&&(e.groupRequest?void 0:e.multipleSeries!==!1),a.multipleSeries&&(e.displayInLegend=!1),a.mergeFields=e.mergeFields?e.mergeFields:"all";var s=time.getIntervalValue(e.timeoffset,null,!0,!0);a.timeOffset=s&&s.total?s:void 0;var u=e.replaceValue;a.replaceValue=u?new Function("value,time","try{"+u+"}catch(e) {}"):void 0,u&&(a.replaceValue.toJSON=d3.functor(u.toString()))}else i.value=n,a.metric=i.metric=++seriesValueId,a.isDummy=!0;var c=e.aggregate?e.aggregate.type:e.statistic,d=r&&(e.aggregate?e.type:e.dataType);return c=isFullString(c)?getTypeValue(c.toLowerCase()):null,d=!isFullString(d)||c&&typeIsStat(c[1])?null:getTypeValue(d.toLowerCase()),d&&(typeIsStat(d[1])?(!c||typeIsDetail(c[1])||typeIsConfidence(c[1]))&&(c=d,d=null):d=null),c&&(r||!typeIsRaw(c[1])&&!typeIsStat(c[1]))||(c=getTypeValue("detail")),c[1]==typeIndices.delta&&(e.aggregate?e.aggregate.counter:e.counter)&&(c=getTypeValue("counter")),a.statistic=c,a.dataType=d?d[0]:void 0,a.period=getSeriesPeriodValue(e,"period",c),a.period.align=e.align,a.align=e.align,a.interpolate=e.interpolate,null!=e.groupStatistic&&e.groupStatistic[1]>-1&&(a.groupStatistic=e.groupStatistic,a.groupPeriod=getSeriesPeriodValue(e,"groupPeriod",e.groupStatistic),a.groupFirst=e.groupFirst,a.groupInterpolate=e.groupInterpolate),r&&typeIsSla(c[1])&&seriesSlaKeyNames.forEach(function(t,n){var r=e.aggregate,i=r?n<2?r.threshold&&(n?r.threshold.max:r.threshold.min):r.workingMinutes&&(n>2?r.workingMinutes.end:r.workingMinutes.start):e[t];a[t]=null!=i&&(i=+i)<i+1?i:null}),setComplexKeys(a,i),[a,i]}function setComplexKeys(e,t){t.value||(e.raw=e.period[1]>=0&&(e.cache||typeIsRaw(e.statistic[1])||t.serverAggregate&&typeIsAggr(e.statistic[1])&&(e.statistic[1]!=typeIndices.percentile||supportedPercentiles.indexOf(e.statistic[2][1])>=0))||void 0,e.last=!!e.raw&&t.last,e.forecastName=isStatKey(e)?t.forecastName:void 0)}function isStatKey(e){return typeIsStat(e.statistic[1])||null!=e.dataType}function getSeriesPeriodValue(e,t,n){var r="rate"===t,a=!r&&n[1]>=0&&!typeHasInterval(n[1])?time.getIntervalValue():null;if(null==a){var i=r?e.rate:e.aggregate;if(isFullObject(i))a=time.getIntervalValue((i=i.period)&&i.count+"="+i.unit);else{var o=!r&&"all"==e[t];(a=time.getIntervalValue(o?-1:e[t],!0,!1,o))||(a=r&&null==a?void 0:time.getIntervalValue())}}return a}function getSeriesJson(e,t){var n={entity:t.entity,metric:t.metric,entities:t.entities,entityGroup:t.entityGroup,entityExpression:t.entityExpression,exactMatch:t.exactMatch,limit:t.limit,seriesLimit:t.seriesLimit,tags:t.tags||{},last:e.last,cache:e.cache,forecastName:e.forecastName,groupKeys:e.groupKeys,addMeta:t.addMeta},r=e.statistic[0].toUpperCase(),a=e.statistic[1];if(typeIsStat(a))n.type=r;else{switch(n.aggregate={},a){case typeIndices.percentile:r=r.replace(/\./,"")}n.aggregate.types=[r],typeIsAggr(a)&&(n.aggregate.interpolate=e.interpolate),typeIsSla(a)&&extendObject(n.aggregate,{threshold:{min:e.minThreshold,max:e.maxThreshold},workingMinutes:{start:e.startWorkingMinutes,end:e.endWorkingMinutes}}),e.dataType&&(n.type=e.dataType)}if(seriesPeriodKeyNames.forEach(function(t,r){var a=e[t],i=!!r,o=i?"aggregate":t;if(a&&!i&&(n[o]={}),a&&a[0]){var l=n[o]||(n[o]={});l.period=time.getAggregateInterval(a)}}),null!=e.groupStatistic&&e.groupStatistic[1]>-1){var i,o=e.groupStatistic[0].toUpperCase(),l=e.groupStatistic[1];if(e.groupPeriod[3]>-1&&(i=time.getAggregateInterval(e.groupPeriod)),!typeIsStat(o)&&l>-1){switch(l){case typeIndices.percentile:o=o.replace(/\./,"")}var s={},u=n.aggregate;s.type=o,s.period=i,s.interpolate=e.groupInterpolate,null!=u&&(e.groupFirst?(u.order=1,s.order=0):(u.order=0,s.order=1)),n.group=s,n.aggregate=u}}return e.rate&&(n.rate.counter=e.rateCounter),n}function getUnifiedTags(e,t,n){t||(e=formatTags(e,function(e){return isFullString(e)?e.toLowerCase():e})||{}),n||(e=sortObject(e)),someOwnProperty(e,function(t,n){var r=stringifyObject(t);e[n]=_unifiedKeysMap[r]||(_unifiedKeysMap[r]=t)});var r=stringifyObject(e);return _unifiedKeysMap[r]||(_unifiedKeysMap[r]=e)}function formatTags(e,t,n){var r=!1;return someOwnProperty(e,function(e,a){[].concat(e).reduce(function(e,t){return e||(e=(r||(r={}))[a]=[]),e.push(n?n(t):t),e},r[t?a=t(a):a])}),r}function tagsToArray(e,t){t||(t=function(e,t){return t.length&&e+"="+(t.join?t.join(","+e+"="):t)});var n=[];return someOwnProperty(e,function(e,r){var a=t(r,e);a&&n.push(a)}),n}function parseValue(e,t){if("function"==typeof e||e&&e.isParsedValue)return e;if(e=[].concat(e).filter(identity),!e.length)return null;var n=e.join("\n").replace(/[,;]+$/,""),r=[t&&"return ["+e.join(",")+"];",!t&&"return ("+n+");",n],a=r.some(function(e){if(e)try{return Function(e),!0}catch(e){}});return a&&(a=new String(a),a.src=e,a.isParsedValue=!0),a}function replaceTags(e,t){function n(e){return'tags["'+e.substr(5)+'"]'}if("string"==typeof e){var r=t||{},a=[];for(var i in r)r.hasOwnProperty(i)&&a.push(i);var o=e;return(a.length?o.match(new RegExp("tags\\.("+a.join("|")+")+","gi"))||[]:[]).forEach(function(e){o=o.replace(e,n(e))}),(o.match(/tags\.[^`~@#&%\^\?!\*\/\+\-=\\\|\(\)\[\]{}<>;:'"\.,\s]+/gi)||[]).forEach(function(e){o=o.replace(e,n(e))}),o}return e}function toStringSeriesKey(){return this[0]}function getTypeValue(e){switch(typeof e){case"object":if(e&&e.isParsedType)return e;break;case"string":if(getTypeValue.aliases.hasOwnProperty(e))return getTypeValue.aliases[e];var t=seriesTypes.indexOf(e),n=0;t<0&&seriesTypes.some(function(r,a){if(typeHasLevel(a)&&0==e.indexOf(r)){var i=+e.substring(r.length).replace(/[^0-9.e\-]/g,"").replace(/^0([^.])/,"0.$1");return n=i>0?i<100?i:i>100?i/10:0:0,e=r,t=a,!0}}),(n||t==typeIndices.percentile&&(n=50))&&(e+="_"+n);var r=[e,t,getLevelValue(n,t)];return r.isParsedType=!0,r.toString=toStringSeriesKey,r}return nullType}function getLevelValue(e,t){switch(typeof e){case"object":if(e&&e.isParsedLevel)return e;break;case"number":if(e>0&&e<100){var n=t==typeIndices.percentile?e/100:getConfidenceCoeff(e),r=[n,e];return r.isParsedLevel=!0,r.toString=toStringSeriesKey,r}}return nullLevel}function getConfidenceCoeff(e){return e&&(68==e?1:95==e?2:Math.erf_1(Math.max(.001,Math.min(.999,e/100)))*Math.SQRT2)}function getTypeTitle(e){var t=e[0];switch(e[1]){case typeIndices.percentile:return 50==e[2][1]?"median":"p"+e[2][1];case typeIndices.lower_confidence:return t.replace(/_/g," ");case typeIndices.upper_confidence:return t.replace(/_/g," ")}return t}function getTypeWeight(e,t){var n=e[1],r=n<0?e[0]:seriesTypes[n];if(!r)return-1;if(!typeWeights.hasOwnProperty(r))return typeWeights[r]=--otherTypeIndex;var a=typeWeights[r];if(typeHasLevel(n)){var i=e[2][1];if(typeIsConfidence(n)){var o=2*(n==typeIndices.lower_confidence?-1:1)*weightCoeff;return i?a+i*o:function(e){return a+(arguments.length?e:t()[1])*o}}if(n==typeIndices.percentile)return a+4*(i-50+(i>50))*weightCoeff}return a}function getRangeIndex(e,t){if("function"==typeof t)return function(){return getRangeIndex(e,+t())};if(t>=0)switch(e[1]){case typeIndices.lower_confidence:return typeWeights.lower_confidence-t;case typeIndices.forecast:return 0;case typeIndices.detail:return-1}return t}function getSeriesColor(e,t){var n="function"==typeof t?t(50):t>=0?t:1;return interpolateColor(e,.5*(1-n))}function composeURL(e,t,n,r){return null!=e&&(arguments.length<3&&(r=t,t=null),null!=r&&"object"==typeof r&&(r=encodeParams(r).join("&")),(r||t||n)&&(e=e.replace(/([^?#]*)(\?[^#]*)?(#.*)?/,function(e,a,i,o){return t=t||"",n=n||"",a+="/"==a[a.length-1]&&"/"==t[0]?t.substring(1):t,a+="/"==a[a.length-1]&&"/"==n[0]?n.substring(1):n,r&&(i="?"==r[0]?r:(i?i.replace(/([^?&])$/,"$1&"):"?")+r.replace(/^&/,"")),a+(i||"")+(o||"")}))),e}function getSeriesLabel(s,format,defaultLabelKey){function getLabelFormat(e){return"string"==typeof e?e.split(labelRegex).map(function(e){for(var t=0;t<labelKeysRegex.length;t++)if(labelKeysRegex[t].test(e))return t;return e}):e}function getIntervalLabel(e){return e&&e.replace("=millisecond","ms").replace("=minute","m").replace("="," ")}function getKeyLabel(e){if(e>tagLabelIndexes[1])switch(e){case labelKeys.label:return defaultLabelKey;case labelKeys.entity:return rec.entity;case labelKeys.metric:return rec.metric;case labelKeys.tags:return getTagsLabel("12121");case labelKeys.statistic:return(keys.isDetail?key.rate&&key.rate[0]:key.dataType||!keys.isStat)&&lib.series.getTypeTitle(key.statistic);case labelKeys.period:return key.period[1]>0&&getIntervalLabel(key.period[0]);case labelKeys.dataType:return key.dataType||keys.isStat&&lib.series.getTypeTitle(key.statistic);case labelKeys.forecastName:return key.forecastName;case labelKeys.rate:return key.rate&&getIntervalLabel(key.rate[0]);case labelKeys.attribute:return s.config&&s.config.attribute;case labelKeys.table:return s.config&&s.config.table}else{if(e>=tagLabelIndexes[0]&&e<=tagLabelIndexes[1])return tagValues[e-tagLabelIndexes[0]].join("; ");if(e>=metaLabelIndexes[0]&&e<=metaLabelIndexes[1])return metaValues[e-metaLabelIndexes[0]]}}function getTagsLabel(e,t){function n(e,n,a){return r&&(e<r||null!=a&&(e=a)<r)?format[t+2*e+1]:tagsSpl[n]}var r=null==t?0:(e.length>tagKeysLimit?e=e.slice(0,tagKeysLimit):e).length-1,a=+e;return 1==a||11==a?tagNames.join(n(0,0)):2==a||22==a||222==a?tagValues.map(function(e){return e.join(n(0,0))}).join(n(1,1,0)):12==a||1212==a||12121==a?tagNames.map(function(e,t){return tagValues[t].map(function(t){return e+n(0,2)+t}).join(n(1,0))}).join(n(3,0,1)):122==a||1221==a?tagNames.map(function(e,t){return e+n(0,2)+tagValues[t].join(n(1,0))}).join(n(2,1)):getTagsLabel(e.slice(0,-1),t)}function nextNames(e){for(var t,n,r=0,a=[];;){if(t=format[e],n=tagKeys.indexOf(t)+1,!n)break;r=a.push(n),e+=2}return r?a.join(""):t}var keys=s.keys,key=keys.key,rec=keys.rec,meta=keys.meta;tagNames=rec.tags?Object.getOwnPropertyNames(rec.tags):[],tagValues=tagNames.map(function(e){return rec.tags[e]}),labelKeysArr=["label","entity","metric","tags","meta","tagName","tagValue","statistic","period","dataType","forecastName","rate","attribute","table"],tagPrefix="tags.",tagLabelKeysArr=[],tagNames.forEach(function(e){tagLabelKeysArr.push(tagPrefix+e)}),labelKeysArr=tagLabelKeysArr.concat(labelKeysArr);var metaLabelKeysArr=[],metaValues=[];meta&&(metaLabelKeysArr=utils.getObjectDeepFieldsNames(meta,"meta"),labelKeysArr=metaLabelKeysArr.concat(labelKeysArr),metaValues=metaLabelKeysArr.map(function(e){return utils.getFieldValue(meta,e.substring(5))}));var metaLabelIndexes=[0,metaLabelKeysArr.length-1],tagLabelIndexes=[metaLabelKeysArr.length,metaLabelKeysArr.length+tagLabelKeysArr.length-1];if("string"!=typeof format||!/^\s*javascript\s*:.*$/i.test(format)){labelKeysArr=labelKeysArr.map(function(e){return utils.escape(e)});var labelKeys=labelKeysArr.reduce(function(e,t,n){e[utils.escape(t)]=n},{}),labelKeysRegexSrc=labelKeysArr.map(function(e){return e.replace(/([A-Z])/g,"[\\s_-]{0,2}$1")});labelKeysRegexSrc[labelKeys.statistic]+="s?";var labelKeysRegex=labelKeysRegexSrc.map(function(e){return new RegExp("^"+e+"$","i")}),labelRegex=new RegExp("("+labelKeysRegexSrc.join("|")+")","i");null==defaultLabelKey&&s.params&&(defaultLabelKey=s.params.legendLabel),"string"==typeof format&&(format=getLabelFormat(format));for(var tagsSpl=[", ","; ","="],tagKeysLimit=5,tagKeys=[labelKeys.tagName,labelKeys.tagValue],result=[],i=1,last=format.length-1,di;i<last;i+=di){var spl=format[i-1],n=nextNames(i),v;"number"==typeof n?(di=2,v=getKeyLabel(n)):(di=2*n.length,v=getTagsLabel(n,i)),Array.isArray(v)&&(v=v.join("\n")),(v||"number"==typeof v)&&(spl&&result.length&&result.push(spl),result.push(v))}if(format[last]&&result.push(format[last]),last&&format[0]&&result.unshift(format[0]),!result.length)return keys.isDetail&&format.indexOf(labelKeys.dataType)>=0?key.statistic[0]:null;var res=result.join("");return res.indexOf("\n")<0?res:res.split("\n")}format=replaceTags(format,rec.tags);var script=format.substr(format.indexOf(":")+1).trim(),vars={};for(v in lib.stringUtil)lib.stringUtil.hasOwnProperty(v)&&(vars[v]=lib.stringUtil[v]);for(var k=tagLabelKeysArr.length;k<labelKeysArr.length;k++)"tags"!==labelKeysArr[k]&&(vars[labelKeysArr[k]]=getSeriesLabel(s,["",k,""],defaultLabelKey));with(vars.tags=tagNames.reduce(function(e,t,n){e[t]=tagValues[n].join("; ")},{}),vars.tags.toString=function(){return getSeriesLabel(s,["",labelKeysArr.indexOf("tags"),""],defaultLabelKey)},vars.meta=meta,vars.series=s,vars)try{return eval(script)}catch(e){return script}}function sortObject(e,t,n,r){if(!isFullObject(e))return e;"function"!=typeof n&&(n=lib.object.ascending),(r&&"function"!=typeof r||null==r)&&(r=function(e,t){return isFullObject(e)&&(e=stringifyObject(e)),isFullObject(t)&&(t=stringifyObject(t)),n(e,t)});var a=navigator.isIE;return function(e,t,n,r,i){var o,l=r,s=i,u=this,c=arguments,d=0!=--c[0];if(instanceofArray(u))o=c[3]=u,d&&u.forEach(function(e,t){isFullObject(e)&&c.callee.apply(e,(c[4]=t,c))}),n&&u.sort(n);else{var f=[];for(var p in u)u.hasOwnProperty(p)&&(f.push([p,u[p]]),a||delete u[p]);o=a?new u.constructor:u,c[3]=null,f.sort(function(e,n){return t(e[0],n[0])}).forEach(function(e){o[e[0]]=d&&isFullObject(e[1])?c.callee.apply(e[1],(c[4]=e[0],c)):e[1]}),a&&l&&(l[s]=o)}return o}.call(e,"number"==typeof t?Math.floor(t):0,n,r,null,null)}function isFullString(e){return"string"==typeof e&&!!e.length}function isFullObject(e){return"object"==typeof e&&null!=e}function stringifyObject(e){try{return JSON.stringify(e)}catch(e){}return""}function copyObject(e){return extendObject({},e,falseFunctor)}function objectAscending(e,t){return null==e||null==t?(null==e)-(null==t):e<t?-1:e>t?1:0}function objectDescending(e,t){return null==e||null==t?(null==e)-(null==t):e<t?1:e>t?-1:0}var time=require("./time"),utils=require("./utils"),seriesKeyNames=["entity","metric","tags","statistic","period","rate","dataType"],seriesSlaKeyNames=["minThreshold","maxThreshold","startWorkingMinutes","endWorkingMinutes"],seriesPeriodKeyNames=["rate","period"],urlKeyNames=["url","contextpath","path","urlparameters"],seriesTypes=["detail","forecast","forecast_deviation","lower_confidence","upper_confidence","percentile","max","min","avg","sum","delta","counter","last","first","min_value_time","max_value_time","count","threshold_count","threshold_percent","threshold_duration"],typeIndices=seriesTypes.reduce(function(e,t,n){e[t]=n},{}),supportedPercentiles=[50,75,90,95,99,99.5,99.9];exports.seriesTypes=seriesTypes,exports.typeIndices=typeIndices,exports.typeIsRaw=typeIsRaw,exports.typeIsDelta=typeIsDelta,exports.typeIsTime=typeIsTime,exports.typeIsSla=typeIsSla,exports.typeIsStat=typeIsStat,exports.typeIsDetail=typeIsDetail,exports.typeIsConfidence=typeIsConfidence,exports.typeHasLevel=typeHasLevel,exports.typeHasInterval=typeHasInterval,exports.typeIsAggr=typeIsAggr,Series.prototype={get display(){return this.params.display},set display(e){this.params.display=e},addAggregatingSeries:function(e){if(this._aggregators){var t=this._aggregators.some(function(t){return t===e});t||this._aggregators.push(e)}else this._aggregators=[e]},getAggregatingSeries:function(){return this._aggregators||[]}},exports.Series=Series,exports.newSeries=newSeries,exports.getSeriesKeys=getSeriesKeys,exports.setSeriesKeysIds=setSeriesKeysIds;var seriesValueId=0;exports.getSeriesKey=getSeriesKey,exports.setComplexKeys=setComplexKeys,exports.getSeriesJson=getSeriesJson;var _unifiedKeysMap={};exports.getUnifiedTags=getUnifiedTags,exports.formatTags=formatTags,exports.tagsToArray=tagsToArray,exports.parseValue=parseValue,exports.replaceTags=replaceTags,exports.toStringSeriesKey=toStringSeriesKey;var nullLevel=[0,0],nullType=["",-1,nullLevel];nullType.isParsedType=nullLevel.isParsedLevel=!0,nullType.toString=nullLevel.toString=toStringSeriesKey,exports.getTypeValue=getTypeValue,function(e){for(var t in e)e[t]=getTypeValue(e[t])}(getTypeValue.aliases={median:"percentile_50",average:"avg",minimum:"min",maximum:"max"}),exports.getLevelValue=getLevelValue,exports.getTypeTitle=getTypeTitle;var weightCoeff=1/203,typeWeights=function(e){for(var t in e)e[t]*=weightCoeff;return e.detail=1,e}({min:0,lower_confidence:200,percentile:200,forecast:201,upper_confidence:201,avg:202,max:404,sum:455}),otherTypeIndex=-1;exports.getTypeWeight=getTypeWeight,exports.getRangeIndex=getRangeIndex,exports.getSeriesColor=getSeriesColor,exports.composeURL=composeURL,exports.getSeriesLabel=getSeriesLabel;var defaultSeriesTitleFormat="entity:metric:tagName=tagValue,tagName=tagValue;tagName:statistic:period:dataType-forecastName:rate";exports.sortObject=sortObject,exports.stringifyObject=stringifyObject;var falseFunctor=d3.functor(!1);exports.copyObject=copyObject,exports.objectAscending=objectAscending,exports.objectDescending=objectDescending},{"./time":15,"./utils":17}],13:[function(e,t,n){function r(){function e(e){var n=new g.DataSeries(w),r=n.typeIndex=e.keys.key.statistic[1],a=m.typeIsDelta(n.typeIndex);return n.isUTC=I,n.movingAverage=!a&&e.params.movingAverage,n.loadFutureData=e.params.loadFutureData,n.interpolateMode=0==e.params.interpolateMode?0:1,m.typeIsStat(r)?(n.period=h.getIntervalValue("1 day"),n.period.isDefault=!0):n.period=e.keys.key.period,t(n,e,!0),n.loadPrevPeriod=a&&n.period[1]>0,e.keys.isRaw?(g.LoadedDataSeries(n),n.maxReloadInterval=e.params.maxReloadInterval,n.hasError=!1,n.updating=0,n.refreshTime=null,n.refreshInterval=null,n.loadFutureData||e.keys.key.timeOffset||(n.intervals.ready=!1)):(g.ComputedDataSeries(n).calculator.vars(d.variables,d.varNamesString).getPointValue(d.getPointValue),!e.keys.isReal&&e.params.frequency&&n.calculator.frequency(e.params.frequency),n.calculator.series=d),n.setTransformInterval(),n}function t(e,t){e.series.push(t)}function n(e,t){var n=e.keys.key;if(n.period[0]!=t[0]){n.period=t;var r=n.raw;m.setComplexKeys(n,e.keys.rec),n.raw!=r?(e.keys.isRaw=!!n.raw,e.keys.json=e.keys.isRaw&&m.getSeriesJson(n,e.keys.rec)):e.keys.json&&(e.keys.json.aggregate.period=h.getAggregateInterval(t),null!=e.keys.json.group&&null==e.keys.json.group.period&&(e.keys.json.group.period=e.keys.json.aggregate.period)),m.setSeriesKeysIds(e.keys,!0)}}function r(e,t){var n=null==e.disconnectInterval&&e.disconnectCount>0?e.disconnectCount:0,r=t.disconnectStep=n?function(){return n*t.getMedianDistance()}:e.disconnectInterval||!1;r&&(t.disconnectValue=d.getCalculator(e.disconnectValue),t.disconnect=v.getDisconnectData(t,r,t.disconnectValue))}function i(e,t,n){var r,a;try{r=e.keys.key}catch(e){return}if(!n&&r.isDummy)return i(e.origin,t,!0);var o;if("tags"===t&&(o=r[t])){a={};for(var l in o)o.hasOwnProperty(l)&&(Array.isArray(o[l])?a[l]=o[l][0]:"string"==typeof o[l]&&(a[l]=o[l]))}else a=r[t];return a}function o(e){var t;return s(e)?t=c(e):(e+="",t=D[searchIndex(function(t){return e<D[t].params.alias},0,D.length-1)-1],t&&e!=t.params.alias&&(t=null)),t}function s(e){return e instanceof g.DataSeries}function c(e){return e.series[0]}var d=Group(),w=[null,null],k=h.getIntervalValue(),T=h.getIntervalValue(),S=h.getIntervalValue(-1,!1,!1,!0),E=S,M=m.getLevelValue(68),I=!1,C=f(),A=null,D=d.sorted=[],O=x.length+1,P=function(e){return e.params.display},L=_.concat({varName:"series",varValue:d});return d.variables=b.concat(L),d.varNames=b.concat(L.map(function(e){return e.varName})),d.varNamesString=d.varNames.join(","),d.calcQuantile=function(e,t,n,r){if(lib.isFiniteNumber(e)){"function"!=typeof t&&(t=n.vars()[3]);var a=n.point.t,i=!n.meta.isMainValue,o=[],l=null==A?P:A,s=n.series.reduce(function(e,r){var s=(!l||l(r))&&(r.origin||r.vars&&r.vars.origins.displayExp||r).data;if(s=null==s?r.data:s,s&&o.indexOf(s)<0){o.push(s),i&&(n.point.t=s.last?s.last.t:a);var u=t(s);lib.isFiniteNumber(u)&&e.push(u)}},[]);i&&(n.point.t=a);var u=s.length;return u?(e=e>0?e<1?Math.quantile(e,u):Math.min(u-1,Math.max(0,e-1)):u-1,s.sort(r)[e]):void 0}},d.addSeries=function(r){var a=r.keys.key;null==r.forceInterval&&(r.forceInterval=!1),m.typeHasInterval(a.statistic[1])&&!a.period[0]&&E[0]&&n(r,E);var i=r.rel=u(r,d);if(i[1]&&p(r.params,C,i),r.mainParams=l(r,d),null==r.data){i=d.some(function(e){return e.keys.id===r.keys.id});var s=r.data=i?i.data:e(r);s&&i&&t(s,r)}d.add(r);var c,f=r.params.alias;return null==f||o(f,!1)||(c=searchIndex(function(e){return f<D[e].params.alias},0,D.length-1),D.splice(c,0,r)),d},d.setValue=function(e){function t(e,t,n){function r(e){return e(a.data)+o*(t[2][0]||M[0])*e(i.data)}if(m.typeIsStat(t[1])){var a=d.getStatistic(e,"forecast",k,!1),i=d.getStatistic(e,"forecast_deviation",k,!1),o=t[1]==m.typeIndices.lower_confidence?-1:1,l=e.params.minimum,s=e.params.maximum;return null!=l&&null!=s?function(e){return Math.max(l,Math.min(s,r(e)))}:null!=l?function(e){return Math.max(l,r(e))}:null!=s?function(e){return Math.min(s,r(e))}:r}var u=d.getStatistic(e,e.keys.isStat?e.keys.key.dataType:"detail",k,!1);u.addAggregatingSeries(e);var c=e.data.calculator.vars()[O+t[1]],f=m.typeHasLevel(t[1]);return function(){return f?c(t[2],u.data,n):c(u.data,n)}}var n=e.data;if(n.calculator){var r=e.keys.key,a=e.keys.isDetail?e.keys.rec.value:t(e,r.statistic,r.period),i=e.keys.isThreshold||r.period[1]<0||null;n.calculator.value(a,i),n.isConstant()&&(n.interpolate=g.constantInterpolator,e.keys.isThreshold=!0)}return d.fireSetValue(e),d},AddEvent(d,"SetValue").onSetValue(function(e){var t=e.data;null==t.disconnectStep&&t.getMedianDistance&&r(e.params,t)}),d.getCalculator=function(e,t,n){if(!n&&"function"==typeof e)return e;if(e=m.parseValue(e)){var r=y.Calculator().isUTC(I).vars(d.variables,d.varNamesString).getPointValue(d.getPointValue);return"function"==typeof t&&r.valueFilter(t),r.value(e),r.series=d,r}},d.getPointValue=function(e,t,n){var r=e.callee.varIndex-O,l=n.isMainValue,u=!l,f=m.typeHasLevel(r)&&(!m.typeIsConfidence(r)||e.length>1||u&&"number"==typeof e[0])?1:0,p=m.getLevelValue(f&&e[0],r);if(!f||p[0]){var v=(l||s(n.caller))&&n.caller,y=!m.typeHasInterval(r),b=e.length>f?e[f]:v,_=!y&&u&&e.length==f+1&&h.getIntervalValue(b);_&&_[0]?b=v:_=h.getIntervalValue(!y&&e[f+1]);var w=y?_:_[1]?_:_=l?v.series[0].keys.key.period:k;if(!y&&!w[1]){if(!(w=E)[1])return;l&&(_=w)}var S=v&&b==v,M=S?c(v):o(b);if(M){var C;if(e.callee.varIndex<x.length){var A=x[e.callee.varIndex];return C=i(M,A),null!=C?[null,C]:null}if(r>=0&&!m.typeIsTime(r)&&M.keys.isDetail){var D=[m.seriesTypes[r]+(p[1]?"_"+p[1]:""),r,p];D.isParsedType=!0,D.toString=m.toStringSeriesKey;var P=d.getStatistic(M,D,_,!1,!1,!1);P&&(!v||v.series.indexOf(P)<0)&&(M=P,y=!0,S=!1)}var L=S?v:M.data;if(L&&(!L.calculator||!L.calculator.isProcessing())){var N=l||w[1]?w:T;return n.transformMethod=g.getTransformMethod(N,r,!1,v.movingAverage,I),L.process(n),y&&(w=L.period),l&&l&&w[1]>=0&&(null==n.period||n.period[1]>w[1])&&(n.period=w),C=y?L.interpolate(t,h.getMaximumPeriod(w)[1]||null,l?v.interpolateMode:null,l?v.roundTo:0):a(t,L,r,w,p,!1,v.movingAverage)}}}},d.selectInterval=function(e,t){var n=e.keys.key;if(n.period[0]){if(n.period[0]==t[0])return e;var r=d.getStatistic(e,n.statistic,t,!1,!0);if(r)return r}return e},d.selectType=function(e,t){var n=m.typeHasInterval(t[1])||e.forceInterval,r=n?e.keys.key.period[0]?e.keys.key.period:E:k;return!n||r[0]?d.getStatistic(e,t,r,!1,!0):e},d.getStatistic=function(e,t,n,r,a,i){s(e)&&(e=c(e)),t=m.getTypeValue(t);var o=e.keys,l=!o.isSla&&m.typeIsSla(t[1])||!o.isReal&&(m.typeIsStat(t[1])||!m.typeIsDetail(t[1])&&m.typeIsRaw(t[1]));if(l)return null;n=h.getIntervalValue(n);var u=m.typeIsAggr(t[1]),f=o.key,p=!a&&u&&o.isStat&&(f.dataType||f.statistic[0])||void 0,g=[t[0],n[0],p].join(":"),v=e.related[g];if(null==v){null==r&&(r=!0),null==i&&(i=!0),null==a&&(a=!1);var y=f.statistic[0]==t[0];f=m.copyObject(f),f.period=n,f.statistic=t,f.dataType=p;var x=r&&e.config&&m.copyObject(e.config);x&&(x.period=n[0],x.noInterval=!1,x.statistic=t[0],x.dataType=p),y||m.setComplexKeys(f,o.rec);var b=m.stringifyObject(f);if(v=d.some(function(e){return e.keys.id===b}),!v&&i){var _,w=e,k=(f.period=void 0,m.stringifyObject(f)),T=!y&&d.some(function(e){return e.keys.fullTypeId==k});f.period=n,T&&(y=!0,w=T),_=y?extendObject({},w.params):{},_.display=a,v=new m.Series(x,m.getSeriesKeys(f,w.keys.rec)),v.keys.meta=w.keys.meta,v.params=_,v.related=w.related,v.url=w.url,v.forceInterval=w.forceInterval,v.original=!1,d.addSeries(v).setValue(v),v.keys.meta&&v.fire("metaset"),!y&&w.vars&&w.vars.calc.displayExp&&(v.vars.calc.displayExp=w.vars.calc.displayExp,v.vars.origins.displayExp=w),T&&(T.related[g]=v)}m.typeIsDetail(t[1])&&(v.data.loadPrevPeriod=v.data.loadPrevPeriod||e.data.loadPrevPeriod,v.data.maxAggregatorPeriod[1]<e.data.period[1]&&(v.data.maxAggregatorPeriod=e.data.period)),e.related[g]=v}return v},d.confidenceLevel=function(e){return arguments.length?(M[0]!=e[0]&&(M=e,d.forEach(function(e){e.keys.isConfidence&&!e.keys.key.statistic[2][0]&&e.data&&e.data.spliceData()})),d):M},d.isUTC=function(e){return arguments.length?(I=e,d):I},d.quantileFilter=function(e){return arguments.length?(A=e,d):A},d.updateable=function(e){return arguments.length?(P=e,d):P},d.parameters=function(e){return arguments.length?(C=e,d):C},d.autoInterval=function(e){return arguments.length?(E=e,d):E},d.arrayType=function(e){return arguments.length?(w=e,d):w},d.startVarIndex=function(e){return arguments.length?(O=e,d):O},d}function a(e,t,n,r,a,o,l){if(r[1]<0||r.isTimespan){var s=r.getTimespanWindow();if(e.mode)return e.t===1/0?s.end:e.t===-(1/0)?s.start:e.t;var u=d3.bisectLeft(t.t,s.start),c=d3.bisectRight(t.t,s.end);return u===c?null:[null,i(t,u,c,n,a)]}var d=n==m.typeIndices.sum||n==m.typeIndices.count;null==o&&(o=t.intervals);var f=(o?o.length:t.len)-1;if(f<0)return null;var p,g,v=h.roundTime(e.t,r,!1,t.isUTC),y=h.roundTime(e.t+1,r,!0,t.isUTC);if(o){switch(e.mode){case-2:return g=searchIndex(function(e){return v<o[e][0]},0,f)-1,g<0||o[g][1]<=v?null:v;case-1:return g=searchIndex(function(e){return v<o[e][1]},0,f),g>f?null:v<o[g][0]?h.roundTime(o[g][0],r,!1,t.isUTC):v;case 1:return g=searchIndex(function(e){return y<=o[e][0]},0,f)-1,g<0?null:y>o[g][1]?h.roundTime(o[g][1],r,!0,t.isUTC):y;case 2:return g=searchIndex(function(e){return y<=o[e][1]},0,f),g>f||o[g][0]>=y?null:y}g=searchIndex(function(e){return y<o[e][1]},0,f),p=g>f?null:y<o[g][0]?h.roundTime(o[g][0],r[1],!1,t.isUTC):y}else{var x=h.roundTime(t.t[0],r,!1,t.isUTC),b=h.roundTime(t.t[f],r,!1,t.isUTC);switch(e.mode){case-2:return v>b||v<x?null:v;case-1:return v>b?null:Math.max(v,x);case 1:return v<x?null:Math.min(y,b+r[1]);case 2:return v<x||v>b?null:y}p=v<b?Math.max(y,x):null}l&&t.last&&y>t.last.t+t.period[1]&&v<=t.last.t&&(v=t.last.t-r[1]+1);var _,w=searchIndex(v,t.t),k=searchIndex(y,t.t,!1,Math.max(0,w),t.len-1);return w<k?_=i(t,w,k,n,a):o&&(g=searchIndex(function(e){return y<=o[e][0]},0,f)-1,g>=0&&v<o[g][1]&&(_=d?0:null)),[p,_]}function i(e,t,n,r,a){function i(){for(var e=t,r=0;e<n;r+=l[e++]);return r}function o(){return e.rangeFn&&e.rangeFn.array()?e.rangeFn():w.array(l)()}var l=e.v;switch(r){case m.typeIndices.max:return l[o().getMax(t,t+1,n-1)];case m.typeIndices.min:return l[o().getMin(t,t+1,n-1)];case m.typeIndices.max_value_time:return e.t[o().getMax(t,t+1,n-1)];case m.typeIndices.min_value_time:return e.t[o().getMin(t,t+1,n-1)];case m.typeIndices.avg:return i()/(n-t);case m.typeIndices.sum:return i();case m.typeIndices.count:return n-t;case m.typeIndices.percentile:return Array.prototype.slice.call(l,t,n).sort(lib.number.ascending)[Math.quantile(a[0],n-t)];case m.typeIndices.delta:return l[n-1]-l[t&&t-1];case m.typeIndices.counter:for(var s,u=0,c=null,d=t&&t-1;d<n;d++)(s=l[d])>=0&&(u+=(s=-(null==c?s:c)+(c=s))<0?c:s);return u;case m.typeIndices.first:return l[t];case m.typeIndices.last:return l[n-1]}}function o(e,t,n,r){t=m.getTypeValue(t),n=h.getIntervalValue(n);var i=new m.Series(null,m.getSeriesKeys.apply(this,m.getSeriesKey({value:function(e){return e()}})));i.params=e.params,i.origin=e,i.original=!0,i.summarizeType=t,i.summarizePeriod=n,r.addSeries(i);var o=e.data,l=!o.calculator&&null,s=g.getTransformMethod(n,t[1],!1,!0,r.isUTC()),u=i.data;return u.calculator.valueFilter(function(e){return lib.isFiniteNumber(e)||null===e}).getPointValue(function(e,r,i){if(o&&(!o.calculator||!o.calculator.isProcessing()))return i.transformMethod=s,o.process(i),a(r,o,t[1],n,t[2],l,!0)}),u.period=n,u.setTransformInterval(),u.un("calleechange"),o.on("intvchange",function(e){u.spliceData(null,s(e,1))}),r.setValue(i),i}function l(e,t){function n(e){e.origin||(e.keys.legendTitle=m.getSeriesLabel(e,e.params.labelFormat||M))}var r=e.params,a={};return n(e),e.on("metaset",function(){n(e),e.params.legendLabel=I.legendLabel(null,null,e),e.fire("labelchanged",e.keys.legendTitle)}),{series:e,seriesGroup:t,params:r,isVisible:function(){return r.display!==!1&&(!r.hidden&&(!e.keys.key.multipleSeries&&(!e.vars||!(e.vars.calc.displayExp&&!e.vars.values.displayExp)&&!(e.vars.calc.enabledExp&&!e.vars.values.enabledExp))))},isDisplayed:function(){return r.display!==!1&&(!e.keys.key.multipleSeries&&(!e.vars||(!e.vars.calc.displayExp||e.vars.values.displayExp)))},displayInLegend:function(){return r.displayInLegend!==!1&&(!(!e.display&&r.display===!1)&&(!e.vars||!e.vars.calc.displayExp||e.vars.values.displayExp))},getColor:function(){return"function"==typeof r.color?r.color():r.color},getFormat:function(e,n){var i,o=r.format||t.parameters().formats.value;return o.maxPow&&e&&n&&null!=(i=g.getRangePrecision(e,o,n))?a[i]||(a[i]=function(e){return o(e,i)}):o},getTitle:function(){return(e.origin||e).keys.legendTitle},getTooltip:function(){return null==r.tooltip&&e.keys.isReal&&e.keys.label||r.tooltip},getLast:function(){return e.data.last},getLastValue:function(){var e=this.getLast();return e?e.v:null}}}function s(e,t){var n=null,r=e.keys.key.period[1],a=Number.POSITIVE_INFINITY;return t.forEach(function(t){if(t.keys.typeId===e.keys.typeId){var i=t.keys.key.period[1];Math.abs(r-i)>=a||(n=t,a=Math.abs(r-i))}}),n}function u(e,t){var n,r=s(e,t),a=e!=r&&r||!1;a?n=a:(r=t.some(function(t){return t.keys.metricId===e.keys.metricId}),n=e!=r&&r||!1);var i=!n;if(n&&n.params!=e.params){var o=e.keys.key.statistic,l=n.keys.key.statistic;i={},i.type=!!a;var u=d(o,l);i.measure=u>0,i.quantity=u>1,i.isStat=n.keys.isStat==e.keys.isStat}return[n&&n.params,i,e,n,t]}function c(e){return m.typeIndices[e]}function d(e,t){if(e[0]&&e[0]==t[0])return 2;var n=e[1],r=t[1];if(n<0||r<0)return 0;if(n==r)return 2;var a=D.indexOf(n)<0?D.indexOf(r)<0:A.indexOf(n)>=0&&A.indexOf(r)>=0||C.indexOf(n)>=0&&C.indexOf(r)>=0;return a?O.every(function(e){return n!=e||r==e})?2:1:0}function f(e){arguments.length||(e=I);var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r&&null!=r&&(r=instanceofArray(r)?r.slice(0):f(r)),t[n]=r}return t}function p(e,t,n){for(var r in t)if(!e.hasOwnProperty(r)&&t.hasOwnProperty(r)){var a=t[r];"function"==typeof a&&(a=a.apply(t,n)),void 0!==a&&(e[r]=a)}return e}var h=e("./time"),g=e("./dataseries"),v=e("./disconnect"),m=e("./series"),y=e("./calculator"),x=["metric","entity","tags"],b=x.concat(["value"]).concat(m.seriesTypes),_=[{varName:"time",varValue:function(e,t){return t.point.t}},{varName:"bottom",varValue:function(e,t){return t.series.calcQuantile(e[0],e[1],t,lib.number.ascending)}},{varName:"top",varValue:function(e,t){return t.series.calcQuantile(e[0],e[1],t,lib.number.descending)}}].concat(Object.getOwnPropertyNames(m.getTypeValue.aliases).map(function(e){var t=m.getTypeValue.aliases[e],n=t[1],r=t[2][1];return{varName:e,varValue:function(e,t){return r&&(e=[r].concat(Array.prototype.slice.call(e,0))),t.vars()[t.series.startVarIndex()+n].apply(this,e)}}}));n.SeriesGroup=r,n.getAggregateValue=a;var w=RangeFn();n.addAggregateSeries=o;var k=216e5,T=[],S="entity: metric: tags",E="entity\nmetric\ntags",M="label: statistic - period: dataType - forecastName: rate",I={counter:{colorRandom:0,colorLeft:0,colorRight:0,Threshold:0,Series:0,Other:0},defaultValues:{},display:!0,hiddenMetrics:{},hidden:function(e,t,n){return!!this.hiddenMetrics[n.keys.metricId]},displayInLegend:function(e,t,n){return!e||e.displayInLegend},colors:defaultColors,palette:defaultPalette,color:function(e,t,n){var r,a=this;return function(t){if(t||(t=n),null==r)if(t.params.colorIsDefault=!0,e)r=e.color;else if(t.params.isOther)r="lightgray";else{var i=a.counter.colorLeft+a.counter.colorRight<a.colors.length,o=i?t.mainParams.isDisplayed()&&t.params.displayInLegend!==!1?a.counter.colorLeft++:a.colors.length-++a.counter.colorRight:a.counter.colorRandom++;r=i?a.colors[o]:T[o]||(T[o]=newColor())}return e?d3.functor(r)(t):r}},movingAverage:function(e){return e?e.movingAverage:0!=this.defaultValues.movingaverage},axisIndex:function(e,t){return e?t.measure?e.axisIndex:1-e.axisIndex:0},minRange:function(e,t,n){return t.quantity&&n.params.axisIndex==e.axisIndex?e.minRange:n.params.axisIndex?this.defaultValues.minrangeright:this.defaultValues.minrange},maxRange:function(e,t,n){return t.quantity&&n.params.axisIndex==e.axisIndex?e.maxRange:n.params.axisIndex?this.defaultValues.maxrangeright:this.defaultValues.maxrange},minimum:function(e,t){return t.quantity?e.minimum:null},maximum:function(e,t){return t.quantity?e.maximum:null},threshold:function(){return this.defaultValues.threshold},thresholdValues:function(e,t,n){var r=n.params.minRange,a=n.params.maxRange,i=n.params.threshold;if(null!=r&&null!=a){var o=d3.functor([r,null==i?(r+a)/2:i,a]);return o.constantValue=o,o}},disconnectCount:function(e,t){return t.isStat?e.disconnectCount:null},lastMarker:function(e,t,n){return t.isStat?e.lastMarker:null==(e=this.defaultValues.lastmarker)?!n.keys.isStat&&!n.keys.isThreshold:e},markers:function(e,t,n){return t.isStat?e.markers:null==(e=this.defaultValues.markers)?!n.keys.isStat&&!n.keys.isThreshold:e},stepline:function(e,t,n){return null==(e=this.defaultValues.stepline)?!m.typeIsDetail(n.keys.key.statistic[1]):e},label:function(e){return e.label},labelFormat:function(e){return e.labelFormat||this.defaultValues.labelFormat},tooltip:function(e){return e.tooltip},defaultLabel:function(e,t,n){if(n.keys.isReal)return m.getSeriesLabel(n,S);var r=n.params.isOther,a=r?"Other":n.params.isThreshold?"Threshold":"Series",i=++this.counter[a];return a+(r&&i<2?"":"-"+i)},axisLabel:function(e,t,n){return null==n.params.label?m.getSeriesLabel(n,E):n.params.label},legendLabel:function(e,t,n){return null==n.params.label?null!=n.params.labelFormat?m.getSeriesLabel(n,n.params.labelFormat):n.params.defaultLabel:n.params.label},formats:{time:d3Format("%Y-%m-%dT%H:%M:%SZ"),value:defaultValueFormat,interval:intervalFormat(),number:addCommas},format:function(e,t,n,r,a){if(t.measure)return e.format;var i=this.formats;switch(n.keys.key.statistic[1]){case m.typeIndices.max_value_time:return i.time;case m.typeIndices.min_value_time:return i.time;case m.typeIndices.count:return i.number;case m.typeIndices.threshold_count:return i.number;case m.typeIndices.threshold_percent:return function(e){return i.value(e)+"%"};case m.typeIndices.threshold_duration:return i.interval}return this.defaultValues.format},loadFutureData:function(e,t,n){return null!=e.loadFutureData&&t.isStat?e.loadFutureData:n.keys.isStat},refreshInterval:function(e){return e.refreshInterval},emptyRefreshInterval:function(e){return e.emptyRefreshInterval},emptyThreshold:function(e){return e.emptyThreshold},errorRefreshInterval:function(e){return e.errorRefreshInterval},maxReloadInterval:function(e){return null==e.maxReloadInterval?k:e.maxReloadInterval},lastValueLabel:function(e,t,n){return t.isStat?e.lastValueLabel:!n.keys.isStat&&!0},seriesClass:function(e,t){return t.measure?e.seriesClass:""},interpolateMode:function(e){return e.interpolateMode}},C=["max_value_time","min_value_time"].map(c),A=["count","threshold_count"].map(c),D=C.concat(A).concat(["threshold_percent","threshold_duration"].map(c)),O=["sum","delta","counter","count","threshold_count"].map(c)},{"./calculator":6,"./dataseries":8,"./disconnect":9,"./series":12,"./time":15}],14:[function(e,t,n){function r(){function e(e,t){if(null!=e&&(null==t?t=u:t).length){var n=t.some(function(t,n){return e<t.range[1]});if(!n){var r=t[t.length-1];return e>r.range[1]||t[0].range[0]<r.range[1]?r:t[0]}return n}return!1}function t(e){return{groups:e&&e.length?e:null}}function n(e,t,r){if(e.range=t,!r&&e.groups){var a=e.groups.length,i=t&&t[0],o=t&&t[1],l=t&&lib.isFinite(i)&&lib.isFinite(o),s=l&&(o-i)/a--;e.groups.forEach(function(e,r){var l=t&&(s||!r?[i,r<a?i+=s:o]:null);n(e,l)})}}var r=e.root=t([t()]),o=null,l=null,s=[],u=[];return e.sections=function(){return u},e.setValues=function(i){Array.isArray(i)?1==i.length&&(i[1]=i[0]):i="number"==typeof i?[i,i]:[];var o=Math.max(1,i.length-1);o!=r.groups.length&&(r.groups=a(r.groups.reduce(function(e,t){return t.groups?e.concat(t.groups):e},[]),o).map(function(e){return t(e)}));var l,s,c=!0;i.forEach(function(e,t){var a=null;"number"!=typeof e||isNaN(e)||(c?(l=e,c=!1):a=[s,e=Math.max(s,e)],s=e),t&&n(r.groups[t-1],a)}),n(r,c?null:[l,s],i.length>=2);var d=r.groups.filter(function(e){return e.range});return d.forEach(function(e,t){!(e.range[0]<e.range[1])&&t&&t<d.length-1&&n(e,null)}),u=e.getSections(),e},e.getSections=function(t,n,a,i){switch(arguments.length){case 0:t=0;case 1:n=function(e){return e.range};case 2:a=r;case 3:i=[]}return n(a)&&(a.groups&&--t?a.groups.forEach(function(r){e.getSections(t,n,r,i)}):i.push(a)),i},e.allColors=function(){return o},e.gradient=function(){return l},e.palette=function(u,c,d){if(!arguments.length)return s;s=u,l=i.apply(this,arguments),o=l.reduce(function(e,t){return e.concat(t)});var f=a(l.map(function(e,n){var r=t();return r.tint=s[n],r.groups=e.map(function(e){var n=t();return n.tint=e,n}),r}),r.groups.length);return r.groups.forEach(function(e,t){e.groups=f[t].length?f[t]:null,n(e,e.range)}),e},e}function a(e,t){for(var n=Math.floor(e.length/t),r=e.length-n*t,a=[],i=0,o=0;i<t;i++)a.push(e.slice(o,o+=n+(i<r)));return a}function i(e,t,n,r){if(instanceofArray(e)){var a=Math.floor(e.length/2);return e.map(function(e,r){return i(e,t,n&&n[Math.min(r,n.length-1)],r>=a)||[e]})}if(null!=e&&n>0&&t&&(t[0]||n>1&&t[1])){for(var o=t[1]-t[0],l=o?n-1:0,s=[],u=0;u<=l;u++)s.push(interpolateColor(e,t[0]+u/l*o));return r?s.reverse():s}return null}function o(e){function t(e){function t(){if(i){r.forEach(function(e,t){e&&(n[t]=null)});for(var e=0,t=a.v;e<t.length;e++){var o=t[e];r[0]&&(!e||n[0]>o)&&(n[0]=o),r[2]&&(!e||n[2]<o)&&(n[2]=o),r[1]&&(n[1]+=o)}r[1]&&null!=n[1]&&(n[1]/=t.length),i=!1}return n}var n=[e.params.minRange,e.params.threshold,e.params.maxRange],r=n.map(function(e){return null==e}),a=(e.origin||e).data;if(!r[1]||r[0]||r[2]||(r[1]=!1,n[1]=(n[0]+n[2])/2),!r.some(identity)||!a)return d3.functor(n);var i=!1;return a.on("change",function(){i=!0}),t.isNull=r,t}var n=!1,a=e.series;return e.getLegendData=function(t,n,r){function i(){var t=s.filter(function(t){return o(e.getSeriesPalette(t))});return t.length?t:null}function o(e){return arrayEquals(u,e)}function l(){var e=v.reduce(function(e,t){return e&&e.every(function(e,n){return arrayEquals(e.range,t[n].range)})&&t});return e?e.map(function(e){return e.range}):null}var s=a.filter(function(e){return e.thresholds&&e.params.display&&!e.params.hidden&&e.params.displayInLegend}),u=n,c=s.length&&(i()||(u=e.getSeriesPalette(s[0]),i())||(u=n,null)),d=c&&r?c[0].thresholds.allColors():u,f=e.getLegendData.types,p=d.map(function(e){return{color:e,type:f.color}}),h={type:f.color};if(p.samePalette=o,p.paletteSeries=c,!c)return p.unshift(h),p;var g=null,v=null,m=null,y=t&&[];return p.forEach(function(e,t){e.getTooltip=function(){return m&&m[t]},y&&t&&y.push({getValue:function(){return m&&m[t]&&m[t][0]},isTick:!0,type:f.tick})}),y&&y.forEach(function(e,t){p.splice(2*t+1,0,e)}),p.unshift({getValue:function(){if(m=l())for(var e=0;e<m.length;e++)if(m[e])return m[e][0]},type:f.range}),p.unshift(h),p.push({getValue:function(){if(m)for(var e=m.length;e-- >0;)if(m[e])return m[e][1]},type:f.range}),p.getFormat=function(){var e=g.some(function(e){return e.params.format})||g[0];return e.mainParams.getFormat()},(p.activeSeries=function(e){return arguments.length?arrayEquals(g,e)?void 0:(g=e,v=e.map(function(e){return e.thresholds.getSections(r?0:3,d3.functor(!0))}),!0):g})(c),p},e.getLegendData.types={color:0,range:1,tick:2},e.getSeriesPalette=function(e){return e.params.palette},e.getDefaultPalette=function(e){return a.parameters().palette},e.varNames().push("thresholdValues"),a.onItemAdd(function(a){if(a.mainParams.isVisible()){var i=e.getSeriesPalette(a);if(i){var o=a.params,l=o.thresholdValues||n&&(o.thresholdValues=t(a));l&&(a.thresholds=r().palette(i,o.gradientIntensity,o.gradientCount))}}},!0),e.on("seriesupdate",function(){a.reduce(function(e,t){var n=t.thresholds&&t.params.rangeMerge&&t.vars.calc.thresholdValues.isNull;n&&n.forEach(function(n,r){n&&e[r].push(t)})},[[],[],[]]).forEach(function(e,t){if(e.length){var n=1,r=e.reduce(function(e,r){var a=r.vars.values.thresholdValues[t];return null==e?a:null==a?e:0==t?Math.min(e,a):2==t?Math.max(e,a):(n++,e+a)},null);null!=r&&(1==t&&(r/=n),e.forEach(function(e){e.vars.values.thresholdValues[t]=r}))}}),a.forEach(function(e){e.thresholds&&e.thresholds.setValues(e.vars.values.thresholdValues)})}),e.setDefaultThresholds=function(t){return arguments.length?(n=t,e):n},e}n.Thresholds=r,n.setThresholds=o},{}],15:[function(e,t,n){function r(e){var t=D.indexOf("day");return e.reduce(function(e,n,r){var a=e.names[r];e.map[a]=r?n*=e.arr[Math.min(r-1,t)].v:n,e.arr[r]={n:a,v:n}},{arr:[],map:{},names:D,len:D.length})}function a(e,t,n,r,i){switch(i||(i=O),typeof e){case"object":if(e&&e.isParsedInterval)return e;break;case"number":if(!lib.isFinite(e))return n||t?null:L;var o=(e=Math.round(e))>0?1:e<0?-1:0;if(1!=o){if(!r)return n?null:t?0:L;if(e=-e,!o)return n?null:L}for(var l=i.len;l-- >0;){var s=i.arr[l];if(!(e%s.v)){var u=Math.round(e/s.v),c=[o*u+"="+s.n,o*e,o*u,l];return n?(c=[c],c.total=c[0][1]):c.toString=C.toStringSeriesKey,c.isParsedInterval=!0,c}}return n?null:!t||r?L:0;case"string":var d=/(([A-Za-z]+?)(S|s)?)([^A-Za-z]|$)/g,f=0,p=!1,c=n?[]:0,o=1;do{var h=d.exec(e),g=h&&h[2].toLowerCase(),v=null==g;if("min"===g&&(g="minute"),"sec"===g&&(g="second"),v||i.map.hasOwnProperty(g)){var u=e.substring(f,v?e.length:(f=d.lastIndex-(h[4]?1:0))-h[1].length);if(u=u.replace(/^\s*,?\s*(\-|\+)?\s*/,function(e,t){return t&&(o="-"==t?-1:1),""}),u?lib.isFinite(u=parseFloat(u)):!v&&(u=1)){p=!0;var m=o*u*(h?O.map[g]:1e3);n?c.push(m):c+=m;continue}}h&&(p=!1)}while(p&&h);if(p){if(n){var y=0;return c=c.reduce(function(e,n){var i=a(n,t,!1,r);i&&i[1]&&(e.push(i),y+=i[1])},[]),c.length?(c.isParsedInterval=!0,c.total=y,c):null}return a(c,t,!1,r)}}return n||t?null:L}function i(e){if(!e[0])return e[0];var t=e[0].split("="),n=t[1];return t[0]+("month"==n?"M":"millisecond"==n?"ms":n[0])}function o(e){var t={count:e[2],unit:O.arr[e[3]].n.toUpperCase()};return e.align&&(t.align=e.align),e.isTimespan&&(t.align="END_TIME"),t}function l(e,t,n){function r(e,t){var i=O.arr[t].v,s=a(Math.ceil(e/i-.5)*i);return s[1]>o&&s[1]<l?s:t>n?r(e,t-1):null}e=a(e[1]>=0&&e),t=a(t[1]>=0&&t),null==n&&(n=e[3]-1);var i=O.len-1,o=e[1],l=t[1];if(l){var s=(o+l)/2;return r(s,i)}if(o){var u=O.arr.some(function(e){return o<e.v});if(u)return a(u.v);var c=O.arr[i].v;return a((Math.floor(o/c)+1)*c)}return null}function s(e){return e[3]<N?e:e.maxPeriod||function(){return e.maxPeriod=lib.getIntervalValue(e[0],null,null,null,P)}()}function u(e,t,n,r){function a(){return n&&l.getTime()<e?1:0}function i(e){r?l.setUTCDate(l.getUTCDate()+e):l.setDate(l.getDate()+e)}function o(){return lib.object.ascending(e,l.getTime())}if(!lib.isFinite(e=+e))return e;var l,s,u,d,f,p,h=t[3],g=t[2];if(h<=2||3==h&&24%g)return c(e,t[1],n);if(3==h)l=b(new Date(e),r),s=r?l.getUTCHours():l.getHours(),1==g?a()&&(r?l.setUTCHours(s+1):l.setHours(s+1)):(u=c(s+a(),g,n),d=u,r?l.setUTCHours(d):l.setHours(d));else if(h<=5){var v=5==h,m=1;if(1==g){if(l=_(new Date(e),r),v){var y=m-(r?l.getUTCDay():l.getDay());i(y>0&&!n?y-7:y)}a()&&i(v?7:1)}else{l=w(new Date(F),r),s=Math.round(e/t[1])*(v?g*=7:g),i(s+(v?m-(r?l.getUTCDay():l.getDay()):0));var x=o();if(x)do i(x*g);while(x==(x=o()));x&&x>0==!!n&&i(x*g)}}else switch(l=_(new Date(e),r),r?l.setUTCDate(1):l.setDate(1),h){case 6:1==g?a()&&(r?l.setUTCMonth(l.getUTCMonth()+1):l.setMonth(l.getMonth()+1)):(s=(r?l.getUTCMonth():l.getMonth())+12*(r?l.getUTCFullYear()-F.getUTCFullYear():l.getFullYear()-F.getFullYear()),u=c(s+a(),g,n),f=Math.floor(u/12),p=u-12*f,r?l.setUTCFullYear(f+F.getUTCFullYear()):l.setFullYear(f+F.getFullYear()),r?l.setUTCMonth(p):l.setMonth(p));break;case 7:s=(r?l.getUTCMonth():l.getMonth())/3+4*(r?l.getUTCFullYear()-F.getUTCFullYear():l.getFullYear()-F.getFullYear()),u=c(s+a(),g,n),f=Math.floor(u/4),p=3*(u-4*f),r?l.setUTCFullYear(f+F.getUTCFullYear()):l.setFullYear(f+F.getFullYear()),r?l.setUTCMonth(p):l.setMonth(p);break;case 8:r?l.setUTCMonth(0):l.setMonth(0),s=r?l.getUTCFullYear():l.getFullYear(),u=c(s+a(),g,n),f=u,r?l.setUTCFullYear(f):l.setFullYear(f)}return l.getTime()}function c(e,t,n){return t*(n?Math.ceil:Math.floor)(e/t)}function d(e){return(e=a(e,!0))&&e[1]}function f(e,t){var n=e.timespan;if("string"!=typeof n||"all"===n.toLowerCase())return n;var r=e.starttime,a=e.endtime;Array.isArray(r)&&(r=r[r.length-1]),Array.isArray(a)&&(a=a[a.length-1]);var i=/^utc$/i.test(e.timezone);if(r=h(r,i),a=h(a,i),"function"==typeof r&&(r=r()),"function"==typeof a&&(a=a()),null!=r&&null!=a)return a-r;null==r&&null==a&&(r=Date.now());var o,l;null!=r?(o=r,l=1):(o=a,l=-1);var s=o;o=new Date(o);var u=t?/^\s*((\+|\-)\s*\d+(\.\d+)?\s*\*?\s*[A-Za-z]+\s*)*$/g:/^\s*(\d+(\.\d+)?\s*[A-Za-z]+\s*)*$/g;if(!u.test(n))throw Error("invalid time interval: "+n);for(var c,d=t?/\s*(\+|\-)\s*(\d+(?:\.\d+)?)\s*\*?\s*([A-Za-z]+)\s*/g:/\s*(\d+(?:\.\d+)?)\s*([A-Za-z]+)\s*/g;c=d.exec(n);){var f,p;if(t){var g="-"==c[1]?-l:l;f=g*c[2],p=c[3].toLowerCase()}else f=l*c[1],p=c[2].toLowerCase();switch(p){case"year":o.setFullYear(o.getFullYear()+f);break;case"quarter":o.setMonth(o.getMonth()+3*f);break;case"month":o.setMonth(o.getMonth()+f);break;case"week":o.setTime(o.getTime()+6048e5*f);break;case"day":o.setTime(o.getTime()+864e5*f);break;case"hour":o.setTime(o.getTime()+36e5*f);break;case"min":case"minute":o.setTime(o.getTime()+6e4*f);break;case"sec":case"second":o.setTime(o.getTime()+1e3*f);break;case"millisecond":o.setTime(o.getTime()+f);break;default:throw Error("invalid interval units: "+p)}}return l*(o.getTime()-s)}function p(e){var t=e/120,n=z.length-1,r=z.some(function(e,r){return r===n||e>=t}),i=V[z.indexOf(r)];return a(i)}function h(e,t,n){function r(e){return null==e?Date.now():e}function a(t){return M(e,r(t),a.isUTC)}function i(t){if(!n){var a=e.split(/(\+|\-)/,1)[0],o=e.substr(a.length),l=+h(a,i.isUTC,!0)(),s={timespan:o,starttime:l,isUTC:i.isUTC?"utc":"local"};return l+f(s,!0)}var u;if(e&&["return ("+e+")",e].some(function(e){try{return u=Function(j,e),!0}catch(e){}}),u){var c=H[i.isUTC?1:0];q.time=c[0]=r(t),q.now=c[1]=c[0],q.today=q.currentHour=q.currentMinute=null;var d=u.apply(this,c);return A.isEvalMethod(d)?d():d}}if("string"!=typeof e){if(!instanceofArray(e))return e;e=e.join("\n")}var o=M(e,r(),t);if(o instanceof Date)return a.isUTC=t,a;i.isUTC=t;try{return i(),i}catch(e){}}function g(e,t){return null==e||lib.isFinite(e=+("function"==typeof e?e(t):e))?e:null}function v(e){return null==q.today&&(q.today=w(m(e),e)),new Date(q.today.getTime())}function m(e){return null==q.currentHour&&(q.currentHour=b(y(e),e)),new Date(q.currentHour.getTime())}function y(e){return null==q.currentMinute&&(q.currentMinute=x(new Date(q.time),e)),new Date(q.currentMinute.getTime())}function x(e,t){return(t?e.setUTCSeconds:e.setSeconds).call(e,0),(t?e.setUTCMilliseconds:e.setMilliseconds).call(e,0),e}function b(e,t){return(t?e.setUTCMinutes:e.setMinutes).call(x(e,t),0),e}function _(e,t){return w(b(e,t),t)}function w(e,t){return(t?e.setUTCHours:e.setHours).call(e,0),e}function k(e,t,n){return t&&(n?e.setUTCDate:e.setDate).call(e,(n?e.getUTCDate():e.getDate())+t),e}function T(e,t,n){return t&&(n?e.setUTCHours:e.setHours).call(e,(n?e.getUTCHours():e.getHours())+t),e}function S(e,t,n){return t&&(n?e.setUTCMinutes:e.setMinutes).call(e,(n?e.getUTCMinutes():e.getMinutes())+t),e}function E(e,t){return(t?e.setUTCDate:e.setDate).call(e,32),(t?e.setUTCDate:e.setDate).call(e,0),(t?e.getUTCDate:e.getDate).call(e)}function M(e,t,n){if("string"!=typeof e)return t;var r,a=e.match(/^\s*(([0-9]{1,4}-)*[0-9]{1,4})?(\s+|^|$)([0-9]{1,2}:[0-9]{2,2}(:[0-9]{2,2}(\.[0-9]*)?)?)?(\s+(\+|-)([0-9]{2,2})([0-9]{2,2}))?\s*$/);if(a&&(a[1]||a[4])){if(r=new Date(t),a[1]){var i=a[1].split("-"),o=(i[0].length>2||i.length>2)&&i[0],l=o?i[1]||1:i.length>1&&i[0],s=o?i[2]||1:l?i[1]:i[0];if("string"==typeof s&&2!=s.length)return null;o&&(n?r.setUTCFullYear:r.setFullYear).call(r,o),l&&(n?r.setUTCMonth:r.setMonth).call(r,l-1),s&&(n?r.setUTCDate:r.setDate).call(r,Math.min(s,E(r,n)))}var i=a[4]&&a[4].split(/[:.]/);if(i?((n?r.setUTCHours:r.setHours).call(r,i[0]),(n?r.setUTCMinutes:r.setMinutes).call(r,i[1]),(n?r.setUTCSeconds:r.setSeconds).call(r,i[2]||0),(n?r.setUTCMilliseconds:r.setMilliseconds).call(r,i[3]?Math.round(1e3*("0."+i[3])):0)):_(r,n),a[7]){var u=+(a[8]+1)*(60*a[9]+ +a[10]);lib.isFinite(u)&&(n?u:u+=r.getTimezoneOffset())&&r.setMinutes(r.getMinutes()-u)}return r}if(null!=(a=e.match(/^\s*date\s*\(\s*(.*)\s*\)\s*$/))){var c=a[1];if(a=c.match(/^(\"|\')(.*)\1$/),!a)throw Error("date() argument is unqouted");var d=a[2];return M(d,t,n)}return isNaN((r=new Date(e)).getTime())?void 0:r}function I(e,t,n,r){if(null!=t.total)return t.reduce(function(e,t){return I(e,t,n,r)},e);var a=(n||t.times||1)*t[2];switch(t[3]){case 0:r?e.setUTCMilliseconds(e.getUTCMilliseconds()+a):e.setMilliseconds(e.getMilliseconds()+a);break;case 1:r?e.setUTCSeconds(e.getUTCSeconds()+a):e.setSeconds(e.getSeconds()+a);break;case 2:r?e.setUTCMinutes(e.getUTCMinutes()+a):e.setMinutes(e.getMinutes()+a);break;case 3:r?e.setUTCHours(e.getUTCHours()+a):e.setHours(e.getHours()+a);break;case 4:r?e.setUTCDate(e.getUTCDate()+a):e.setDate(e.getDate()+a);break;case 5:r?e.setUTCDate(e.getUTCDate()+7*a):e.setDate(e.getDate()+7*a);break;case 6:r?e.setUTCMonth(e.getUTCMonth()+a):e.setMonth(e.getMonth()+a);break;case 7:r?e.setUTCMonth(e.getUTCMonth()+3*a):e.setMonth(e.getMonth()+3*a);break;case 8:r?e.setUTCFullYear(e.getUTCFullYear()+a):e.setFullYear(e.getFullYear()+a)}return e}var C=e("./series"),A=e("./utils"),D=["millisecond","second","minute","hour","day","week","month","quarter","year"],O=r([1,1e3,60,60,24,7,30.48,91.44,365.76]),P=r([1,1e3,60,60,24,7,31,92,366]),L=["",0,0,-1];L.isParsedInterval=!0,L.toString=C.toStringSeriesKey;var N=O.names.indexOf("month"),F=new Date(0),V=["1 minute","5 minute","10 minute","15 minute","30 minute","1 hour","6 hour","1 day","1 week","1 month"],z=V.map(function(e){return f({timespan:e,starttime:0})}),R=["time","now","date",["sec","second"],["min","minute"],"hour","day","week","month","year",["am","add_months"],["cmin","current_minute"],["ch","current_hour"],["cd","current_day","today"],["cw","current_week"],["cm","current_month","first_day"],["cq","current_quarter"],["cy","current_year"],["pmin","previous_minute"],["ph","previous_hour"],["pd","previous_day","yesterday"],["pw","previous_week"],["pm","previous_month"],["pq","previous_quarter"],["py","previous_year"],["pwd","previous_working_day"],["pvd","previous_vacation_day"],["nmin","next_minute"],["nh","next_hour"],["nd","next_day","tomorrow"],["nw","next_week"],["nm","next_month"],["nq","next_quarter"],["ny","next_year"],["nwd","next_working_day"],["nvd","next_vacation_day"],["ld","last_day"],["lwd","last_working_day"],["lvd","last_vacation_day"],["fwd","first_working_day"],["fvd","first_vacation_day"],["sun","sunday"],["mon","monday"],["tue","tuesday"],["wed","wednesday"],["thu","thursday"],["fri","friday"],["sat","saturday"]],W=function(e){var t=[-1,-1];return R.some(function(n,r){return"string"!=typeof n&&(t[0]<0?n[0]==e[0]&&(t[0]=r,!1):n[0]==e[1]&&(t[1]=r,!0))}),t}(["am","fvd"]),j=R.map(function(e,t){return"string"==typeof e||t<W[0]||t>W[1]?e:e.slice(1)}).toString(),U=[1e3,60,60,24,7,30,365].reduce(function(e,t,n){e.push(n-- >0?t*e[Math.min(n,3)]:t)},[]),H=[!1,!0].map(function(e){function t(e){return(e+7)%7%6}function n(t){return e?t.getUTCDay():t.getDay()}function r(t){return e?t.getUTCDate():t.getDate()}function a(t){return e?t.getUTCMonth():t.getMonth()}function i(t,n){return e?t.setUTCMonth(n):t.setMonth(n),t}function o(e,t){return t?i(e,a(e)+t):e}function l(e){return e}function s(e){return e}function u(e){return e}function c(e){return ee(e)}function d(t){return k(t,1-r(t),e)}function f(e){return i(d(e),3*Math.floor(a(e)/3))}function p(e){return i(d(e),0)}function h(t){return S(t,-1,e)}function g(t){return T(t,-1,e)}function w(t){return k(t,-1,e)}function I(t){return c(k(t,-7,e))}function C(e){return i(d(e),a(e)-1)}function D(e){return i(d(e),3*(Math.floor(a(e)/3)-1))}function O(e){return i(d(e),-12)}function P(e){return t(n(e)-1)?w(e):ae(e)}function L(e){return t(n(e)-1)?Q(e):w(e)}function N(t){return S(t,1,e)}function F(t){return T(t,1,e)}function V(t){return k(t,1,e)}function z(t){return c(k(t,7,e))}function j(e){return i(d(e),a(e)+1)}function H(e){return i(d(e),3*(Math.floor(a(e)/3)+1))}function G(e){return i(d(e),12)}function K(e){return t(n(e)+1)?V(e):ee(e,!0)}function B(e){return t(n(e)+1)?ie(e,!0):V(e)}function $(t){return k(t,E(t,e)-r(t),e)}function Y(e){return t(n($(e)))?e:P(e)}function Z(e){return t(n($(e)))?L(e):e}function X(e){return t(n(d(e)))?e:K(e)}function J(e){return t(n(d(e)))?B(e):e}function Q(t,r){return k(t,(0-n(t)+(r?7:-7))%7,e)}function ee(t,r){return k(t,(1-n(t)+(r?7:-7))%7,e)}function te(t,r){return k(t,(2-n(t)+(r?7:-7))%7,e)}function ne(t,r){return k(t,(3-n(t)+(r?7:-7))%7,e)}function re(t,r){return k(t,(4-n(t)+(r?7:-7))%7,e)}function ae(t,r){return k(t,(5-n(t)+(r?7:-7))%7,e)}function ie(t,r){return k(t,(6-n(t)+(r?7:-7))%7,e)}var oe=[h,l,N],le=[g,s,F],se=[null,null].concat(A.getEvalMethod(function(t,n){return+M(t,null==n?q.time:n,e)}));return se=se.concat(U),se=se.concat([o,l,s,u,c,d,f,p,h,g,w,I,C,D,O,P,L,N,F,V,z,j,H,G,K,B,$,Y,Z,X,J,Q,ee,te,ne,re,ae,ie].map(function(t){return A.getEvalMethod(function(n,r){t==o&&arguments.length<2&&(r=n,n=null);var a;return a=null==n?(oe.indexOf(t)>=0?y:le.indexOf(t)>=0?m:v)(e):(oe.indexOf(t)>=0?x:le.indexOf(t)>=0?b:t==u?_:identity)(new Date(n),e),+t(a,r)})})),se=se.reduce(function(e,t,n){for(var r="string"==typeof R[n]?1:R[n].length-(n<W[0]||n>W[1]?0:1),n=r;n-- >0;e.push(t));},[])}),q=h.present={};n.shiftDate=I,n.evalTime=g,n.parseInterval=d,n.parseTimespan=f,n.adjustPeriod=p,n.getTime=h,n.roundTime=u,n.getIntervalValue=a,n.getIntervalValueTitle=i,n.getMaximumPeriod=s,n.getMiddleInterval=l,n.getAggregateInterval=o},{"./series":12,"./utils":17}],16:[function(e,t,n){function r(e,t,n,r){function o(e){return e&&(!e.calculator||e.callees.some(o))}function s(e){return e.reduce(function(e,t){(t=t.data)&&e.indexOf(t)<0&&e.push(t)},[])}function f(t,n,r,a,i){var o,l=(t.vars.origins[n]||t).data,s=t.vars.calc[n],u=t.vars.values[n];s&&(i&&s.meta&&(s.meta.domain=i),o=s.call(l,l.last?l.last.t:r,0,a),i&&s.meta&&(s.meta.domain=null)),o!==u&&(t.vars.values[n]=o,e.fire(n,t,o,u))}function p(e){var t=_?_.sent.indexOf(e):-1;t>=0&&_.sent.splice(t,1)}function h(){t&&t.forEach(function(e){e.data&&e.data.spliceData()})}null==t&&(t=e.series=lib.series.group()),null==r&&(r=e.loader=lib.loader());var g=[[-(1/0),1/0]],v=null,m=[],y=e.variableCalcs=[];e.phMap=r.phMap,r.loadSeries(t).loadInterval(function(n,r,a,i,l,u){if(n&&l){var d=n.filter(t.updateable()),f=s(d).reduce(function(e,t){e[o(t)?0:1].push(t)},[[],[]]),p=a==c.UPDATE_MODE?f[0].map(function(e){return lib.isFinite(e=+e.last.t)?[e,Math.max(e+1,l[1])]:l}):l;e.fire("preprocess",d,a,u,f,p,l)}return l});var x=e.updateTime=Date.now();e.on("preprocess",function(n,r,i,o,l,s){t.forEach(function(e){e.data&&e.data.intervals.standby.splice(0)}),u.isUpdating(r)&&(x=i,e.calcVariables(n,i,r,s)),a(o[0],l,i,r),v=o[1].length&&r==c.UPDATE_MODE&&arguments}).on("seriesupdate",function(t,n,r,a,o,l){i(s(n),g,r,a,l),o||e.calcVariables(n,r)}),e.realtime=function(t){return d(e.reload,t)},e.reload=function(t){var a=arguments.length?arguments:[t=c.UPDATE_MODE],i=r.apply(this,a);if(!i.sent.length&&v)if(n)e.fire("emptyload",v);else{var o=v[3][1].map(function(e){return e.series[0]});e.fire("seriesupdate",!0,o,v[2],v[1],!1,!1)}return i},e.addVariable=function(e,n,r){var a=t.getCalculator(e,r);return a&&y.indexOf(a)<0&&(a._caller=n||this,y.push(a)),a},e.calcVariables=function(e,t,n,r){m.length&&e.length&&e.forEach(function(e){e.vars&&m.forEach(function(a){f(e,a,t,n,r)})}),y.forEach(function(e){r&&e.meta&&(e.meta.domain=r),e._value=e.call(e._caller,t,0,n),r&&e.meta&&(e.meta.domain=null)})},e.calcSeries=function(n,r,a){var i=t&&null==r;if(i&&(r=t.filter(t.updateable())),r&&r.length){var o=l(r,x);i&&(e.updateTime=o),e.fire("seriesupdate",n,r,o,0,a,!1)}return e},t&&(e.valueFilters={},t.onItemAdd(function(n){m.length&&(n.vars||(n.vars={calc:{},origins:{},values:{}}),m.forEach(function(r){n.vars.calc[r]=t.getCalculator(n.params[r],e.valueFilters[r])}))}));var b=!1;r.on("dataupdate",function(t,r,a){n||e.calcSeries(!0)}).on("reqerror",p).on("reqabort",p).on("reqload",function(e,t,n){var a=_?_.sent.indexOf(e):-1;(b=a>=0)&&((b=!_.processed&&(_.processed=!0))&&(r.sentRequests.forEach(function(e){_.sent.indexOf(e)<0&&e.abort()}),h()),_.sent.splice(a,1))},!0).on("dataupdate",function(t,n,r){b&&(b=!1,e.fire("reset",r))},!0).on("reqload",function(t,n,r){b&&e.fire("reset",r)});var _=e.resetRequests=!1;return e.reset=function(t){_&&_.sent.length&&_.sent.forEach(function(e){e.abort()});var n=t==c.RESET_MODE?arguments:[c.RESET_MODE];return _=e.resetRequests=e.reload.apply(this,n),_.sent.length||e.fire("reset",null),_},e.destroyUpdater=function(){return e.realtime(-1),r.sentRequests.abort(),h(),t&&t.splice(),e},e.varNames=function(t){return arguments.length?(m=t,e):m},e}function a(e,t,n,r){var a=[],i="number"!=typeof t[0];return o(e,function(e,a,o){var l;if(o){var s=o.callees.methods[a];o.intervals.standby.forEach(function(t){s.forEach(function(a,i){l=e.transformInterval(a(t,0,n,r),0,n,r),e.intervals.standby.add(l)})})}else l=e.transformInterval(i?t[a]:t,0,n,r),e.intervals.standby.add(l)},!1,!0).forEach(function(e){e.calculator?e.intervals.standby.splice(0):(e.intervals.standby=s.getStandbyIntervals(e,e.intervals.standby,r),a.push(e.series[0]))}),a}function i(e,t,n,r,a){return e.forEach(function(e){if(e.processIntervals&&(!a||e.calculator&&!e.processed)){var i=t.map(function(e){return e.slice(0)});e.processIntervals(i,n,r)}}),o(e,function(e){e.domains.splice(0),e.domains.methods.splice(0)})}function o(e,t,n,r,a){var i=[];return e.forEach(function e(o){!o||a&&a.apply(this,arguments)||!(i.indexOf(o)<0&&i.push(o)||r)||(t.apply(this,arguments),(n?o.callers:o.callees).forEach(function(t,n){e(t,n,o)}))}),i}function l(e,t){var n=u.getLastSeries(e,function(e){return e.keys.isReal&&!e.keys.isStat})||u.getLastSeries(e,function(e){return e.keys.isReal});return n?n.data.last.t:null==t?Date.now():t}var s=(e("./time"),e("./dataseries")),u=e("./dataloader"),c=e("./utils");n.Updater=r,n.getLoadingSeries=a,n.processDataSeries=i,n.forEachRelatedDataSeries=o,n.getUpdateTime=l;var d=function(){function e(e,i){e.period=i>0?i:i=0;var o,l=r.indexOf(e);return l<0?(i&&(l=a.length,r.push(e),n.push(i),a.push(t(e,i))),o=0):i?(o=n[l],n[l]=i):(clearTimeout(a[l]),r.splice(l,1),a.splice(l,1),o=n.splice(l,1)[0]),[o,i,l]}function t(e,i){return setTimeout(function(){var i=r.indexOf(e);i>=0&&(e(),a[i]=t(e,n[i]))},i)}var n=e.periods=[],r=e.fns=[],a=e.ids=[];return e}();n.setPeriod=d},{"./dataloader":7,"./dataseries":8,"./time":15,"./utils":17}],17:[function(e,t,n){function r(e){return e.toString=e,e}function a(e){return"function"==typeof e&&e.toString==e}function i(e,t){t=t||"";var n=[];return Object.keys(e).map(function(r){if("object"!=typeof e[r]||Array.isArray(e[r]))n.push(t+"."+r);else{var a=i(e[r],t+"."+r);a.forEach(function(e){n.push(e)})}}),n}n.getEvalMethod=r,n.isEvalMethod=a;var o=0,l=1,s=2;n.RELOAD_MODE=o,n.UPDATE_MODE=l,n.RESET_MODE=s,n.containsWildcards=function(e){for(var t,n=0;n<e.length;++n)if(t=e.charAt(n),!("*"!==t&&"?"!==t||0!==n&&"\\"===e.charAt(n-1)))return!0;return!1},n.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n.keepAfter=function(e,t){var n=e.indexOf(t);return n>=0?e.substr(n+t.length):e},n.keepAfterLast=function(e,t){var n=e.lastIndexOf(t);return n>=0?e.substr(n+t.length):e},n.keepBefore=function(e,t){var n=e.indexOf(t);return n>=0?e.substr(0,n):e},n.keepBeforeLast=function(e,t){var n=e.lastIndexOf(t);return n>=0?e.substr(0,n):e},n.replace=function(e,t,n){return e.replace(new RegExp(escape(t),"g"),n)},n.capFirst=function(e){return e.replace(/([^\s]+)/,function(e){return e.charAt(0).toUpperCase()+e.substr(1)})},n.capitalize=function(e){return e.toLowerCase().replace(/([^\s]+)/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1)})},n.lowerCase=function(e){return e.toLowerCase()},n.upperCase=function(e){return e.toUpperCase()},n.removeBeginning=function(e,t){return 0===e.indexOf(t)?e.substr(t.length):e},n.removeEnding=function(e,t){var n=e.length-t.length;return e.lastIndexOf(t)===n?e.substr(0,n):e},n.getFieldValue=function(e,t){for(var n=t.split("."),r=e,a=0;a<n.length;a++){var i=n[a];if(!(r&&i in r))return;r=r[i]}return r},n.getObjectDeepFieldsNames=i},{}],18:[function(e,t,n){n.PropertyQuery=function(e){this.type=e.type,this.key=e.keys,e.exactMatch&&(this.exactMatch=e.exactMatch),e.keyTagExpression&&(this.keyTagExpression=e.keyTagExpression),e.entity&&(this.entity=e.entity),e.entities&&(this.entities=e.entities),e.entityGroup&&(this.entityGroup=e.entityGroup),e.entityExpression&&(this.entityExpression=e.entityExpression),e.limit&&(this.limit=e.limit),e.last&&(this.last=e.last),e.offset&&(this.offset=e.offset),e.tagOffset&&(this.tagOffset=e.tagOffset)}},{}],19:[function(e,t,n){t.exports=function(e,t){function n(e,t,n){var r=d3.select(e),a=(r.select(".widgetControls").style("max-width",t+"px").node(),r.select(".widgetTitle")),i=a.node();i&&n&&a.attr("title",i.scrollWidth>i.clientWidth||i.scrollHeight>i.clientHeight?a.text():null)}function r(e,t){var n=e.dialogwidget||(["Text","Pie","Gauge"].indexOf(e.type)<0?e.type:defaultWidgetType);return t?t.type==e.type?["Property","Page","Console"].indexOf(e.type)>=0?e.dialogwidget:n==t.type?t.type!=defaultWidgetType&&defaultWidgetType:n:e.type:n}if(e&&e.widget){e.widget("portal.portalView",{_create:function(){var t=this,n=this.element,a=n.get(0),i=window,o=i.portalConfig||new CfgWidgetConfiguration;null!=o.title&&(document.title=o.title);for(v in lib.stringUtil)lib.stringUtil.hasOwnProperty(v)&&(window[v]=lib.stringUtil[v]);execWidgetScript(t,o);var l=+o.widthunits||6,s=+o.heightunits||4,u=1/l,c=1/s,d=o.chartminwidth||1,f=o.chartminheight||1;["offset","offsettop","offsetright","offsetbottom","offsetleft"].forEach(function(e,t){function r(e){return e==parseFloat(e)?e+"px":e}var a=o[e];null!=a&&(a=[].concat(a).join(" ").trim().split(/\s/)).length&&(a=t?r(a[a.length-1]):a.map(r).join(" "),n.css(e.replace(/offset(.?)/,function(e,t){return"margin"+(t&&"-"+t)}),a))});var p=0,h=0,g=this.widgets=[];e.each(o.groups,function(n,r){var a=null!=r.widgetsperrow?r.widgetsperrow:r.widgets.length;if(a<=0||r.widgets.length<=0)return!0;p++;for(var o=0,l=0;l<Math.ceil(r.widgets.length/a);l++){h++;for(var u=0,c=0;c<a;c++){var v=l*a+c;if(v>=r.widgets.length)break;var m=r.widgets[v],y=m.type=m.originType=toCapitalCase(m.type),x=i["get"+y+"Config"];if(!x)return;m=x(m),null==m.title&&(m.title=y),o++;var b=+(m.widthunits||1),_={config:m,minWidth:d,minHeight:f,widthUnitCnt:b,heightUnitCnt:+(m.heightunits||1),topUnitCnt:+(m.topunits||h-1),leftUnitCnt:+(m.leftunits||u),title:m.title,tooltip:m.tooltip,minLeftCnt:0,minTopCnt:0,id:"widget-"+p+"-"+o,type:y},w=e("<div class='widget'></div>").appendTo(t.element).portalWidget(_);w.isOut=_.topUnitCnt+_.heightUnitCnt>s,t.appendInnerWidget(w),g.push(w),u+=_.widthUnitCnt}}}),e.each(g,function(e,n){var a=n.innerWidget;if(a){var i=a.config,o=parseCfgValue(i.disabledialog,"boolean");o||n.portalWidget("getHeaderEl").on("click",function(){var e=a&&r(i);e&&(i.ontitleclick?i.ontitleclick(a,i):t.ItemClick(a,{type:e},n))})}});var m=g.some(function(e){return e.isOut}),y=!0,x=!0;m&&d3.select(a.parentNode).style("overflow-y","scroll"),e(i).resize(this.windowResize=function(r){axibase.testing&&log("resize");var i=Tooltip.getContainer().getBoundingClientRect(),o=Math.floor(i.width-getNodeSize(a,"margin-left")-getNodeSize(a,"margin-right")),l=Math.floor(i.height-getNodeSize(a,"margin-top")-getNodeSize(a,"margin-bottom"));navigator.isChrome&&1==r&&(o-=getScrollSize());var s=o*u,d=l*c;n.css({width:o+"px",height:l+"px"}),e.each(g,function(e,n){var r=n.portalWidget("resize",s,d);y&&!n.innerWidget&&t.appendInnerWidget(n,r)}),y=!1,x||t.resizeDialog(),axibase.testing&&log("resize done")}),this.windowResize(!0);var b=this.dialog=e("#dialog").dialog({autoOpen:!1,modal:!0,draggable:!1,resizable:!1,dialogClass:"widgetDialog",close:function(){b.clean(),x=!0,switchRealtimeUpdate(!0,!0)}});b.clean=function(){return b.trigger("_destroy").empty()};var _=b.parent();e(".ui-dialog-titlebar-close",_).remove();var w=null,k=!0,T=d3.select(_.get(0)).select(".ui-widget-header").on("click",function(){w&&t.ItemClick.apply(this,w)});T.select(".ui-dialog-title").remove();var S=T.insert("div",":first-child").classed("widgetTitle",!0);i.callDialog||(i.callDialog=function(n,a,i){b.clean().dialog("open"),x&&(x=!1,switchRealtimeUpdate(!1)),e(document).unbind("mousedown.dialog-overlay");var o=n.type=toCapitalCase(n.type||defaultWidgetType),l=n.title||o;S.html(l.join?l.join(" - "):l).attr("title",b.tooltip=getTooltipText(n.tooltip)),a&&a.config&&(n.title=a.config.title);var s=t._appendWidget(n,b.get(0),null,b,!0);d3.select(".ui-dialog").classed("ui-dialog-maximize",t.dialogMaximize=s.config.dialogmaximize),t.resizeDialog(k&&!(k=!1));var u=a&&r(a.config,n);w=u?[a,{type:u},i]:null,T.style("cursor",w?"pointer":"default")})},_appendWidget:function(){var e=appendWidget.apply(this,arguments),t=this;return e.on&&e.on("itemclick",function(e){t.ItemClick(this,e)}),e},appendInnerWidget:function(e,t){try{var n=e.innerWidget=this._appendWidget(e.portalWidget("option","config"),e.portalWidget("getContentEl").get(0),t,e);n&&n.phMap&&setWidgetTitle(function(e){var t=n.phMap();for(var r in n.phMap.exp)e=e.replace(n.phMap.exp[r],t.hasOwnProperty(r)?t[r]+"":"");return e},d3.select(e.get(0)).child(".widgetContent").child())}catch(t){if(e.errTooltip)return;e.errTooltip=ErrorTooltip().alignNode(e.get(0)).error(t)().redraw(),e.bind("_resize",e.errTooltip.redraw),log(t)}},ItemClick:function(e,t,n){var r=e.config.originalConfig,i=!!n,o=i&&r.type===t.type,l=o&&window["copyConfigFrom"+t.type];r=extendObject(new CfgWidget,r),o||a.forEach(function(e){delete r[e]}),r.type=toCapitalCase(t.type||r.type||defaultWidgetType),r=window["get"+r.type+"Config"](r,!0),l&&(r=extendObject(r,l(e))),r=extendObject(r,t),callDialog(r,i&&e,n)},resizeDialog:function(t){var r=this.dialog,a=Tooltip.getContainer(),i=a.getBoundingClientRect(),o=Math.floor(i.width*(this.dialogMaximize?.99:.9)),l=Math.floor(i.height*(this.dialogMaximize?.99:.9));r.dialog("option","width",o),r.dialog("option","height",l);var s=Math.ceil(r.width()),u=Math.ceil(r.height()),c={width:s,height:u},d=e(r.get(0).parentNode);return r.dialog("option","position",{my:"center",at:"center",of:a}),t&&r.dialog("option","position",{my:"center",at:"center",of:a}),d.css("left",parseInt(d.css("left"))+"px").css("top",parseInt(d.css("top"))+"px"),n(e(".ui-widget-header",r.parent()).get(0),o,null==r.tooltip),r.trigger("_resize",c),c},_destroy:function(){e(window).unbind("resize",this.windowResize),e.each(this.widgets,function(e,t){t.portalWidget("destroy")}),this.dialog.clean().dialog("destroy").remove(),this.element.trigger("_destroy").remove(),delete this.widgets,delete this.dialog}});var a=["ticks","type","buttons","script","legendposition"];e.widget("portal.portalWidget",{_elInnerWidth:{widget:0,content:0},_elInnerHeight:{widget:0,content:0},_headerEl:null,_contentEl:null,options:{minWidth:1,minHeight:1,widthPxUnit:100,heightPxUnit:100,widthUnitCnt:5,heightUnitCnt:5,topUnitCnt:0,leftUnitCnt:0,minLeftCnt:0,minTopCnt:0,id:null,title:null},_create:function(){this.element.attr("id",this.options.id).addClass("widget-"+this.options.type.toLowerCase()),this._headerEl=e("<div class='widgetHeader widgetHeaderHover'></div>").appendTo(this.element);var t=this.options,n=t.title||"",r=e('<div class="widgetTitle"></div>').appendTo(this._headerEl).html(n.join?n.join(" - "):n);t.tooltip&&r.attr("title",t.tooltip),this._contentEl=e("<div class='widgetContent'></div>").appendTo(this.element).attr("id",this.options.id+"-content")},getContentEl:function(){return this._contentEl},getHeaderEl:function(){return this._headerEl},resize:function(e,t){var r=e*this.options.widthUnitCnt,a=t*this.options.heightUnitCnt,i=Math.floor(Math.max(t*this.options.topUnitCnt,this.options.minHeight*this.options.minTopCnt)),o=Math.floor(Math.max(e*this.options.leftUnitCnt,this.options.minWidth*this.options.minLeftCnt)),l=Math.max(this.options.minWidth,r),s=Math.max(this.options.minHeight,a),u=parseFloat(this.element.css("border-right-width"))+parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("padding-right"))+parseFloat(this.element.css("padding-left"))+parseFloat(this.element.css("margin-right"))+parseFloat(this.element.css("margin-left")),c=parseFloat(this.element.css("border-top-width"))+parseFloat(this.element.css("border-bottom-width"))+parseFloat(this.element.css("padding-top"))+parseFloat(this.element.css("padding-bottom"))+parseFloat(this.element.css("margin-top"))+parseFloat(this.element.css("margin-bottom")),d=Math.ceil(l-(l<e?u*this.options.widthUnitCnt:u)),f=Math.ceil(s-(s<t?c*this.options.heightUnitCnt:c));this.element.css("top",i+"px").css("left",o+"px"),this.element.css("width",d+"px"),this.element.css("height",f+"px");var p=Math.ceil(f-parseFloat(this._headerEl.outerHeight(!0))-parseFloat(this._contentEl.css("border-top-width"))-parseFloat(this._contentEl.css("border-bottom-width"))-parseFloat(this._contentEl.css("padding-top"))-parseFloat(this._contentEl.css("padding-bottom"))-parseFloat(this._contentEl.css("margin-top"))-parseFloat(this._contentEl.css("margin-bottom"))),h=Math.ceil(d-parseFloat(this._contentEl.css("border-right-width"))-parseFloat(this._contentEl.css("border-left-width"))-parseFloat(this._contentEl.css("padding-right"))-parseFloat(this._contentEl.css("padding-left"))-parseFloat(this._contentEl.css("margin-right"))-parseFloat(this._contentEl.css("margin-left")));this._elInnerWidth={widget:d,content:h},this._elInnerHeight={widget:f,content:p},n(this._headerEl.get(0),d,!this.options.tooltip);var g={width:h,height:p};return this.element.trigger("_resize",g),g},_destroy:function(){this.element.trigger("_destroy").remove()}})}}},{}],20:[function(e,t,n){function r(e){this._changeFieldPath=i(e.changeField),this._options=e.options,this._optionsFunction=e.optionsFunction,e.loadedOptions&&(this._options=this._options.concat(e.loadedOptions))}function a(e,t){var n=window["get"+e.type+"Config"](e,t.isDialog);return extendObject(n,t,function(e,t){return n.hasOwnProperty(t)}),n.renderTo=t.renderTo,n.portalWidgetEl=t.portalWidgetEl,n.isDialog=t.isDialog,n}function i(e){return e?e.replace(/[^\w\.]/g,"").split("."):null}function o(e){return Array.isArray(e)||(e=[e]),e=e.map(function(e){return"object"!=typeof e&&(e=null!=e?e:"",e={value:e.toString()}),e})}function l(e,t){return e[t]?e[t]:"property"===t?e.properties:"column"===t?e.columns:"link"===t?e.links:"node"===t?e.nodes:"dropdown"===t?e.dropdowns:"option"===t?e.options:null}function s(e,t,n){if(Array.isArray(e))return void e.forEach(function(e){s(e,t,n)});if(!e)return null;if(1===t.length)return void(e[t[0]]=n);var r=l(e,t[0]);s(r,t.slice(1),n)}function u(e,t){if(Array.isArray(e))return e.map(function(e){return u(e,t)}).reduce(function(e,t){return e===t?e:null});if(!e)return null;if(1===t.length)return e[t[0]];var n=l(e,t[0]);return u(n,t.slice(1))}function c(e,t){e.destroy();var n=appendWidget(t),r=e.on().itemclick;return r&&n.on("itemclick",r),t.isDialog?$(".portalView").portalView("resizeDialog"):$(window).resize(),n}function d(e){var t={};return e.forEach(function(e){Object.keys(e.tags).forEach(function(n){t[n]||(t[n]=[]),t[n].indexOf(e.tags[n])<0&&t[n].push(e.tags[n])})}),Object.keys(t).forEach(function(e){t[e].sort()}),t}function f(e,t,n){options=t.map(function(e){return{value:e}});var r={value:"*",text:"- All ["+e+"] -"};options.unshift(r);var a={changeField:"tags."+e,options:options,style:n.tagsDropdownsStyle};return a}function p(e,t,n){function r(e){var r=d(e);t.tags||(t.tags={}),t.originalConfig.tags||(t.originalConfig.tags={}),t.tagsDropdownsNames=t.tagsDropdowns===!0?Object.keys(r):t.tagsDropdowns,t.originalConfig.loadedDropdowns=[],t.tagsDropdownsNames.forEach(function(e){if(!r[e])return delete t.tags[e],void delete t.originalConfig.tags[e];t.tags[e]||(t.tags[e]="*",t.originalConfig.tags[e]="*");var a=f(e,r[e],t);t.originalConfig.loadedDropdowns.push(a);var i=n(a);i.el().attr("title",e)})}var a=["Chart","Gauge","Bar","Histogram","Box","Calendar","Treemap","Pie","Table","Text"],o=m.every(function(e){return u(t,i(e))});if(!(a.indexOf(t.type)<0)&&o){var l=new lib.MetadataLoader(t),s={entity:t.entity};l.requestMetricsSeries(null,r,null,null,s)}}function h(e,t,n){var r=[t,n].map(function(t){if(t)return Array.isArray(t)&&(t=t.some(function(t){return utils.getFieldValue(e,t)})),"string"==typeof t?utils.getFieldValue(e,t):""});return{value:r[0],text:r[1]}}function g(e,t,n){function r(){if(l--,u.length&&!l){var r=e.originalConfig;u.forEach(function(e){s(r,e.changeField,e.value)});var i=a(r,e);n.forEach(function(e){e.destroy()}),c(t,i)}}var i=[],l=0,u=[];this.add=function(e,t){e.setCallback(function e(n,a,i){return function(s){if("function"==typeof n?s=n(s):(a||i)&&(s=s.map(function(e){return h(e,a,i)})),s)if("function"==typeof s){s.setCallback(e);var c=s();c||l--}else{var d=o(s),f=t(d,u);f&&u.push(f),r()}}}),i.push(e)},this.sendRequests=function(){i.forEach(function(e){var t=e();t&&l++})}}function v(e){function t(e,t,n,r,a){var i,o,l,u=r,c=s[e];"values"===t?i=n:(o=n[0],l=n[1]);var d=function(){return c.apply(null,[i,u].concat(a))};return d.setCallback=function(e){u=e(u,o,l)},d}function n(e,n,r,a,i){return t("requestMetricsSeries","values",e,n,[r,a,i])}function r(e,n,r,a,i){return t("requestEntitiesMetrics","values",e,n,[r,a,i])}function a(e,n,r,a,i,o){return t("requestProperties","values",e,n,[r,a,i,o])}function i(e,n,r,a,i,o){return t("requestMetricsSeries","options",[e,n],r,[a,i,o])}function o(e,n,r,a,i,o){return t("requestEntitiesMetrics","options",[e,n],r,[a,i,o])}function l(e,n,r,a,i,o,l){return t("requestProperties","options",[e,n],r,[a,i,o,l])}var s=new lib.MetadataLoader(e);return[n,r,a,i,o,l]}utils=e("./lib/utils");var m=["metric","entity"];r.prototype.getOptions=function(e){var t;return this._changeFieldPath&&(t=u(e.originalConfig,this._changeFieldPath)),this._options.map(function(e){return e.isSelected=t===e.value,e})},r.prototype.replaceChangeField=function(e,t){var n=e.originalConfig;return s(n,this._changeFieldPath,t),a(n,e)},r.prototype.execOptionsFunction=function(e){if("function"!=typeof this._optionsFunction)return null;var t=v(e),n=this._optionsFunction.apply(null,t)||[];return"function"==typeof n?n:(n=o(n),void(this._options=this._options.concat(n)))},n.addDropdowns=function(e,t,n){function a(a,l){function s(e){if(d._options=d._options.concat(e),f.bindOptions(d.getOptions(t)),p.loadedOptions=e,!u(t,d._changeFieldPath)){var n=d._options[0].value;return{changeField:d._changeFieldPath,value:n}}}var d=new r(a),f=Dropdown(),p=t.originalConfig.dropdowns[l];if(!a.loadedOptions&&p){var h=d.execOptionsFunction(t);h&&o.add(h,s)}return f.options(d.getOptions(t)).onChange(function(n){if(a.onChange)return void a.onChange.call(this.el().node(),e);var r=d.replaceChangeField(t,n);m.indexOf(a.changeField)>=0&&t.tagsDropdownsNames&&(t.tagsDropdownsNames.forEach(function(e){r.tags&&delete r.tags[e]}),delete r.loadedDropdowns,delete r.originalConfig.loadedDropdowns),i.forEach(function(e){e.destroy()}),c(e,r)}),a.format&&f.format(a.format),i.push(f),f(n),f.el().attr("style",a.style).on("click",function(){d3.event.cancelBubble=!0}),t.portalWidgetEl.bind("_destroy",function(){f.destroy()}),f}if(t.dropdowns){var i=[],o=new g(t,e,i);t.dropdowns.forEach(a),t.tagsDropdowns&&(t.loadedDropdowns?t.loadedDropdowns.forEach(a):p(e,t,a)),o.sendRequests()}}},{"./lib/utils":17}],21:[function(e,t,n){t.exports=function(e,t){function n(e,t,n){if(e==t)return!0;if(!e||!t)return!e&&!t;if(null==n?(n=e.length)!=t.length:Math.min(e.length,n)!=Math.min(t.length,n))return!1;for(var r=0;r<n;r++)if(e[r]!=t[r])return!1;return!0}function r(e,t,n){arguments.length<3&&(n=0);for(var r=0;r<t.length;r++)e[r+n]=t[r];return e}function a(e){try{return(e.buffer?o:i).apply(this,arguments)}catch(e){}}function i(e,t,n,r,a,i){var o=t>0?e.slice(0,t):[],l=r?r.length:0;return l&&((null==i?(i=l,!1):i<l)||(null==a?(a=0,!1):a>0))&&(r=r.slice(a,i),l=r.length),l&&(o=o.length?o.concat(r):r),(t+=n)<e.length&&(o=o.concat(t>0?e.slice(t):e)),o}function o(e,t,n,r,a,i){r||(r=[]);var o=e.length;if(n==o)return r.constructor==e.constructor?r:new e.constructor(r);var l=r.length;if(l&&((null==i?(i=l,!1):i<l)||(null==a?(a=0,!1):a>0))&&(r=r.subarray?r.subarray(a,i):r.slice(a,i),l=r.length),n==l)return l&&e.set(r,t),e;var s=t+n;if(!l){if(0==t)return e.subarray(s);if(s==o)return e.subarray(0,t)}var u=new e.constructor(o-n+l);return t>0&&u.set(e.subarray(0,t)),l>0&&u.set(r,t),s<o&&u.set(e.subarray(s,o),t+l),u}function l(e,t){return""===t?e:u(e)?e.length?e.slice(0,-1).concat(e.slice(-1)[0]+t):t:e+t}function s(e,t,n){var r=e.length;switch(n=s.getArrayIndex(r,n)){case 0:e.unshift(t);break;case r:e.push(t);break;default:e.splice(n,0,t)}return n}function u(e){return"object"==typeof e&&null!=e&&!!e.constructor.prototype.push}Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t);return this},Array.prototype.some=function(e){for(var t,n=0;n<this.length;n++)if(e(t=this[n],n))return t;return null},Array.prototype.reduce=function(e,n){var r=this.length;if(arguments.length>1)for(var a=!("object"==typeof n&&null!=n||"function"==typeof n),i=0;i<r;i++){var o=e(n,this[i],i);(a||o!=t)&&(n=o)}else if(r){n=this[0];for(var i=1;i<r;i++)n=e(n,this[i],i)}return n},Array.prototype.reduceRight=function(e,n){var r=this.length;if(arguments.length>1)for(var a=!("object"==typeof n&&null!=n||"function"==typeof n),i=r;i-- >0;){var o=e(n,this[i],i);(a||o!==t)&&(n=o)}else if(r){n=this[--r];for(var i=r;i-- >0;)n=e(n,this[i])}return n},Array.prototype.map=function(e){for(var t=[],n=0;n<this.length;n++)t.push(e(this[n],n,this));return t},Array.prototype.filter=function(e){for(var t=[],n=0;n<this.length;n++)e(this[n],n)&&t.push(this[n]);return t},Array.prototype.every=function(e){for(var t=0;t<this.length&&e(this[t],t);)t++;return t==this.length},s.getArrayIndex=function(e,t){return null!=t&&t<e?t<0&&(t+=e)<0?0:t:e},e.instanceofArray=u,e.addItemToArray=s,e.plusString=l,e.arrayEquals=n,e.resetArray=r,e.spliceArray=a}},{}],22:[function(e,t,n){"use strict";function r(e){if(e.vars&&e.params.audioAlert){var t,n=e.vars.values,r=n.alertExp,i=e.params.audioAlert(r),o=!n.isNotFirstUpdate;if(n.isNotFirstUpdate=!0,i instanceof Array&&(i=i[0]),!("string"!=typeof i&&!i instanceof String)){if(/[\s\)\(;'"]/.test(i))return void delete n.currentAudio;if(t=a.get(i),r===!1||null==r||isNaN(r))return void(t&&delete n.currentAudio);if(!t){var l=i.substr(i.lastIndexOf(".")+1),s="mp3"===l?"audio/mpeg":"ogg"===l?"audio/ogg":"wav"===l?"audio/wav":null;t=d3.select("body").append("audio").attr("src",i).attr("type",s).node(),a.set(i,t)}if(n.currentAudio!==i){if(n.currentAudio){var u=a.get(n.currentAudio);try{u.pause(),u.currentTime=0}catch(e){}}n.currentAudio=i,"loop"==i.split("#")[1]&&(t.loop=!0),o&&!e.params.audioOnLoad||t.play()}}}}var a=d3.map();t.exports=r},{}],23:[function(e,t,n){t.exports=function(e,t){function n(e){function t(e){for(var t=0;t<n.length;t++){var r=e[n[t]]()-+(4==t);if(r)return t}return n.length}var n=e?l.utc:l;return t}function r(t,r){function l(e){return null==F&&(F=v?0:b?3:(D?3:0)-+(2==t&&!(D%90))),y=e.append("g").attr("display",_?null:"none"),p=y.append("g").classed("axi-chart-axis-"+i[t],!0).transform("matrix",f[0]),I=p.append("path").crisp(p),q=p.append("text").attr("dy","1em").attr("display","none").transform("translate","0").transform("rotate",1==t?"90":3==t?"-90":"").transform("matrix",f[1]),h&&(g=p.append("rect").classed("axi-chart-axis-background",!0)),k=0!=N,w=!!R,A=!0,l}function s(e){var t=0;if(v){var n=e+1;t=n<j.length?(j[n]-j[e])/2:1/0}return t}function u(){var e=H(),t=C.title!=e&&(C.title=e,!0);if(t){q.text(e).attr("display",(T=!!q.text())?null:"none");var n=q.node(),r=T&&adjustTextNodeRect(n,getNodeRect(n),b);return G=r?b?r.width:r.height:0,!0}}function c(){return b==!D?B.isFF?-3:0:B.isFF?-3:0}function d(){A&&_&&(C.color=m,y.selectAll("path,line").attr("stroke",m),I.crisp(p))}var f=o[i[t]],p=null,h=!1,g=null,v=!1,m=null,y=null,x=addCommas,b=t%2,_=!0,w=!0,k=!0,T=!1,S=b?a:function(e,t){return t.enlarged||(t.width+=90==D?-5:D?-10:5,t.enlarged=!0),a(e,t)},E=null!=r,M=l.protrusion=[],I=null,C={},A=!1,D=0,O=null,P=0,L=null,N=null,F=null,V=E&&n(r),z=!1,R=4,W=b?5:10,j=null,U=null,H=d3.functor(null),q=null,G=0,K=null;l.renderTo=l,l.el=function(){return y},l.rendered=function(){return A},l.position=function(){return t},l.vertical=function(){return b},l.size=function(){return P},l.ticksData=function(){return j},l.redraw=function(){function e(e){return e<d[0]||e>d[1]?"none":null}function n(){return this.__rect__=getNodeRect(this,!0)}function r(){return this.__rect__}if(!_||!A)return l;y.classed("axi-chart-axis-empty",!LinearScale.isFinite(O));var a=O.range(),i=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]),d=O.domain(),v=domainChange(O,C),E=rangeChange(O,C),H=C.tickValues!=U&&(C.tickValues=U,!0)||v,B=C.color!=m&&(C.color=m,!0),$=C.tickSize!=R&&(C.tickSize=R,!0),Y=w&&(B||$);(E||$)&&I.attr("d","M"+i+","+R+"V0H"+o+"V"+R),B&&I.attr("stroke",m),I.crisp(p);var Z=p.selectAll("g");if(H){if(j=U||O.ticks(W),Z=Z.data(j),Z.exit().remove(),L=null,k)var X=null==N?O.format()||x:N,J=X.maxPow?lib.getRangePrecision(d,X,W):null;z=V&&j.map(lib.getDate).map(V)}(H||Y)&&Z.each(function(t){var n=d3.select(this),r=null;Y&&(r=n.select("line").attr("y2",R+"").attr("stroke",m)),(r||n.select("line")).attr("display",e(t)),k&&H&&n.attr("display",null).select("text").text(X(t,J))}),H&&(Z.enter().append("g").each(function(n){var r=d3.select(this);w&&r.append("line").attr("y2",R+"").attr("stroke",m).attr("display",e(n)),k&&r.append("text").attr("text-anchor",D?t?"end":"start":null).attr("dy","1em").text(X(n,J))}),k&&Z.sort());var Q=H||E;Q&&(k&&Z.attr("display",null),Z.transform("translate",function(t,n){if(k){var a=d3.select(this).select("text"),i=a.node(),o=s(n),l=H?e(t+o):!r.call(i);H&&(a.attr("display",l),i.__rect__=!l,l||a.attr("transform","matrix(1,0,0,1,0,0)"+(f[1]?"matrix("+f[1]+")":""))),l||a.transform("matrix",[Math.round(O(o)-O(0)),0])}return Math.round(O(t))}));var ee=k&&Q,te=ee&&Z.selectAll("text").filter(r);if(ee&&K&&Z.each(function(e,t,n){K(e,t,n,Z)}),k&&H&&te.each(n).attr("transform",function(){var e=adjustTextNodeRect(this,this.__rect__),n=b||D?-Math.round(.5*e.height):0,r=F+R+(t||D?0:e.height),a=D&&(1-t)*D;return(n||r?"translate("+n+(r?","+r:"")+")":"")+(this.getAttribute("transform")||"")+(a?"rotate("+a+")":"")||null}),u(),ee){var ne=!!(D&&D%180)&&(!(D%90)||null);te.each(function(){var e=n.call(this);null!=ne&&adjustTextNodeRect(this,e,ne)});var re=null;L=0,Z.each(function(e,t){var n=d3.select(this),a=n.select("text").node();if(r.call(a)){var i=!0,o=a.__rect__;o.el=n,o.precedence=z[t],re&&S(o,re)&&(i=o.precedence>re.precedence,(i?re.el:n).attr("display","none")),i&&(re=o,L=Math.max(L,b?o.width:o.height))}})}P=Math.max(0,(L&&L+R+c())+F+G);var ae=C.size!=P&&(C.size=P,!0);if((E||ae)&&(T&&q.transform("translate",[(i+o)/2,P-(t%3?G:0)]),h&&g.attr("height",P).attr("x",i).attr("width",o-i)),ee){var ie=p.node().getBBox();M[0]=Math.max(0,Math.round(-ie.x)),M[1]=Math.max(0,Math.round(ie.width+ie.x)-(o-i))}return l};var B=e.navigator;return l.destroy=function(){A&&(y.remove(),A=!1)},l.rotate=b?d3.functor(0):function(e){return arguments.length?(D=e,l):D},l.display=function(e){return arguments.length?(_!=e&&(_=e,A&&y.attr("display",_?null:"none")),l):_},l.color=function(e){return arguments.length?(m!=e&&(m=e,d()),l):m},l.centralizeTicks=function(e){return arguments.length?(v=e,l):v},l.tickPrecedence=function(e){return arguments.length?(V=e,l):V},l.hideTick=function(e){return arguments.length?(S=e,l):S},l.scale=function(e){return arguments.length?(O=e,l):O},l.tickValues=function(e){return arguments.length?(U=e,l):U},l.tickFormat=function(e){return arguments.length?(N=e,l):N},l.setLabelHighlighter=function(e){return arguments.length?(K=e,l):K},l.tickPadding=function(e){return arguments.length?(F=e,l):F},l.tickSize=function(e){return arguments.length?(R=e,l):R},l.ticks=function(e){return arguments.length?(W=e,l):W},l.title=function(e){return arguments.length?(H=d3.functor(e),l):H},l.background=function(e){return arguments.length?(h=e,l):h},l}function a(e,t){var n=e.left,r=n+e.width,a=e.top,i=a+e.height,o=t.left,l=o+t.width,s=t.top,u=s+t.height;return r>=o&&l>=n&&i>=s&&u>=a}var i=["top","right","bottom","left"],o={top:["1,0,0,-1,0,0","1,0,0,-1,0,0"],right:["0,1,1,0,0,0","0,1,1,0,0,0"],bottom:!1,left:["0,1,-1,0,0,0","0,-1,1,0,0,0"]},l=["getMilliseconds","getSeconds","getMinutes","getHours","getDate","getMonth","getFullYear"];l.utc=l.map(function(e){return e.replace(/^get/,"getUTC")}),e.Axis=r}},{}],24:[function(e,t,n){t.exports=function(e,t){function n(){function e(n,r){return i||(i=n.select(".axi-chart-background").node()||n.node()),o=n.append("g").classed("axi-brush",!0),g=o.selectAll("rect").data([!0,!1]).enter().append("rect").classed("axi-brush-mask",!0),h=o.append("rect").classed("axi-brush-extent",!0).data([0]),y=o.selectAll().data([1,2]).enter().append("path").classed("axi-brush-resize",!0).attr("d","M-3,-8H3L4,-7V7L3,8H-3L-4,7V-7ZM-1,-4.5V4.5M1,-4.5V4.5").crisp(o),r?(t(r),t(o)):t(n),m=!0,e}function t(t){function a(e){e&&(k=(e+=k)-(e=Math.max(-b,Math.min(w-_,e))),e&&(b+=e,_+=e,p[0]+=e=x.invert(e)-d,p[1]+=e,l()))}function l(){resetArray(v.extent,p),r(),e.fire("brush")}function c(t){t&&(k=(t+=k)-(t=Math.max(-b,Math.min(w-b,t))),t&&(b+=t,b>_?(b=(b+=_)-(_=b-_),m.move=h,p[0]=p[1],p[1]+=x.invert(_-b)-d,l()):(e.empty(b==_),f||(p[0]+=x.invert(t)-d,l()))))}function h(t){t&&(k=(t+=k)-(t=Math.max(-_,Math.min(w-_,t))),t&&(_+=t,_<b?(_=(_+=b)-(b=_-b),m.move=c,p[1]=p[0],p[0]+=x.invert(b-_)-d,l()):(e.empty(b==_),f||(p[1]+=x.invert(t)-d,l()))))}o.on("mouseover",n).on("mouseout",n);var m,y=[a,c,h],k=0;onMouseDrag(t,m={move:null,start:function(t){k=0,s=!0;var n=y[d3.select(d3.event.sourceEvent.target).data()];n?m.move=n:(b=_=Math.floor(t[0]),p[0]=p[1]=x.invert(b),e.empty(!0),m.move=d3.event.dx>0?h:c),e.fire("brushstart")},end:function(){s=!1,e.fire("brushend")}},i,function(e){return!(e[1]>u+1)},!0),g.on("click",function(){e.empty(!0).fire("brushstart").fire("brushend")})}function n(){if(d3.event)switch(d3.event.type){case"mouseover":c=!0;break;case"mouseout":c=!1}var e=!f&&(c||s);if(y.attr("display",e?null:"none"),e){var t=Math.floor(u/2);y.attr("transform",null).attr("transform",function(e,n){return"translate("+(n?_:b)+","+t+")"})}return e}function r(){h.attr("x",b+"").attr("width",_-b+"").attr("height",u+""),g.each(function(e){var t=d3.select(this);t.attr("height",u).attr("x",e?0:_).attr("width",Math.max(0,e?b:w-_))}),n()}function a(){var e=l&&!f,t=v.displayed!=e;v.displayed=e,t&&o.attr("display",e?null:"none")}var i=null,o=null,l=!0,s=!1,u=0,c=!1,d=0,f=!0,p=[0,0],h=null,g=null,v=e.prev={extent:[0,0]},m=!1,y=null,x=null,b=0,_=0,w=1;return e.renderTo=e,EventListener(e),e.el=function(){return o},e.rendered=function(){return m},e.dragging=function(){return s},e.redraw=function(){if(m&&(a(),l)){var t=scaleChange(x,v);t&&(w=x.range()[1]-x.range()[0],d=x.invert(0));var n=!arrayEquals(v.extent,p)&&(resetArray(v.extent,p),!0);if(e.empty(!(p[0]<p[1])||arrayEquals(p,x.domain()),!0),f)return e;var i=v.height!=u&&(v.height=u,!0);return(t||n)&&(b=Math.floor(x(p[0])),_=Math.ceil(x(p[1])),_-b<1&&(_<w?_++:b--),i=!0),i&&r(),e}},e.destroy=function(){m&&(o.remove(),m=!1)},e.empty=function(t,n){return arguments.length?(f=t,m&&a(),e):f},e.alignNode=function(t){return arguments.length?(i=t,e):i},e.scale=function(t){return arguments.length?(x=t,e):x},e.extent=function(t){return arguments.length?(resetArray(p,t),e):p},e.display=function(t){return arguments.length?(l=t,e):l},e.height=function(t){return arguments.length?(u=t,e):u},e}e.Brush=n}},{}],25:[function(e,t,n){t.exports=function(e,t){function n(){function e(t){u=t.append("g").classed("axi-chart",!0),p=u.append("g").classed("axi-chart-grid",!0),o=u.append("rect").classed("axi-chart-background",!0).crisp(),a=u.append("g").classed("axi-chart-axis",!0),w=u.append("g").classed("axi-chart-series",!0),y=u.append("g").classed("axi-chart-controls",!0);var n=l&&getSvgDefs(u.node());if(n){var i="axi-clippath-"+(window.ChartClipPathId?++ChartClipPathId:ChartClipPathId=1),h=n.append("clipPath").attr("id",i);s=h.append("rect"),w.attr("clip-path","url(#"+i+")")}return f.renderTo(p),r.renderTo(a),_.renderTo(w),m.renderTo(y),null==c&&e.displayPanels(!d),e.fire("render",t),e}function t(){function t(){var t=Math.max(1,Math.floor(e.width()-i[1]-i[3]));return g!=t&&(g=t,k.range([0,t]),!0)}function n(){var t=Math.max(1,Math.floor(e.height()-i[0]-i[2]));return h!=t&&(h=t,T.range([t,0]),!0)}t(),n();var a=[0,0,0,0],o=!(e.dragging&&e.dragging())&&[0,0,0,0];r.forEach(function(e){if(e.display()){e.redraw();var t=e.position();a[t]=Math.max(a[t],e.size()),o&&(t=(e.vertical()+3)%4,o[t]=Math.max(o[t],e.protrusion[0]),t=(t+2)%4,o[t]=Math.max(o[t],e.protrusion[1]))}}),a.forEach(function(t,n){o&&(b[n]=Math.max(0,o[n]-t-e.padding()[n]())),a[n]+=b[n]}),resetArray(i,v(a));var l=t(),s=n();(l||s)&&r.forEach(function(e){(e.vertical()?s:l)&&e.redraw()})}function n(){function e(e){t&&1==e.position()?e.el().attr("transform",null).attr("transform","translate("+g+",0)"):n&&2==e.position()&&e.el().attr("transform",null).attr("transform","translate(0,"+h+")")}var t=x.innerWidth!=g,n=x.innerHeight!=h;x.innerWidth=g,x.innerHeight=h,(t||n)&&(r.forEach(e),o.attr("width",g+"").attr("height",h+""),l&&s.attr("width",g+"").attr("height",h+"")),f.forEach(function(t){t.tickSize(t.vertical()?-g:-h).redraw(),e(t)})}var r=e.axis=Group(),a=null,i=e.axisPadding=[0,0,0,0],o=null,l=!0,s=null,u=null,c=null,d=!1,f=e.grid=Group(),p=null,h=1,g=1,v=identity,m=e.panels=Group(),y=null,x=e.prev={},b=e.protrusion=[],_=e.series=Group(),w=null,k=e.xScale=Group(),T=e.yScale=Group();return e.renderTo=e,EventListener(e),WidgetDiv(e),e.el=function(){return u},e.seriesEl=function(){return w},e.backgroundEl=function(){return o},e.clipPathRect=function(){return s},e.innerWidth=function(){return g},e.innerHeight=function(){return h},e.padding([3,3,3,3]).translate(function(e){e[0]+=i[3],e[1]+=i[0]}),m.methods(["redraw","destroy","reorder"]).onItemAdd(function(e){e.expand||(e.expand=d3.functor(0)),e.reorder||(e.reorder=d3.functor(0)),e.expandDelay||(e.expandDelay=d3.functor(0));var t=m.length-1;e.index=function(n){return arguments.length?(t=n,e):t};var n=!1;e.hidden=function(t){return arguments.length?(n=t,e.display(r),e):n};var r=e.display(),a=e.display;e.display=function(t){return arguments.length?(r=t,a(e.display())):r&&!n}}).addOption("renderTo").options({hidden:!1,expandDelay:0,expand:-1,outerWidth:e.innerWidth,outerHeight:e.innerHeight,on:{expandend:function(){m.redraw()}}}),m.resetIndices=function(){m.forEach(function(e,t){e.index(t)})},r.methods("redraw").addOption("renderTo").addOption("display"),f.methods("redraw").addOption("renderTo").addOption("display"),_.methods(["redraw","destroy"]).addOption("renderTo"),k.options({range:[0,1]}),T.options({range:[1,0]}),e.resize=function(t,n){e.outerWidth(t).outerHeight(n).redraw()},e.destroy=function(){_.destroy(),m.destroy(),e.rendered()&&(u.remove(),e.rendered(!1))},e.redraw=function(){return e.rendered()&&e.display()?(e.setSize(),t(),n(),e.align(),_.redraw(),m.redraw(),e):e},e.paddingFn=function(t){return arguments.length?(v=t,e):v},e.clipPath=function(t){return arguments.length?(l=t,e):l},e.displayPanels=function(t){return arguments.length?(c!=(t=t===!0)&&(c=t,e.panels.hidden(!c).redraw()),e):c},e.displayPanelsIfHover=function(t){return arguments.length?(d=t,e):d},e}e.Chart=n}},{}],26:[function(e,t,n){t.exports=function(e,t){function n(e,t,n,r){i(e,n);var a=e.domain(),o=e.tScale=r?d3.time.scale.utc():d3.time.scale(),l=!1;t&&t.on("wheel",function(n,r,i){if(e==n){var o=(1-r)*i,l=a[1]*r+o,s=a[0]*r+o;t.fire("scroll",e,[s,l])}}).on("dragstart",function(t){e==t&&e.setTimer(0)}).on("changed",function(t,n){e==t&&(l=!0,null!=e.scope()&&e.scope(e.getScope()),n||(l=!1,e.setTimer()))}),e.zoomed=function(){return l};var s=null,u=500;e.setTimer=function(n){null==n&&(n=u),null!=s&&(clearTimeout(s),s=null),n>0&&(s=setTimeout(function(){s=null,t.fire("timerends",e)},n))},e.getNow=d3.functor(null),e.getScope=function(t,n,r){if(null==n&&null==(n=e.getNow()))return!0;null==t&&(t=a);var i,o=t[1]-n;if(o<0||(i=n-t[0])<0)return!0;null==r&&(r=Math.round(.33*i));var l=[t[0],t[1]];return function(){var t=e.getNow();return null!=t&&(t>n||t<n-r)?l=[(n=t)-i,n+o]:l}};var c=e.domain;return e.domain=function(){var e=c.apply(this,arguments);if(arguments.length&&e){var t=a[1]-a[0];o.domain(a.map(function(e,n){return new Date(e+(n||-1)*t)}))}return e},e.ticks=function(e){e=arguments[0]*=3;var t=o.ticks.apply(this,arguments).map(function(e){return e.getTime()}),n=searchIndex(a[0],t,!0)-1,r=searchIndex(a[1],t)+1,i=!1;return n>0?i=!0:n=0,r<t.length?i=!0:r=t.length,i?t.slice(n,r):t},e}function r(e,t,n){i(e,n);var r=e.domain();return t&&t.on("wheel",function(n,a,i){if(e==n){a>1&&(i=Math.max(r[0],Math.min(r[1],i)));var o=(1-a)*i,l=r[1]<0||i<0&&r[0]<0?1:0,s=r[l]*a+o,u=(l?Math.max:Math.min)(0,r[l]),c=(l?s>u:s<u)?(s=u)+(-l||1)*(r[1]-r[0])*a:r[1-l]*a+o,d=l?[c,s]:[s,c];t.fire("scroll",e,d,a>1)}}).on("click",function(n,a){e==n&&a!=r[0]&&a!=r[1]&&t.fire("setpoint",e,a>r[1]||a>0&&a>r[0]?[r[0],a]:[a,r[1]])}),e}function a(){function e(n,s){function u(){var e,n=(E.isCovered()||insideTargets(d3.event.target,a))&&d3.mouse(p);return n&&(e=n[0]+t.xy[0])>0&&e<t.getOuterWidth()&&(e=n[1]+t.xy[1])>0&&e<t.getOuterHeight()&&n}function c(t){w=null;var n=d3.event,r=!1;if(!n.isMouseWheel){var a=(n.sourceEvent||n).target;getParentNode(a,function(e){return!e.ownerSVGElement||(r=(e=d3.select(e)).classed("axi-controls-item")&&(w=e,!0)||e.classed("axi-controls"))})}y=!r&&t&&(t.event=n)&&e.getAxis(t);var i=y&&y.scale();return i&&lib.isFinite(_=(x=i).invert(t[b=y.vertical()]))&&x}function d(e){w.transform("matrix",!e&&E.getTotalXY())}function f(e){t.displayPanelsIfHover()&&t.displayPanels(!!e)}var p=t.backgroundEl().node(),h=document.body,g=t.el(),v=g.node(),m=v.ownerSVGElement||v;i||(i=[]),a||(a=[m].concat(i.map(function(e){return e.el().node()}))),n||(n=d3.select(m)),s||(s=g),h.onMove||d3.select(AddEvent(h,"Move")).on("mousemove",function(){h.fireMove(!0)}).on("mouseout",function(){h.fireMove(!1)}),h.onMouseWheel||onMouseWheel(AddEvent(h,"MouseWheel"),h.fireMouseWheel),h.onMove(e.onMove=function(){var t=u();e.fire(t?"move":"moveout",t)});var y,x,b,_,w;h.onMouseWheel(e.onMouseWheel=function(t,n){d3.event.isMouseWheel=!0,c(u())&&(n.preventDefault(),e.fire("wheel",x,t?l:o,_))});var k=null;onMouseClick(n,function(t){switch(t){case 1:e.fire("click",x,_,k);break;case 2:e.fire("reset",x)}},function(){return!c(k=u())});var T=null,S=navigator.isIE,E=onMouseDrag(s,{move:function(t,n){if(r){var a=arguments[T],i=a&&r.invert(0)-r.invert(a);if(i&&lib.isFinite(i)){var o=r.domain();e.fire("drag",r,[o[0]+i,o[1]+i])}}else w&&(e.fire("controldrag",w,E),d())},start:function(){r&&(S&&s.style("cursor",(T?"ns":"ew")+"-resize"),e.fire("dragstart",r))},end:function(){r?(S&&s.style("cursor",null),e.fire("dragend",r),r=null):w&&(e.fire("controldragend",w,E),d(!0))}},p,function(e){return(r=c(e))&&(T=b),r||w&&d3.functor(w.datum().isDraggable)()},S);return t.displayPanelsIfHover()&&e.on({move:f,moveout:f}),e}var t=null,n=!1,r=null,a=null,i=null,o=1.2,l=1/o;return EventListener(e),e.dragging=function(){return n},e.getAxis=function(e){var n=t.innerWidth(),r=t.innerHeight(),a=!e.event.isMouseWheel,i=a?1.5:1;return t.axis.some(function(t){if(t.scale().scope){var o=a?t.size():1/0;switch(t.position()){case 0:return e[1]<0&&e[1]>=-i*o;case 1:return e[0]>n&&e[0]<=n+i*o;case 2:return e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=r+o;case 3:return e[0]<0&&e[0]>=-i*o}}})},e.onChange=function(t,n,a){return 2==n.length&&t.domain(n,a="boolean"==typeof a&&a,a)&&(t.scope(!0),e.fire("changed",t,t==r)),t},e.on({moveout:function(){i.forEach(function(e){e.isUsed&&e.isUsed()||e.visible(!1,e.hideDelay())})},reset:function(t){t.scope()&&(t.scope(null),e.fire("changed",t,!1))},dragend:function(t){e.fire("changed",t,!1)},changed:function(e,t){n=t},drag:e.onChange,setpoint:e.onChange,scroll:e.onChange}),e.tooltips=function(t){return arguments.length?(i=t,e):i},e.targets=function(t){return arguments.length?(a=t,e):a},e.chart=function(n){return arguments.length?(t=n,t.dragging=e.dragging,e):t},e}function i(e,t){function n(e,t){return t?e<-1?e<e+1?e+1:e/10:e<0?0:e<e+1?e+1:10*e:e>1?e>e-1?e-1:e/10:e>0?0:e>e-1?e-1:10*e}null!=t&&(e.axisIndex=t);var r=!1,a=null,i=[1/0,-(1/0)],o=i.slice(0),l=i.slice(0).reverse(),s=null;return e.setDomain=function(t){var u,c,d,f,p,h;if("function"==typeof s)return u=s(),[!!u&&e.domain(u),!1];var g=!s&&(null==s&&!(s=!1)||t);return g?(c=!r&&o.slice(0),u=(c||i).slice(0),d=a&&a(u,e),d&&(u[0]<l[0]&&(u[0]=l[0]),u[1]>l[1]&&(u[1]=l[1]),f=lib.isFinite(u[0]),p=lib.isFinite(u[1]),!f||!p||u[0]<u[1]||(u[1]>0?f=!1:p=!1),f||(u[0]=p?n(u[1],!1):0),p||(u[1]=f?n(u[0],!0):1)),lib.isFiniteNumber(+u[0])&&lib.isFiniteNumber(+u[1])?(h=e.domain(u,d&&(r||u[0]<c[0]),d&&(r||u[1]>c[1])),e.displayTicks(!0)):(h=!0,e.displayTicks(!1)),[h,!0]):[!1,null]},e.extension=function(t){return arguments.length?(o.forEach(function(e,n){o[n]=t&&null!=t[n]?t[n]:i[n]}),e):o},e.limit=function(t){return arguments.length?(l.forEach(function(e,n){l[n]=t&&null!=t[n]?t[n]:i[1-n]}),e):l},e.scope=function(t){return arguments.length?(s=t,e):s},e.extendDomain=function(t){return arguments.length?(a=t,e):a},e.autoScale=function(t){return arguments.length?(r=t,e):r},e}e.TimeScale=n,e.ValueScale=r,e.ChartZoom=a,e.ActiveScale=i}},{}],27:[function(e,t,n){t.exports=function(e,t){function n(t,n){if(!t)return e.getRandomColor();var r=0;return"rgb("+Math.floor((r=t("r",n))<1?256*r:r)+","+Math.floor((r=t("g",n))<1?256*r:r)+","+Math.floor((r=t("b",n))<1?256*r:r)+")"}function r(e,t){return"function"==typeof e&&(e=e(),"function"==typeof e&&(e=e())),t?(o[e]||(o[e]=d3.interpolateRgb(e,"#fff")))(t):e}function a(e,t){var n=i(e);return isNaN(n)?null:(null==t&&(t=.5),n<t?"white":"black")}function i(e){if("transparent"==e)return NaN;var t=d3.rgb(e);return(l[0]*t.r+l[1]*t.g+l[2]*t.b)/s}e.getRandomColor=function(){return"hsl("+Math.floor(360*Math.random())+","+Math.floor(15+70*Math.random())+"%,"+Math.floor(40+20*Math.random())+"%)"};var o={},l=[.2,.7,.1],s=l.reduce(function(e,t){return e+255*t},0),u=["rgb(0,104,55)","rgb(26,152,80)","rgb(102,189,99)","rgb(166,217,106)","rgb(217,239,139)","rgb(254,224,139)","rgb(253,174,97)","rgb(244,109,67)","rgb(215,48,39)","rgb(165,0,38)"];u.red=u.green=u,u.blue=["#e3ecf4","#c4d7e7","#a4c2da","#85adce","#6597c1","#4682b4","#276da7","#07589b","#00428e","#002d81"],u.black=["#e6e6e6","#cfcfcf","#b8b8b8","#a2a2a2","#8b8b8b","#747474","#5e5e5e","#474747","#303030","#1a1a1a"],e.defaultPalette=u,e.severityColors=["white","silver","#92d050","#fff31c","#08c","#fbbc46","red","black",,,"darkviolet"],e.defaultColors=["steelblue","orange","forestgreen","blueviolet","maroon","yellowgreen","magenta","chocolate","deepskyblue","gray"],e.newColor=n,e.interpolateColor=r,e.adjustTextColor=a}},{}],28:[function(e,t,n){t.exports=function(e,t){function n(){var e=Group(),t=!1,n=null,r=null,a=null,i=0,o=!0,l=!1,s=0,u=1,c=e.preference=[],d=e.prev={},f=[0,0],p=0,h=0;return e.renderTo=function(i){return a=i.append("g").classed("axi-controls",!0).on("mouseover",function(){e.fire("over")}).on("mouseleave",function(){e.fire("out")}),t&&(n=a.append("rect").classed("axi-controls-background",!0),null!=r&&n.append("title").text(r)),e.fire("render"),e.render(a),e},EventListener(e),WidgetDiv(e),e.el=function(){return a},e.backgroundEl=function(){return n},e.layoutchange=function(){return l},e.addOption("render").methods(["resize","setTooltip"]).on("itemresize",function(e){e.display()&&(l=!0)}).on("itemdisplaychange",function(){l=!0}),e.redraw=function(t){function n(e,t,n){e.el.transform("translate",[e.x=t,e.y=n])}if(!e.display()||!e.rendered()||t&&!l)return e;e.setSize();var r=e.getMaxWidth(),a=e.getMaxHeight(),g=d.maxWidth!=r&&(d.maxWidth=r,!0),v=d.maxHeight!=a&&(d.maxHeight=a,!0),m=d.horizontal!=o&&(d.horizontal=o,!0),y=d.rows;if(m&&(l=!0),l||g||v){var x=0,b=c.filter(function(e){return!e.display()||!e.filled||e.w>r||e.h>a?(e.show(!1),!1):(x=Math.max(x,o?e.w:e.h),!0)});if(x){var _=[],w=b.length,k=Math.max(1,Math.floor((o?r:a)/x)),T=Math.min(Math.ceil(w/k),s||w,w);for(y=u,I;e.toggle(b,y,r,a),p&&(I=w-p)&&(_.push(I),y!=T);y++);if(_.length==y){for(var S=y-1,E=S;E-- >0;_[S]>_[E]&&(S=E));++S!=y&&e.toggle(b,y=S,r,a)}}else p=0}if(!p)return h=i=0,l=!1,e.resetSize();if(d.rows!=y&&(d.rows=y,l=!0),!l)return e.resetSize().align();if(h=i=0,o){var M=0,I=0,C=0;e.forEach(function(e){e.show()&&(n(e,h,I),M=Math.max(M,e.w),I+=e.h,++C%y!=0&&C!=p||(h+=M,i=Math.max(i,I),M=I=0))})}else{var M=0,I=0,C=0;e.forEach(function(e){e.show()&&(n(e,M,i),I=Math.max(I,e.h),M+=e.w,++C%y!=0&&C!=p||(h=Math.max(h,M),i+=I,M=I=0))})}return h-=f[0],i-=f[1],l=!1,e.resetSize().align()},e.getMaxWidth=function(){return e.width()+f[0]},e.getMaxHeight=function(){return e.height()+f[1]},e.resetSize=function(){if(t){var r=e.padding(),a=r[3](),o=r[0]();n.attr("x",-a).attr("y",-o).attr("width",h+a+r[1]()).attr("height",i+o+r[2]())}return e.totalWidth(h&&e.totalWidth()+(h-e.width())).totalHeight(i&&e.totalHeight()+(i-e.height())).width(h).height(i)},e.toggle=function(e,t,n,r){if(p=0,o){var a=0,i=0,l=0;e.forEach(function(e){var o=Math.max(i,e.w),s=l+e.h;o+a>n||s>r?e.show(!1):(e.show(!0),i=o,l=s,++p%t==0&&(a+=i,i=l=0))})}else{var s=0,l=0,i=0;e.forEach(function(e){var a=Math.max(l,e.h),o=i+e.w;a+s>r||o>n?e.show(!1):(e.show(!0),l=a,i=o,++p%t==0&&(s+=l,l=i=0))})}},e.datum=function(t,n,r){var i="function"==typeof t||"object"==typeof t&&null!=t,o={data:i?t:{value:t},group:e,tooltip:null,el:null,node:null,parentEl:null,tooltipEl:null,rendered:!1,render:function(t){var n=!this.rendered&&(arguments.length?this.parentEl=t:this.parentEl);if(n&&this.display()){var r=this.el=n.append("g").datum(this).classed("axi-controls-item",!0);this.node=r.node(),this.rendered=!0,this.setState(this._state),this.setTooltip(),e.fire("itemrender",this),r.attr("display",this.show()?null:"none")}},setTooltip:function(){if(this.rendered){var e=this.tooltip,t="function"==typeof e,n=this.tooltipEl;if(t||null==n){var r=getTooltipText(t?e.call(this):e),a=!!r;n&&n.attr("display",a?null:"none"),a?(n||(this.tooltipEl=this.el.insert("title",":first-child"))).text(r):n?n.text(""):t||(this.tooltipEl=!1)}}},filled:!1,w:0,h:0,x:0,y:0,rect:null,isDraggable:null,resize:function(){if(this.rendered){var t="none"==this.el.attr("display"),n="none"==a.attr("display");n&&a.attr("display",null),t&&this.el.attr("display",null);var r=this.rect=getNodeRect(this.el.node()),i=this.el.select("text").node();i&&adjustTextNodeRect(i,r);var o=r.width,l=r.height,s=e.getItemSize&&e.getItemSize.call(this,o,l);s&&(o=s[0],l=s[1]),e.fire("setsize",this,o,l);var u=this.filled=l>0||o>0;o&&(o+=f[0]),l&&(l+=f[1]),t&&this.el.attr("display","none"),n&&a.attr("display","none"),u||this.show(!1),this.w==o&&this.h==l||(this.w=o,this.h=l,e.fire("itemresize",this))}},_show:!1,show:function(t){return arguments.length?(this._show!=t&&(this._show=t,this.rendered&&(this.el.attr("display",t?null:"none"),e.fire("itemdisplaychange",this))),this):this._show},_display:!0,display:function(e){return arguments.length?(this._display!=e&&(this._display=e,this.rendered||this.render(),this.show(e&&this.filled)),this):this._display},setState:function(e){this.rendered&&(this._state&&this.el.classed("axi-controls-item-"+this._state,!1),e&&this.el.classed("axi-controls-item-"+e,!0))},_state:null,state:function(t){if(!arguments.length)return this._state;if(this._state!=t){this.setState(t);var n=this._state;this._state=t,e.fire("itemstatechange",this,t,n)}return this}};return null==r&&(n=addItemToArray.getArrayIndex(e.length,n))<e.length-1&&(r=c.indexOf(e[n])),addItemToArray(c,o,r),e.add(o,n),o},e.remove=function(t){var n=arguments,r="boolean"!=typeof t||(n=Array.prototype.slice.call(n,1),t),a=e.splice.apply(e,n).forEach(function(e){r&&e.el&&e.el.remove(),c.splice(c.indexOf(e),1)});return a.length&&(l=!0),a},e.data=function(t){return e.remove(0),t.forEach(e.datum),e},e.destroy=function(){e.remove(0),e.rendered()&&(a.remove(),e.rendered(!1))},e.displayed=function(){return e.display()&&p},e.visible=function(t){return arguments.length?(p=t,e):p},e.background=function(n){return arguments.length?(t=n,e):t},e.space=function(t){return arguments.length?(resetArray(f,t),e):f},e.minRows=function(t){return arguments.length?(u=t,e):u},e.maxRows=function(t){return arguments.length?(s=t,e):s},e.horizontal=function(t){return arguments.length?(o=t,e):o},e.backgroundTitle=function(t){return arguments.length?(r=t,e):r},e}e.Controls=n}},{}],29:[function(e,t,n){t.exports=function(e,t,n){function r(e,t,n){e.textContent=null;var a=document.createElement("div");a.innerHTML=t;for(var i=0,o=a.childNodes;i<o.length;i++){var l=o[i];if(l.nodeType==l.ELEMENT_NODE){for(var s=n.append(l.tagName.toLowerCase()),u=0,c=l.attributes;u<c.length;u++){var d=c[u];s.attr(d.name,d.value)}l.innerHTML&&r(s.node(),l.innerHTML,s)}else e.appendChild(l.outerHTML?document.createTextNode(l.outerHTML):(i--,l))}}function a(e,n){if(n=[].concat(n).filter(function(e){return null!=e&&""!==e}),!(e instanceof SVGElement))return void(e.innerHTML=n.join("<br>"));switch(n.length){case 0:e.textContent=null;break;case 1:r(e,n[0],t.select(e));break;default:var a=t.select(e),i=+a.attr("x")+ +a.attr("dx")||0,o="<tspan>"+n.join('</tspan><tspan dy="1em" x="'+i+'">')+"</tspan>";r(e,o,a)}}function i(e){return e.children||l.call(e.childNodes,function(e){return e.nodeType==e.ELEMENT_NODE})}function o(){return!(document.hidden||document.webkitHidden||document.mozHidden||document.msHidden)}if(t){var l=Array.prototype.filter;t.selection.prototype.child=function(e){return this.select(function(){var n=i(this);return e?t.selectAll(n).filter(e).node():n[0]||null})},t.selection.prototype.children=function(e){return this.selectAll(function(){var n=i(this);return e?t.selectAll(n).filter(e)[0]:n})},t.selection.prototype.text=function(e){if(!arguments.length)return this.node().textContent;var t,n="function"==typeof e,r=!1;return this.each(function(){var i=n?e.apply(this,arguments):e;this.ownerSVGElement&&(r||(t="string"==typeof i&&i.indexOf("\n")>=0?i.split("\n"):i,r=!n),i=t),a(this,i)}),this},t.selection.prototype.crisp=function(e){var n="function"==typeof e;return this.each(function(){var r=t.select(this),a="none"!=r.style("stroke")&&parseFloat(r.style("stroke-width"))||0,i=a/2,o=i%1;this.__strokeRange__=[-i+o,i+o],(n?e.apply(this,arguments):e||r).transform("translate",[o,o],!0)}),this},t.selection.prototype.transform=function(e,t,n){var r="function"==typeof t,a=new RegExp("\\b("+e+"\\(.*?\\))|$","i"),i="translate"==e,o=!i&&"matrix"==e;return this.each(function(){function l(e){return e?c:(u=c+d,e)}var s=r?t.apply(this,arguments):t;if(i&&!this.ownerSVGElement)this.style.left=s?s[0]+"px":"",this.style.top=s?s[1]+"px":"";else{var u,c=s?e+"("+(o&&2==s.length?"1,0,0,1,"+s:s)+")":"",d=this.getAttribute("transform"),f=d?d.replace(a,n?l:c):c;u||(u=f)?this.setAttribute("transform",u):this.removeAttribute("transform")}})},t.selection.prototype.getTransition=function(e){return this.transition().duration(e>0&&o()?e:0)};var s=(t.transform(""),t.transform);t.transform=function(e){return s.apply(this,arguments.length?(null==e&&(e=arguments[0]=""),arguments):[""])};var u=t.rgb;t.rgb=function(e){return"string"==typeof e&&(arguments[0]=e.toLowerCase()),u.apply(this,arguments)},e.documentVisible=o}}},{}],30:[function(e,t,n){t.exports=function(){"use strict";function e(a){return n=a,t=n.append("select").attr("class","axi-dropdown"),i&&t.on("change",function(){i.call(e,this.value)}),e.bindOptions(r),e}var t,n,r=[],a=function(e){return e},i=null;return e.bindOptions=function(n){t.selectAll("option[disabled]").remove(),t.selectAll("option").data(n).enter().append("option").attr("value",function(e){return e.value}).attr("selected",function(e){return e.isSelected||null}).text(function(e){return e.text?e.text:a(e.value)});var r=!n.some(function(e){return e.isSelected});return r&&t.insert("option",":first-child").text("- Select -").attr("selected",!0).attr("disabled",!0),e},e.options=function(t){return arguments.length?(r=t,e):r},e.format=function(t){return a=t,e},e.destroy=function(){t.remove()},e.el=function(){return t},e.onChange=function(t){return i=t,e},e}},{}],31:[function(e,t,n){t.exports=function(){function e(){return n(),e}var t,n=Tooltip().hideDelay(250).translate(function(e,t,n,r,a,i){return[t+i.width-r-5,n+i.height-a-5]}),r="";return e.redraw=function(){return n.record(n.hover()?""+t:"Error").showAt(0),e},e.error=function(n){return arguments.length?(t=n,e):t},e.alignNode=function(t){return arguments.length?(n.alignNode(t),e):n.alignNode()},n.format(function(e){return'<div style="'+(r?"padding: "+r:"")+'">'+e+"</div>"}).on("render",function(){var e=n.hover(),t=n.innerEl();n.el().classed("axi-tooltip-default",!1).classed("axi-tooltip-info",!0).classed("axi-tooltip-danger",!0).style("z-index",getZIndex(n.alignNode())+25),n.innerEl().style("min-width",e?n.width()+"px":null).style("min-height",e?n.height()+"px":null),r=(t.style("padding-top")+" "+t.style("padding-right")+" "+t.style("padding-bottom")+" "+t.style("padding-left")).trim(),t.style("padding","0")}).on("over",e.redraw).on("out",e.redraw),e}},{}],32:[function(e,t,n){var r=e("./formats");t.exports=function(e,t){function n(e,t,n,r){function a(r,c){if(!r||!lib.isFinite(r=+r))return r;var d=Math.floor(Math.log(Math.abs(r))/Math.log(e))+n;if(d=Math.min(Math.max(d,0),t.length-1),s&&null!=c){var f=Math.min(d,Math.floor(c/3));f&&(d-=f,c-=3*f)}var p=Math.pow(e,d-n),h=s?null==c?(a.maxPow=p,o):l(c):u;return r=h(r/p),r&&i(r)+t[d]}var s=null==r,u=!s&&l(r);return a.maxPow=+s,a}function a(e,t){return i((null==t?o:l(t))(e))}function i(e){return e&&(e+"").replace(/^(-?[0-9]{1,3})(([0-9]{3,3})*)((\.|e|$).*)$/,function(e,t,n,r,a){return n?t+n.replace(/(...)/g,",$1")+a:e})}function o(e){if(0==e)return e;var t=e>99&&e<100||e>0&&e<1?2:1,n=Math.round(Math.log(Math.abs(e))/Math.LN10);return l(n>t?0:n<0?t-n:t)(e)}function l(e){return f[e]||(f[e]=s(e,Math.round))}function s(e,t){var n=Math.pow(10,e);return function(e){return t(e*n)/n}}function u(e){var t=d3.functor("0");return function(n){var r=e-(Math.floor(n)+"").length;return(r>0?new Array(r).map(t).join(""):"")+n}}function c(e){if("string"!=typeof e)return b[b.hasOwnProperty(e)?e:0];var t=new RegExp("%(([%"+g+"]f?)(["+v+"]?))?(\\(|\\s*[^\\s"+x+"]*\\s*)","g"),n=e.replace(t,function(e,t,n,r,a){return t?"%"===n?n+a:"?"===r&&"("!==a?"":"%"+n+(r&&"\\"+r)+a:a}),r=e.replace(t,function(e,t,n,r,a){return t?"%"===n?n+a:"?"===r&&"("!==a?"":"(%"+n+(r&&"\\"+r)+")"+("("===a||r||n<"a"?a:"("+a+")"):a}),a="()"+v+"\\\\",i=new RegExp("(\\\\|)(["+a+"])","g"),o=[],l=0,s=0,u=[];n=n.replace(i,function(e,t,n,r){return t?n:""}),r=r.replace(i,function(e,t,n,r){return t?e:(r=a.indexOf(n))>=0&&r<=1?(o.push(r?-1:1),n):""}),o.forEach(function(e){(l+=e)<0&&(r="("+r,l++)}),l>0&&(r+=new Array(l).map(d3.functor(")")).join(""));var u=[];r.replace(i,function(e,t,n,r){return t||"("!==n||u.push(r-s),s++,e}),r=new RegExp(escapeExpression(r,new RegExp("[\\w\\s%"+a+"]")));var c=n.match(r);c.shift();var f=c.reduce(function(e,t){return(t=t.match(m))&&e.indexOf(t=p[t[1]])<0&&e.push(t),e},[]).sort(function(e,t){return e<t?1:e>t?-1:0});return f.length?function(e){return d(e,f,n,c,u)}:d3.functor(n)}function d(e,t,n,r,a){var i=Math.sign(e);i<0&&(e=-e);var o=t.map(function(t){var n=e/h[t],r=Math.floor(n);return r&&(e-=r*h[t]),n}),l=0,s=0,u=-1,c=0,d=r.reduce(function(e,n){var r=a[l++],i=r==u;if(u=-1,r<c)return e;var d=i&&"",f=r+n.length;if(!i){var h=n.match(m),g=h&&h[1],v=t.indexOf(p[g]),d=o[v];if(null==d)return e;if(h[2])for(;++v<o.length;)o[v]=0;else d=Math.floor(d);switch(h[3]){case"?":d||(u=f),d="";break;case"":if(!d&&g>="a"){u=f,d="";break}default:d=y.hasOwnProperty(g)?y[g](d):d+""}}return c=f,s+=-e.length+(e=e.substring(0,r+s)+d+e.substring(f+s)).length,e},n);return d.trim()?(i<0?"-":"")+d:"0"}e.parseFormatString=function(){function e(e,s){function u(e,t){var n=a;return A=Math.max(A,n.maxPow),(e=n(e,lib.isFiniteNumber(t)?t:g))&&e+"%"}function c(e,r){if(null==h)return v;var a=n.apply(this,e.concat(t(r))),i=a(r.length>1?r[0]:h,g);return A=Math.max(A,a.maxPow),i}function d(e,t){p=C[0]=e,h=isNaN(e=+e)?null:e,g=t,A&&(A=1);var n=I.apply(this,C);return lib.isEvalMethod(n)&&(n=n.toString()),d.maxPow=A,n}var f=lib.parseValue(e);if(!f)return null;var p,h,g,v="",m=lib.getEvalMethod(function(e){return null==h?v:u(h,e)}),y=lib.getEvalMethod(function(e){return null==h?v:u(100*h,e)}),x=[1e3,["","k","M","G","T","P"]],b=[1024,x[1]],_=[1e3,["","k","M","B","T","Q"]],w=lib.getEvalMethod(function(){return c(x,arguments)}),k=lib.getEvalMethod(function(){return c([1,[""]],arguments)}),T=lib.getEvalMethod(function(){return d.radix=2,c(b,arguments)}),S=lib.getEvalMethod(function(){return c(_,arguments)}),E=lib.getEvalMethod(function(){return null==h?v:new Date(h).toISOString()}),M=lib.getEvalMethod(function(e){if(!p)return v;try{return new r.JsonCode(p,e)}catch(e){log("could not parse value to json format:",e)}return p}),I=new Function("value, numeric, decimal, round, binary, currency, percent, fraction, iso, json",f),C=[null,w,w,k,T,S,m,y,E,M],A=d.maxPow=0,D=s?l.concat(o):l;return i(d,D)||i(function(){return d},D)}function t(e){var t=e[0],n=e[1];if(e.length<2&&"number"==typeof t)n=lib.isFinite(t)?t:null,t=0;else{var r="string"==typeof t&&t.match(s);if(r){for(t=2;t<r.length&&!r[t];)++t;--t}else t=0;lib.isFiniteNumber(n)||(n=null)}return[t,n]}function i(e,t){try{var n=e();if("function"==typeof n&&!lib.isEvalMethod(n)&&t.some(function(e){return e.every(function(e){try{return n(e),!0}catch(e){}})}))return n}catch(e){}}var o=[["0"],["1"]],l=[[0],[1]],s=/^((kilo|thousands?)|(mega|millions?)|(giga|billions?)|(tera|trillions?)|(peta|quadrillions?))$/i;return e}(),a.maxPow=1;var f={};e.parseFormatString=parseFormatString,e.defaultValueFormat=e.valueFormat=a,e.NumberFormat=n,e.addCommas=i,e.d3&&function(){function t(e,t){var r=(null==t||t)&&s(e),a=r&&(t||r(new Date)!=e.replace(/%(%)?/g,"$1"));if(a){var i=n(r);return i.utc=n(s.utc(e),!0),i}return!t&&d3.format(e)}function n(e,t){function n(t){var n="number"==typeof t,r=n?t:(t instanceof Date?t:t=new Date(t)).getTime();return lib.isFinite(r)?e(n?new Date(t):t):""}return n.isUTC=!!t,n.utc=null,n.parse=e.parse,n}function r(e){function t(e){return n(e,!1)}function n(t,n){var a=n?e.utc:e;return i.test(t)?function(e){return a(r(t,e,!0))(e)}:a(t)}function r(e,t,n){return e.replace(i,function(e,r){return r.length%2?e:r+a[n?t.getUTCDay():t.getDay()]})}t.utc=function(e){return n(e,!0)};var a=["Su","Mo","Tu","We","Th","Fr","Sa"],i=/(%*)%aa/g;return t}function a(e){return e.isUTC?c.utc:c}function i(e,t){var n=(t?e.getUTCSeconds():e.getSeconds())?(t?u[2].utc:u[2])(e):(t?e.getUTCMinutes()||e.getUTCHours():e.getMinutes()||e.getHours())&&(t?u[1].utc:u[1])(e),r=n?(t?u[0].utc:u[0])(e):(t?u[3].utc:u[3])(e);return n?[n,r].join(" "):r.trimLeft()}function o(e){var t=e.isUTC;if((e.dayFormat||e.hourFormat)&&h){var r=l(t);return e.hourFormat&&(r[3]=[e.hourFormat,t?function(e){return e.getUTCHours()}:function(e){return e.getHours()}]),e.dayFormat&&r.splice(4,3,[e.dayFormat,t?function(e){return 1!=e.getUTCDate()||e.getUTCMonth()}:function(e){return 1!=e.getDate()||e.getMonth()}]),n(p.call(t?s.utc:s,r),t)}var a=o.defaultTimeAxisFormat;return t?a.utc:a}function l(e){return h&&(e?h.utc:h).map(function(e){return e.slice(0)})}var s=r(d3.time.format),u=["%e-%b-%Y","%H:%M","%H:%M:%S","%e-%b-%Y, %a"].map(function(e){return t(e,!0)}),c=n(i);c.utc=n(function(e){return i(e,!0)});var d=[u,u.map(function(e){return e.utc})].map(function(e){var t=e[0],n=e[1],r=e[2];return function(e){var a=e[0],i=e[1],o=t(a),l=t(i);if(o!=l)return[o,l];var s=n(a),u=n(i);if(s!=u)return[s,u,o];var c=r(a),d=r(i);return c!=d?[c,d,o]:[c+" "+o]}}),f=d[0];f.utc=d[1],e.displayDatesFormat=f,e.getDefaultTimeFormat=a,e.d3Format=t;var p=d3.time.format.multi,h=p&&[[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%H:%M",function(e){return e.getMinutes()}],["%H:%M",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",function(){return!0}]];h&&(h.utc=[[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%H:%M",function(e){return e.getUTCMinutes()}],["%H:%M",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",function(){return!0}]]);var g=n(h?p.call(s,l()):d3.time.scale().tickFormat());g.utc=n(h?p.call(s.utc,l(!0)):d3.time.scale.utc().tickFormat(),!0),o.defaultTimeAxisFormat=g,e.getTimeAxisFormat=o}();var p={L:0,l:0,S:1,s:1,M:2,m:2,H:3,h:3,d:4},h=[1,1e3,60,60,24],g="LlSsMmHhd",v="?!",m=new RegExp("^%(["+g+"])(f?)(["+v+"]?)$"),y={L:u(3),S:u(2),M:u(2),H:u(2)},x=",.;:?`~!@#$%^&*-+='\"\\\\/|<>{}()\\[\\]",b=["%dd %hh %mm %s(s%sf?())%L?(0.%Ls)"].map(c);h.forEach(function(e,t){t&&(h[t]*=h[t-1])}),e.intervalFormat=c}},{"./formats":33}],33:[function(e,t,n){n.JsonCode=function(){function e(e,t){var n=JSON.parse(e);"number"!=typeof t&&(t=2),this._content=JSON.stringify(n,null,t)}var t;try{t=hljs.highlightBlock}catch(e){e instanceof ReferenceError&&log("warning: highlightjs not defined")}return e.prototype.toString=function(){return this._content},e.prototype.appendTo=function(e){var n=e.append("pre").append("code").attr("class","json").text(this._content).node();t&&t(n)},e}()},{}],34:[function(e,t,n){t.exports=function(e,t){function n(e){function t(e,t){return function(n){n.hasOwnProperty(e)||(n[e]=t,instanceofArray(n)&&n.forEach(arguments.callee))}}e||(e=[]);var n={},r={};return AddEvent(e,"ItemAdd"),e.add=function(r,a){a=addItemToArray(e,r,a),r.groupIdx=a;for(var i in e)e.hasOwnProperty(i)&&"ownOption"==e[i].name&&t(i,e[i])(r);e.fireItemAdd(r,a);for(var i in n)n.hasOwnProperty(i)&&r[i](n[i]);return e},e.options=function(t,r){switch(arguments.length){case 0:return n;case 1:for(var a in t)t.hasOwnProperty(a)&&e.options(a,t[a]);break;default:e.addOption(t)[t](r)}return e},e.addOption=function(t){return e.hasOwnProperty(t)||(e[t]=function(r){return arguments.length?(n[t]=r,e.forEach(function(e){e[t](r)}),e):n[t]}),e},e.ownOptions=function(t,n){switch(arguments.length){case 0:return r;case 1:for(var a in t)t.hasOwnProperty(a)&&e.ownOptions(a,t[a]);break;default:e.addOwnOption(t)[t](n)}return e},e.addOwnOption=function(n){if(e.hasOwnProperty(n))return e;var a=function(t){return arguments.length?(r[n]=t,e):r[n]};return a.name||(a.name="ownOption"),t(n,a)(e),e},e.methods=function(t){if(instanceofArray(t))for(var n=0;n<t.length;n++)e.methods(t[n]);else e.hasOwnProperty(t)||(e[t]=function(){var n=arguments;return e.map(function(e){return e[t].apply(e,n)})});return e},e}e.Group=n}},{}],35:[function(e,t,n){t.exports=function(t){t.audioAlert=e("./audio_alert"),t.Dropdown=e("./dropdown"),t.WidgetIcon=e("./widget_icon"),t.ErrorTooltip=e("./error_tooltip"),t.onSeriesClick=e("./onseriesclick"),e("./init")(t),e("./array")(t),e("./axis")(t),e("./brush")(t),e("./chart")(t),e("./chart_zoom")(t),e("./colors")(t),e("./controls")(t),e("./d3extend")(t,d3),e("./format")(t),e("./group")(t),e("./legend")(t),e("./listener")(t),e("./math")(t),e("./nodes")(t),e("./panel")(t),e("./placeholders")(t),e("./progress")(t),e("./scale")(t),e("./scroller")(t),e("./table")(t),e("./tooltip")(t),e("./widget")(t),e("./zoom")(t)}},{"./array":21,"./audio_alert":22,"./axis":23,"./brush":24,"./chart":25,"./chart_zoom":26,"./colors":27,"./controls":28,"./d3extend":29,"./dropdown":30,"./error_tooltip":31,"./format":32,"./group":34,"./init":36,"./legend":37,"./listener":38,"./math":39,"./nodes":40,"./onseriesclick":41,"./panel":42,"./placeholders":43,"./progress":44,"./scale":45,"./scroller":46,"./table":47,"./tooltip":48,"./widget":49,"./widget_icon":50,"./zoom":51}],36:[function(e,t,n){t.exports=function(e,t){function n(e){return e?e[0].toUpperCase()+e.substr(1).toLowerCase():e}function r(e,t){var n=null,r=0,a=null,i=t?1:0;return function(t){var o=Array.prototype.slice.call(arguments,1);if(!(t>0))return e.apply(this,o),n=null,void r++;n=o;var l=r+=i;i&&null!=a&&(clearTimeout(a),a=null),a=setTimeout(function(){l==r&&(e.apply(this,n),n=null,r++)},t)}}function a(e,t){return t&&"object"==typeof t||(t=/[\w\s]/),Array.prototype.map.call(e,function(e){return t.test(e)?e:"\\"+e}).join("")}function i(e,t,n,r,a){function i(e,t){var n=t.escaped=t[1],r=t[2+a],i=r.length;return n&&(u.lastIndex=t.index+(i+=n.length)+1),l([e,r&&r.substring(0,r.length/2),n&&t[0][i]])}function l(e){return 1==(e=e.filter(o)).length?e[0]:e.join("")}function s(e){var t=u.lastIndex,i=u.exec(e),o=e.substring(t,i?i.index:e.length);if(i){if(o=n(o,i),i.escaped)return c.push(o),s(e);r&&i.splice(0,4+3*a)}return[l(c.splice(0).concat(o)),i]}if((null==r&&(r="\\\\",!0)||null==a)&&(a=0),null==e||!n&&(n=i,!0)&&!r)return null;null==t&&(t="gmi");var u;try{u=new RegExp(r?"("+r+")?(("+r+r+")*)("+e+")":e,t)}catch(e){return null}var c=[];return s.exp=u,s}function o(e){return e}function l(e,t,n){if(e&&t){null==n&&(n=function(e){return null==e});var r;for(var a in t)n&&n(r=t[a],a)||(e[a]=r)}return e}function s(){return Array.prototype.reduce.call(arguments,function(e,n){var r="object"==typeof n&&null!=n||"function"==typeof n;if(!e)return r?n:{};if(r)for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i!==t&&(e[a]=i)}return e},null)||{}}function u(e,n,r,a,i){arguments.length<5&&(i=function(e){return"object"==typeof e&&null!=e});var o,l=!1;return i(e)&&!function e(r,a,s){function u(u,c){var d=s;return u===t||n&&(n.call(r,u,c,d&&(d=d.concat(arguments)))?(o=u,l=!0):!a)||!i(u)||e(u,a,d),l}if(--a||n)if(r.constructor.prototype.some)r.some(u);else for(var c in r)if(r.hasOwnProperty(c)&&u(r[c],c))break}(e,arguments.length<3?1:r,a),o}function c(e){var t={};t.isChrome=/\bChrome\b/.test(e),t.isIE=/\b(MSIE|Trident)\b/.test(e),t.isIE9=t.isIE&&/\bMSIE 9\./.test(e);var n=!t.isIE&&/\bFirefox\/([0-9]*)\./.exec(e),r=n?+n[1]:null;return isFinite(r)||(r=null),t.isFF=!!n,t.isFF25=t.isFF&&r>=25,t.ffVersion=r,t}o.invert=(o.distance=o).invert=o;var d=function(){function e(n,r){if("object"==typeof n&&null!=n&&!Array.isArray(n)&&t.indexOf(n)<0){if(t.push(n),n.hasOwnProperty(r))return n;for(var a in n){var i=e(n[a],r);if(null!=i)return i}}return null}var t=[];return function(){var n=e.apply(this,arguments);return t.splice(0),n}}();l(e.navigator,c(e.navigator.userAgent)),e.someOwnProperty=u,e.extendObject=l,e.findProperty=d,e.identity=o,e.Delayed=r,e.toCapitalCase=n,e.getEscapedRegExp=i,e.escapeExpression=a,e.longDash="&#8722;",e.extendObjects=s}},{}],37:[function(e,t,n){t.exports=function(e,t){function n(e){var t=Controls().space([7,0]),n=null,r=t.prev,a=!(r.expandAll=!1);t.on("itemclick",function(e){if(e.isLast){var a=r.displayed.reduce(function(e,t){return t.isLast?e:n(t,!0,e,!0)},[]);n(e,!0,a)}else n(e,!n(e));t.setOnLastClickItem()}),t.setOnLastClickItem=function(e){var i=r.expandAll!=a&&(r.expandAll=a,!0);if(i||a){var o=t.filter(function(e){return e.display()}),l=!e||!arrayEquals(r.displayed,o);if(r.displayed=o,i||l){var s=a&&o.length>1&&o.reduce(function(e,t){return n(t)?null==e&&t:e},null);o.forEach(function(e){e.isLast!=(e.isLast=s==e)&&t.fire("lastitemchange",e)})}}};var i="Show All Series";t.on("lastitemchange",function(e){t.setLastItemTooltip(e,i)}),t.setLastItemTooltip=function(e,t){var n=e.isLast,r=e.buttonEl,a=r&&(r.tooltipEl||n&&(r.tooltipEl=r.append("title")));if(a)if(n){var i=a.node();i.parentNode||r.node().appendChild(i),a.text(t)}else a.remove()};var o=t.redraw;return t.redraw=function(){var e=o.apply(this,arguments);return t.setOnLastClickItem(!0),e},t.methods(["update","updateValue","updateColor"]).options({showLastValue:!0}).on("render",function(){t.el().classed("axi-legend",!0)}).onItemAdd(function(n){var r=n.data,a=!1,i="",o=0;n.isLast=!1,n.tooltip=r.getTooltip(),n.color=null,n.title=r.getTitle(),r.series.on("labelchanged",function(e){n.labelEl&&(n.title=e,n.labelEl.text(plusString(n.title,":"+i)),n.resize())}),n.updateColor=function(){var e;return n.buttonEl&&n.rendered&&n.display()&&(n.color?e=n.color:r.displayInLegend()&&(e=r.getColor())),e&&n.buttonEl.attr("stroke",e).attr("fill",e),n},n.updateValue=function(){if(a&&n.rendered&&n.display()){var t;try{var l=r.data();if(0!==l.t.length){for(var s=e.domain(),u=l.t.length-1;u>=0;){if(l.t[u]<s[1]){t=l.v[u];break}u--}t=null==t?l.v[0]:t}}catch(e){}t=null==t?r.getLastValue():t;var c=r.getFormat(),d=" ".concat(null==t?longDash:c?c(t):t);if(i!=d)return i=d,n.labelEl.text(plusString(n.title,":"+i)),o!=(o=null==t?2:i.length)?(n.resize(),2):1}return 0},n.update=function(){return n.updateColor().updateValue()},n.showLastValue=function(e){return arguments.length?(a=!!r.getLastValue&&e,n):a},n.addButton=t.addCircle}).on("itemrender",function(e){var n=e.el,r=getNodeSize(e.node,"font-size")/2,a=e.buttonEl=e.addButton(n,r);a&&(a.classed("axi-legend-button",!0).on("click",function(){t.fire("itemclick",e)}),e.resize()),e.labelEl=n.append("text").attr("y","1").attr("dy",".8em").attr("dx",e.w-t.space()[0]+(navigator.isChrome?5:3));var i=e.updateValue();i||e.labelEl.text(e.title),i<2&&e.resize()}),t.addCircle=function(e,t){return e.append("circle").attr("r",t=Math.floor(t)).attr("cx",t+1).attr("cy",t+1)},t.addRect=function(e,t){var n=Math.round(2.4*t),r=Math.round(.8*t),a=Math.floor(.6*t)+2;return e.append("rect").attr("x",1).attr("y",a).attr("width",n).attr("height",r)},t.active=function(e){return arguments.length?(n=e,t):n},t.expandAll=function(e){return arguments.length?(a=e,t):a},t}e.Legend=n}},{}],38:[function(e,t,n){t.exports=function(e,t){function n(e){var t={};return e.fire=function(n){var r=t[n];if(!r)return e;var a=Array.prototype.slice.call(arguments,1);a.push(n);for(var i=0;i<r.length;i++)r[i].apply(this,a);return e},e.on=function(n,r,a){switch(arguments.length){case 0:return t;case 1:a=r;for(var i in n)e.on(i,n[i],a);break;default:var o=t[n]||[];r.concat||(r=[r]),t[n]=a?r.concat(o):o.concat(r)}return e},e.un=function(n,r){switch(arguments.length){case 0:t={};break;case 1:t[n]=null;break;default:var a=t[n];if(!a)break;for(var i=a.length-1;i>=0;i--)a[i]==r&&a.splice(i,1)}return e},e}function r(e,t){var n=[];return e["on"+t]=function(t,r){return arguments.length?(t.concat||(t=[t]),n=r?t.concat(n):n.concat(t),e):n},e["fire"+t]=function(){for(var t=0;t<n.length;t++)n[t].apply(this,arguments);return e},e["un"+t]=function(t){if(!arguments.length)return n.splice(0),e;for(var r=n.length-1;r>=0;r--)n[r]==t&&n.splice(r,1);return e},e}e.AddEvent=r,e.EventListener=n}},{}],39:[function(e,t,n){t.exports=function(e,t){function n(e,t,n,r,a){function i(t,n){if(n-t>1){var r=Math.floor((n-t)/2)+t;return e(r)?i(t,r):i(r,n)}return n}if("function"==typeof e)r=t,a=n;else if(arguments.length<5&&(r=0,a=t.length-1),n){var o=e;e=function(e){return o<t[e]}}else{var o=e;e=function(e){return o<=t[e]}}var l=a-r+1;return l>0?e(r)?r:l<2||!e(a)?a+1:i(r,a):r-1}function r(){function e(){return a||e.array.apply(this,arguments),l?d:c}function t(e,t){for(var n=e;n<=t;n++)a[s]>a[n]&&(s=n);return s}function n(e,t){for(var n=e;n<=t;n++)a[u]<a[n]&&(u=n);return u}function r(e,t){for(var n=e;n<=t;n++)a[s]>a[n]?s=n:a[u]<a[n]&&(u=n)}var a=null,i=null,o=null,l=0,s=0,u=0;e.array=function(t,n){if(!arguments.length)return a;if(a=t,null==a||!(n>0))return l=0,o=i=null,e;var c=a.length,d=Math.floor(Math.sqrt(c*n));if(l=Math.ceil(c/d),!(l>3))return l=0,o=i=null,e;if(null==o||o.length!=d){var f=Array.isArray(a);o=f?new Array(d):new Uint32Array(d),i=f?new Array(d):new Uint32Array(d)}for(var p=0,h=0;p<d;p++)r((s=u=h)+1,Math.min(h+=l,c)-1),o[p]=s,i[p]=u;return e};var c=e.simple={getMin:function(e,n,r){return s=e,t(n,r),s},getMax:function(e,t,r){return u=e,n(t,r),u},getRange:function(e,t,n,a){return s=e,u=t,r(n,a),[s,u]}},d=e.quick={getMin:function(e,n,r){s=e;var i,u,c=Math.ceil(n/l),d=Math.floor(r/l);if(c>d)(u=(i=o[d])>=n&&i<=r)&&a[s]>a[i]?s=i:u||t(n,r);else{var f,p=c*l;if(c<d){f=d*l;for(var h=c;h<d;h++)a[s]>a[o[h]]&&(s=o[h])}else f=p;p!=n&&((u=(i=o[c-1])>=n)&&a[s]>a[i]?s=i:u||t(n,p-1)),(u=(i=o[d])<=r)&&a[s]>a[i]?s=i:u||t(f+1,r)}return s},getMax:function(e,t,r){u=e;var o,s,c=Math.ceil(t/l),d=Math.floor(r/l);if(c>d)(s=(o=i[d])>=t&&o<=r)&&a[u]<a[o]?u=o:s||n(t,r);else{var f,p=c*l;if(c<d){f=d*l;for(var h=c;h<d;h++)a[u]<a[i[h]]&&(u=i[h])}else f=p;p!=t&&((s=(o=i[c-1])>=t)&&a[u]<a[o]?u=o:s||n(t,p-1)),(s=(o=i[d])<=r)&&a[u]<a[o]?u=o:s||n(f+1,r)}return u},getRange:function(e,c,d,f){s=e,u=c;var p,h,g,v=Math.ceil(d/l),m=Math.floor(f/l);if(v>m)(h=(p=o[m])>=d&&p<=f)&&a[s]>a[p]&&(s=p),(g=(p=i[m])>=d&&p<=f)&&a[u]<a[p]&&(u=p),h||g?h?g||n(d,f):t(d,f):r(d,f);else{var y,x=v*l;if(v<m){y=m*l;for(var b=v;b<m;b++)a[s]>a[o[b]]&&(s=o[b]),a[u]<a[i[b]]&&(u=i[b])}else y=x;x!=d&&((h=(p=o[v-1])>=d)&&a[s]>a[p]&&(s=p),(g=(p=i[v-1])>=d)&&a[u]<a[p]&&(u=p),h||g?h?g||n(d,x-1):t(d,x-1):r(d,x-1)),(h=(p=o[m])<=f)&&a[s]>a[p]&&(s=p),(g=(p=i[m])<=f)&&a[u]<a[p]&&(u=p),h||g?h?g||n(y,f):t(y,f):r(y,f)}return[s,u]}};return e}Math.erf_1=function(e){var t=Math.log(1-e*e),n=.147,r=2/Math.PI/n+t/2;return Math.sign(e)*Math.sqrt(Math.sqrt(Math.pow(r,2)-t/n)-r)},Math.erf=function(e){var t=.3275911,n=.254829592,r=-.284496736,a=1.421413741,i=-1.453152027,o=1.061405429,l=1/(1+t*Math.abs(e));return Math.sign(e)*(1-l*(n+l*(r+l*(a+l*(i+l*o))))*Math.exp(-e*e))},Math.sign=function(e){return e>0?1:e>=0?0:-1},Math.quantile=function(e,t){var n=e*t,r=Math.floor(n);return r>=n&&(r=Math.round(n-e)),r},e.RangeFn=r,e.searchIndex=n}},{}],40:[function(e,t,n){t.exports=function(e,t){function n(e,t){var r=e.parentNode;return"function"!=typeof t?r||e:t(e)||!r?e:n(r,t)}function r(e,t){var n=e.getBoundingClientRect(),r={width:Math.ceil(n.width),height:Math.ceil(n.height)};return t&&(r.top=Math.floor(n.top),r.left=Math.floor(n.left)),r}function a(e,t){var n=d3.select(e).style(t),i=parseFloat(n);return i?n.indexOf("em")>-1?i*a("font-size"==t?e.parentNode:e,"font-size"):n.indexOf("%")>-1?i*r(e.parentNode)[t.match(/(width|left|right)/)?"width":"height"]:i:0}function i(e){var t=0;return n(e,function(e){return e==document||void(t=Math.max(t,parseFloat(d3.select(e).style("z-index"))||0))}),t}function o(e,t){var r=null;return e&&n(e,function(e){return t.indexOf(e)>=0&&(r=e)}),r}function l(e,t,n){return t=getLocation(null==t?"about:blank":t).href,!(e.attrSrc==t&&!n)&&(e.attrSrc=t,e.contentWindow?e.contentWindow.location.replace(t):e.setAttribute("src",t),!0)}function s(e,t){if(t||null==e.__initStyles__){var n=e.getAttribute("style");return e.__initStyles__=n?n.replace(/([^;\s])\s*$/,"$1; "):""}return e.__initStyles__}function u(e){var t,n=d3.select(document.body).append("div"),r=n.node(),a=n.append("div");return n.attr("style","position: absolute; top: 0; width: 100px; height: 100px; overflow: auto; "),e?(a.attr("style","position: relative; width: 101%; height: 100%"),t=r.offsetHeight-r.clientHeight):(a.attr("style","position: relative; width: 100%; height: 101%"),t=r.offsetWidth-r.clientWidth),n.remove(),t>0?t:0}function c(e){var t=e.ownerSVGElement;if(t){t=d3.select(t);var n=t.select("defs");return n.empty()&&(n=t.insert("defs",":first-child")),n}}function d(e,t,n){function r(t){var n=e.style(t);return n&&"none"!=n?n:null}if(e.attr("style",null),!t)return null;var a=null==n?0:g.indexOf(n),i=a?[n].concat(g):g;a>0&&i.splice(a+1,1);var o=i.map(r);e.attr("style",t);var l=i.map(r);return l.some(function(e,t){return e&&e!=o[t]})}function f(e){return(Array.isArray(e)?e.map(f).join(";").replace(v,function(e,t){return t?t+"; ":""}):"string"==typeof e&&e)||null}function p(e,t,n,r,a){null==r&&(r=!1),null==a&&(a=!1);var i=document.createEvent("Events");extendObject(i,n),i.initEvent(t,r,a),e.dispatchEvent(i)}function h(t,n,r){if(n.height&&n.width||(n.height=n.width=0)){var i=e.navigator,o=r?"width":"height",l=r?"height":"width",s=h.deltaHeight;if(i.isFF25){var u=a(t,"font-size");n[o]=Math.max(n[o]+s-(u<13?4:u<14?3:2),1),n[l]=Math.max(n[l]-(r?3:5),1)}else i.isIE?(n[o]+=s-1,n[l]=Math.max(n[l]-1,1)):i.isChrome&&(n[o]+=s)}return n}var g=["stroke","fill","background-color","color"],v=/([^;\s])?((\s*;\s*)+|\s*$|^\s+)/g;h.deltaHeight=2,e.adjustTextNodeRect=h,e.fireEvent=p,e.joinStyles=f,e.getColorStyle=d,e.getSvgDefs=c,e.getScrollSize=u,e.getNodeInitStyles=s,e.setFrameSrc=l,e.insideTargets=o,e.getZIndex=i,e.getNodeRect=r,e.getParentNode=n,e.getNodeSize=a}},{}],41:[function(e,t,n){function r(e,t,n,a,i,o,l){function s(){var n="function"==typeof a?a(u):u;c?(c.series[0]=n,t.fire("itemclick",c)):f.call(e,n,t,d,l())}l=d3.functor(l);var u=r.getConfig(e,t);if(u){var c,d=t.config,f=o?d.onseriesdoubleclick:d.onseriesclick;return f instanceof Function||(c={title:e.params.legendLabel,series:[u],dropdowns:[]},e.on("labelchanged",function(e){c.title=e})),s.seriesConfig=u,n&&(i||n.on("click",s),/\bcursor\b/i.test(n.attr("style"))||n.style("cursor","pointer")),s}}r.getConfig=function(e){var t=e.origin||e;return t.keys&&t.keys.isReal&&t.config},t.exports=r},{}],42:[function(e,t,n){t.exports=function(e,t){function n(e){function t(e){return e>=0&&e<s.length-n()?e:-1}function n(){return h?1:0}function r(e,t){e.display(c<0||t<c+n())}function a(e){var t=e.state();return"selected"==t||"highlighted"==t}function i(e){for(var t=0,n=-1,r=-1;t<s.length;t++){var a=s[t];if(a.show()&&(a.isEditable&&(r=t),e<a.x+a.w/2)){a.isEditable&&(n=t);break}}r>=0&&s.fire("spaceclick",s[n<0?r:n-1],s[n<0?r+1:n])}function o(t){if(t.rendered){var n=e?t.isExpandControl?s[0]==t?-1:1:a(t)?2:0:2,r=t.w&&t.textW+g*(n==-1?1:n),i=n==-1||2==n?0:g;t.boxEl.attr("x",i+"").attr("width",r+"")}}function l(){var e=t(d),n=c<0?e>0&&(v=!v)?e:0:-1;s.fire("expandstart"),s.expand(n,!1)}var s=Controls().maxRows(1).space([3,3]).padding([5,5,5,5]),u=s.preference,c=-1,d=-1,f=0,p=null,h=null;s.expand=function(e,r,a){if(!arguments.length)return c;r!==!1&&(d=e),e=t(null==e?c:e);var i=c<0!=e<0,o=c!=e;return c=e,i&&n()&&h.rendered&&h.textEl.text(h.title()),(o||a===!0)&&(s.reorder(),s.layoutchange()&&s.fire("expandend")),s},s.reorder=function(){u.forEach(r)},s.onItemAdd(function(t){t.value=t.data.value,t.title=function(){return t.data.title||t.data.value||""},t.isExpandControl="+"==t.value,t.textW=null,t.isExpandControl?(t.data.title||(t.title=function(){return c<0?longDash:"+"}),h=t,t.state("expand-tool").state=d3.functor(t.state()),u.unshift(u.pop()),s.reorder()):(r(t,u.length-1),(t.isEditable=e)&&(t.isDraggable=function(){for(var e=0,t=0;e<s.length;e++)if(s[e].isEditable&&++t>=2)return!0}))}).on("itemrender",function(e){var t=e.el,n=e.boxEl=t.append("rect"),r=e.textEl=t.append("text").text(e.title());e.resize(),n.attr("rx","2").attr("ry","2").attr("height",Math.max(e.h-s.space()[1],0)+""),r.attr("dy","1em").attr("x",g+""),e.isExpandControl&&f&&(d3.selectAll([r.node(),n.node()]).order(),n.on("mouseover",function(){null!=p&&(clearTimeout(p),p=null),c>=0&&(p=setTimeout(l,f))}).on("mouseout",function(){null!=p&&(clearTimeout(p),p=null)}))}).on("render",function(){function t(){return n=d3.select(d3.event.target).datum()}s.el().classed("axi-panel",!0);var n;onMouseClick(s.el(),function(r){d3.event.cancelBubble=!0,n||t()?n.isExpandControl?(null!=p&&(clearTimeout(p),p=null),l()):1==r&&"deactivated"!=n.state()&&s.fire("itemclick",n):e&&2==r&&i(d3.mouse(this)[0])},null,null,function(){return t()})}),e&&s.background(!0).on("itemstatechange",function(e,t,n){!t!=!n&&o(e)}),s.on("itemresize",function(e){var t=e.w;e.textW=t&&t-s.space()[0],e.w=t&&t+2*g,o(e)});var g=5,v=!0;return s.expandDelay=function(e){return arguments.length?(f=e,s):f},s}e.Panel=n}},{}],43:[function(e,t,n){t.exports=function(e,t){function n(e){function n(e){if(!arguments.length)return i;var n=0;for(var r in e){var o=(r+"").toLowerCase(),l=e[o];n=Math.max(n,a.hasOwnProperty(o)*(1+(i[o]!==(null==l?(delete i[o],t):i[o]=l))))}return n}var a=!1,i={};return n.getValue=function(e,t){if("string"==typeof e){arguments.length<2&&(t=a);for(var n in t){if(!i.hasOwnProperty(n))return null;e=e.replace(t[n],i[n]+"")}}return e},n.exp=function(e,t){if(!arguments.length)return a;if("object"!=typeof e&&(e=r(e)),t){if(e)for(var i in e)(a||(a={}))[i]=e[i]}else a=null!=e&&e;return n},n.exp(r(e)),n}function r(e){var t=!1;return"string"==typeof e&&e.replace(/\{([a-z0-9_\-\.]+)\}/gi,function(e,n){return(t||(t={}))[n.toLowerCase()]=new RegExp(escapeExpression(e),"gi"),e}),t}e.GetPlaceholders=n,e.getPlaceholdersExp=r}},{}],44:[function(e,t,n){t.exports=function(e,t){function n(){function e(e){return e?[e.status||"",e.statusText||""].filter(identity).join(" "):null}var t=Tooltip().hideDelay(250).translate(function(e,t,n,r,a,i){return[t+i.width-r-5,n+i.height-a-5]}),n=-1,r="",a={count:0,error:!1,hold:!1};t.currentEvent=function(){return n},t.record(a).format(function(a){var i,o=n?a.error:a.hold.error,l=t.hover();if(n||o===!0&&(l=!0))if(l)if(o)if("string"==typeof o)i=o;else{var s=e(a.req);i=s?/(\b|[0-9])ok(\b|[0-9])/i.test(s)?"malformed response":"Status: "+s:"Server not available"}else i=a.count?"Please wait...":a.req?"Status: "+(e(a.req)||"OK"):"Loaded";else i=a.error?"Error!":a.count?"Loading...":"Loaded";else i=o||"Status: "+(a.hold.status||"OK");return'<div style="'+(r?"padding: "+r:"")+'">'+i+"</div>"}).on("render",function(){t.el().classed("axi-tooltip-default",!1).classed("axi-tooltip-info",!0);var e=t.innerEl();r=(e.style("padding-top")+" "+e.style("padding-right")+" "+e.style("padding-bottom")+" "+e.style("padding-left")).trim(),e.style("padding","0")});var i=null;return t.redraw=function(e,r){if(!t.rendered()||!t.display())return t;var o=t.hover(),l=t.prev.hover!=o&&(t.prev.hover=o,!0),s=["reqhold","reqsend","reqload","reqerror","reqabort"].indexOf(arguments[arguments.length-1]),u=t.hideDelay();s>=0&&(a.req=e),s>0&&(e.isUpdate||(a.count=Math.max(0,a.count+(s>1?-1:1))),s>1&&(a.error=3==s&&r)),(n||l&&!o&&(u=0,!0))&&(n=s),n?a.hold=!1:s||(a.hold=r,null!=i&&(clearTimeout(i),i=null)),(n?l||n>0:!s)&&(t.prev.record=null);var c=n&&!(o||a.count||a.error);return c&&!t.visible()?t:(t.el().classed("axi-tooltip-danger",n?a.error:a.hold.error),t.innerEl().style("min-width",o?t.width()+"px":null).style("min-height",o?t.height()+"px":null),t.showAt(0),c?t.visible(!1,u):null!=i||n||a.hold.error||(i=setTimeout(function(){n=-1,a.hold=!1,t.prev.record=null,t.redraw(e,0,"")},1e3)),t)},t.on("over",t.redraw).on("out",t.redraw),t}e.Progress=n}},{}],45:[function(e,t,n){t.exports=function(e,t){function n(){function e(t){return e.scale(t)}var t=1,n=0,i=1,o=0,l=[0,1],s=null,u=10,c=[0,1],d=!1,f=!1,p=!0;return e.scale=function(e){return t*e+n},e.invert=function(e){return i*e+o},e.ticks=function(e){return p?r(l,e,u,d,f):[]},e.rescale=function(){t=(c[1]-c[0])/(l[1]-l[0]),n=c[1]-l[1]*t,i=(l[1]-l[0])/(c[1]-c[0]),o=l[1]-c[1]*i},e.displayTicks=function(e){p=e},e.factor=function(){return t},e.domain=function(t,n,r){switch(arguments.length){case 0:return l;case 3:a(t,u,d=n,f=r);break;default:d=f=!1}return!arrayEquals(l,t)&&(resetArray(l,t),e.rescale(),!0)},e.range=function(t){return arguments.length?!arrayEquals(c,t)&&(resetArray(c,t),e.rescale(),!0):c},e.format=function(t){return arguments.length?(s=t,s.radix&&e.radix(s.radix),e):s},e.radix=function(t){return arguments.length?(u=t,e):u},e}function r(e,t,n,r,a){var i=e[0],o=e[1],l=(o-i)/(t-1);if(l<=0||!lib.isFinite(l))return[];var s=Math.pow(n,Math.floor(Math.log(l)/Math.log(n)));if(0==s)return[];for(var u=l<s?1:Math.floor(l/s);s%1;)s*=10,u/=10;if(u*=s,0==u)return[];for(var c=Math.ceil(i/u),d=Math.floor(o/u),f=[],p=1;u%1;)u*=10,p*=10;for(var h=c;h<=d;h++)f.push(h*u/p);return r&&i<f[0]&&f.unshift(i),a&&o>f[f.length-1]&&f.push(o),f}function a(e,n,r,a){function o(){if(u!==t)return u;for(u=s,c=1;u%1;)u*=10,c*=10;return u}var l=e[1]-e[0]||Math.abs(e[0]);if(l>=0&&lib.isFinite(l)){var s=l&&Math.pow(n,i(Math.log(l)/Math.log(n),.33)-1);if(s>0&&lib.isFinite(s)){var u,c;r&&(e[0]=Math.floor(e[0]/s)*o()/c),a&&(e[1]=Math.ceil(e[1]/s)*o()/c),e[0]<e[1]||(!r&&a||(e[0]-=s),!a&&r||(e[1]+=s))}else s=1,a||!r?e[1]+=s:e[0]-=s}}function i(e,t){var n=e%1+(e<0);return e-n+(n<t?0:1)}function o(e,t){var n=e.domain();return(t.d0!=n[0]||t.d1!=n[1])&&(t.d0=n[0],t.d1=n[1],!0)}function l(e,t){var n=e.range();return(t.r0!=n[0]||t.r1!=n[1])&&(t.r0=n[0],t.r1=n[1],!0)}function s(e,t){var n=l(e,t),r=o(e,t);return r||n?[r,n]:null}function u(e,t){var n="number"==typeof t;if("number"==typeof e)e=[e,e];else if(!e)return n?[t,t]:t&&t.slice(0);if(n||t&&t!=e){var r;e[0]>(r=n?t:t[0])&&(e[0]=r),e[1]<(r=n?t:t[1])&&(e[1]=r)}return e}function c(e,t){if(t){var n=e[1]-e[0];e[0]+=t[0]*n,e[1]+=t[1]*n}return e}n.isFinite=function(e){return lib.isFinite(e(1))},e.getLinearTicks=r,e.roundNumber=i,e.roundDomain=a,e.transformExtent=c,e.extend=u,e.scaleChange=s,e.domainChange=o,e.rangeChange=l,e.LinearScale=n}},{}],46:[function(e,t,n){t.exports=function(e,t){function n(e,t,n,a){var i=e.classed("axi-scroller",!0).style("width",t+"px").append("div"),o=getNodeRect(i.node()).width/2,l=r(i.node(),e.node(),function(e,n){return[Math.max(0,Math.min(t,e)),0]},function(e,t){i.style("left",e-o+"px")}).on("end",function(e){e&&this(Math.round(this()[0]/t*n)/n*t)});return l}function r(e,t,n,r){function a(e,t){if(!arguments.length)return i;var u=n.call(a,e,t);return arrayEquals(i,u)||(s=!0,i=u,o=i[0],l=i[1],r&&r.call(a,o,l),a.fire("move",o,l)),a}var i=null,o=0,l=0,s=!1,u=!1;EventListener(a),a.dragging=function(){return u};var c=0,d=0,f=d3.select(t);d3.select(document.body);return onMouseDrag(f,{move:function(){var e=o+(c+=d3.event.dx),t=l+(d+=d3.event.dy);a(e,t),c=e-o,d=t-l},start:function(t){u=!0,c=d=0,d3.event.sourceEvent.target!=e&&a(t[0],t[1]),a.fire("start")},end:function(){u=!1,a.fire("end",s),s=!1}},t,!0,!0,!0),a}e.Scroller=n}},{}],47:[function(e,t,n){var r=e("./formats");t.exports=function(e,t){function n(t){function n(e){C=e.classed("axi-table-container",!0),A=C.node();var t=Z.el=C.append("div").attr("class","axi-table axi-table-stretched"),r=Z.tbody.el=t.append("div").attr("class","axi-table-tbody axi-table-striped"),a=Z.thead.el=t.append("div").attr("class","axi-table-thead");return Z.thead.cells=(Z.thead.tr=a.children()).children(),Z.tbody.cells=(Z.tbody.tr=r.children()).children(),C.on("scroll",d),U=!0,n.fire("render"),n}function a(e){e.forEach(function(t,n){var r=t.filter(function(e){var t=0!=e.__data__._displayed;return e.style.display=t?"":"none",t});r.parentNode=t.parentNode,e[n]=r})}function i(e){C.style({height:"100%",overflow:"hidden"});var t=null!=e&&B!=e&&(B=e,!0);t&&(n.onLayoutChange(!0,t),j.small=null,Z.el.classed("axi-table-small",B));var r=p(),a=r.width.table>te,o=r.height.table>L,l=a?ne:0;e||null==e||!a&&!o?C.style({height:Math.min(L-l,r.height.table)+l+"px","overflow-x":a?"scroll":"visible","overflow-y":o?"scroll":"visible"}):i(!0)}function d(){Z.thead.el.style({top:ee?"0":A.scrollTop+"px",left:ee?A.scrollLeft+"px":"0"})}function f(){$&&$(Z.tbody.tr),X.sort(Z.tbody.tr),Z.tbody.tr.classed("axi-table-row-odd",function(e,t){return!(t%2)});var e=Z.tbody.tr[0];Array.prototype.sort.call(Z.tbody.cells,function(t,n){return e.indexOf(t.parentNode)-e.indexOf(n.parentNode)})}function p(){var e=Z.sizes||(Z.sizes=l(Z,ee,Z.thead.tr.length)),t=h(e.width.table,e.height.table),r=j.minWidth!=t&&(j.minWidth=t,!0);return!r&&e.width.stretched||(n.onLayoutChange(),s(e,ee,t)),e}function h(e,t){return te-(t>L&&re?re+1:0)}function g(){var e=d3.selectAll([]);return e.splice(0,1),Z.thead.cells.forEach(function(t){e.push(t)}),Z.tbody.cells.forEach(function(t){e.push(t)}),e}function v(){Z.thead.cells.classed("axi-table-number",function(e){return e.isNumber}),Z.tbody.cells.classed("axi-table-number",function(e){return e.isNumber})}function m(e){e.each(function(e){null==this.__initTitle__&&d3.select(this).attr("title",this.scrollWidth>this.clientWidth&&this.textContent||null)})}function y(e){var t=Z[e].el.children().data(D[e],G),r="render"+e+"row";return t.exit().remove(),t.each(function(e){d3.select(this).attr("class",this.__initialClasses__).attr("style",this.__initialStyles__)}),t.enter().append("div").each(function(t,a){var i=d3.select(this).attr("class","axi-table-row axi-table-"+e+"-row",!0);n.fire.call(this,r,t,i),this.__initialStyles__=getNodeInitStyles(this)||null,this.__initialClasses__=i.attr("class")||null}),t}function x(e,t){var n=M.filter(function(e){return t&&(e._displayed=null),!e.hidden}),r=e.children().data(n,function(e){return e.columnId});r.exit().remove(),r.enter().append("div"),r.each(b).sort(function(e,t){return e.columnIndex-t.columnIndex});for(var a=0;a<r.length;a++){var i=d3.select(r[a].parentNode);"none"==i.style("display")?(r.splice(a--,1),e[0].splice(a,1)):i.datum().index=a}return r}function b(e){this.__rect__=this.__sortValue__=this.__initStyles__=this.__initHTML__=null;var t=this,a=t.parentNode,i=d3.select(a),o=i.classed("axi-table-thead-row"),l=d3.select(t).attr("style",null).attr("class","axi-table-cell axi-table-"+(o?"th":"td")).attr("title",c(o&&e.tooltip)),s=i.datum(),u=e.key,d=o?e.isTag?e.tag:u:n.getDefaultValue.call(t,s,e),f=0,p=[d,f,s,e,n,l,i,!o].concat(n.availableMethods.map(function(e){return function(){return e.apply(t,Array.prototype.concat.apply(p,arguments))}})),h=e.columnlabelformat;!h||h.body||h.length||h.name||(h=null);var g,v=o?e.label:e.value;g=null==v?o&&h?h.apply(t,p):d:d3.functor(v).apply(t,p),g=n.processValue.call(t,g,p);var m=_(g),y=null==m||ie(m)&&(m=g=null,!0),x=p[0]=y?g:m;if(!o&&e.hideColumn){var b=!e.hideColumn.some(function(e){return e.apply(t,p)});e._displayed=b||null!=e._displayed&&e._displayed}!o&&e.alertExpression&&(f=p[1]=+e.alertExpression.apply(t,p)||0,s&&(s["alert"+(u?"-"+u:"")]=f)),!o&&e.title&&l.attr("title",c(d3.functor(e.title).apply(t,p)));var w=o?null:e.icon&&d3.functor(e.icon).apply(t,p);null==w||e.format||(g=null);var k,T=getNodeInitStyles(t);if(e.style&&(k=d3.functor(e.style).apply(t,p))&&l.attr("style",T+=k+";"),!o){var E=getNodeInitStyles(a,!0);!e.filters.every(function(e){return e.apply(t,p)})&&(k="display: none")&&i.attr("style",E+=k+";"),e.rowStyle&&(k=d3.functor(e.rowStyle).apply(t,p))&&i.attr("style",E+=k+";"),0!=f&&(l.classed("axi-table-cell-alert",!0),e.alertStyle&&(k=d3.functor(e.alertStyle).apply(t,p))&&l.attr("style",T+=k+";"),e.alertRowStyle&&(k=d3.functor(e.alertRowStyle).apply(t,p))&&i.attr("style",E+=k+";"));var M=0!=e.format&&(e.format||W);null!=g&&M&&(e.format||!y&&"number"==typeof m&&V)&&(g=M(x)),null==g||y&&!g||("boolean"!=typeof e.isNumber&&(e.isNumber=!0),e.isNumber&&y&&g&&(e.isNumber=!1));var I=e.onClick;if(I&&I.length){var C=I.some(function(e){return ae.test(e.body||e.toString())});/\bcursor\b/i.test(T)||l.style("cursor",C?"copy":"pointer"),l.classed("axi-table-series-click-link",!C),l.on("click",function(){d3.event.shiftKey||d3.event.ctrlKey||(I.forEach(function(e){e.apply(t,p)}),d3.event.cancelBubble=!0)})}}if(u&&l.classed("axi-table-column-"+u,!0),o&&e.filters.length&&!/\bbackground\b/i.test(T)&&l.style("background","#ddd"),y&&g&&"string"==typeof g){var A=o&&null==e.label;(A&&z||H)&&(g=g.replace(/_/g," ")),S&&!/\btext-transform\b/i.test(T)?l.style("text-transform","capitalize"):A&&z&&!S&&(g=g[0].toUpperCase()+g.substr(1))}if(g instanceof r.JsonCode?g.appendTo(l):l.html(g),null!=w){var D=t.childNodes[0],O=!D;if(O&&l.classed("axi-icon",!0),w){var P=l.append("span").attr("class","axi-icon-"+w).node();O||t.insertBefore(P,D)}}return e.script.forEach(function(e){e.apply(t,p)}),getNodeInitStyles(t,!0),getNodeInitStyles(a,!0),null==this.__sortValue__&&(this.__sortValue__=y?"object"==typeof d?null:d:m),this.__initTitle__=l.attr("title"),null==this.__initTitle__&&o&&(this.__initTitle__=e.tooltip),!0}function _(e){if(!V)return"number"==typeof e?e:null;switch(typeof e){case"boolean":return e;case"number":return e;case"string":return e.length&&!ie(e=+e)?e:null}return null}function w(e,t,r){t&&"object"==typeof t||(t=extendObject({},n.defaultColumn,d3.functor(!1)),t.filters=[],t.script=[]);var a=e.script?t.script.concat(e.script):t.script;return t=extendObject(t,e,function(e,n){return null==e||n<"a"||r&&t.hasOwnProperty(n)}),t.script=a,(t.isTag=!!t.tag)&&(t.key=t.tag.toLowerCase()),t}function k(e,t){var n="object"==typeof e,r=extendObject({key:e,sign:t,byIndex:"index"===(n?e.key:e)},le);return n||(r.column=null),r}function T(e){var t=0,n=[];return e.forEach(function(e){if(e.key){var r="object"!=typeof e.key&&M.some(function(t){return t.key==e.key})||e.key;n.some(function(e){return e.key==r})||("index"!==r?e.sign&&n.push(e.value&&e.key==r?e:k(r,e.sign)):t||(t=e.sign))}else e.value&&e.sign&&n.push(e)}),se.sign=t||1,n.push(se),n}var S=!1,E=0,M=[],I=!1,C=null,A=null,D={tbody:[],thead:[0]},O=[],P=!1,L=0,N=e.identity,F=!1,V=!0,z=!0,R=!1,W=defaultValueFormat,j=n.prev={},U=!1,H=!1,q=!1,G=null,K=!0,B=!1,$=null,Y=!1,Z=n.table={tbody:{},thead:{}},X=n.tableSort=o(),J=!1,Q=!0,ee=!1,te=0;n.renderTo=n,EventListener(n),lib.updater(n,!!t&&null),n.loader.on("reqload",function(e,t){n.tbodyData(t),J&&n.redraw(!0)}),n.el=function(){return C},n.rendered=function(){return U},n.resize=function(e,t){return n.width(e).height(t).redraw()},n.destroy=function(){return n.destroyUpdater(),U&&(C.remove(),U=!1),n},n.redraw=function(t,r){if((I||t)&&(Q=J=!0),!U)return n;var o=j.width!=te&&(j.width=te,!0),l=j.height!=L&&(j.height=L,!0),s=j.transpose!=ee&&(j.transpose=ee,!0),c=J||Q,h=c||s||o||l,b=!1;if(s&&Z.el.classed("axi-table-transpose",ee),h&&Z.el.style({width:te+"px",height:L+"px"}),Q){var _=Z.thead.tr=y("thead");Z.thead.cells=x(_,!1).on("click",function(t){n.sortByColumn.call(this,t).redraw(!1,null),e.deselectText()}),n.fire("updatethead",_)}if(J){var _=Z.tbody.tr=y("tbody");Z.tbody.cells=x(_,!0),n.fire("updatetbody",_)}return c&&(a(Z.thead.cells),a(Z.tbody.cells),v()),(Q||Y||s)&&X(Z.thead.cells),(J||Y)&&f(),(c||Y||s)&&(Z.cells=g(),n.onLayoutChange(!0)),h&&(i(q?!!r:null),d(),b=j.small!=B&&(j.small=B,!0)),R&&(u(Z,p(),ee),Z.el.classed("axi-table-aligned",!0),R=!1),(o||b||Q)&&m(Z.thead.cells),(o||b||J)&&m(Z.tbody.cells),Q=J=Y=I=!1,n},n.onLayoutChange=function(e,t){e&&(Z.sizes=null,Z.el.classed("axi-table-aligned",!1)),t&&Z.cells.each(function(){this.__rect__=null}),R||(R=!0,Z.cells.each(function(){this.style.width=this.style.height=""}))};var ne=e.getScrollSize(!0),re=e.getScrollSize(!1);n.sortByColumn=function(e){var t=this,r=X.sorts(),a=-1,i=r.some(function(e,n){return e.column&&e.column(t)&&(a=n,!0)});return a>=0&&r.splice(a,1),r.splice(0,0,i?(i.sign=i.nextSign(),i):{key:e,sign:1}),n.sort(r)},n.filterByColumn=function(e,t){var r=e.filters.indexOf(t);return r<0?e.filters.push(t):e.filters.splice(r,1),I=!0,n},n.resetFilters=function(){return M.forEach(function(e){e.filters.length&&(e.filters=[],I=!0)}),n},n.findProperty=findProperty,n.availableMethods=[function(e,t,r,a){var i=a.filters.some(function(t){return t.rule===e});return i||(i=function(t){return t===e},i.rule=e),n.filterByColumn(a,i).redraw(!1,null)}];var ae=/(^|[^.\s])\s*filter\s*\([^)]*\)/,ie=e.isNaN;n.processValue=N,n.getDefaultValue=function(e,t){if(null!=e){if(t.isTag)return n.defaultValues.tag.call(this,e,t);if(t.key){var r;if(n.defaultValues.hasOwnProperty(t.key))r=n.defaultValues[t.key].call(this,e,t);else{if(null==(e=n.findProperty(e,t.key)))return;r=e[t.key]}var a=_(r);return null==a?r:a}}},n.defaultValues={tags:function(e){var t=n.getTags(e);if(t){var r=O.length&&O.filter(function(e){return t[e]});if(!r){r=[];for(var a in t)r.push(a)}return r.map(function(e){return(K?e+" = ":"")+n.getTagValue(t,e,", ")}).join("<br>")}},tag:function(e,t){var r=n.getTags(e);if(r)return n.getTagValue(r,t.key,"<br>")}},n.expandColumns=function(e){for(var t=M.length,r=!1;t-- >0;){var a=M[t],i=e.indexOf(a.key);i>=0?e.splice(i,1):a._expanded&&(M.splice(t,1),r=!0)}if(e.length){for(var t=M.length;t-- >0&&!M[t].isTag;);for(var o=++t||M.length,t=e.length;t-- >0;){var a=w(!1),l=a.key=e[t];a._expanded=!0,a.hideColumn=(a.hideColumn||[]).concat(function(e){return null==e||""===e}),(a.isTag=e.tagKeys&&e.tagKeys.indexOf(l)>=0)&&(a.key=(a.tag=l).toLowerCase()),M.splice(o,0,a)}n.fire("columnschange")}},n.getExpandedKeys=function(e,t){var r=e.reduce(function(e,t){var r=n.getTags(t);for(var a in r)r.hasOwnProperty(a)&&e.indexOf(a)<0&&e.push(a)},[]);return r.tagKeys=t&&t(r),r},n.getTags=function(e){return null==e._tags?e._tags=null!=(e=n.findProperty(e,"tags"))&&lib.series.formatTags(e.tags,function(e){return e.toLowerCase()}):e._tags},n.getTagValue=function(e,t,n){var r=e[t];return r&&(Array.isArray(r)?r.join(n):r)},n.defaultColumn={filters:[],script:[],isNumber:null,_expanded:!1};var oe={move:1,true:2,first:3,full:4,false:5};n.columns=function(e,t){if(!arguments.length)return M;var e=instanceofArray(e)?e:[e],r=!1;if(t)(M.length||e.length)&&(M=e.map(w),r=!0);else if(e.length){var a,i,o=M.slice(0);e.map(function(e,t){return"object"!=typeof e&&(e={key:e,_update:"move"}),e.mode=oe[e._update]||3,e._index=t,e}).sort(function(e,t){return(2==e.mode)-(2==t.mode)||e._index-t._index}).forEach(function(e){if(e.key&&e.mode<5&&(a=o[(i=2!=e.mode)?"some":"filter"](function(t,n){return t.key==e.key}),i?a:a.length)){(i?[a]:a).forEach(function(t){(M.indexOf(t)>=0||!i)&&w(e,t,t.mode>e.mode)});var t=1==e.mode||4==e.mode;if(t&&(i=M.indexOf(a))>=0)return M.splice(i,1),o.splice(i,1),o.push(a),void M.push(0);if(!t)return}o.push(w(e))}),M=o,r=!0}return r&&(n.fire("columnschange"),n.sort($||X.sorts())),n},n.on("columnschange",function(){I=!0,M.forEach(function(e,t){delete e.mode,e.columnIndex=t,e.columnId||(e.columnId=++E)})});var le={column:function(e){return e.__data__===this.key},value:function(e){var t=this;return this.column?(e=Array.prototype.some.call(e.childNodes,function(e){return t.column(e)}))&&(null==e.__sortValue__?e.innerHTML:e.__sortValue__):(e=e.__data__)&&e[this.key]},nextSign:function(){return this.sign?this.sign>0||this.byIndex?-this.sign:0:1}},se=k("index",1);return n.sort=function(e){if(!arguments.length)return $;var t="function"==typeof e?e:null;$!=t&&($=t,Y=!0);var r=t?[]:T(e);return(X.sorts().length||r.length)&&(X.sorts(r),Y=!0),n},n.tbodyData=function(e){return arguments.length?(D.tbody!=e&&(D.tbody.length||e.length)&&(D.tbody=e,P&&n.expandColumns(n.getExpandedKeys(e)),J=!0),n):D.tbody},n.theadData=function(e){return arguments.length?(arrayEquals(D.thead,e)||(D.thead=e,Q=!0),n):D.thead},n.responsive=function(e){return arguments.length?(q=e,n):q},n.capitalize=function(e){return arguments.length?(S=e,n):S},n.replaceUnderscore=function(e){return arguments.length?(H=e,n):H},n.width=function(e){return arguments.length?(te=e,n):te},n.height=function(e){return arguments.length?(L=e,n):L},n.numberFormat=function(e){return arguments.length?(W=e,n):W},n.expandTags=function(e){return arguments.length?(P=e,n):P},n.displayTags=function(e){return arguments.length?(O=e.map(function(e){return e.toLowerCase()}),n):O},n.showTagNames=function(e){return arguments.length?(K=e,n):K},n.rowKey=function(e){return arguments.length?(G=e,n):G},n.transpose=function(e){return arguments.length?(ee=e,n):ee},n.isUTC=function(e){return arguments.length?(null!=e&&(F=e),n):F},n.isNumbersFormatted=function(e){return arguments.length?(null!=e&&(V=e),n):V},n.isTitlesFormatted=function(e){return arguments.length?(null!=e&&(z=e),n):z},n}function a(){e.getSelection?e.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function i(t,n){n&&!n.classed&&(n=t),t.each(function(){null==this.__initClick__&&(this.__initClick__=d3.select(this).on("click")||!1)}).on("click",function(){if(d3.event.shiftKey||d3.event.ctrlKey){var t=n||d3.select(this.parentNode).children();if(d3.event.shiftKey){var r=t.filter(".axi-multiselect-last").node(),a=r?t[0].indexOf(r):0,o=t[0].indexOf(this);t.classed("axi-multiselect",function(e,t){return(t-a)*(o-t)>=0})}else{t.classed("axi-multiselect-last",!1);var l=d3.select(this);l.classed("axi-multiselect-last",!0).classed("axi-multiselect",!l.classed("axi-multiselect"))}i.resetInitialClasses(t),e.deselectText()}this.__initClick__&&this.__initClick__.apply(this,arguments)})}function o(){function t(e){return e.each(function(){var e=this,t=a.some(function(t){return t.column&&t.column(e)});n(e,t&&t.sign||0)}),t}function n(t,n){var r=null==t.__initHTML__?t.__initHTML__=t.innerHTML:t.__initHTML__,a=e.getComputedStyle(t).textAlign,c="right"==a;if(n){var d=n>0?c?l.concat(o):o.concat(l):c?i.concat(s):s.concat(i);t.innerHTML=c?d.concat(r):r.concat(d)}else t.innerHTML=c?u.concat(r):"left"==a?r.concat(u):o.concat(r).concat(s)}function r(e,t,n){var r="string"==typeof e&&!(!e.length&&!(e=null)),a="string"==typeof t&&!(!t.length&&!(t=null));return null==e||null==t?(null==e)-(null==t):r!=a?(r-a)*n:(r&&a&&(r=e.toLowerCase())!==(a=t.toLowerCase())&&(e=r,t=a),null==e&&null==t?0:null==t?-1:null==e?1:e>t?n:e<t?-n:0)}var a=[],i='<span class="axi-table-sort">&#x25BE;</span>',o='<span class="axi-table-sort" style="visibility: hidden; ">&#x25BE;</span>',l='<span class="axi-table-sort">&#x25B4;</span>',s='<span class="axi-table-sort" style="visibility: hidden; ">&#x25B4;</span>',u=o.concat(s);return t.sort=function(e){return a.length&&e.forEach(function(e){e.sort(function(e,t){var n=0;return a.some(function(a,i){return n=r(a.value(e),a.value(t),a.sign)}),n})}).order(),t},t.sorts=function(e){return arguments.length?(a=e,t):a},t}function l(e,t,n){e.el.classed("axi-table-aligned",!1);var r={},a=r.rows=[],i=r.columns=[],o=r.hidColumns=[];e.cells.forEach(function(e,n){e.forEach(function(e,r){var l=e.__rect__;l||(l=e.__rect__=getNodeRect(e),l.limited="none"!=window.getComputedStyle(e).maxWidth,l.full=!l.limited&&l),l.limited&&(o[t?n:r]=0),a[t?r:n]=Math.max(l.height,a[t?r:n]||0),i[t?n:r]=Math.max(l.width,i[t?n:r]||0)})}),i.stretchable=i.reduce(function(e,r,a){(t?a>=n:null==o[a])&&e.push(a)},[]);for(var l=0,s=0,u=0;l<a.length;l++)!t&&l<n?s+=a[l]:u+=a[l];for(var l=0,c=0,d=0;l<i.length;l++)t&&l<n?c+=i[l]:d+=i[l];return r.theadNumber=n,r.height={thead:t?u:s,tbody:u,table:u+s},r.width={thead:t?c:d,tbody:d,table:d+c},e.el.classed("axi-table-aligned",!0),o.length?(e.cells.forEach(function(e,n){t&&null==o[n]||e.forEach(function(e,r){if(t||null!=o[r]){var a=e.__rect__.full||(e.__rect__.full=getNodeRect(e));o[t?n:r]=Math.max(a.width,o[t?n:r])}})}),o.indices=o.reduce(function(e,t,n){null!=t&&(o[n]-=i[n],e.push(n))},[]).sort(function(e,t){return o[e]-o[t]}),r):r}function s(e,t,n){var r=n-e.width.table;if(r<=0)return e.width.stretched=e.width,void(e.columns.stretched=e.columns);var a=e.columns.stretched=e.columns.slice(0),i=e.hidColumns;if(i.length){var o=i.indices.length;i.indices.every(function(e){var t=Math.min(i[e],Math.round(r/o--));return a[e]+=t,r-=t})}for(var l=e.columns.stretchable,s=l.length;r&&s>0;){var u=Math.round(r/s--);a[l[s]]+=u,r-=u}for(var s=0,c=0,d=0;s<a.length;s++)t&&s<e.theadNumber?c+=a[s]:d+=a[s];e.width.stretched={thead:t?c:d,tbody:d,table:d+c}}function u(e,t,n){function r(e,t){var n=[];return e.every(function(){var e=t.apply(this,arguments);return e&&(n.push(e),!0)}),n}var a=e.cells||e,i=r(a,function(e){return e.parentNode}),o=t.height,l=t.width.stretched,s=(n?o:l).table+"px",u="0px",c=0,d=t.columns.stretched,f=t.rows;i.forEach(function(e,r){var a=e.style,i=(r==t.theadNumber?c=0:c)+"px",o=(n?d:f)[r];c+=o,o+="px",n?(a.top=u,a.left=i,a.width=o,a.height=s):(a.top=i,a.left=u,a.width=s,a.height=o)}),c=0,(n?f:d).forEach(function(e,t){var i=r(a,function(e){return e[t]}),o=c+"px";c+=e,e+="px",i.forEach(function(t,r){var a=t.style,i=(n?d:f)[r]+"px";n?(a.top=o,a.left=u,a.width=i,a.height=e):(a.top=u,a.left=o,a.width=e,a.height=i)})}),e!=a&&(e.el.style({width:l.table+"px",height:o.table+"px"}),e.thead.el.style({width:l.thead+"px",height:o.thead+"px"}),e.tbody.el.style({width:l.tbody+"px",height:o.tbody+"px",left:n?l.thead+"px":u,top:n?u:o.thead+"px"}))}function c(e){return e&&e.length&&[].concat(e).join("\r\n")||null}var d=d3.select(document.createElement("div"));i.resetInitialClasses=function(e,t){e.each(function(){var e=d3.select(this);d.attr("class",this.__initialClasses__).classed("axi-multiselect",!t&&e.classed("axi-multiselect")).classed("axi-multiselect-last",!t&&e.classed("axi-multiselect-last")),this.__initialClasses__=d.attr("class")||null,t&&e.classed("axi-multiselect",!1).classed("axi-multiselect-last",!1)})},e.getTooltipText=c,e.deselectText=a,e.MultiSelect=i,e.StreamingTable=n}},{"./formats":33}],48:[function(e,t,n){t.exports=function(e,t){function n(){function e(e,t,n,r,a,i,o,l){if(v){var s=e[0]+t+y[0]-r,u=e[1]+n+y[1]-a,c=-o.left,d=-o.top;return[Math.max(s,c),Math.max(u,d),s<c&&u<d]}var f=e[0]+t+m[0],p=e[1]+n+m[1],h=l.width-o.left-r,g=l.height-o.top-a;return[Math.min(f,h),Math.min(p,g),f>h&&p>g]}function t(e){E=n.getContainer(),x=e&&e.node(),s=d3.select(x||E).append("div").classed("axi-tooltip",!0).classed("axi-tooltip-default",!0).on("mouseover",function(){t.fire("over")}).on("mouseout",function(){t.fire("out")}).on("mouseleave",function(){t.fire("out")});var r=s.node();return k.push(r),g=s.append("div").classed("axi-tooltip-inner",!0),i&&(o=s.classed("axi-tooltip-arrow",!0).classed("axi-tooltip-arrow-"+i,!0).append("div").classed("axi-arrow",!0)),w=!0,t.fire("render"),t.resize().setDisplay(),t}var r=null,a=200,i=null,o=null,l=null,s=null,u=!0,c=!0,d=null,f=0,p=0,h=!1,g=null,v=!1,m=t.mouseShift=[12,17],y=t.mouseShiftInverse=[-3,-3],x=null,b=t.prev={},_=null,w=!1,k=t.targets=[],T=!1,S=0,E=null,M=function(){var t=e.apply(this,arguments);if(t[2]){v=!v;var n=e.apply(this,arguments);if(!n[2])return n;v=!v}return t};return t.renderTo=t,EventListener(t),t.el=function(){return s},t.innerEl=function(){return g},t.rendered=function(){return w},t.width=function(){return S},t.height=function(){return p},t.on("over",function(){h=!0}).on("out",function(){h=!1,t.setDisplay(f)}),t.showAt=function(e){if(!u||!w)return t;var n=!T;n&&(v=!1),t.visible(!0);var c=b.color!=l&&(b.color=l,!0);if(c&&(g.style("background-color",l).style("color",adjustTextColor(l,.6)),i&&o.style("border-"+("left"==i?"right":"left")+"-color",l)),d){var f=!arrayEquals(b.record,_)&&(b.record=_,!0),h=b.format!=d&&(b.format=d,!0);(f||h)&&(g.text(d.apply(t,_)),t.resize())}var m=getNodeRect(E,!0),y=x?getNodeRect(x,!0):m,k=r?getNodeRect(r,!0):y,I=d3.event;null==e&&(e=I?d3.mouse(r||x||E):[0,0]),e=M.call(t,e,k.left-y.left,k.top-y.top,S,p,k,y,m);var C=b.inverse!=v&&(b.inverse=v,!0),A=!a||n||!C&&I&&"mousemove"===I.type?s:s.getTransition(a);return A.style("left",Math.round(e[0]||0)+"px").style("top",Math.round(e[1]||0)+"px"),t},t.resize=function(){var e=getNodeRect(g.node());if(S=e.width,p=e.height,i){var n=Math.ceil(p/3);o.style("border-width",Math.round(p/2)+"px "+n+"px"),"right"==i?o.style(i,-n+"px"):g.style(i,n+"px"),S+=n}return t},t.setDisplay=function(e){var n=c!=t.displayed();return n&&(c&&e>0?setTimeout(function(){t.setDisplay(0)},e):s.style("display",(c=!c)?null:"none")),t},t.displayed=function(){return u&&!!(T||h||w&&d3.event&&insideTargets(d3.event.relatedTarget,k))},t.destroy=function(){w&&(s.remove(),w=!1)},t.visible=function(e,n){return arguments.length?(T=e===!0,w&&t.setDisplay(null==n?f:n),t):T},t.display=function(e){return arguments.length?(u=e,w&&t.setDisplay(0),t):u},t.arrow=function(e){return arguments.length?("left"!=e&&"right"!=e||(i=e),t):i},t.translate=function(e){return arguments.length?(M=e,a=0,t):M},t.hover=function(e){return arguments.length?(h=e,t):h},t.alignNode=function(e){return arguments.length?(r=e,t):r},t.record=function(){return arguments.length?(_=Array.prototype.slice.call(arguments),t):_},t.format=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(l=e,t):l},t.hideDelay=function(e){return arguments.length?(f=e,t):f},t.animationDuration=function(e){return arguments.length?(a=e,t):a},t}n.getContainer=function(){return d3.select("body > div.axi-tooltip-container").node()||d3.select(document.body).insert("div",":first-child").classed("axi-tooltip-container",!0).node()},e.Tooltip=n}},{}],49:[function(e,t,n){t.exports=function(e,t){function n(e,t){var n=0,r=0,a=!0,i=null,o=0,l=[0,0,0,0].map(d3.functor),s=d3.functor(0),u=d3.functor(0),c=[0,0,0,0].map(d3.functor),d=e.position=[0,0],f=!1,p=1,h=1,g=null,v=0,m=e.xy=[0,0];return 0!=t&&(e.on("render",function(){i=e.el().attr("display",a?null:"none"),f=!0}),e.rendered=function(t){return arguments.length?(f=t,e):f}),e.getOuterWidth=function(){return u()},e.getOuterHeight=function(){return s()},e.setSize=function(){var t=l[3](),a=l[0](),i=c[3](),f=c[0]();return r=u()-t-l[1](),n=s()-a-l[2](),h=r,p=n,v=h-i-c[1](),o=p-f-c[2](),d[0]=t+i,d[1]=a+f,e},e.align=function(){return resetArray(m,d),g&&g.call(e,m,h,p,r,n),e.translateEl(),e},e.translateEl=function(){return f&&i.transform("translate",m.map(Math.floor)),e},e.display=function(t){return arguments.length?(a!=t&&(a=t,f&&i.attr("display",a?null:"none")),e):a},e.totalWidth=function(t){return arguments.length?(h=t,e):a?h:0},e.totalHeight=function(t){return arguments.length?(p=t,e):a?p:0},e.width=function(t){return arguments.length?(v=t,e):a?v:0},e.height=function(t){return arguments.length?(o=t,e):a?o:0},e.outerWidth=function(t){return arguments.length?(u=d3.functor(t),e):u},e.outerHeight=function(t){return arguments.length?(s=d3.functor(t),e):s},e.margin=function(t){return arguments.length?(resetArray(l,t.map(d3.functor)),e):l},e.padding=function(t){return arguments.length?(resetArray(c,t.map(d3.functor)),e):c},e.translate=function(t){return arguments.length?(g=t,e):g},e}function r(t,n,r,a,o){"function"==typeof a&&(o=a,a=null);var l=i.indexOf(r),s=!0;if(l<0&&((l=i.indexOf(a))<0||(s=!1)))return null;var u=Math.floor(l/3),c=(u+2)%4,d=u%2==0,f=(o||e.Legend)(t).horizontal(d).maxRows(+!d).padding([3,3,3,3]).outerWidth(n.getOuterWidth).outerHeight(n.getOuterHeight).display(s);f.padding()[c]=d3.functor(f.padding()[c]()-n.padding()[u]()),n.margin()[u]=d?f.totalHeight:f.totalWidth;var p=(Math.sign((l-1)*(7-l))+1)/2,h=(Math.sign((l-4)*(10-l))+1)/2;return f.translate(p||h?function(e,t,n,r,a){e[0]+=p*(r-t),e[1]+=h*(a-n)}:null),f.side=u,f.positionIndex=l,f}function a(e,t,n){var r=Controls();r.translate(function(e,r,a,i){var o=e[0]+=(i-r)/2;this.el().attr("display",t&&t.totalWidth()-t.padding()[3]()>o||n&&n.totalWidth()-n.padding()[1]()>o?"none":null)}).onItemAdd(function(e){e.tooltip=e.data.tooltip}).data([{tooltip:" "}]).on("itemrender",function(t){function n(){t.el.select("g > title").text(e.display()?"Hide Legend":"Show Legend")}t.el.on("click",function(){e.display(!e.display()).fire("toggle"),n()}).append("text").style("cursor","pointer").attr("dy",".95em").text("  &#8801;  "),n(),t.resize()});var a=e.getMaxHeight;return e.getMaxHeight=function(){return a()-(e.side%2?0:r.height())},r.getMaxHeight=d3.functor(1/0),r}var i=["topleft","top","topright","righttop","right","rightbottom","bottomright","bottom","bottomleft","leftbottom","left","lefttop"];e.WidgetDiv=n,e.AddLegend=r,e.getLegendControl=a}},{}],50:[function(e,t,n){"use strict";function r(){this._lines=[],this.style=null,this.minFont=0,this.maxFont=1e4,this.scale=1}function a(e){function t(r){if(b=r,O.minSize=O.minFont*O.length(),O.maxSize=O.maxFont*O.length(),f(),_.node().dataIconPath=e,O.build(_,e),e){var a=/[\/\.]/.test(e)?e:e.replace(/-/g,"_")+".svg";c.indexOf(a)<0?d3.xml(a,n):d3.xml(u+a,n)}else{var i=_.select("."+o+" text").classed("axi-widget-icon-mb",!0).attr("dy",-(O.length()-1)/2+"em");E=O.getViewBox(i),_.attr("viewBox",E.join(" ")),D=!0,w&&w()}return t}function n(n){if(_.node().dataIconPath==e){try{var r=d3.select(n).select("svg"),a=r.node(),i=_.select("."+l).node(),s=Array.prototype.slice.call(a.childNodes);s.forEach(function(e){i.appendChild(a.removeChild(e))})}catch(t){throw new Error("could not create icon from "+e)}d(_),_.attr("viewBox",r.attr("viewBox")).attr("width",r.attr("width")).attr("height",r.attr("height"));try{E=_.attr("viewBox").split(" ").map(function(e){return parseInt(e)})}catch(e){E=[0,0,parseInt(_.attr("width")),parseInt(_.attr("height"))],_.attr("viewBox",E.join(" "))}_.select("."+o+" text").style({"font-size":Math.round(E[3]/(O.getQuotient()*O.length()))+"px",display:null}),I&&_.selectAll("path,rect,circle,text").style("fill",I),D=!0,w&&w(),A&&t.resize(A),p()}}function d(e){var t=e.select("style");if(!t.empty()){for(var n,r=t.html()||"",a=/\.([A-Za-z0-9-]+)\s*\{/g,i=[],o=Math.round(1e4*Math.random());n=a.exec(r);)i.push(n[1]);t.html(r.replace(a,".$1-"+o+"{")),i.forEach(function(t){e.selectAll("."+t).attr("class",t+"-"+o)})}}function f(){_=b.select("."+i),_.empty()?(_="bottom"===C||"right"===C?b.append("svg"):b.insert("svg",":first-child"),_.classed(i,!0).style("fill",M)):_.select("."+l).remove(),"right"!==C&&"left"!==C||_.style("display","inline-block"),_.attr("preserveAspectRatio","xMidYMid meet").append("g").classed(l,!0)}function p(){if(D&&k){var e=k(),t=null,n=null,r=_.select("."+l);e!==!1&&null!=e&&(t=T&&T(e),n=S&&S(e)),t?h(r,t):g(r),n?h(r,n,!0):g(r)}}function h(e,t,n){var r=y(t);r.forEach(function(t,r){e.style(t,r),n&&v(e,t,r)}),m(r)}function g(e){var t=e.attr("style");if(t){var n=y(t);n.forEach(function(t){v(e,t,null)}),e.attr("style",null),m(null)}}function v(e,t,n){if(null==n&&P.has(t))P.remove(t);else{if(null==n)return;P.add(t)}e.selectAll("path,circle,rect,text").style(t,n)}function m(e){if(_.selectAll(".axi-widget-border").remove(),e&&!e.empty()){var t,n=e.get("border-width"),r=e.get("border-style"),a=e.get("border-color"),i=e.get("border");if(i&&(t=i.split(" "),3===t.length&&(n=n||t[0].trim(),r=r||t[1].trim(),a=a||t[2].trim())),n&&r&&a){var o=E[3];O.length()&&(o*=1+1/O.getQuotient());var l=o/Math.sqrt(2);_.append("circle").attr("class","axi-widget-border").attr("cx",E[2]/2).attr("cy",o/2).attr("r",l).style("stroke",a).style("stroke-width",parseInt(n)).style("fill","none")}}}function y(e){var t=e.split(";"),n=d3.map();return t.forEach(function(e){var t=e.split(":");2===t.length&&n.set(t[0].trim(),t[1].trim())}),n}function x(t){if(!O.length()||!D)return 0;var n=t/parseInt(_.attr("height"))||1,r=e?E[3]:E[3]/2,a="translate("+E[2]/2+"px,"+r+"px)",i=_.select("."+o+" text").node().getBoundingClientRect().height*n/O.scale;if(navigator.isFF){var l=parseInt(_.select("."+o+" text").style("font-size"))+1,s=parseInt(_.attr("height"))/E[3],u=parseInt(_.attr("width"))/E[2],c=Math.min(u,s)||1;i=l*c*O.length()*n}if(!i)return i;i<O.minSize?(O.scale=O.minSize/i,i=O.minSize):i>O.maxSize?(O.scale=O.maxSize/i,i=O.maxSize):O.scale=1;var d=_.select("."+o).style("transform",a+"scale("+O.scale+")").node();if(navigator.isIE){var f=getComputedStyle(d).getPropertyValue("transform");d.setAttribute("transform",f)}return i}var b,_,w,k,T,S,E,M,I,C="top",A=0,D=!1,O=new r,P=d3.set();return t.resize=function(n){if(arguments.length||(n=A),n=Math.round(n),n=Math.max(n,s),A=n,!D)return t;_.attr("width",n+"px").attr("height",n+"px").attr("x",-n/2+"px").attr("y",-n/2+"px").attr("viewBox",E&&E.join(" ")),D&&e&&_.select("."+o+" text").style("font-size",E[3]/(O.getQuotient()*O.length())+"px");var r,a,i=x(n);return e&&D&&(r=1.1*i/n,a=[E[0],E[1],E[2],E[3]*(1+r)],_.attr("viewBox",a.join(" "))),t},t.el=function(){return _},t.color=function(e){return arguments.length?(M=e,t):M},t.forceColor=function(e){return arguments.length?(I=e,t):I},t.caption=function(e){return arguments.length?(O.lines(e),t):O.lines()},t.onReady=function(e){return arguments.length?(w=e,t):w},t.refresh=function(n){if(e===n)return p(),t;var r=a(n).caption(O.lines()).captionStyle(O.style).minCaptionFont(O.minFont).maxCaptionFont(O.maxFont).color(M).forceColor(I).alert(k).alertStyle(T).forceAlertStyle(S).resize(A).onReady(w);return r(b)},t.alert=function(e){return arguments.length?(null!=e&&(k=d3.functor(e)),t):k},t.alertStyle=function(e){return arguments.length?(null!=e&&(T=d3.functor(e)),t):T},t.forceAlertStyle=function(e){return arguments.length?(null!=e&&(S=d3.functor(e)),t):S},t.captionStyle=function(e){return arguments.length?(null!=e&&(O.style=e),t):O.style},t.minCaptionFont=function(e){return arguments.length?(null!=e&&(O.minFont=e),t):O.minFont},t.maxCaptionFont=function(e){return arguments.length?(null!=e&&(O.maxFont=e),t):O.maxFont},t.destroy=function(){_.remove()},t.position=function(e){return arguments.length?(null!=e&&(C=e),t):C},t}var i="axi-widget-icon",o=i+"-caption",l=i+"-style",s=1,u="CSS/images/icons/embedded/";r.prototype.lines=function(e){return arguments.length?(e&&(this._lines=[].concat(e)),this):this._lines},r.prototype.length=function(){return this._lines.length},r.prototype.build=function(e,t){this.length()&&(this.element=e.select("."+l).append("g").attr("class",o),this.element.append("text").attr("y",t?"1em":null).attr("style",this.style).text(this.lines()).style("display",t?"none":null))},r.prototype.getViewBox=function(){var e,t=[0,0,0,0];if(!this.length())return t;if(e=this.element.select("text"),navigator.isFF){var n=e.selectAll("tspan");n.empty()?t[2]=e.node().getComputedTextLength():n.each(function(){t[2]=Math.max(t[2],this.getComputedTextLength())}),t[3]=(parseInt(e.style("font-size"))+1)*this.length()}else{var r=e.node().getBoundingClientRect();t[2]=r.width,t[3]=r.height}return t},r.prototype.getQuotient=function(){var e=this.getViewBox();return e[3]?Math.max(e[2]/e[3],4):4},t.exports=a,a.EMBEDDED_PATH=u;var c=a.EMBEDDED_ICONS=["alerts_color_01.svg","alerts_color_02.svg","alerts_color_03.svg","alerts_color_07.svg","alerts_color_21.svg","arrows_color_01.svg","arrows_color_02.svg","arrows_color_03.svg","arrows_color_04.svg","arrows_color_05.svg","arrows_color_06.svg","arrows_color_07.svg","arrows_color_08.svg","arrows_color_09.svg","arrows_color_10.svg","arrows_color_11.svg","arrows_color_12.svg","arrows_color_13.svg","arrows_color_14.svg","arrows_color_15.svg","arrows_color_16.svg","arrows_color_17.svg","arrows_color_18.svg","arrows_color_19.svg","arrows_color_20.svg","arrows_color_21.svg","arrows_color_22.svg","arrows_color_23.svg","arrows_color_24.svg","arrows_color_25.svg","arrows_color_26.svg","arrows_color_27.svg","arrows_color_28.svg","arrows_color_29.svg","arrows_color_30.svg","arrows_color_31.svg","arrows_color_32.svg","arrows_color_33.svg","arrows_color_34.svg","arrows_color_35.svg","arrows_color_36.svg","arrows_color_37.svg","arrows_color_38.svg","arrows_color_39.svg","arrows_color_40.svg","arrows_color_41.svg","arrows_color_42.svg","arrows_color_43.svg","arrows_color_44.svg","arrows_color_45.svg","arrows_color_46.svg","arrows_color_47.svg","arrows_color_48.svg","arrows_color_49.svg","arrows_color_50.svg","arrows_color_51.svg","arrows_color_52.svg","arrows_color_53.svg","arrows_color_54.svg","arrows_color_55.svg","arrows_color_56.svg","arrows_color_57.svg","arrows_color_58.svg","arrows_color_59.svg","arrows_color_60.svg","badges_votes_color_01.svg","badges_votes_color_02.svg","badges_votes_color_08.svg","badges_votes_color_09.svg","business_arrows_black_10.svg","business_arrows_black_11.svg","business_arrows_black_13.svg","business_arrows_black_14.svg","business_arrows_black_15.svg","business_arrows_black_16.svg","business_arrows_black_3.svg","business_arrows_black_5.svg","business_arrows_black_6.svg","business_arrows_black_9.svg","charts_color_01.svg","charts_color_02.svg","charts_color_03.svg","charts_color_04.svg","charts_color_05.svg","charts_color_06.svg","charts_color_07.svg","charts_color_08.svg","charts_color_09.svg","charts_color_10.svg","charts_color_11.svg","charts_color_12.svg","charts_color_13.svg","charts_color_14.svg","charts_color_15.svg","chat_messages_color_06.svg","chat_messages_color_08.svg","chat_messages_color_09.svg","chat_messages_color_10.svg","chat_messages_color_11.svg","chat_messages_color_12.svg","chat_messages_color_13.svg","chat_messages_color_15.svg","chat_messages_color_16.svg","chat_messages_color_17.svg","chat_messages_color_18.svg","documents_bookmarks_color_01.svg","documents_bookmarks_color_02.svg","documents_bookmarks_color_03.svg","documents_bookmarks_color_04.svg","documents_bookmarks_color_05.svg","documents_bookmarks_color_06.svg","documents_bookmarks_color_07.svg","documents_bookmarks_color_08.svg","documents_bookmarks_color_09.svg","documents_bookmarks_color_10.svg","documents_bookmarks_color_11.svg","documents_bookmarks_color_12.svg","documents_bookmarks_color_13.svg","documents_bookmarks_color_14.svg","documents_bookmarks_color_15.svg","documents_bookmarks_color_16.svg","documents_bookmarks_color_17.svg","documents_bookmarks_color_18.svg","documents_bookmarks_color_19.svg","documents_bookmarks_color_20.svg","documents_bookmarks_color_21.svg","documents_bookmarks_color_22.svg","documents_bookmarks_color_23.svg","documents_bookmarks_color_24.svg","documents_bookmarks_color_25.svg","documents_bookmarks_color_26.svg","documents_bookmarks_color_27.svg","documents_bookmarks_color_28.svg","docker_black_01.svg","ecology_color_04.svg","ecology_color_08.svg","ecology_color_09.svg","ecology_color_14.svg","ecology_color_18.svg","ecology_color_20.svg","ecology_color_21.svg","ecology_color_24.svg","education_science_color_01.svg","education_science_color_02.svg","education_science_color_04.svg","education_science_color_05.svg","education_science_color_06.svg","education_science_color_12.svg","education_science_color_13.svg","education_science_color_14.svg","education_science_color_18.svg","education_science_color_25.svg","email_black_01.svg","email_black_06.svg","email_black_08.svg","email_black_09.svg","email_black_10.svg","email_black_15.svg","email_black_17.svg","email_black_18.svg","email_black_19.svg","email_black_35.svg","email_black_36.svg","email_black_37.svg","faces_users_color_03.svg","faces_users_color_04.svg","faces_users_color_13.svg","faces_users_color_14.svg","faces_users_color_15.svg","faces_users_color_16.svg","faces_users_color_17.svg","filetype_archive_color_01.svg","filetype_archive_color_02.svg","filetype_archive_color_03.svg","filetype_archive_color_04.svg","filetype_archive_color_05.svg","filetype_audio_color_01.svg","filetype_audio_color_02.svg","filetype_audio_color_03.svg","filetype_audio_color_04.svg","filetype_audio_color_05.svg","filetype_documents_color_01.svg","filetype_documents_color_02.svg","filetype_documents_color_03.svg","filetype_documents_color_04.svg","filetype_documents_color_05.svg","filetype_documents_color_06.svg","filetype_documents_color_07.svg","filetype_documents_color_08.svg","filetype_documents_color_09.svg","filetype_documents_color_10.svg","filetype_documents_color_11.svg","filetype_documents_color_12.svg","filetype_documents_color_13.svg","filetype_documents_color_14.svg","filetype_documents_color_15.svg","filetype_documents_color_16.svg","filetype_documents_color_17.svg","filetype_documents_color_18.svg","filetype_images_color_01.svg","filetype_images_color_02.svg","filetype_images_color_03.svg","filetype_images_color_04.svg","filetype_images_color_05.svg","filetype_images_color_06.svg","filetype_images_color_07.svg","filetype_images_color_08.svg","filetype_images_color_09.svg","filetype_images_color_10.svg","filetype_images_color_11.svg","filetype_programming_color_01.svg","filetype_programming_color_02.svg","filetype_programming_color_03.svg","filetype_programming_color_04.svg","filetype_programming_color_05.svg","filetype_programming_color_06.svg","filetype_programming_color_07.svg","filetype_programming_color_08.svg","filetype_programming_color_09.svg","filetype_programming_color_10.svg","filetype_programming_color_11.svg","filetype_programming_color_12.svg","filetype_programming_color_13.svg","filetype_programming_color_14.svg","filetype_programming_color_15.svg","filetype_programming_color_16.svg","filetype_video_color_01.svg","filetype_video_color_02.svg","filetype_video_color_03.svg","filetype_video_color_04.svg","filetype_video_color_05.svg","filetype_video_color_06.svg","filetype_video_color_07.svg","folders_black_01.svg","folders_black_02.svg","folders_black_03.svg","folders_black_04.svg","folders_black_05.svg","folders_black_06.svg","folders_black_07.svg","folders_black_08.svg","folders_black_09.svg","folders_black_10.svg","folders_black_11.svg","folders_black_12.svg","folders_black_13.svg","folders_black_14.svg","folders_black_15.svg","folders_black_17.svg","folders_black_18.svg","folders_black_19.svg","folders_black_20.svg","hardware_black_01.svg","hardware_black_02.svg","hardware_black_03.svg","hardware_black_04.svg","hardware_black_05.svg","hardware_black_06.svg","hardware_black_07.svg","hardware_black_08.svg","hardware_black_09.svg","hardware_black_10.svg","hardware_black_11.svg","hardware_black_12.svg","hardware_black_13.svg","hardware_black_14.svg","hardware_black_15.svg","hardware_black_16.svg","hardware_black_17.svg","hardware_black_18.svg","hardware_black_19.svg","hardware_black_20.svg","hardware_black_21.svg","hardware_black_22.svg","hierarchy_black_01.svg","hierarchy_black_02.svg","hierarchy_black_03.svg","hierarchy_black_04.svg","hierarchy_black_05.svg","hierarchy_black_06.svg","hierarchy_black_07.svg","hierarchy_black_08.svg","hierarchy_black_09.svg","hierarchy_black_10.svg","medical_black_02.svg","medical_black_06.svg","medical_black_13.svg","medical_black_22.svg","medical_black_23.svg","medical_black_24.svg","multimedia_artboard_color_801.svg","multimedia_artboard_color_802.svg","multimedia_artboard_color_803.svg","multimedia_artboard_color_804.svg","network_sharing_black_01.svg","network_sharing_black_02.svg","network_sharing_black_03.svg","network_sharing_black_04.svg","network_sharing_black_05.svg","network_sharing_black_06.svg","network_sharing_black_07.svg","network_sharing_black_08.svg","network_sharing_black_09.svg","network_sharing_black_10.svg","network_sharing_black_11.svg","network_sharing_black_12.svg","office_artboard_color_80.svg","office_artboard_color_801.svg","office_color_01.svg","office_color_02.svg","office_color_03.svg","office_color_04.svg","office_color_05.svg","office_color_06.svg","office_color_07.svg","office_color_08.svg","office_color_09.svg","office_color_10.svg","office_color_11.svg","office_color_12.svg","office_color_13.svg","office_color_14.svg","office_color_15.svg","office_color_16.svg","office_color_17.svg","office_color_18.svg","office_color_19.svg","office_color_20.svg","office_color_21.svg","office_color_22.svg","office_color_23.svg","office_color_24.svg","office_color_25.svg","office_color_26.svg","office_color_27.svg","office_color_28.svg","office_color_29.svg","office_color_30.svg","office_color_31.svg","office_color_32.svg","office_color_33.svg","office_color_34.svg","office_color_35.svg","office_color_38.svg","office_color_39.svg","office_color_40.svg","office_color_41.svg","office_color_42.svg","office_color_43.svg","office_color_44.svg","office_color_45.svg","office_color_46.svg","office_color_47.svg","office_color_48.svg","payment_getways_color_01.svg","payment_getways_color_02.svg","payment_getways_color_03.svg","payment_getways_color_04.svg","payment_getways_color_05.svg","payment_getways_color_06.svg","payment_getways_color_07.svg","payment_getways_color_08.svg","payment_getways_color_09.svg","payment_getways_color_10.svg","payment_getways_color_11.svg","payment_getways_color_12.svg","payment_getways_color_13.svg","payment_getways_color_14.svg","payment_getways_color_15.svg","payment_getways_color_16.svg","payment_getways_color_17.svg","payment_getways_color_18.svg","payment_getways_color_19.svg","payment_getways_color_20.svg","payment_getways_color_21.svg","payment_getways_color_22.svg","payment_getways_color_23.svg","payment_getways_color_24.svg","payment_getways_color_25.svg","payment_getways_color_26.svg","payment_getways_color_27.svg","payment_getways_color_28.svg","payment_getways_color_29.svg","payment_getways_color_30.svg","payment_getways_color_31.svg","payment_getways_color_32.svg","payment_getways_color_33.svg","payment_getways_color_34.svg","seo_color_04.svg","seo_color_05.svg","seo_color_06.svg","seo_color_07.svg","seo_color_08.svg","server_black_01.svg","server_black_02.svg","server_black_03.svg","server_black_04.svg","server_black_05.svg","server_black_06.svg","server_black_07.svg","server_black_08.svg","server_black_09.svg","server_black_10.svg","server_black_11.svg","server_black_12.svg","server_black_13.svg","server_black_14.svg","server_black_15.svg","server_black_16.svg","shopping_black_01.svg","shopping_black_02.svg","shopping_black_03.svg","shopping_black_04.svg","shopping_black_05.svg","shopping_black_06.svg","shopping_black_07.svg","shopping_black_08.svg","shopping_black_09.svg","shopping_black_10.svg","shopping_black_11.svg","shopping_black_12.svg","shopping_black_13.svg","shopping_black_14.svg","shopping_black_15.svg","shopping_black_16.svg","shopping_black_17.svg","shopping_black_18.svg","shopping_black_19.svg","shopping_black_20.svg","shopping_black_21.svg","shopping_black_22.svg","shopping_black_23.svg","shopping_black_24.svg","shopping_black_25.svg","shopping_black_26.svg","shopping_black_27.svg","shopping_black_28.svg","shopping_black_29.svg","shopping_black_30.svg","shopping_black_31.svg","shopping_black_32.svg","shopping_black_33.svg","status_black_06.svg","status_black_07.svg","status_black_10.svg","status_black_12.svg","technology_black_01.svg","technology_black_02.svg","technology_black_03.svg","technology_black_04.svg","technology_black_05.svg","technology_black_06.svg","technology_black_07.svg","technology_black_08.svg","technology_black_09.svg","technology_black_10.svg","technology_black_11.svg","technology_black_12.svg","technology_black_13.svg","technology_black_14.svg","technology_black_15.svg","technology_black_16.svg","technology_black_17.svg","technology_black_18.svg","technology_black_19.svg","technology_black_20.svg","technology_black_21.svg","time_black_01.svg","time_black_02.svg","time_black_03.svg","time_black_04.svg","time_black_05.svg","time_black_06.svg","time_black_07.svg","time_black_08.svg","time_black_09.svg","time_black_10.svg","time_black_11.svg","time_black_12.svg","time_black_13.svg","time_black_14.svg","time_black_15.svg","time_black_16.svg","time_black_17.svg","time_black_18.svg","time_black_19.svg","time_black_20.svg","time_black_21.svg","transfers_black_01.svg","transfers_black_02.svg","transfers_black_03.svg","transfers_black_04.svg","transfers_black_05.svg","transfers_black_06.svg","transfers_black_07.svg","transfers_black_08.svg","transfers_black_09.svg","transfers_black_10.svg","transfers_black_11.svg","transfers_black_12.svg","transfers_black_13.svg","transfers_black_14.svg","transfers_black_15.svg","transfers_black_16.svg","transfers_black_17.svg","transfers_black_18.svg","transfers_black_19.svg","transfers_black_20.svg","transfers_black_21.svg","transfers_black_22.svg","transfers_black_23.svg","transfers_black_24.svg","transfers_black_25.svg","transfers_black_26.svg","transfers_black_27.svg","transfers_black_28.svg","transfers_black_29.svg","transfers_black_30.svg","transfers_black_31.svg","transfers_black_32.svg","transfers_black_33.svg","transfers_black_34.svg","transfers_black_35.svg","transfers_black_36.svg","transfers_black_37.svg","transfers_black_38.svg","transfers_black_39.svg","transfers_black_40.svg","transportation_black_01.svg","transportation_black_02.svg","transportation_black_03.svg","transportation_black_04.svg","transportation_black_05.svg","transportation_black_06.svg","transportation_black_07.svg","transportation_black_08.svg","transportation_black_09.svg","transportation_black_10.svg","transportation_black_11.svg","transportation_black_12.svg","transportation_black_13.svg","transportation_black_14.svg","transportation_black_15.svg","transportation_black_16.svg","transportation_black_17.svg","transportation_black_18.svg","transportation_black_19.svg","transportation_black_20.svg","web_essentials_part1_color_10.svg","web_essentials_part1_color_11.svg","web_essentials_part1_color_14.svg","web_essentials_part1_color_17.svg","web_essentials_part1_color_18.svg","web_essentials_part1_color_19.svg","web_essentials_part1_color_25.svg","web_essentials_part2_color_01.svg","web_essentials_part2_color_02.svg","web_essentials_part2_color_03.svg","web_essentials_part2_color_05.svg","web_essentials_part2_color_06.svg","web_essentials_part2_color_11.svg","web_essentials_part2_color_17.svg","web_essentials_part2_color_21.svg","web_essentials_part2_color_23.svg","web_essentials_part2_color_25.svg","web_essentials_part2_color_26.svg","web_essentials_part2_color_27.svg","web_essentials_part2_color_28.svg","web_essentials_part2_color_30.svg","web_essentials_part2_color_34.svg","web_essentials_part2_color_36.svg","web_essentials_part2_color_37.svg","web_essentials_part2_color_38.svg","web_essentials_part2_color_39.svg","web_essentials_part2_color_40.svg","web_essentials_part2_color_41.svg","web_essentials_part2_color_45.svg","web_essentials_part2_color_46.svg","windows_black_01.svg","windows_black_02.svg","windows_black_03.svg","windows_black_04.svg","windows_black_05.svg","windows_black_06.svg","windows_black_07.svg","windows_black_08.svg","windows_black_09.svg","windows_black_10.svg","windows_black_11.svg","windows_black_12.svg","windows_black_13.svg","windows_black_14.svg","windows_black_15.svg","windows_black_16.svg","windows_black_17.svg","windows_black_18.svg","windows_black_19.svg","windows_black_20.svg","windows_black_21.svg","windows_black_22.svg","windows_black_23.svg"]},{}],51:[function(e,t,n){t.exports=function(e,t){function n(t,n){e.navigator.isFF?t.addEventListener("DOMMouseScroll",function(e){d3.event=e,n(e.detail<0,e),d3.event=null},!1):d3.select(t).on("mousewheel",function(){var e=d3.event;n(e.wheelDelta>0,e)})}function r(e,t,n,r,a){function i(){o=1,l=null}r>0||(null!=r&&(a=!0),r=300);var o,l,s="function"==typeof a;i(),e.on("click",function(){if(!n||!n.apply(this,arguments))if(null!=l&&(clearTimeout(l),o++),o>=2||(s?a.apply(this,arguments):a))t.call(this,o,arguments),l=setTimeout(i,r);else{var e=d3.event,u=this,c=arguments;l=setTimeout(function(){d3.event=e,t.call(u,o,c),d3.event=null,i()},r)}})}function a(t,n,r,a,o,l,s){function u(e,r){if(h=arguments.length<2,d!=e){if(d=e,d&&n.start&&n.start(r),t.classed("axi-dragging",d),o)if(d){var a=d3.select(d3.event.sourceEvent.target).style("cursor");a&&"default"!=a&&p.style("cursor",f=a)}else f&&p.style("cursor",f=null);else p.classed("axi-grabbing",d);d||(n.end&&n.end(),g&&i(g=!1),v=null)}}function c(){var e=r&&d3.mouse(r);u(!!a(e),e)}a=null==a?function(t,n){return!t||!(t[0]<0||t[1]<0||t[0]>(n||(n=e.getNodeRect(r))).width||t[1]>n.height)}:d3.functor(a);var d=!1,f=null,p=d3.select("html"),h=!0,g=!1,v=null,m=d3.behavior.drag().on("drag",function(){if(h&&c(),d){var e=d3.event.dx,t=d3.event.dy;v?(v[0]+=e,v[1]+=t):v=[e,t],!g&&m.doCover()&&i(g=!0),n.move&&n.move(e,t)}}).on("dragend",function(){u(!1)});return m.getTotalXY=function(){return v},m.isCovered=function(){return g},m.doCover=function(){return!0},l&&m.on("dragstart",c),t.call(m),m}function i(e){if(!l!=!e){l=e;var t=d3.select("#axi-iframes-cover");t.empty()&&(t=d3.select("body").append("div").attr("id","axi-iframes-cover"));var n=0;return e&&(d3.selectAll("body > *").each(function(){n=Math.max(n,+d3.select(this).style("z-index")||0)}),n++),t.style("z-index",n).style("display",e?"":"none"),t}}function o(t,n,r){function a(e){var t=e+".zoom",n=l.on(t);l.on(t,function(){!s[e](i,v,o)&&n&&n.apply(this,arguments)})}var i=(n||(n=e)).d3;if(!i)return null;for(var o=null,l=null,u=t.childNodes.length-1,c=null,d=null;u>=0;u--){var f=t.childNodes.item(u);"defs"!=f.tagName&&"desc"!=f.tagName&&((c||(c=(o=(l=i.select(t)).append("g")).node())).insertBefore(f,d),d=f)}if(!o)return!1;var p=r?d3.functor(r):null,h=[],g=1,v=i.behavior.zoom().on("zoom",function(){o.attr("transform","translate("+v.translate()+")scale("+v.scale()+")"),v.unscale(),i.event.cancelBubble=!0});v.unscale=function(){if(g!=(g=v.scale())&&p&&(h.length&&i.selectAll(h.splice(0)).attr("transform",null),1!=g)){var e=p.call(this,g),t=e&&o.selectAll(e)[0];if(t&&t.length){var n=1!=g&&g>0&&1/g;t.forEach(function(e){if(getParentNode(e.parentNode,function(e){return e==t.parentNode||t.indexOf(e)>=0})==t.parentNode){var r=i.select(e);r.transform("scale",n),h.push(e)}})}}},l.call(v);for(var m in s)a(m);return v}var l=!1,s={dblclick:function(e,t,n){return t.scale(1).translate([0,0]),n.attr("transform",""),t.unscale(),!0}};e.navigator.isFF&&(s.DOMMouseScroll=function(e){e.event.wheelDelta=e.event.detail*-40}),e.getZoomSVG=o,e.onMouseClick=r,e.onMouseDrag=a,e.onMouseWheel=n,e.coverIFrames=i}},{}],52:[function(e,t,n){var r=e("./properties"),a=e("./settings_selector");t.exports=function(e){function t(e){var t=null==e.legendposition&&"Chart"===e.type?e.series.filter(function(e){return e.display}).length>1?"top":"hidden":e.legendposition,n={isUTC:e.isUTC,dayFormat:e.dayformat,hourFormat:e.hourformat,legendPosition:t,getTooltipCont:renderWidget.getTooltipContFn(e)};switch(e.type){case"Chart":n.aheadTimeSpan=e.aheadtimespan,n.retainTimeSpan=e.retaintimespan;break;case"Gauge":n.mode=e.mode;break;case"Bar":n.horizontal=e.horizontal}return n}function n(e){if(e instanceof Function)return e;var t=new Function("min","max",e);return function(e,n){try{t(e,n)}catch(e){console.error(e)}}}function i(e){var t={rules:e.rule,metrics:e.metric,entity:e.entity,entities:e.entities,entityGroup:e.entitygroup,severities:e.severity,minSeverity:e.minseverity,tags:e.tags,limit:e.limit};return t.entity||t.entities||t.entityGroup||(t.entity="*"),t}e.appendWidget=function(t,n,r,a,i){var o=t.type,l=e["init"+o+"Widget"];return t.originalConfig||(t=e["get"+o+"Config"](t,i)),l?(n&&(t.renderTo=n),r&&(t.initSize=r),a&&(t.portalWidgetEl=a),l(t)):null},e.initWidgetSeries=function(t,n,r){r||(r=n.config);var a=t.map(function(e){return initWidgetSeries.newSeries(e,n,r)}),i=n.series.parameters();n.series.isUTC(r.isUTC),e.initWidgetSeries.setAutoPeriod(a,n,r),inheritSeriesSettings.forEach(function(e){null!=r[e]&&(i.defaultValues[e]=r[e])}),i.defaultValues.labelFormat=parseCfgValue(r.labelformat,"escaped");var o=["Gauge","Calendar","Treemap"].indexOf(r.type)>=0;return null==i.defaultValues.colors||o||(i.colors=i.defaultValues.colors.slice(0)),null!=i.defaultValues.palette&&o&&(i.palette=i.defaultValues.palette.slice(0)),null==r.endTime&&null==r.startTime||(null==i.defaultValues.movingaverage&&(i.defaultValues.movingaverage=!1),r.updateinterval&&!r.originalConfig.updateinterval&&(r.updateinterval=0)),a.forEach(n.series.addSeries).forEach(n.series.setValue),n.series},e.initWidgetSeries.setAutoPeriod=function(e,t,n){if(n.autoperiod=!e.some(function(e){return 0!=e.params.display&&e.keys.key.period[0]})||null!=n.autoperiod&&n.autoperiod,"Chart"===n.type||"Box"===n.type)t.series.autoInterval(lib.adjustPeriod(n.timespan)||lib.getIntervalValue("1 hour"));else{var r=lib.getIntervalValue(n.timespan);r.isTimespan=!0,r.getTimespanWindow=t.loader.getTimespanWindow,t.series.autoInterval(r)}},e.initWidgetSeries.newSeries=function(e,t,n){function r(e){return["Chart","Calendar","Box"].indexOf(e)<0}var a=extendObject({},e),i=lib.series.getKey(a,!0);return i[1].last&&!r(n.type)&&r(n.originType)&&(i[0].last=i[1].last=!1),a=lib.series.create(a,lib.series.getKeys.apply(this,i)),a.keys.isThreshold=a.params.isThreshold=!a.keys.isReal&&a.params.isThreshold,a.config=e,a.keys.key.value===!0&&(a.data=!1),a},function(e,t){function n(e,t,n,i,o){"boolean"==typeof t&&(o=i,i=n,n=t,t=null),a(t).forEach(function(t){var a=t.reload.period;a&&(a.index?(a.index+=e?-1:1)>0||r(t,t.reload.period.prev,n,i,o):e||(r(t,0,n,i,o),t.reload.period={index:1,prev:a}));var l="function"==typeof t.getWin&&t.getWin();l&&l.switchRealtimeUpdate&&l.switchRealtimeUpdate(e,n,i,o)})}function r(e,t,n,r,a){var i=e.realtime(t);return n&&!i[0]&&i[1]&&e.reload(),r&&i[0]&&!i[1]&&e.loader&&e.loader.sentRequests.abort(),a&&!i[0]!=!i[1]&&e.onUpdateChange.forEach(function(e){e(i)}),i}function a(e){if(instanceofArray(e)){if(!e.each)return e.reduce(function(e,t){t&&e.indexOf(t)<0&&e.push(t)},[])}else{var t=d3.selectAll(".axi-widgets > :first-child");e="string"==typeof e&&e?t.filter(e):t}var n=[];return e.each(function(){var e=this.__widget__;e&&n.indexOf(e)<0&&n.push(e)}),n}function i(e,t,n,r){if("object"==typeof e)r=n,n=t;else{var i={};i[(e+"").toLowerCase()]=t,e=i}"boolean"==typeof n&&(r=n,n=null),a(n).forEach(function(t){if(t.phMap){if(t.config.portalWidgetEl){var n=null;try{n=$(t.renderNode.parentNode.parentNode).portalWidget("option","config")}catch(e){}if(n&&n.placeholders)for(var a in e)n.placeholders[a]=e[a]}var i=t.phMap(e);t.reload&&i&&(i>1||r)&&t.reload()}})}function o(e,t){var n="function"==typeof e;a(t).forEach(function(t){if(t.config.portalWidgetEl){var r=t.renderNode.parentNode.parentNode,a=d3.select(r).child(".ui-widget-header, .widgetHeader").child(".widgetTitle").node();if(a){var i=t.config.title,o=n?e.call(t,i?[].concat(i).join(" - "):""):e,l=a.innerHTML=o&&o.join?o.join(" - "):o;try{$(r).portalWidget("option","config").title=l}catch(e){}}}})}e.setWidgetTitle=o,e.setPlaceholder=i,e.switchRealtimeUpdate=n,e.selectWidgets=a,e.realtimeUpdate=r}(e),e.getChartConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize","connectvalues","centralizecolumns","centralizeticks","stack","collapsible","markers","stepline","retaintimespan","autoperiod","displaydate","autoscale","legendlastvalue","verticalgrid","horizontalgrid"],_int:["batchsize","tickstime","ticks","ticksright","contextheight"],_rotate:["rotateticks"],_float:["aheadtimespan","maxrange","minrange","maxrangeright","minrangeright","maxrangeforce","minrangeforce","maxrangerightforce","minrangerightforce"],_string:["timezone","legendposition","url","path","lastvaluelabel","urlparameters"],_display:["displaypanels"],_expand:["expandpanels"],_escaped:["dayformat","hourformat"]},!0)},e.defaultChartConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,dialogmaximize:!0,collapsible:!0,retaintimespan:!0,rotateticks:90,displaypanels:"hover",horizontalgrid:!0,verticalgrid:!0,timespan:"1 hour",updateinterval:6e4,lastvaluelabel:"right",legendlastvalue:!0,contextheight:0,ticks:5,ticksright:5,autoscale:!1,tickstime:10,centralizeticks:!1,centralizecolumns:!1,script:[],buttons:[]},e.defaultDialogChart={displaydate:!0,displaypanels:!0,legendposition:"top",contextheight:71,script:[],buttons:["close"]},e.initChartWidget=function(n){var r=TimeChart(t(n)).hideDelay(500);r.series.arrayType([window.Uint64Array||null,window.Float64Array||null]),r.mode(null==n.mode&&n.stack?"stack":n.mode),r.tseries.collapsible(n.collapsible),r.tseries.connectValues(n.connectValues),r.chart.centralizeColumns(n.centralizecolumns),r.context.centralizeColumns(n.centralizecolumns),r.chart.yScale.autoScale(n.autoscale),r.chart.yScale[0].extension([n.minrange,n.maxrange]).limit([n.minrangeforce,n.maxrangeforce]),r.chart.yScale[1].extension([n.minrangeright,n.maxrangeright]).limit([n.minrangerightforce,n.maxrangerightforce]);var a=n.contextheight>0;r.context.display(a).height(n.contextheight),a||r.charts.splice(r.charts.indexOf(r.context),1),r.chart.displayHorGrid(n.horizontalgrid),n.isDialog||r.chart.displayPanels(1==n.displaypanels).displayPanelsIfHover("hover"==n.displaypanels),n.periods&&n.periods.forEach(r.addIntervalControl);var i=n.isDialog||1==n.expandpanels?-1:0==n.expandpanels?0:null;return null!=i&&r.chart.panels.expand(i),r.chart.grid[0].ticks(n.tickstime).display(n.verticalgrid),r.chart.axis[0].ticks(n.tickstime).centralizeTicks(n.centralizeticks).rotate(n.rotateticks),r.context.grid[0].ticks(n.tickstime),r.context.axis[0].ticks(n.tickstime),r.chart.axis[1].ticks(n.ticks).title(n.axistitle),r.chart.axis[2].ticks(n.ticksright).title(n.axistitleright),r.chart.grid[1].ticks(n.ticks),r.chart.grid[2].ticks(n.ticksright),n.displaydate||r.displayDates(null),r.legend.showLastValue(n.legendlastvalue),e.initWidgetSeries(n.series,r,n),r.autoInterval(n.autoperiod),r.calcSeries(),r.zoom.on("click",function(e,t,a){var i=n.onseriesclick&&d3.event.target.__data__;if(i&&i.tseries&&i.tseries.column()&&(i=i.tseries.series)){i=i.origin||i;var o=r.getNearestSeries(a[0],a[1],0);if(o){var l=o[1],s=i.keys.key.period,u=s[1]>0?{endTime:lib.roundTime(l+1,s,!0,o[3].isUTC),startTime:lib.roundTime(l,s,!1,o[3].isUTC)}:{endTime:l};try{n.onseriesclick.call(i,i.config,r,n,u)}catch(e){log("Failed execution of on-series-click script."+e)}}}}),renderWidget(r,n)},e.copyConfigFromChart=function(e){return{mode:e.mode(),autoscale:e.chart.yScale.autoScale(),autoperiod:e.autoInterval(),stepline:e.tseries.stepline(),collapsible:e.tseries.collapsible(),connectValues:e.tseries.connectValues(),timespan:e.loader.timeSpan()}},e.getGaugeConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize","displayticks","displaytip"],_int:["batchsize","ticks","minorticks"],_float:["ringwidth","borderwidth","pinradius","arrowlength"],_string:["timezone","path","captionstyle","mode","url","counterposition","urlparameters"]},!0)},e.defaultGaugeConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,dialogmaximize:!0,minorticks:0,updateinterval:6e4,timespan:"1 hour",style:"padding: 3px",script:[],buttons:[]},e.defaultDialogGauge={script:[],buttons:["close"]},e.initGaugeWidget=function(e){function n(e,t,n,a){u=Array.prototype.slice.call(arguments,0);var i=Math.round(a?l*a[1]:l),d=c>=0&&o.counter.innerEl().node(),f=d?getNodeSize(d,"line-height")+getNodeSize(d,"padding-top")+getNodeSize(d,"padding-bottom")+o.padding():0,p=(0==c?f:0)+i+Math.max(0,o.axis.displayTicks()?getNodeRect(o.backgroundEl().node(),!0).top-o.axis.getTop():0),h=1==c?f:0,g=Math.round(Math.max(Math.min(e/o.getWidthPortion(),(t-p-h)/o.getHeightPortion()),1)),v=p-i,m=Math.round((t-(p+h+o.getHeightPortion()*g))/2);o.el().style("max-height",Math.round(g*o.getHeightPortion())+"px").style("margin-top",Math.round(i?v:v+m)+"px").style("margin-left",Math.round((e-g*o.getWidthPortion())/2)+"px"),i&&s.style("margin-top",m+"px"),o.outerRadius(g).redraw(),n===!0&&r(!1)}function r(e){return"boolean"!=typeof e&&arguments.length&&d.apply(this,arguments),u[2]=e,n.apply(this,u)}var a="half"===e.mode,i="sleek"===e.mode;e=extendObjects({pinradius:i?0:a?.1:.2,ringwidth:i?.4:a?.5:.2,borderwidth:i?.02:a?.01:.07,arrowlength:i?.8:a?.7:.65,counterposition:i?"top":a?"bottom":"inside",displaytip:!i,displayticks:!i,ticks:i?0:4,captionstyle:(null==e.displayticks?i:!e.displayticks)&&"padding-bottom: 10px; ",palette:i?[]:["forestgreen","yellowgreen","orange","orangered","brown"]},e);var o=Donut(t(e)).arrowLengthPortion(e.arrowlength).pinRadiusPortion(e.pinradius).ringWidthPortion(e.ringwidth).borderWidthPortion(e.borderwidth).displayTip(e.displaytip).counterPosition(e.counterposition).formatAxis(e.formataxis).formatTip(e.formattip).formatCounter(e.formatcounter);o.axis.displayTicks(e.displayticks).majorTicks(e.ticks).minorTicks(e.minorticks);var l=0,s=null;e.caption&&(s=d3.select(e.renderTo).append("p").classed("axi-donut-caption",!0).attr("style",e.captionstyle||null).text(e.caption),l=getNodeRect(s.node()).height);var u=[],c=["top","bottom"].indexOf(e.counterposition);o.resize=n,initWidgetSeries(e.series,o,e),o.calcSeries(),renderWidget(o,e,"div",100);var d=o.resize;return o.resize=r,o.loader.on("dataupdate",function(){o.loader.un("dataupdate",arguments.callee),o.resize(!0)}),o.series.some(function(e){return e.params.display})&&o.el().select("svg").style("cursor","pointer").on("click",function(){o.fire("itemclick",{})}),o},e.getHistogramConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["displayvalues"],_int:["barcount","rotateticks"],_float:["minrange","maxrange","minrangeforce","maxrangeforce","rangeoffset"],_string:["bottomaxis","topaxis","leftaxis","rightaxis","timezone","path","urlparameters","url","legendposition"],_array:[]},!0)},e.defaultHistogramConfig={dialogmaximize:!0,path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,updateinterval:6e4,timespan:"1 hour",legendposition:"top",script:[],buttons:[],bottomaxis:"values",leftaxis:"frequency",horizontalgrid:"frequency"},e.defaultDialogHistogram={script:[],buttons:["close"]},e.initHistogramWidget=function(e){var r=e.percentiles&&e.percentiles.split(/\s*,\s*/).map(parseFloat);"percentiles"===e.topaxis&&null==e.verticalgrid&&(e.verticalgrid="percentiles");var a=HistogramWidget(t(e)).barCount(e.barcount).onSeriesClick(onSeriesClick).topAxis(e.topaxis,e.verticalgrid===e.topaxis).bottomAxis(e.bottomaxis,e.verticalgrid===e.bottomaxis).rightAxis(e.rightaxis,e.horizontalgrid===e.rightaxis).leftAxis(e.leftaxis,e.horizontalgrid===e.leftaxis).mode(e.mode).range(e.minrange,e.maxrange).rangeForce(e.minrangeforce,e.maxrangeforce).percentiles(r).displayValues(e.displayvalues).bottomTicksRotation(e.rotateticks).rangeOffset(e.rangeoffset);return(e.rangeselectstart||e.rangeselectend)&&a.addRangeSelector().on("rangeselectstart",n(e.rangeselectstart)).on("rangeselectend",n(e.rangeselectend)),initWidgetSeries(e.series,a,e),a.calcSeries(),renderWidget(a,e)},e.getGraphConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["linkdata","nodedata","autopadding","disconnectednodedisplay","linklabels","nodelabels","arcs","batchupdate","dialogmaximize","data","bundle","effects","nodecollapse","arrows","nodeconnect","linkanimate","linearzoom"],_int:["batchsize","depth","duration","noderadius"],_float:["minringwidth","maxringwidth","tension","linklabelzoomthreshold","nodelabelzoomthreshold"],_string:["padding","linkwidthorder","timezone","path","urlparameters","url"],_array:["linkthresholds","nodethresholds"]},!0)},e.defaultGraphConfig={dialogmaximize:!0,path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,updateinterval:6e4,timespan:"1 hour",script:[],buttons:[]},e.defaultDialogGraph={script:[],buttons:["close"]},e.initGraphWidget=function(e){var t=GraphWidget(e);return initWidgetSeries(e.series,t,e),t.calcSeries(),renderWidget(t,e,"div")},e.getPieConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize","collapsible","displayother","legendlastvalue"],_int:["batchsize","ringwidth","mincaptionsize","maxfontsize"],_alertStyle:["iconalertstyle"],_string:["timezone","path","legendposition","urlparameters","url","mode"],_display:["displaypanels"]},!0)},e.defaultPieConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,displaypanels:"hover",collapsible:!0,dialogwidget:"Pie",dialogmaximize:!0,updateinterval:6e4,legendposition:"top",timespan:"1 hour",script:[],buttons:[],mode:"pie",legendlastvalue:!0},e.defaultDialogPie={collapsible:!1,script:[],buttons:["close"]},e.initPieWidget=function(e){var n=PieChart(t(e)).collapsible(e.collapsible).ring("ring"==e.mode.toLowerCase()).ringWidth(e.ringwidth).selectorMode(e.selectormode);return n.initOtherSeries(e),e.isDialog||n.displayPanels(1==e.displaypanels).displayPanelsIfHover("hover"==e.displaypanels),n.legend&&n.legend.showLastValue(e.legendlastvalue),initWidgetSeries(e.series,n,e),n.calcSeries(),n.tseries.onRenderSeries(function(t){var r=onSeriesClick(t.series,n,t.el,null,!0),a=e.onseriesdoubleclick instanceof Function?onSeriesClick(t.series,n,t.el,null,!0,!0):function(){n.selectSlice(t)};onMouseClick(t.el,function(e){1==e&&r?r():2==e&&a&&a()})}),n.resize=extendFunction(n.resize,function(e,t){n.rendered()&&n.svgEl().attr("width",e).attr("height",t)},!0),renderWidget(n,e,"div")},e.getTextConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["circle","batchupdate","dialogmaximize"],_int:["batchsize","minfontsize","maxfontsize"],_string:["timezone","path","urlparameters","url"]},!0)},e.defaultTextConfig={circle:!1,path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,dialogmaximize:!0,updateinterval:6e4,timespan:"1 hour",minfontsize:12,maxfontsize:100,script:[],buttons:[]},e.defaultDialogText={script:[],buttons:["close"]},e.initTextWidget=function(e){"circle"===e.mode&&(e.circle=!0);var t=TextWidget().circles(e.circle).iconSize(e.iconsize);t.fontSize.min=e.minfontsize,t.fontSize.max=e.maxfontsize;var n=t.redraw;return t.redraw=function(){var e=t.el().select("div").style("margin-top",0);n.apply(this,arguments),e.style("margin-top",Math.max(0,(getNodeRect(t.el().node()).height-getNodeRect(e.node()).height)/2)+"px")},initWidgetSeries(e.series,t,e),t.calcSeries(),t.on("itemsenter",function(e){e.each(function(e){onSeriesClick(e,t,d3.select(this))})}),renderWidget(t,e,"div")},e.getTreemapConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["legendticks","rotatelegendticks","batchupdate","dialogmaximize","displaylabels","displaytotal"],_int:["fontsize","batchsize"],_float:["minrange","maxrange","threshold","value","defaultsize"],_string:["timezone","path","sizename","defaultcolor","legendposition","url","urlparameters"]},!0)},e.defaultTreemapConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,rotatelegendticks:!1,dialogmaximize:!0,displaytotal:!0,displaylabels:!0,legendposition:"topright",timespan:"1 hour",updateinterval:6e4,defaultsize:1,defaultcolor:null,script:[],buttons:[]},e.defaultDialogTreemap={script:[],buttons:["close"]},e.initTreemapWidget=function(e){var n=Treemap(t(e)).displayTotal(e.displaytotal).formatSize(e.formatsize).sizeName(e.sizename).totalSize(e.totalsize).fontSize(e.fontsize);return n.paletteLegend&&n.paletteLegend.displayTicks(e.legendticks).rotateTicks(e.rotatelegendticks),n.tseries.displayText(e.displaylabels).defaultSize(e.defaultsize).defaultColor(e.defaultcolor),initWidgetSeries(e.series,n,e),n.calcSeries(),renderWidget(n,e)},e.getCalendarConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["legendticks","centralizeticks","rotatelegendticks","batchupdate","dialogmaximize"],_int:["batchsize","tickstime"],_rotate:["rotateticks"],_float:["minrange","maxrange","threshold"],_string:["timezone","path","defaultcolor","legendposition","summarizeperiod","url","urlparameters"],_escaped:["dayformat","hourformat"]},!0)},e.defaultCalendarConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,dialogmaximize:!0,rotatelegendticks:!1,legendposition:"topright",timespan:"1 hour",updateinterval:6e4,summarizeperiod:"5=minute",defaultcolor:null,rotateticks:0,tickstime:10,centralizeticks:!1,script:[],buttons:[]},e.defaultDialogCalendar={script:[],buttons:["close"]},e.initCalendarWidget=function(e){var n=CalendarChart(t(e));return n.grid[0].ticks(e.tickstime),n.axis[0].ticks(e.tickstime).centralizeTicks(e.centralizeticks).rotate(e.rotateticks),n.paletteLegend&&n.paletteLegend.displayTicks(e.legendticks).rotateTicks(e.rotatelegendticks),n.tseries.defaultColor(e.defaultcolor),setCfgTimeSpan(e,"summarizeperiod"),e.summarizeperiod&&n.tseries.summarizeInterval(e.summarizeperiod),initWidgetSeries(e.series,n,e),n.calcSeries(),renderWidget(n,e),n.redraw()},e.getBoxConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize"],_int:["batchsize"],_rotate:["rotateticks"],_float:["maxrange","minrange","maxrangeright","minrangeright","maxrangeforce","minrangeforce","maxrangeforceright","minrangeforceright"],_string:["timezone","path","url","urlparameters"]},!0)},e.defaultBoxConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,dialogmaximize:!0,timespan:"1 hour",updateinterval:6e4,rotateticks:0,script:[],buttons:[]},e.defaultDialogBox={script:[],buttons:["close"]},e.initBoxWidget=function(e){var n=BoxChart(t(e));return n.axis[0].rotate(e.rotateticks),n.yScale[0].extension([e.minrange,e.maxrange]).limit([e.minrangeforce,e.maxrangeforce]),n.yScale[1].extension([e.minrangeright,e.maxrangeright]).limit([e.minrangeforceright,e.maxrangeforceright]),initWidgetSeries(e.series,n,e),n.calcSeries(),n.initialize(),renderWidget(n,e)},e.getBarConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["horizontal","batchupdate","dialogmaximize","displayvalues","stack","legendlastvalue","hideemptycolumns"],_int:["batchsize"],_rotate:["rotateticks"],_float:["maxrange","minrange","maxrangeforce","minrangeforce"],_string:["group","timezone","path","legendposition","urlparameters","url"],_sort:["sort"],_display:["displaypanels"]},!0)},e.defaultBarConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,dialogmaximize:!0,legendlastvalue:!0,stack:!0,legendposition:"top",displaypanels:"hover",displayvalues:!0,updateinterval:6e4,timespan:"1 hour",group:"metric",rotateticks:0,barColumns:[],script:[],buttons:[],sort:null},e.defaultDialogBar={displaypanels:!0,script:[],buttons:["close"]},e.initBarWidget=function(e){var n=BarChart(t(e)).displayValues(e.displayvalues).stack(e.stack).columnSort(e.sort).columns(e.barColumns).groupBy(e.group).hideEmptyColumns(e.hideemptycolumns);return n.axis[0].rotate(e.rotateticks),e.isDialog||n.displayPanels(1==e.displaypanels).displayPanelsIfHover("hover"==e.displaypanels),(n.vertical()?n.yScale[0]:n.xScale[0]).extension([e.minrange,e.maxrange]).limit([e.minrangeforce,e.maxrangeforce]),n.legend.showLastValue(e.legendlastvalue),initWidgetSeries(e.series,n,e),n.calcSeries(),n.initialize(),renderWidget(n,e)},e.copyConfigFromBar=function(e){return{stack:e.stack()}},e.getPageConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize","zoomsvg","fitsvg","svg","disablealert"],_int:["batchsize"],_string:["timezone","url"]},!0)},e.defaultPageConfig={disablealert:!1,dialogmaximize:!0,svg:!1,updateinterval:0,url:"about:blank",script:[],buttons:[]},e.defaultDialogPage={script:[],buttons:["close"]},e.initPageWidget=function(e){var t=PageWidget().url(e.url).fitSvg(null==e.fitsvg?e.svg:e.fitsvg).zoomSvg(e.zoomsvg).unscale(e.unscale).disableAlert(e.disablealert);return renderWidget(t,e,"div",250),t.reload(0).realtime(e.updateinterval),t},e.copyConfigFromPage=function(e){return{placeholders:e.phMap()}},e.getTableConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize","expandtags","responsive","hideemptyseries","replaceunderscore","capitalize","showtagnames","transpose"],_int:["batchsize"],_string:["timezone","path","urlparameters","url"],_array:["displaytags"],_sort:["sort"],_merge:["mergecolumns"]},!0)},e.defaultTableConfig={path:axibase.defaultSeriesPath,contextpath:axibase.defaultContextPath,dialogmaximize:!0,responsive:!1,hideemptyseries:!1,timespan:"1 hour",showtagnames:!0,replaceunderscore:!1,capitalize:!1,updateinterval:6e4,displaytags:[],transpose:!1,sort:[],script:[],expandtags:!1,buttons:["transpose","reset","update"]},e.defaultDialogTable={script:[],buttons:["close"]},e.initTableWidget=function(e){function t(){var e=arguments[2],t=arguments[3],r=e&&null!=e.entity?e.entity:null,a=null!=t.key?t.key:null;if(null!=a){var i=n(arguments[11]),o={metric:a,tags:e.key};null!=r&&(o.entity=r);var l=extendObject(o,i);if(!i.hasOwnProperty("tags")){var s=i&&i.case&&"to"+toCapitalCase(i.case+"")+"Case",u=!s||["toLowerCase","toUpperCase"].indexOf(s)<0?null:function(e){return"string"==typeof e&&e?e[s]():e},c=e.tags;if(c||u){var d=l.tags,f=l.tags={};for(var p in d)d.hasOwnProperty(p)&&(f[p]=c&&c.hasOwnProperty(p)?c[p]:u?[].concat(d[p]).map(u):d[p])}}return l}return!1}function n(e){if(e&&e._Unified)return e;var t={_Unified:!0};for(var n in e)if(e.hasOwnProperty(n)){var r=(n+="").toLowerCase().replace(/[^\w]/g,"");t[r]=t.hasOwnProperty(r)?[].concat(t[r]).concat(e[n]):e[n]}return t}e.columns.some(function(e){return e&&("time"==e.key||"time"==e)&&"true"!=e.update})||e.columns.push("time"),e.columns.some(function(e){return e&&("value"==e.key||"value"==e)&&"true"!=e.update})||e.columns.push("value");var r=TableWidget().transpose(e.transpose).responsive(e.responsive).capitalize(e.capitalize).hideEmptySeries(e.hideemptyseries).replaceUnderscore(e.replaceunderscore).showTagNames(e.showtagnames).displayTags(e.displaytags).columns(e.columns).expandTags(e.expandtags).merge(e.mergecolumns).on("rendertbodyrow",function(e,t){onSeriesClick(e,r,t)}).on("clickseriescell",function(e){(onSeriesClick(e,r)||identity)()});return extendObject(r.defaultColumn,e.defaultColumn),r.availableMethods.push(function(){var e=n(arguments[11]),a=[].concat(e.series).filter(identity),i=a[0]||(a[0]=t.apply(this,(arguments[11]={case:e.case},arguments)));if(i){var o=inheritSeriesSettings.reduce(function(t,n){e.hasOwnProperty(n)&&(t[n]=e[n])},{});e.series=a.map(function(e){return getSeriesConfig(extendObject(lib.object.copy(o),e))}),e=extendObject({title:i.entity+": "+i.metric},e),r.fire("itemclick",e)}}),r.availableMethods.push(t),initWidgetSeries(e.series,r,e),r.calcSeries(),r.tbodyData([1]).sort(e.sort),renderWidget(r,e,"div"),r},e.getConsoleConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize","expandtags","responsive","showtagnames","capitalize","replaceunderscore","actionenable","transpose"],_int:["batchsize","limit"],_string:["timezone","minseverity","url","urlparameters","path","severitystyle","primarykey"],_array:["rule","metric","severity","displaytags"],_sort:["sort"],_list:["entities"]},!0)},e.defaultConsoleConfig={dialogmaximize:!0,actionenable:!1,responsive:!1,updateinterval:6e4,timespan:"1 hour",updatetimespan:"all",replaceunderscore:!1,capitalize:!1,sort:[],source:"alert",script:[],showtagnames:!0,displaytags:[],transpose:!1,expandtags:!1,path:null,contextpath:axibase.defaultContextPath,buttons:["acknowledge","deacknowledge","delete","transpose","reset","update"],primarykey:"id",limit:1e3},e.defaultDialogConsole={script:[],buttons:["close"]},e.initConsoleWidget=function(e){e.path||(e.path="message"===e.source?axibase.defaultMessagesPath:axibase.defaultAlertsPath);var t=AlertConsole().transpose(e.transpose).responsive(e.responsive).capitalize(e.capitalize).replaceUnderscore(e.replaceunderscore).showTagNames(e.showtagnames).displayTags(e.displaytags).primaryKey(e.primarykey).expandTags(e.expandtags).columns(e.columns).isUTC(e.isUTC).source(e.source);if(extendObject(t.defaultColumn,e.defaultColumn),"row"===e.severitystyle){var n=!1;t.columns().some(function(e){return"severity"===e.key&&(n=e.hidden,!0)}),t.columns({key:"severity",hidden:!1,script:function(e,t,r,a,i,o,l,s){n&&o.attr("style","display: none"),s&&l.classed("axi-console-severity-"+e,!0)},_update:"first"})}return e.actionenable?t.on("rendertbodyrow",function(e,t){MultiSelect(t)}):e.buttons=e.buttons.filter(function(e){return defaultConsoleConfig.buttons.indexOf(e)>defaultConsoleConfig.buttons.length-3||defaultDialogConsole.buttons.indexOf(e)>=0}),t.originalPost=t.post,t.post.queries.push(i(e)),renderWidget(t,e,"div"),t.sort(e.sort),t},initConsoleWidget.action=function(e){var t=this.json;if(t&&e.loader.processURLs()){var n=[],r=e.primaryKey();e.table.tbody.tr.filter(".axi-multiselect").each(function(e){e&&e.hasOwnProperty(r)&&n.push(e[r])}),n.length&&(t=[lib.object.copy(t)],t[0].alerts=n.map(function(e){return{id:e}}),switchRealtimeUpdate(!1,[e]),loadJson(e.loader.defaultURL().href,function(t){e.loader.fire("reqhold",this,t||!0),t&&t.error||e.reload(),switchRealtimeUpdate(!0,[e])},t,null,"PATCH"))}},e.getPropertyConfig=function(e,t){return e=getWidgetConfig(e,t,{_boolean:["batchupdate","dialogmaximize","expandtags","showtagnames","responsive","capitalize","replaceunderscore","transpose","formatheaders","formatnumbers"],_int:["batchsize"],_string:["timezone","path","url","urlparameters"],_array:["displaytags"],_sort:["sort"],_list:["entities"]},!0)},e.defaultPropertyConfig={dialogmaximize:!0,join:!1,path:axibase.defaultPropertiesPath,contextpath:axibase.defaultContextPath,responsive:!1,updateinterval:6e4,timespan:"1 hour",updatetimespan:"all",properties:[],replaceunderscore:!1,capitalize:!1,formatnumbers:!1,transpose:!1,showtagnames:!0,expandtags:!1,displaytags:[],sort:[],script:[],buttons:["transpose","reset","update"]},e.defaultDialogProperty={script:[],buttons:["close"]},e.initPropertyWidget=function(e){function t(){var e=arguments[2],t=arguments[3],r=e&&null!=e.entity?e.entity:null,a=null!=t.key?t.key:null;if(null!=r&&null!=a){var i=n(arguments[11]),o=extendObject({entity:r,metric:a,tags:e.key},i);if(!i.hasOwnProperty("tags")){var l=i&&i.case&&"to"+toCapitalCase(i.case+"")+"Case",s=!l||["toLowerCase","toUpperCase"].indexOf(l)<0?null:function(e){return"string"==typeof e&&e?e[l]():e},u=e.tags;if(u||s){var c=o.tags,d=o.tags={};for(var f in c)c.hasOwnProperty(f)&&(d[f]=u&&u.hasOwnProperty(f)?u[f]:s?[].concat(c[f]).map(s):c[f])}}return o}return!1}function n(e){if(e&&e._Unified)return e;var t={_Unified:!0};for(var n in e)if(e.hasOwnProperty(n)){var r=(n+="").toLowerCase().replace(/[^\w]/g,"");t[r]=t.hasOwnProperty(r)?[].concat(t[r]).concat(e[n]):e[n]}return t}var a=PropertyTable().transpose(e.transpose).joinRows(e.join).responsive(e.responsive).capitalize(e.capitalize).replaceUnderscore(e.replaceunderscore).columns(e.columns).showTagNames(e.showtagnames).expandTags(e.expandtags).displayTags(e.displaytags).isNumbersFormatted(e.formatnumbers).isUTC(e.isUTC).isTitlesFormatted(e.formatheaders),i=e.properties.map(function(e){return new r.PropertyQuery(e)});return a.properties(i),extendObject(a.defaultColumn,e.defaultColumn),a.availableMethods.push(function(){var e=n(arguments[11]),r=[].concat(e.series).filter(identity),i=r[0]||(r[0]=t.apply(this,(arguments[11]={case:e.case},arguments)));if(i){var o=inheritSeriesSettings.reduce(function(t,n){e.hasOwnProperty(n)&&(t[n]=e[n])},{});e.series=r.map(function(e){return getSeriesConfig(extendObject(lib.object.copy(o),e))}),e=extendObject({title:i.entity+": "+i.metric},e),a.fire("itemclick",e)}}),a.availableMethods.push(t),renderWidget(a,e,"div"),a.sort(e.sort),a},e.execWidgetScript=function(e,t){var n=[],r=[];for(var a in t)if(a.match(/^script[0-9]*$/)){var i=r.indexOf(a);n[i<0?r.push(a)-1:i]=(n[i]||[]).concat(t[a])}var o=arguments;n.forEach(function(e){if(e=e.join("\n"))try{Function("widget,config,dialog",e).apply(this,o)}catch(n){log("Failed execution "+t.type+" initial expressions",e,n.stack)}})},e.renderWidget=function(e,t,n,r){var i=t.type;null==n&&(n="svg");var o="div"===n;null==r&&(r=o?0:250);var l=t.portalWidgetEl&&t.portalWidgetEl.get(0)||null,s=l&&$(l),u=t.isDialog,c=t.renderTo&&d3.select(t.renderTo)||null,d=c&&c.classed("widgetContent"),f=c&&c.append(n),p=null,h=l&&d3.select(u?l.parentNode:l).select(u?".ui-widget-header":".widgetHeader");c&&(c.classed("axi-widgets",!0),navigator.isIE&&c.classed("axi-widgets-IE",!0),navigator.isIE9&&(c.classed("axi-widgets-IE9",!0),h&&h.classed("widgetHeader-IE9",!0))),h&&t.headerStyle&&h.attr("style",t.headerStyle),e.config=t,e.onUpdateChange=[],e.phMap&&e.phMap(t.placeholders),t.isUTC&&[].concat(e.columns&&e.columns()).concat(e.series).forEach(function(e){var t=e&&(e.params||e);t&&t.format&&t.format.utc&&(t.format=t.format.utc)});var g=[].concat(t.style).filter(function(e){return e}).join("; "),v=u&&t.dialogmaximize&&"Chart"===i&&["auto","left","right","true"].indexOf(t.lastvaluelabel)>=0?"padding-right: 35px; ":"",m="Page"===i,y=!m;if(c&&c.attr("style",joinStyles([getNodeInitStyles(c.node()),v,g])),s&&"Text"===i&&!u&&s.css("background","none"),f){var x=t.class;x&&d3.select(u?l.parentNode:l).classed(Array.isArray(x)?x.join(" "):x,!0)}if(execWidgetScript(e,t,u),a.addDropdowns(e,t,h),f){var b=[parseCfgValue(t.scalex,"float")||parseCfgValue(t.scale,"float")||1,parseCfgValue(t.scaley,"float")||parseCfgValue(t.scale,"float")||1];b&&1==b[0]&&1==b[1]&&(b=null);var _=Delayed(e.resize,m&&(e.phMap.exp().width||e.phMap.exp().height)),w=!0;if(e.resize=function(t){var n=Math.floor(Math.max(0,t.width)),a=Math.floor(Math.max(0,t.height));o?e.table||f.style("width",n+"px").style("height",a+"px"):f.attr("width",n+"").attr("height",a+""),w&&e.legend&&e.legend.resize(),_(w?0:r,n,a,w,t.scale),w=!1},(e.renderNode=f.node()).__widget__=e,e(f),p=f.select(".axi-chart-background").node(),e.destroy=extendFunction(e.destroy,function(){f&&(f.remove(),s&&s.unbind("_destroy").unbind("_resize"),f=null)}),b){var k="scale("+b+")";f.style({"-moz-transform":k,"-webkit-transform":k,"-ms-transform":k,transform:k,"-moz-transform-origin":"top left","-webkit-transform-origin":"top left","-ms-transform-origin":"top left","transform-origin":"top left"}),c.style("overflow","hidden"),e.resize=extendFunction(e.resize,function(e){d&&c.style({width:e.width+"px",height:e.height+"px"}),e.width/=b[0],e.height/=b[1],e.scale=b},!0)}}if(y){var T=e.progress=Progress()();(e.loader||e).on({reqhold:T.redraw,reqsend:T.redraw,reqload:T.redraw,reqerror:T.redraw,reqabort:T.redraw}),T.alignNode(p||l||f&&f.node()).renderTo(renderWidget.getTooltipContFn(t)()).el().style("z-index",getZIndex(T.alignNode())+25);var S=p?e.draw?"draw":"redraw":"resize";e[S]=extendFunction(e[S],function(){T.displayed()&&T.showAt()}),e.destroy=extendFunction(e.destroy,T.destroy)}if(s&&(s.bind("_resize",function(t,n){e.resize(n)}).bind("_destroy",function(t){e.destroy()}),addWidgetButtons(e,h)),!m&&(e.series?e.series.length:e.post)){var E="string"==typeof t.url&&{full:lib.composeURL(t.url,t.contextpath,t.path,t.urlparameters)};e.loader.defaultURL(E).isUTC(t.isUTC).endTime(t.endTime).startTime(t.startTime).timeSpan(t.timespan).updateTimeSpan(t.updatetimespan||t.timespan||0).expireTimeSpan(t.expiretimespan||t.updatetimespan||t.timespan||0),null!=t.batchupdate&&e.loader.batchUpdate(t.batchupdate),null!=t.batchsize&&e.loader.batchSize(t.batchsize),e.realtime(t.updateinterval),e.reset()}return t.initSize&&e.resize(t.initSize),renderWidget.onSeriesUpdate(e,function(e){e.forEach(audioAlert)}),e},e.renderWidget.onSeriesUpdate=function(e,t,n){e.series&&("Chart"===e.config.type?e.loader.on("dataupdate",function(){t(e.series)},n):e.on("seriesupdate",function(e,n){e&&t(n)},n))},e.renderWidget.getTooltipContFn=function(e){return function(){return e.fastenTooltips&&e.renderTo&&d3.select(e.renderTo)}},function(e,t){function n(e,t){function n(e){return[].concat(e).reduce(function(e,t){t&&"object"!=typeof t&&(t="menu"!==t&&l.hasOwnProperty(t)&&l[t]),t&&e.indexOf(t)<0&&e.push(t)},[]).map(function(e){return extendObject({},e)})}var a=t.select(".widgetControls"),i=n(e.config.buttons),s=n(e.config.menu);s.length&&(e.config.menu=s,i.unshift(l.menu)),a.empty()?a=t.append("div").classed("widgetControls",!0):a.children(".widgetControl").remove(),a.children(".widgetControl").data(i).enter().append("div").each(function(t){r(t,[e,d3.select(this).classed("widgetControl",!0),!1,!0])}),o({items:i},function(n,r){if((n.el||t).classed("widgetControlHover",r),!r){var a=e.menu;a&&a.button.isUsed()&&(a.button.isUsed(!1),a.el().style("display","none"),a.visible(!1))}})}function r(e,t){function n(){return(e.render||a).apply(e,t)}function r(){return(s?l.append("td"):l).append("span")}var i=t[3];if(i){var o=t[0],l=e.el=t[1],s=t[2];e.iconEl=e.icon&&r(),e.titleEl=e.title&&s&&r(),e.isSlider&&(e.minEl=s&&r(),e.sliderEl=r(),e.maxEl=s&&r()),l.on("click",function(){d3.event.cancelBubble=!0,e.items||e.isUsed(!0),e.click&&e.click.apply(e,t),e.isUsed(!!e.items&&!e.isUsed())}),e.isUpdate&&o.onUpdateChange.push(n)}var u=n();return i&&(t[3]=!1),u}function a(e,t,n){var r=this,a=r.set&&r.set.apply(r,arguments);return r.iconEl&&r.iconEl.attr("class","axi-icon-"+r.icon),r.titleEl?r.titleEl.html(r.title):t.attr("title",r.title),t.classed(r.isSlider?"widgetSlider":"widgetButton",!0),r.renderContent&&r.renderContent.apply(r,arguments),a}function i(e){function t(e){return e<i?i:e>o?o:e}var n=this,r=n.name,a=e.getSliderRange(r),i=a[0],o=a[1],l=t(e.sliderValue(r)),s=75,u=75;n.minEl&&n.minEl.text(i),n.maxEl&&n.maxEl.text(o);Scroller(n.sliderEl,u,s)(Math.round(u*(l-i)/(o-i))).on("move",function(n){l=t(n/u*(o-i)+i),e.sliderValue(r,l),e.redraw()}).on("start",function(){n.isUsed(!0)}).on("end",function(){n.isUsed(!1)})}function o(e,t){function n(){a!=(a=r||!(!e.items||!e.items.some(function(e){return e.isSomeUsed&&e.isSomeUsed()})))&&t(e,a)}var r=!1,a=!1;e.isSomeUsed=function(){return a},e.isUsed=function(t){return arguments.length?(r=t,n(),e):r},e.items&&e.items.forEach(function(e){o(e,function(){t.apply(this,arguments),n()})})}var l={tension:{icon:"signal",name:"tension",title:"Tension",renderContent:i,isSlider:!0},minwidth:{icon:"signal",name:"minWidth",title:"Min Width",renderContent:i,isSlider:!0},maxwidth:{icon:"signal",name:"maxWidth",title:"Max Width",renderContent:i,isSlider:!0},acknowledge:{json:{action:"update",fields:{acknowledge:!0}},icon:"ok-circle",title:"Acknowledge",click:initConsoleWidget.action},deacknowledge:{json:{action:"update",fields:{acknowledge:!1}},icon:"remove-circle",title:"De-acknowledge",click:initConsoleWidget.action},delete:{json:{action:"delete"},icon:"ban-circle",title:"Delete",click:initConsoleWidget.action},update:{icon:!0,title:!0,set:function(e){var t=this.started=arguments[3]?e.config.updateinterval>0:!this.started;return this.title=t?"Stop Update":"Start Update",this.icon=t?"stop":"play",t},click:function(e){var t=r(this,arguments);realtimeUpdate(e,t?e.config.updateDelay:0,!0)},isUpdate:!0},close:{icon:"remove",title:"Close",click:function(e){e.config.portalWidgetEl.dialog("close")}},reset:{icon:"refresh",title:"Reset Filters and Sorting",click:function(e){MultiSelect.resetInitialClasses(e.table.tbody.el.children(),!0),e.resetFilters().sort(e.config.sort).redraw(),e.originalPost&&e.post!=e.originalPost&&(e.post=e.originalPost,e.reload())}},transpose:{icon:"retweet",title:"Transpose Table",click:function(e){e.transpose(!e.transpose()).redraw()}},menu:{icon:"list",title:"Menu",render:function(e){a.apply(this,arguments);var t=e.menu=Tooltip().on("render",function(){var n=t.innerEl().style("padding","0 2px").append("table").classed("axi-menu",!0).append("tbody").selectAll("tr").data(t.button.items=e.config.menu).enter().append("tr").each(function(t){r(t,[e,d3.select(this),!0,!0])}).filter(".widgetButton").style("font-weight","bold");n.selectAll("td").style("min-width",function(){return getNodeRect(this).width+"px"}),n.style("font-weight",null),t.el().attr("title","")});t.button=this,t(this.el)},click:function(e){e.menu.visible()?e.menu.visible(!1):e.menu.showAt()}}};e.addWidgetButtons=n,e.defaultWidgetButtons=l}(e)}},{"./properties":18,"./settings_selector":20}],53:[function(e,t,n){t.exports=function(e,t){function n(e){function t(e){e=extendObject({},e),e.tseries=e.series.reduce(function(t,n){var r=c.some(function(e){return e.config==n});if(r&&r.tseries&&!r.params.isThreshold&&(t.push(r.tseries),!e.dummy)){if(!r.derived)return;r.derived.forEach(function(e){var n=e.tseries;t.indexOf(n)<0&&t.push(n)})}},[]),e.display=!e.tseries.every(function(e){var t=e.series;return!!(t.derived&&t.derived.length>0)||L&&!t.mainParams.isDisplayed()}),e.tseries.originOrder=e.tseries.slice(0);var t=e.tseries[0];if(t&&null==e.label)if(1!=e.tseries.length||t.isGroup){if(null!=f){var n=e.tseries.some(function(t){return null!=(e.label=t.params[f])});n||(e.label=t.series.keys.rec[x[1-y]])}}else e.label=t.params.axisLabel;e.tseries.length>0&&null!=e.columnlabelformat&&(e.label=lib.series.getLabel(e.tseries[0].series,e.columnlabelformat));var r=e.alertExp=s.addVariable(e.alertExp,e);if(r&&r.vars){var a=r.vars()[3];r.vars()[3]=lib.getEvalMethod(function(){return arguments.length?a.apply(this,arguments):e.sum})}return e.tseries.length>=2&&T.display(!0),e}function n(){return u.reduce(function(e,t){var n=t.series,r=n.params.isThreshold,a=!r&&(findProperty(n.keys.key.tags,m)||findProperty(n.keys.key,m)||findProperty(n.config,m));a=a?a[m]:null,t.groupId="string"==typeof a?a=a.toLowerCase():a;var i=t.isGroup=null!=a;if(t.displayInLegend()){var o=i&&e.some(function(e){return e.id==a});if(o)t.getColor=o.tseries[0].getColor;else{if(o=extendObject({id:a,isThreshold:r,tseries:[]},n.mainParams),i){var l=findProperty(n.config,m)||findProperty(n.keys.rec,m);l=l?l[m]:a,"tags"==m&&(l=lib.series.tagsToArray(l).join(",")||"none"),o.isGroup=i,o.groupValue=l,o.getTitle=d3.functor(l),o.getTooltip=d3.functor(null),o.getLastValue=!1}e.push(o)}o.tseries.push(t)}},[]).forEach(function(e){e.isGroup&&e.tseries.some(function(t){var n=t.params.groupLabel;if(null!=n||null!=b&&null!=(n=t.params[b]))return e.getTitle=d3.functor(n),e.getTooltip=d3.functor(e.groupValue),!0})})}function a(e){var t=D(1),n=Math.floor(O(0)),r=Math.min(20,Math.max(10,Math.round(t/3)))+"",a=s.axis[1].el().select("g").selectAll("g").data().map(O),o=I.selectAll("line").data(M);o.enter().append("line").attr("stroke",function(e){return e.params.color}).attr("style",function(e){return e.params.style}),o.exit().remove(),o.each(function(t){var n=d3.select(this),r=t.isVisible()&&t.getLast();if(n.attr("display",r?null:"none"),r){var a=Math.round(O(r.v));n.crisp().getTransition(e).attr(A?"x2":"y2",A?s.innerWidth():s.innerHeight()).attr(A?"y1":"x1",a).attr(A?"y2":"x2",a)}}),l.forEach(function(o){var l=0,u=n,c=t*o.n,d=o.alertExp&&k&&null!=o.sum&&o.alertExp.call(o,s.updateTime,0),f=d&&d3.functor(o.alertStyle)(d);o.tseries.forEach(function(n){var p=n.isVisible()&&n.getLast(),h=n.el.attr("display",p?null:"none");if(p){var g=v&&(!k||(o.k?n.k==o.k:n.m==o.m)),m=l+p.v,y=Math.round(O(m)),x=h.select("path"),b=n.series.vars.values.alertExp;h.classed("axi-barchart-series-alert",b).classed("axi-barchart-column-alert",d).getTransition(e).attr("transform","translate("+(A?"":"0,")+(c+(k?0:t*n.dn))+")"),getColorStyle(x,joinStyles([n.params.style,f,b&&d3.functor(n.params.alertStyle)(b)])),x.crisp().attr("fill",n.getColor()).attr("stroke",n.getColor()).getTransition(e).attr("d",(A?"M0,":"M")+u+(A?"V":",0H")+y+(A?"H":"V")+(t-(k?0:2))+(A?"V":"H")+u+"Z");var _=h.select("text").attr("display",g?null:"none");g&&i(_,n.getFormat()(k?m:p.v),r,t/2,y,e);var w=Math.max(u,y)-3,T=Math.min(u,y)+3,S=h.select("g"),E=S.selectAll("line").data(w>T?a.filter(function(e){return(e-T)*(w-e)>0}):[]);E.exit().remove(),E.enter().append("line"),E.crisp(S),E.getTransition(e).attr(A?"y1":"x1",function(e){return e}).attr(A?"y2":"x2",function(e){return e}).attr(A?"x2":"y2",t+""),k&&(l=m,u=y),onSeriesClick(n.series,s,n.el)}})})}function i(e,t,n,r,a,i){e.text(t).attr("font-size",n);var o=getNodeRect(e.node()),l=A?o.height:o.width,u=A?a-l<0:a+l>s.innerWidth(),c=e.getTransition(i).attr(A?"x":"y",r+"").attr(A?"y":"x",a+(u?A?l:-l:0)+"").attr(A?"dy":"dx",A?u?".1em":"-.4em":u?"-.2em":".4em");A||c.attr("dy",Math.round(.3*o.height))}function o(){var e=new Array(l.length),t=0,n=l.reduce(function(n,r){return e[t++]=(r.n=n)+(r.dn=k?1:r.tseries.reduce(function(e,t){return t.isVisible()?(t.dn=e)+1:e},0))/2,r.n+r.dn+1},1);D.domain([0,n]),s.axis[0].tickValues(e)}e||(e={});var l,s=Chart(),u=s.tseries=s.series,c=lib.updater(s).series,d=500,f=null,p=null,h=s.columns=[],g=!1,v=!0,m="metric",y=1,x=["entity","metric"],b=null,_=s.legend=AddLegend(null,s,e.legendPosition,"top"),w=s.prev,k=!0,T=Panel(),S=getLegendControl(_,T),E=getDefaultTimeFormat(e),M=[],I=[],C=s.tooltip=Tooltip(),A=!e.horizontal,D=LinearScale(),O=LinearScale(),P=s.zoom=ChartZoom().chart(s),L=!1;if(s.on("render",function(t){s.el().classed("axi-barchart",!0).classed("axi-barchart-"+(A?"vertical":"horizontal"),!0),I=s.el().append("g").classed("axi-barchart-thresholds",!0),u.forEach(function(e){e.el&&e.el.on("mousemove",function(){C.record(e,e.getLast()).showAt()}).on("mouseleave",function(){C.visible(!1)})}),C.renderTo(e.getTooltipCont&&e.getTooltipCont()).el().style("z-index",getZIndex(s.el().node())+1),h.every(function(e){return e.tseries.length<2})&&T.display(!1),_.renderTo(t),P()}),s.vertical=function(){return A},!A){var N=D.range;D.range=function(e){return e&&e.reverse(),N.apply(this,arguments)},T.translate(function(e,t,n,r){e[0]+=r-t})}ValueScale(O,P),P.on("changed",function(){null==O.scope()&&O.setDomain(),s.draw()}),s.initialize=function(){function e(e){return e.every(function(e){return e.params.hidden})}(A?s.yScale:s.xScale).forEach(function(e,t){u.some(function(n){return n.params.axisIndex==t&&n.params.format&&(e.format(n.params.format),!0)})}),h=h.map(t),h.originOrder=h.slice(0),l=h.filter(function(e){return e.display}),s.axis[0].tickValues(new Array(l.length).map(function(e,t){return t})).scale().domain([0,l.length-1]);var r=n();_.onItemAdd(function(t){t.state(e(t.data.tseries)&&"hidden"),t.data.isThreshold&&(t.addButton=_.addRect)}).active(function(t,n,r,a){var i=t.data.tseries;if(arguments.length<2)return!e(i);var o=!n;if(t.state(o&&"hidden"),i.forEach(function(e){e.params.hidden=e.series.config.hidden=o}),(arguments.length<3&&(r=[])||a)&&(o?r.push(null):i.forEach(function(e){r.push(e.series)})),!a){var l=r.filter(identity);l.length&&s.calcSeries(!0,l).reload(),l.length<r.length&&s.redraw(d,!0)}}).on("itemrender",function(e){null==e.data.metricLabel&&e.labelEl.style("text-transform","capitalize")}).on("toggle",s.redraw).data(r)},u.redraw=u.destroy=d3.functor(null),c.onItemAdd(function(e){if(e.params.display){var t=extendObject(e.params.isThreshold?{}:r(),e.mainParams);if(e.params.isThreshold&&(M.push(t),t.renderTo=function(){}),e.tseries=t,u.add(t),e.derivedFrom){var n=s.columns(),a={},i=n.some(function(t){return t.series.some(function(t){return t==e.derivedFrom.config})});if(i&&i.dummy){for(var o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);a.series=[e.config],a.label=null,n.push(a)}}}}),s.varNames(["alertExp","displayExp","enabledExp"]),s.on("seriesupdate",function(e){g=!0,e&&s.redraw(d)}),s.padding()[1]=d3.functor(5),(A?s.xScale:s.yScale).add(D),(A?s.yScale:s.xScale).add(O),s.grid.add(Axis(A?3:0).scale(O).tickFormat(!1)),s.axis.add(Axis(A?2:3).scale(D).tickFormat(function(e){return(l[s.axis[0].tickValues().indexOf(e)]||{}).label})).add(Axis(A?3:0).scale(O).background(!0)),A||(s.grid[0].ticks(5),s.axis[1].ticks(5)),C.format(function(e,t){return[].concat(e.getTitle()).concat(t?[e.getFormat()(t.v),E(t.t)]:"N/A")}),T.data([{title:"Stack"}]).on("itemclick",function(e){s.stack(!e.state()).redraw(d)}),s.panels.add(T).add(S);var F=s.destroy;s.destroy=function(){return s.destroyUpdater(),C.destroy(),_.destroy(),F()};var V=s.redraw;return s.redraw=function(e,r){var a=w.stack!=k,i=a||r||g;return h=h.map(t),_.data(n()),l=h.filter(function(e){return e.display}),a&&(w.stack=k),O.setDomain(i)[1]||O.extendDomain()([]),p&&l.sort(p),i&&o(),_.update(),_.redraw(),s.draw(e),S.display(_.some(function(e){return e.display()})),g=!1,s},s.draw=function(e){return V(),a(e),s.clipPath()&&s.clipPathRect().attr("height",s.innerHeight()+1),s},O.extendDomain(function(e){return l.forEach(function(t){t.k=0,t.m=0,t.sum=null;var n=0,r=t.tseries.reduce(function(e,r){var a=r.isVisible()&&r.getLast(),i=r.value=a?a.v:null;return null!=i&&(t.sum+=i,n++,k&&(r.m=++t.m,i=t.sum,i?r.k=++t.k:r.k=0),extend(e,i)),e},[0,0]);t.avg=t.sum&&t.sum/n,extend(e,r)}),M.forEach(function(t){(t=t.isVisible()&&t.getLast())&&extend(e,t.v)}),!0}),s.stack=function(e){return arguments.length?(k=e,T[0]&&T[0].state(k&&"selected"),s):k},s.stack(k),s.displayValues=function(e){return arguments.length?(v=e,s):v},s.animationDuration=function(e){return arguments.length?(d=e,s):d},s.columns=function(e){return arguments.length?(h=e,s):h},s.thresholds=function(e){return arguments.length?(M=e,s):M},s.columnSort=function(e){if(!arguments.length)return p;if("function"==typeof e)p=e;else if(p=e&&e.length){var t=e.reduce(function(e,t){var n=t&&t.key;if("string"!=typeof n)return e;var r=n.toLowerCase(),a="name"===r&&function(e){return e.label}||"value"===r&&function(e){return k?e.sum:e.avg}||function(e){var t=e.tseries.some(function(e){return e.groupId==n}),r=t&&t.value;return null==r?-(1/0):r};a&&(a.key=n,a.order=(a.sign=t.sign)<0?lib.object.descending:lib.object.ascending,e.push(a))},[]);p=t.length&&function(e,n){var r=null;return t.some(function(t){return r=t.order(t(e),t(n))}),r}}return s},s.timeFormat=function(e){return arguments.length?(E=e,s):E},s.groupBy=function(e){return arguments.length?(m=e,y=x.indexOf(m),b=y<0?null:m+"Label",f=y<0?null:x[1-y]+"Label",s):m},s.hideEmptyColumns=function(e){return arguments.length?(null!=e&&(L=e),s):L},s}function r(){var e={};return e.renderTo=function(t){var n=e.el=t.append("g");n.append("path"),n.append("g"),n.append("text")},e}e.BarChart=n}},{}],54:[function(e,t,n){t.exports=function(e,t){function n(e){function t(e,t,r){var a=function(e,t,n){return{label:n.labels[t],value:n.values[t]}},i=t.map(a),o=r.map(a),l=i.concat(o);l=l.sort(function(e,t){return e.label===t.label?0:e.label>t.label?1:-1});var s=t.labels[3],u=t.labels[1],c=["Percentiles"];if(t){var d=n(l,e.getFormat(),s,u);d&&c.push(d)}return c.push("N: "+e.data().len),c}function n(e,t,n,r){var a=s(e),i=0,u=e.map(function(e){var s=e.label,u="",c=o(s,n,r);i!=c&&(u="padding-bottom: 0.7em;",i=c);var d=l(s,a),f=1e12,p=e.value*f;return p=Math.round(p),p/=f,t&&(p=t(p)),["<tr>",'<td style="',u,'">',d,"</td>",'<td style="',u,'">',p,"</td>","</tr>"].join("")}).reverse().join("");return['<table class="axi-tooltip-percentiles">',u,"</table>"].join("")}function o(e,t,n){return 0===e?0:e<n?1:e<=t?2:e<100?3:100===e?4:void 0}function l(e,t){switch(t=null!=t?t:2,e){case 100:return"max";case 0:return"min";default:return e.toFixed(t)}}function s(e){var t=1,n=0;return e.forEach(function(e){var r=e.label%1;if(0!==r)for(;r<t;)t/=10,n++}),n}var u,c=Chart(),d=c.tseries=c.series,f=lib.updater(c).series,p=500,h=!1,g=c.tooltip=Tooltip(),v=c.tooltipSeriesLabel=a(),m=LinearScale(),y=c.zoom=ChartZoom().chart(c);g.renderTo(e.getTooltipCont&&e.getTooltipCont()),g.format(t),c.loader.lastQuery(!1),c.on("render",function(){v(c.el().select(".axi-chart-grid")),c.el().classed("axi-boxchart",!0),d.forEach(function(e){e.el().attr("transform","translate(0)")}),y()}),y.on("changed",function(){c.redraw()}),c.initialize=function(){c.yScale.forEach(function(e,t){d.some(function(n){return n.params.axisIndex==t&&n.params.format&&(e.format(n.params.format),!0)})})},c.varNames(["alertExp","displayExp","enabledExp"]),c.on("seriesupdate",function(e){h=!0,e&&c.redraw(p)}),c.xScale.add(m),c.yScale.add(LinearScale()).add(LinearScale()).forEach(function(e){ValueScale(e,y),e.extendDomain(function(t){return d.reduce(function(n,r){return r.display()&&e==r.yScale()&&(extend(t,[r.quantiles().values[0],r.quantiles().values[4]]),n=!0),n},!1)})}),c.axis.add(Axis(2).scale(m).tickFormat(function(e){var t=u[c.axis[0].tickValues().indexOf(e)];return t.series&&t.series.params&&null!=t.series.params.labelFormat?lib.series.getLabel(t.series,t.series.params.labelFormat):(t||{}).params.axisLabel})).add(Axis(3).scale(c.yScale[0]).background(!0)).add(Axis(1).scale(c.yScale[1]).background(!0)),c.grid.add(Axis(3).scale(c.yScale[0]).tickFormat(!1)),d.addOption("width").addOption("duration").methods("recalc").options({xScale:m,quantiles:[0,.25,.5,.75,1]});f.onItemAdd(function(e){if(e.params.display&&!e.params.hidden){var t=extendObject(r(),e.mainParams);t.yScale(c.yScale[t.params.axisIndex]),t.data(e.data),e.tseries=t,d.add(t),t.axis=c.axis;var n=e.params.percentiles,a=n&&n[0],o=n&&n[1],l=t.quantiles();null!=a&&a>=0&&a<=.5&&(l[1]=a,l.labels[1]=t.getPercentile(a)),null!=o&&o>=.5&&o<=1&&(l[3]=o,l.labels[3]=t.getPercentile(o));for(var s=(e.params.percentilemarkers+"").toLowerCase(),u=l[1],f=l[3],p=0;i[p]<u;)p++;for(var h=p;i[h]<=f&&!(h>=i.length);)h++;var g;switch(s){case"all":g=i.slice(0,p).concat(i.slice(h));break;case"bottom":g=i.slice(0,p);break;case"top":g=i.slice(h)}g&&t.markers(g)}});var x=c.destroy;c.destroy=function(){return c.destroyUpdater(),x()},d.destroy=d3.functor(null);var b=c.redraw;return c.redraw=function(e){if(!c.rendered()||!c.display())return c;d.recalc(),u=d.filter(function(e){return e.series.mainParams.isVisible()?(e.el().style("display",null),!0):void e.el().style("display","none")}),g.el().select(".axi-tooltip-inner").classed("axi-tooltip-dark",!0).style("z-index",getZIndex(c.el().node())+1),u.forEach(function(e){e&&e.el().on("mousemove",function(){var t=e.getColor(),n=adjustTextColor(t,.5);g.el().select(".axi-tooltip-inner").style("background-color",t).style("color",n).style("border-color",n),g.record(e,e.quantiles(),e.markers()).showAt(),v.color(t).text(e.getTitle()).redraw().show()}).on("mouseover",function(){v.el().style("display",null)}).on("mouseleave",function(){g.visible(!1),v.hide()})});for(var t=[],n=u.length,r=0;r<n;r++)t[r]=2*r+1.5;m.domain([0,2*n+1]),c.axis[0].tickValues(t),c.yScale.forEach(function(e){e.setDomain(h)}),u.forEach(function(t){t.duration(e)}),b();var a=c.axis[0].el().select("g").selectAll("g").data().map(m).map(Math.floor);return u.forEach(function(e,t){var n=e.el();n.select("rect").crisp(n.attr("transform",null)),n.attr("transform",(n.attr("transform")||"")+"translate("+a[t]+")");var r=onSeriesClick(e.series,c,e.bindEl(),function(t){var n=e.markerIsTarget(),r=n?e.markers().labels[n.datum()]:null;return null==r?t:extendObject(i,{statistic:"percentile"+r})}),i=r&&lib.object.copy(r.seriesConfig)}),c.clipPath()&&c.clipPathRect().attr("height",c.innerHeight()+1).attr("x",-c.xy[0]).attr("width",c.outerWidth()()),h=!1,c},c.animationDuration=function(e){return arguments.length?(p=e,c):p},c}function r(){function e(e){o=e.append("g")}function t(e,t,n){function r(){var e=t.apply(this,arguments);if(e&&!e.empty()){var n="mouseover"==d3.event.type?"visible":"hidden";e.attr("visibility",function(){return this.getAttribute("visibility")?n:null})}}e.on("mouseover",r).on("mouseout",r)}function n(e,t){var n=e.reduce(function(t,n,r){(!r||n>e[r-1])&&t.push(r)},[]);return t&&(n[n.length-1]=e.length-1),n}function r(t,n,r){var a=e.getFormat()(n.values[t]);if(!r){for(var i=[],o=n.indices[n.indices.indexOf(t)+1]||n.labels.length;t<o;t++)i.push(n.labels[t]);a=" (p"+i.join("  p")+")"}return a}function a(e){return!(e%2)}var i=null,o=null,l=!1,s=!1,u=0,c=[1,.8,-.16,-.16,-.32],d=null,f=[],p=null,h=null,g=null,v=[],m=null,y=null,x=null,b=.5,_=!1;return e.markerIsTarget=function(){var e=d3.event.target.parentNode;return e.parentNode==h&&d3.select(e)},e.renderTo=e,e.el=function(){return o},e.bindEl=function(){return i},e.rendered=function(){return _},e.display=function(){return v.values&&v.values.length},e.recalc=function(){if(s){var t=l.len&&Array.prototype.slice.call(l.v,0).sort(lib.number.ascending);v.values=t?v.map(function(e){return t[Math.quantile(e,t.length)]}):[],v.indices=n(v.values,!0),f.values=t?f.map(function(e){return t[Math.quantile(e,t.length)]}):[],f.indices=n(f.values),f.opacity=t?f.values.map(function(e){var t=e>v.values[2]?(e-v.values[3])/(v.values[4]-v.values[3]):(v.values[1]-e)/(v.values[1]-v.values[0]);return.9-.5*t}):[],s=!1}return e},e.redraw=function(){function n(e,t){return e>S[0]+t||e<S[1]-t}_||(g=o.append("path").attr("stroke-dasharray","8,2").attr("stroke",e.getColor()),g.style("stroke-width","2px"),i=o.append("g"),m=i.selectAll("rect").data(new Array(2)).enter().append("rect").attr("stroke",e.getColor()).attr("fill",e.getColor()).attr("fill-opacity",function(e,t){return t?".4":".6"}),d=i.append("g"),p=i.append("g"),h=p.node(),t(i,function(){return(e.markerIsTarget()||d).selectAll("text")}),_=!0);var l=e.display();if(o.attr("display",l?null:"none"),!l)return e;var w=Math.ceil((y(b)-y(0))/2),k=Math.max(3,Math.min(7,w/3)),T=Math.min(20,Math.max(10,Math.round(w))).toString(),S=x.range(),E=v.values.map(function(e){return Math.round(x(e))}),M=d.selectAll("g").data(v.indices);M.exit().remove(),M.enter().append("g").each(function(){var t=d3.select(this);t.append("line").attr("stroke",e.getColor()),t.append("text")});var I,C=1;M.each(function(e){if(1!=e&&3!=e){var t=!n(E[e],0),i=d3.select(this).attr("display",t?null:"none");if(t){var o=i.select("text").attr("font-size",T),l=a(e),s=i.select("line").attr("display",l?null:"none"),u=getNodeSize(o.node(),"font-size"),d=c[e],f=(d*u+E[e],.5===v[e]?-1:0),p=!0,h=!0;if(h){var g,m;d>(g=(S[0]-E[e])/u)?(d=g,f||(p=!1)):d<(m=c[1]+(S[1]-E[e])/u)&&(d=m,f||(p=!1))}f=0,o.attr("visibility",1!=f&&p?null:"hidden"),l&&s.attr("x1",-w).attr("x2",w),o.attr("dy",d+"em").attr("text-anchor",f>0?"start":f<0?"end":"middle").attr("x",(w+u/2)*f).text(r(e,v,l)),2===e&&(I=o)}}});var A=f.values.map(function(e){return Math.round(x(e))}),D=p.selectAll("g").data(f.indices);D.exit().remove(),D.enter().append("g").each(function(){var t=d3.select(this);t.append("circle").attr("fill",e.getColor()).attr("stroke",e.getColor()),t.append("text").attr("dy",c[2]+"em").attr("visibility","hidden")}),D.each(function(e){var t=!n(A[e],k),a=d3.select(this).attr("display",t?null:"none");if(t){var i=a.select("text").attr("font-size",T),o=a.select("circle"),l=getNodeSize(i.node(),"font-size");o.attr("opacity",f.opacity[e]).attr("r",k),i.attr("x",-(k+l/2)).attr("text-anchor","end").text(r(e,f))}}),m.attr("width",2*w).attr("x",-w).data([[E[1],E[2]],[E[2],E[3]]]);var O=e.series,P=O.vars.values.alertExp,L=joinStyles([O.params.style,P&&d3.functor(O.params.alertStyle)(P)]),N=getColorStyle(m,L);g.attr("style",L&&L.concat("fill: none")),M.select("line").attr("style",L),D.select("circle").attr("style",joinStyles([null!=N&&"fill: "+N,L])),g.getTransition(u).attr("d","M0,"+E[0]+"V"+E[1]+"M0,"+E[3]+"V"+E[4]),m.getTransition(u).attr("y",function(e){return e[1]}).attr("height",function(e){return Math.max(e[0]-e[1],C)});var F=Math.max(E[1]-E[3],2*C);if(I){var V=I.node().getBBox().height;F<1.1*V?I.attr("visibility","hidden"):I.attr("visibility",null)}return M.getTransition(u).attr("transform",function(e){return"translate(0,"+E[e]+")"}),D.getTransition(u).attr("transform",function(e){return"translate(0,"+A[e]+")"}),s=!1,e},e.dataChange=function(){return s=!0,e},e.getPercentile=function(e){return Math.round(1e5*e)/1e3},e.data=function(t){return arguments.length?(l!=t&&(l&&l.un("change",e.dataChange),l=t,l&&l.on("change",e.dataChange),e.dataChange()),e):l},e.quantiles=function(t){return arguments.length?(v=t.slice(0),v.labels=v.map(e.getPercentile),e):v},e.markers=function(t){return arguments.length?(f=t,f.labels=f.map(e.getPercentile),e):f},e.yScale=function(t){return arguments.length?(x=t,e):x},e.xScale=function(t){return arguments.length?(y=t,e):y},e.width=function(t){return arguments.length?(b=t,e):b},e.duration=function(t){return arguments.length?(u=t,e):u},e}function a(){function e(e){n=e,r=e.append("g").style("display","none"),a=r.append("circle").attr("cx",u).attr("cy",u).attr("r",u).attr("fill",o);var t=2*u,c=u,d=t+s,f=c,p="central";i=r.append("text").attr("x",d).attr("y",f).attr("alignment-baseline",p).text(l)}function t(){var e=r.node().getBBox(),t=n.node().getBBox(),a=t.width-e.width,i=a/2,o="translate("+i+","+s+")";r.attr("transform",o)}var n,r,a,i,o=null,l="",s=8,u=6;return e.renderTo=e,e.el=function(){return r},e.hide=function(){return r.style("display","none"),e},e.show=function(){return r.style("display",null),t(),e},e.redraw=function(){return r?(a.attr("fill",o),i.text(l),e):e},e.color=function(t){return arguments.length?(o=t,e):o},e.text=function(t){return arguments.length?(l=t,e):l},e}var i=[.001,.005,.01,.05,.1,.25,.75,.9,.95,.99,.995,.999];e.BoxChart=n}},{}],55:[function(e,t,n){t.exports=function(e){function t(e){function t(e,t){var n,r=e.series.thresholds.root.groups;if(r&&r.length){for(var a=r.length-1;a>=0&&r[a].range&&(n=r[a].range,!(n[0]>t));--a);return n}}function a(e){if(e){g.domain([0,e]);for(var t=[],n=(e-l.length+1)/2,r=l.length-1;r>=0;--r)t.push(r+n);i.axis[1].tickValues(t).redraw()}}e||(e={});var i=Chart(),o=i.tseries=i.series,l=o,s=lib.updater(i).series,u=i.legend=AddLegend(null,i,e.legendPosition,Controls),c=i.paletteLegend=u&&r(u,i),d=i.loader.lastQuery(!1),f=getDefaultTimeFormat(e),p=i.tooltip=Tooltip(),h=LinearScale(),g=LinearScale(),v=i.zoom=ChartZoom().tooltips([p]).chart(i);i.on("render",function(t){c&&c.render(t),a(l.length),t.classed("axi-calendarchart",!0),p.renderTo(e.getTooltipCont&&e.getTooltipCont()).el().style("z-index",getZIndex(i.el().node())+30),v()},!0),lib.setThresholds(i).setDefaultThresholds(!0),i.varNames().push("alertExp"),i.varNames().push("displayExp"),i.varNames().push("enabledExp"),TimeScale(h,v,null,e.isUTC).extendDomain(function(e){var t=d.getInterval(2,i.updateTime);extend(e,t&&lib.data.roundInterval((t[1]++,t),o.summarizeInterval()))}).getNow=function(){var e=l.map(function(e){return e.series}),t=lib.series.getLast(e,function(e){return e.data.intervals.ready});return t&&t.data.last.t},v.on("scroll",function(e,t){var n=h.domain(),r=t[0]-t[1]+n[1]-n[0];t[0]=n[0]+r,t[1]=n[1]+r},!0).on("changed",function(){i.redraw()}).on("timerends",function(){i.reload(lib.RELOAD_MODE)}),d.reloadInterval(function(){return h.domain()}),i.on("seriesupdate",function(e){p.prev.record=null,e&&i.redraw()}),o.ownOptions({summarizeType:"avg"}).options({summarizeInterval:3e5,xScale:h,tooltip:p,defaultColor:null}),s.onItemAdd(function(e){if(!e.keys.key.multipleSeries&&e.mainParams.isVisible()){var t=e.data;if(t&&!t.rangeFn&&(t.rangeFn=RangeFn()),e.origin){var r=extendObject(n().data(e.data),e.mainParams);o.add(r)}else{e.mainParams.isVisible=lib.falseFunctor;var a=e.params.summarizeType||o.summarizeType();lib.series.addAggregate(e,a,o.summarizeInterval(),s)}}},!0),g.domain([0,0]),i.padding()[1]=d3.functor(5),p.format(function(e,n){var r,a=e.data(),i=a.v[n],o=e.getFormat();return[].concat(e.getTitle()).concat(null==i?"N/A":o(i)+((r=t(e,i))?" (out of "+r.map(function(e){return o(e)}).join(", ")+")":"")).concat(f(a.t[n])).concat(e.params.tooltipHtml)}),i.paddingFn(function(e){var t=h.domain(),n=l.length,r=(+t[1]-+t[0])/o.summarizeInterval();if(!(r>0))return a(l.length),e;var s=Math.max(1,Math.floor(i.width()-e[1]-e[3])),u=Math.max(1,Math.floor(i.height()-e[0]-e[2])),c=r*u/s;if(c<n){var d=Math.ceil((s-r*u/(c=n))/2);e[1]+=d,e[3]+=d}return a(c),e}),i.xScale.add(h),i.yScale.add(g),i.grid.add(Axis(2).scale(h).tickFormat(!1)),i.axis.add(Axis(2,!!e.isUTC).background(!0).scale(h).tickFormat(getTimeAxisFormat(e))),i.axis.add(Axis(3).scale(g).tickFormat(function(e){var t=i.axis[1].tickValues().indexOf(e),n=l[t],r=n.series.origin;return r&&r.params&&null!=r.params.labelFormat?lib.series.getLabel(r,r.params.labelFormat):(n||{}).params.axisLabel}));var m=i.redraw;i.redraw=function(){if(!i.rendered())return i;if(l=o.filter(function(e){return e.isVisible()}),c&&c.redraw(),h.setDomain(!0),a(l.length),m(),u&&u.display()&&1!=u.positionIndex&&7!=u.positionIndex){var e=u.positionIndex>1&&u.positionIndex<7?-1:1,t=e*i.axisPadding[1],n=u.side%2?0:e*i.padding()[1](),r=-e*u.padding()[e>0?3:1]();u.el().transform("matrix",[t+n+r,0])}i.clipPath()&&i.clipPathRect().attr("x","1").attr("y","1").attr("width",Math.max(0,i.innerWidth()-2)+"").attr("height",Math.max(0,i.innerHeight()-2)+"");var s=(g.domain()[1]+l.length)/2;return l.forEach(function(e,t){var n=e.el().attr("transform",null);n.select("rect").crisp(n),n.attr("transform",(n.attr("transform")||"")+"translate(0,"+Math.floor(g(s-t))+")");var r=onSeriesClick(e.series,i,e.el(),function(){return a},null,null,function(){var t=d3.select(d3.event.target).datum(),n=e.series.data.t;return{startTime:n[t],endTime:n[t+1]}}),a=r&&lib.object.copy(r.seriesConfig);a&&(a.interval=e.summarizeInterval(),a.statistic=e.series.summarizeType[0])}),i};var y=i.destroy;return i.destroy=function(){return i.destroyUpdater(),p.destroy(),c&&c.destroy(),y.apply(this,arguments)},i}function n(){function e(t){r=t.append("g").on("mousemove",function(){e.fire("move")}).on("mouseover",function(){e.fire("over")}).on("mouseleave",function(){e.fire("out")}),s=!0}function t(t){var n=e.series;return n.thresholds&&n.thresholds(a.v[t]).tint||o}function n(e){var t=Math.max(0,searchIndex(e[0],a.t,!0)-1),n=searchIndex(e[1],a.t,!1,t,a.len-1);return t>n?null:[t,n]}var r=null,a=!1,i=!1,o=null,l={},s=!1,u=3e5,c=null,d=null,f=null;return e.renderTo=e,e.el=function(){return r},EventListener(e),e.on("out",function(){d.visible(!1)}).on("move",function(){var t=d3.event.target.__data__;"number"==typeof t&&d.record(e,t).showAt()}),e.redraw=function(){if(!s||!a)return e;var o=f.domain(),c=l.coverage,d=Math.max(0,Math.ceil(f(u)-f(0)))+"",p=domainChange(f,l),h=rangeChange(f,l)||p,g=!1,v=l.width!=d;v&&(l.width=d),(i||p)&&(c=n(o),g=!arrayEquals(l.coverage,c),g&&(l.coverage=c));var m=i||g,y=i||v||h;if(!m&&!y)return e;var x=r.selectAll("rect");if(m){var b=[];if(c&&e.isVisible())for(var _=c[0],w=0;_<c[1];w++,_++)b[w]=_;x=x.data(b,i?null:identity),x.exit().remove(),x.enter().append("rect"),i=v=h=!0}return x.each(function(e){var n=d3.select(this);return i&&n.attr("fill",t(e)),v&&n.attr("height",d).attr("width",d),h&&n.attr("x",Math.floor(f(a.t[e]))),n}),i=!1,e},e.destroy=function(){return e.data(!1),s&&(s=!1,r.remove()),e},e.onDataChange=function(){i=!0},e.data=function(t){return arguments.length?(a!=t&&(a&&a.un("change",e.onDataChange),a=t,a&&a.on("change",e.onDataChange),e.onDataChange()),e):a},e.defaultColor=function(t){return arguments.length?(o=t,e):o},e.summarizeInterval=function(t){return arguments.length?(u=t,e):u},e.summarizeType=function(t){return arguments.length?(c=t,e):c},e.tooltip=function(t){return arguments.length?(d=t,e):d},e.xScale=function(t){return arguments.length?(f=t,e):f},e}function r(e,t){var n=10,r=n,i=null,o=!1,l=!1;e.toggle=function(i,o,s,c){var d=u?c:s,f=[],p=t.getLegendData.types,h=u==l?n/3:0,g=a(e,i,d,h,n,r,p,f);e.visible(i.length-f.length),i.forEach(function(e){e.show(f.indexOf(e)<0)}),r!=g&&(r=g,e.forEach(function(e){e.resetSize&&e.resetSize()}))},e.getItemSize=function(t,a){if(this.data.isTick){var i=l==!u?e.space()[+!u]+(c==e.side?d:1):0;return 2==c?[0,a&&n+a-adjustTextNodeRect.deltaHeight+i]:[t&&n+t+i,0]}return[t&&t+(1==c?d:0),a&&r+(2==c?d:0)]};var s=t.padding()[e.side](),u=e.side%2,c=u?1:2,d=(c==e.side?0:s)+e.padding()[c]();c!=e.side&&(t.padding()[e.side]=function(){return e.displayed()?0:s}),e.padding()[c]=d3.functor(0),e.background(!0).space([3,3]).maxRows(1).on("itemresize",function(t){if(t.data.isTick){var r=l?n*(u?1:-1):n-!u;l==!u&&(r+=(u?1:-1)*e.space()[+!u]),t.textEl.attr(l==u?"y":"x",r+"")}}).on("itemrender",function(a){if(a.data.getValue){var o=a.textEl=a.el.append("text").attr("dy",a.data.isTick&&l!=u?".32em":"1em");if(a.data.isTick){var s=(u?"0,":"")+-e.space()[+u]/2+(u?"":",0");a.el.transform("matrix","1,0,0,1,"+s),o.attr("text-anchor",l?u?"middle":"end":u?"start":"middle"),l&&o.attr("transform","rotate(-90)")}a.resetValue=function(){var e=a.data.getValue();a.textEl.text(null==e?"":i(e)),a.resize()}}else a.rectEl=a.el.append("rect").attr(u?"width":"height",n+""),(a.resetColor=function(){a.rectEl.attr("fill",a.data.color||t.tseries.defaultColor())})(),(a.resetSize=function(){a.rectEl.attr(u?"height":"width",r+""),a.resize()})()});var f={},p=null,h=null,g=!1;return f.render=function(t){var a=getNodeSize(t.node(),"font-size")||n;n=r=Math.round(1.2*a),f.setActiveSeries(),e.renderTo(t)},t.on("render",function(){function n(e){e.on("over",r).on("out",a)}function r(){null!=o&&(clearTimeout(o),o=null);var e=this.series;e&&f.setActiveSeries([e])}function a(){null==o&&(o=setTimeout(function(){o=null,f.setActiveSeries()},i))}var i=10,o=null;t.tseries.forEach(n),n(e),t.tooltip&&n(t.tooltip)}),f.dataMap={},f.isDefaultLegend=function(){return g},f.setActiveSeries=function(e){var n=e?t.getSeriesPalette(e[0]):t.getDefaultPalette(),r=p&&p.samePalette&&p.samePalette(n),a=r&&!(p.activeSeries&&p.activeSeries(e||(e=p.paletteSeries)));if(a)return r;if(!r){var l=n.toString(),s=f.dataMap[l]||(f.dataMap[l]=t.getLegendData(o,n));f.data(s)}return g=(h?p==h:h=p)&&(!p.activeSeries||p.activeSeries()==p.paletteSeries),p.getFormat&&(i=p.getFormat()),f.redraw(),r},f.redraw=function(){return e.display()&&e.rendered()?(e.forEach(function(e){e.resetValue&&e.resetValue()}),e.setTooltip(),e.redraw(),g&&(t.margin()[e.side]=d3.functor((u?e.totalWidth:e.totalHeight)())),f):f},f.destroy=e.destroy,f.data=function(t){function n(t,n){e.add(t),e.preference.push(t),t.display(n===!0)}if(!arguments.length)return p;p=t;var r=e.remove(!1,0);return t.forEach(function(t){var a=r.some(function(e,n){return e.data.type==t.type&&r.splice(n,1)});if(a)a.data=t,a.resetColor&&a.resetColor(),n(a,!0);else{if(a=e.datum(t),a.getValue)return;a.tooltip=function(){if(!a.data.getTooltip)return null;var e=a.data.getTooltip();return e&&e.map(function(e){return i(e)}).join(" - ")||"N/A"}}}),r.forEach(n),f},f.displayTicks=function(e){return arguments.length?(o=e,f):o},f.rotateTicks=function(e){return arguments.length?(l=e,f):l},f}function a(e,t,n,r,a,o,l,s){function u(e){return-h+r+(c?e.rect.height+f.rect.height:e.rect.width+f.rect.width)/2}var c=!e.horizontal(),d=e.space()[+c],f=null,p=0,h=0,g=t.reduce(function(e,t){switch(t.data.type){case l.color:p++;break;case l.tick:f&&p&&(e=Math.max(e,Math.round(u(t)/p-d))),f=t,p=h=0;break;default:h+=c?t.h:t.w}return e},a);return i(function(e){s.splice(0),f=null,h=0;var r=0,a=!1;return t.forEach(function(t){var i;switch(t.data.type){case l.tick:return void(f&&u(t)>0?s.push(t):(f=t,h=0));case l.range:i=c?t.h:t.w;break;case l.color:i=e+d}r+i>n?(s.push(t),a=!0):(r+=i,h+=i)}),!a},a,g,o,null,function(e,t,n){return e!=t||n})}function i(e,t,n,r,a,i){function o(e,t){return Math.round((e+t)/2)}function l(e,t){return e!=t}var s,u=++t>n;if(!u)for(a||(a=o),s=null==r?a(t,n,r):Math.max(t,Math.min(n,r));e(r=s)?t=s+1:n=s-1,!(t>n);)s=a(t,n,r);return s=t-1,(i||l)(s,r,u)&&e(s),s}e.adjustParameter=i,e.getPaletteLegend=r,e.CalendarChart=t}},{}],56:[function(e,t,n){t.exports=function(e,t){function n(){function e(e,t){var n="string"==typeof e&&e;if(n){if((n=getPlaceholdersExp(e))&&(a.phMap.exp(n,!0),null==(e=a.phMap.getValue(e,n))))return;return t&&lib.isFinite(n=+e)?n:e}return e}var n="id",r="alert",a=StreamingTable(),i=["UNDEFINED","UNKNOWN","NORMAL","WARNING","MINOR","MAJOR","CRITICAL","FATAL"];extendObject(a.defaultValues,{text:function(e){return e.message||e.value},severity:function(e){return"string"==typeof e.severity?e.severity.toUpperCase():i[e.severity]}}),a.on("render",function(){var e;a.el().classed("axi-console",!0);var t=d3Format("%e-%b %H:%M");a.isUTC()&&(t=t.utc),"message"===r?(extendObject(a.defaultValues,{time:function(e){return new Date(e.date).getTime()}}),e=[{key:"time",style:"text-align: center; white-space: pre",format:t},"entity","type","source","tags","message"]):(extendObject(a.defaultValues,{open:function(e){return new Date(e.openDate).getTime()},changed:function(e){return new Date(e.lastEventDate).getTime()},count:function(e){return e.repeatCount}}),e=[{key:"open",style:"text-align: center; white-space: pre",format:t},{key:"changed",style:"text-align: center; white-space: pre",format:t},"count","entity","metric","rule","tags","text"]),e.unshift({key:"severity",label:"",format:d3.functor(""),style:"padding: 0; width: 15px; min-width: 15px; text-align: center",script:function(e,t,n,r,a,i,o,l){l&&i.attr("title",e||null).classed("axi-console-severity-"+e,!0)}}),a.columns().forEach(function(e){e.mode=5}),a.columns(e)}),a.post={queries:[]},a.loader.postParams(function(n,r,i,o,l){var s=[],u=new Date(l[0]).toISOString(),c=new Date(l[1]).toISOString(),d=a.post.queries.every(function(n){var r={startDate:u,endDate:c};return s.push(r),!someOwnProperty(n,function(n,a){function i(n){if(n!==t){var i=e(n,o);if(i===t)return!0;l?(r[a]||(r[a]=[])).push(i):r[a]=i}}var o="minSeverity"===a||"severities"===a,l=Array.isArray(n);return l?n.some(i):i(n)})});return d&&s});var o=a.tbodyData;return a.tbodyData=function(e){function t(e){return"object"==typeof e&&null!=e}function r(e){return t(e)?e[n]:e}if(!arguments.length)return o();var i=a.rowKey();return(null==i||i.changeable)&&(r.changeable=!0,a.rowKey(e.every(function(e){return!t(e)||e.hasOwnProperty(n)})?r:null)),o(e),a},a.primaryKey=function(e){return arguments.length?(n=e,a):n},a.source=function(e){return arguments.length?(r=e,a):r},a}e.AlertConsole=n}},{}],57:[function(e,t,n){t.exports=function(e){function t(e){function t(t){S=t.classed("axi-donut",!0).classed("axi-donut-half",p||h).classed("axi-donut-sleek",h),X=S.append("svg"),w=X.append("rect").style("opacity","0"),A=X.append("defs"),f.push(["white","#444"]);for(var n="donutchart"+(window.DonutIndex?++DonutIndex:DonutIndex=1),r=0,i=f.length-1,o=n+"-gradient-";r<=i;r++){var l,s=f[r],u=r==i;u?(s.push(o+"shadow"),l=A.append("radialGradient")):(s.push(o+r),l=A.append("linearGradient")),l.attr("id",s[2]),l.append("stop").attr("offset","0%"),l.append("stop").attr("offset","100%"),u&&l.attr("cx","50%").attr("cy","50%").attr("r","50%").attr("fx","30%").attr("fy","30%").selectAll("stop").attr("stop-opacity",function(e,t){return.5+t*-.1}),a(r)}Z=X.append("g").attr("class","axi-donut-surface"),D.push(Z.append("path")),D.push(Z.append("path")),j=Z.append("g"),y=Z.append("path").attr("class","axi-donut-arrow").attr("fill","whitesmoke").attr("stroke","rgb(154,154,154)"),D.push(Z.append("circle"));for(var r=0;r<D.length;r++)D[r].attr("stroke",f[r][0]).attr("fill","url(#"+f[r][2]+")").attr("transform","rotate(90)");D[0].classed("axi-donut-disk axi-donut-disk-outer",!0),D[1].classed("axi-donut-disk axi-donut-disk-inner",!0).attr("stroke","url(#"+f[3][2]+")"),D[2].classed("axi-donut-disk axi-donut-disk-inside",!0),L||Y.some(function(e){return L=e.params.format})||(L=I),null==N&&(N=L),_.format(N),null==F&&(F=L),J.format(F),null==V&&(V=L),C.format(V),_(Z),$=Z.append("circle").attr("display","none").attr("fill","url(#"+f[f.length-1][2]+")").classed("axi-donut-shadow",!0);var d=w.node(),v=e.getTooltipCont&&e.getTooltipCont();if(J.display(O),O&&J.alignNode(d).translate(function(e,t,n,r,a){var i=Math.cos(g)*(R+W),o=-Math.sin(g)*(R+W);return[Math.max(t+T[0]+i+(i<0?-r:0),0),n+T[1]+o+(o<0?-a:0)]}).renderTo(v).el().classed("axi-donut-tip",!0).style("z-index",getZIndex(X.node())+5),C.display(P),P){var m=C.format();C.format(function(e){return lib.isFiniteNumber(e)?m(e):" "}).alignNode(d).translate(function(e,t,n,r,a,i){var o;switch(E){case"top":o=Math.min(n-W,_.getTop())-a;break;case"bottom":o=n+i.height+W;break;default:o=n+i.height-a-R*K*1.2}return[t+(i.width-r)/2,o]}).renderTo(v).el().classed("axi-donut-counter",!0).classed("axi-donut-counter-"+E,!0).style("z-index",getZIndex(X.node())+5)}G=!0,Q.format(function(e,t){return L(e)+" - "+L(t)}).renderTo(v).el().style("z-index",getZIndex(X.node())+30),c(),z=p||h?1+Math.max(U*b,.05*x):2,te=h?1.52:2}function a(e,t){r(A.select("#"+f[e][2]).selectAll("stop"),"stop-color",function(t,n){return f[e][n]},t)}function o(e,t,n,r){if(p||h){n-=r;var a=re-r/t,i=ne+r/t,o=re-r/n,l=ne+r/n;return void e.attr("d","M"+t*-Math.cos(a)+","+t*-Math.sin(a)+"A"+t+","+t+" 0 "+ +(i-a>Math.PI)+",1 "+t*-Math.cos(i)+","+t*-Math.sin(i)+"L"+n*-Math.cos(l)+","+n*-Math.sin(l)+"A"+n+","+n+" 0 "+ +(l-o>Math.PI)+",0 "+n*-Math.cos(o)+","+n*-Math.sin(o)+"Z")}e.attr("d","M"+-t+",-0.0001A"+t+","+t+" 0 1,1 "+-t+",0")}function l(e,t,n,r){return Math.min(Math.max(R*e/(r||70),t||0),n||1/0)}function s(e){if(G){documentVisible()||(e=0);var t=B.domain(),n=Math.min(Math.max(ee,t[0]),t[1]);lib.isFinite(g=B(n))||(g=-re+Math.PI/2),r(y,"transform","rotate("+360*(1-g/(2*Math.PI))+")",e,0,!0),c(e),u(e)}}function u(e){e=e||0;var t=O&&lib.isFinite(ee);if(t){var n=J.el(),r=n.transition();e&&r.duration(e/2).style("opacity",0).transition().delay(e/2).duration(e/2).style("opacity",1),d(10,function(){n.style("opacity",1)},2*e)}else O&&J.visible(t);(t||P)&&d(0,function(){t&&J.color(null==H.color?"transparent":H.color).record(ee).showAt(0),P&&C.record(ee).showAt(0)},e/2)}function c(e){e=e||0;var n=t.getThresholds(),i=null!=ee&&lib.isFinite(ee)?n&&n(ee).tint:null,o=H.color!=i&&(H.color=i,!0);if(o){var l=interpolateColor(i,.4);f[2][0]=l,f[2][1]=i,a(2,e),r(D[2],"stroke",l,e)}}function d(e,t,n){var r=ae[e]||(ae[e]={});null!=r.id&&(clearTimeout(r.id),r.id=null),n?r.id=setTimeout(t,n):t()}e||(e={}),EventListener(t),lib.updater(t),lib.setThresholds(t);var f,p="half"===e.mode,h="sleek"===e.mode,g=0,v=700,m=d3.svg.arc(),y=null,x=.5,b=1.4,_=t.axis=n(),w=null,k=1/15,T=[1,1],S=null,E=null,M=!0,I=defaultValueFormat,C=t.counter=Tooltip(),A=null,D=[],O=!0,P=!1,L=null,N=null,F=null,V=null,z=1,R=1,W=1,j=null,U=.17,H=t.prev={},q=1,G=!1,K=1/6,B=d3.scale.linear(),$=null,Y=t.series,Z=null,X=null,J=t.tip=Tooltip(),Q=Tooltip(),ee=-(1/0),te=1;t.el=function(){return S},t.backgroundEl=function(){return w},t.getHeightPortion=function(){return z},t.getWidthPortion=function(){return te},t.padding=function(){return W};var ne=Math.PI*(h?10/36:p?.50001:2/3),re=-ne;B.range([-re+Math.PI/2,-ne+Math.PI/2]),_.scale(B),f=[["rgb(140,178,174)","rgb(52,93,95)"],["rgb(164,164,164)","rgb(83,83,83)"],["white","black"]],f.push([f[1][1],f[1][0]]),t.destroy=function(){return t.destroyUpdater(),Q.destroy(),P&&C.destroy(),O&&J.destroy(),G&&(S.remove(),G=!1),t},t.series.onItemAdd(function(e){h&&e.thresholds&&e.thresholds.palette([])}),t.varNames().push("alertExp"),t.varNames().push("displayExp"),t.on("seriesupdate",function(e){e&&(M=!0);var n=Y.reduce(function(e,t){return(t=t.mainParams.isVisible()&&t.mainParams.getLast())?(e||0)+t.v:e},null);t.value(n,!e&&v),M&&t.redraw()}),t.redraw=function(){if(!G)return t;var e=M,n=H.outerRadius!=R;if(n){H.outerRadius=R;var r=z*R,a=te*R;T=[a/2,R],S.style("width",a+"px").style("height",r+"px"),X.attr("width",a).attr("height",r),w.attr("width",a).attr("height",r),Z.attr("transform","translate("+T[0]+","+T[1]+")");var c=R*K,d=R*k,f=R*U,p=l(1.5);q=i(R-c-d-+("none"!=D[0].style("display"))*p/2),P&&(C.innerEl().style("min-width",.7*q+"px"),C.prev.record=null),W=l(1),_.center(T).majorTickSize(c).minorTickSize(.6*c).majorStrokeWidth(l(1.2,1,2)).minorStrokeWidth(l(.9,.75,1.5)).tickPadding(W+d);var h=x*R,g=.05*h,E=.0115*h,I=-f*b,A=h;y.attr("stroke-width",l(.7)).attr("d","M"+I+","+g+"L"+A+","+E+"V"+-E+"L"+I+","+-g+"Z"),o(D[0].attr("stroke-width",p),q+c+p/2+d,q,d+p/2),p=l(1),o(D[1].attr("stroke-width",p),q+c+.6*p,q,.6*p),D[2].attr("stroke-width",l(1.5)).attr("r",f),$.attr("r",R),m.innerRadius(q).outerRadius(q+c)}if(e){var O=t.getThresholds(),L=O&&O.root.range||[1/0,-(1/0)],N=L[1]-L[0],F=(ne-re)*(N?1/N:0),V=j.selectAll("g").data(O?O.sections().reduce(function(e,t){t.range[0]<t.range[1]&&(t.startAngle=re+(t.range[0]-L[0])*F,t.endAngle=re+(t.range[1]-L[0])*F,e.push(t))},[]):[]);V.exit().remove(),V.enter().append("g").append("path"),j.selectAll("g").each(function(e){var t=d3.select(this),n=t.select("path");(n.empty()?n=t.append("path"):n).attr("fill",function(){return e.tint}).attr("stroke",function(){return e.tint}).on("mousemove",function(){Q.record(e.range[0],e.range[1]).showAt()}).on("mouseout",Q.visible)}),j.select("path").crisp(j),B.domain(L)}_.radius(q).redraw();var Y=n||e;if(Y){j.selectAll("path").attr("d",m);var J=H.value!=ee&&(H.value=ee,!0);(J||n||e)&&s(M&&v)}else u();return M=!1,t},t.getThresholds=function(){var e=Y.some(function(e){return e.thresholds});return e&&e.thresholds};var ae={};return t.counterPosition=function(e){return arguments.length?(E=e,["bottom","top","inside"].indexOf(E)<0&&(E=null),P=!!E,t):E},t.value=function(e,n){return arguments.length?("number"!=typeof e||isNaN(e)||ee==e&&!M||(ee=e,n!==!1&&s(null==n?v:n)),t):ee},t.outerRadius=function(e){return arguments.length?(R=i(e),t):R},t.arrowLengthPortion=function(e){return arguments.length?(x=e,t):x},t.pinRadiusPortion=function(e){return arguments.length?(U=e,t):U},t.borderWidthPortion=function(e){return arguments.length?(k=e,t):k},t.ringWidthPortion=function(e){return arguments.length?(K=e,t):K},t.animationDuration=function(e){return arguments.length?(v=e,t):v},t.displayTip=function(e){return arguments.length?(O=e,t):O},t.formatAxis=function(e){return arguments.length?(N=e,t):_.format()},t.formatTip=function(e){return arguments.length?(F=e,t):J.format()},t.formatCounter=function(e){return arguments.length?(V=e,t):C.format()},t}function n(){function e(e){b=e.append("g").attr("class","axi-donut-axis"),g=b.append("path").attr("fill","none").attr("stroke",x),w=b.append("g").attr("class","axi-donut-axis-ticks");var t=getParentNode(e.node(),function(e){return"svg"===e.tagName.toLowerCase()});s=d3.select(t.parentNode).append("div").attr("class","axi-donut-axis-labels"),m=!0}var t=0,n={},r=!0,a=0,i=null,l=null,s=null,u=1,c=5,d=1,f=1,p=5,h=1,g=null,v=1,m=!1,y=null,x="rgb(154,154,154)",b=null,_=5,w=null;return e.el=function(){return b},e.labelsEl=function(){return s},e.redraw=function(){if(m){var e=y.domain(),b=!arrayEquals(n.domain,e);b&&(n.domain=[].concat(e));var k=b||n.majorTicks!=c;if(k){n.majorTicks=c,l=o(e,c,i&&i.radix||10);var T=l.values,S=s.selectAll("span").data(T),E=T.length;n.labelsLength!=E&&(n.labelsLength=E,S.enter().append("span"),S.exit().remove()),S.text(function(e){return i?i(e):e})}var M=k||n.minorTicks!=p;if(M){n.minorTicks=p;var I=l.step;if(I>0){var T=l.values,C=T.length,A=T[1],D=T[C-2],O=I/p,P=[],L=-Math.round((A-e[0])/O)+1,N=(C-3)*p,F=C>2?Math.round((e[1]-D)/O)+N:0;P.push([e[0],!0]);for(var V=L;V<F;V++)P.push([O*V+A,V%p==0&&!(V<0||V>N)]);P.push([e[1],!0]);var E=P.length,z=w.selectAll("g").data(P);n.ticksLength!=E&&(n.ticksLength=E,z.enter().append("g").append("path").attr("stroke",x),z.exit().remove())}else w.selectAll("g").remove()}var R=y.range(),W=!arrayEquals(n.range,R),j=n.radius!=v,U=j||W||b;if(U){n.radius=v,n.range=R;var H=y.range()[0],q=y.range()[1];g.attr("stroke-width",u).attr("d","M"+Math.cos(H)*v+","+-Math.sin(H)*v+"A"+v+","+v+" 0 "+ +(H-q>Math.PI)+",1 "+Math.cos(q)*v+","+-Math.sin(q)*v)}if(n.displayTicks!=r&&(n.displayTicks=r,k=!0,s.style("display",r?"":"none")),r&&(k||U)){var G=v+d+_;s.selectAll("span").each(function(e){var n=y(e),r=Math.cos(n),i=-Math.sin(n),o=d3.select(this);a&&o.style("font-size",a+"px");var l=getNodeRect(o.node());o.style("left",t[0]+r*G-(r<0?l.width:0)+"px").style("top",t[1]+i*G-(i<0?l.height:0)+"px")})}(M||U)&&w.selectAll("g").each(function(e){var t=y(e[0]),n=Math.cos(t),r=-Math.sin(t),a=d3.select(this).attr("transform","translate("+n*v+","+r*v+")"),i=e[1]?d:h,o=e[1]?u:f;a.select("path").attr("stroke-width",o).attr("d","M0,0L"+n*i+","+r*i)})}},e.getTop=function(){var e=1/0;return r&&s.selectAll("span").each(function(){e=Math.min(e,getNodeRect(this,!0).top)}),e},e.displayTicks=function(t){return arguments.length?(r=t,e):r},e.fontSize=function(t){return arguments.length?(a=t,e):a},e.tickPadding=function(t){return arguments.length?(_=t,e):_},e.minorTickSize=function(t){return arguments.length?(h=t,e):h},e.majorStrokeWidth=function(t){return arguments.length?(u=t,e):u},e.minorStrokeWidth=function(t){return arguments.length?(f=t,e):f},e.majorTickSize=function(t){return arguments.length?(d=t,e):d},e.scale=function(t){return arguments.length?(y=t,e):y},e.radius=function(t){return arguments.length?(v=t,e):v},e.majorTicks=function(t){return arguments.length?(c=t,e):c},e.format=function(t){return arguments.length?(i=t,e):i},e.minorTicks=function(t){return arguments.length?(p=t+1,e):p},e.center=function(n){return arguments.length?(t=n,e):t},e}function r(e,t,n,r,i,o){i=i||"attr",o&&(i+="Tween",n=a(n)),e.getTransition(r)[i](t,n)}function a(e){var t="function"==typeof e;return function(n,r,a){return d3.interpolate(a,t?e(n,r):e)}}function i(e){return Math.floor(Math.max(e,1))}function o(e,t,n){var r={values:[],step:0},a=r.values,i=e[0],o=e[1],l=t>0?(o-i)/t:0;if(l<=0||!lib.isFinite(l))return r;var s=Math.pow(n,Math.floor(Math.log(2*l)/Math.log(n)))/2,u=Math.floor(l/s)*s,c=-Math.floor(-i/u)*u,d=Math.floor(o/u)*u;c-i<u/2&&(c+=u),o-d<u/2&&(d-=u),a.push(i);for(var f=1;u*f%1!=0;)f*=10;u*=f,c*=f,d*=f;for(var p=0,h=Math.round(1+(d-c)/u);p<h;p++)a.push((c+p*u)/f);return u/=f,a.push(o),r.step=u,r}e.Donut=t}},{}],58:[function(e,t,n){var r=e("./GraphLib"),a=e("./ChordGraphWidget"),i=e("./HierarchyGraphWidget");t.exports=function(e){function t(e){e.append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",function(e){return e}),e.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal")}function n(e){l="-"+r.graphUID(),d=e.classed("axi-graph-container",!0),c=e.append("svg").attr("preserveAspectRatio","xMinYMin meet").classed("axi-graph-widget",!0),H.init();var a=c.append("defs").classed("axi-graph-arrows",!0);return d3.select(".axi-graph-glow-filters").empty()&&a.selectAll(".axi-graph-glow-filters").data([3,5,8]).enter().append("filter").classed("axi-graph-glow-filters",!0).attr("id",function(e){return"axi-graph-glow-"+e}).call(t),f=c.append("g").classed("axi-graph-resize",!0),c.call(U.zoom).on("dblclick.zoom",function(){U.reset()}),g=Tooltip().format(j),g().el().style("z-index",getZIndex(c.node())+30),n.init.apply(this,arguments),n}function o(){g.destroy(),n.el().children().remove(),x=!1}var l,s,u,c,d,f,p,h,g,v=1e3,m=.9,y=3,x=!1,b=!1,_=!1,w=!1,k=0,T=!0,S=!1,E=!1,M=!0,I=null,C=null,A=null,D=!0,O=!0,P=0,L=0,N=[40,40],F=function(){return[]},V=function(){return[]},z=[null],R=[null],W=[null],j=function(e,t){return[].concat(e.label?e.label:e.id).concat(e.tooltip).concat(t&&(t.keys.isReal?t.keys.rec.entity:t.params.axisLabel)).concat(r.seriesInfo(e,r.isLink(e)?r.linkSeriesValue:r.nodeSeriesValue)).concat(function(){if(t){var e=t.mainParams.getLast();if(e&&r.isNumber(e.t))return r.TIME_FORMAT(new Date(e.t))}}()).concat(e.tooltipHtml)},U=function(){function e(e){if(M)return e;if(e==r)return r;e/=r;var t=navigator.isFF?.02:.4;return Math.pow(e,t*Math.log(e)*Math.log(e))*r}function t(t,n){var r=e(n)/s,a=n/o,i=[-a*l[0]+t[0],-a*l[1]+t[1]],c=i[0]/(1-a),d=i[1]/(1-a),f=1==r?[i[0],i[1]]:[c*(1-r),d*(1-r)];return u=[r*u[0]+f[0],r*u[1]+f[1]],s*=r,o=n,l=t,{scale:s,translate:u}}function n(){o=r,l=[a,i],s=r,u=[a,i],d.scale(r).translate([a,i]),f.attr("transform","translate("+a+","+i+")scale("+r+")"),c.selectAll(".axi-graph-marker-resize").attr("transform","scale("+1/r+")")}var r=1,a=0,i=0,o=1,l=[0,0],s=1,u=[0,0],d=d3.behavior.zoom().on("zoom",function(){var e=t(d.translate(),d.scale());f.attr("transform","translate("+e.translate[0]+","+e.translate[1]+")scale("+e.scale+")"),c.selectAll(".axi-graph-marker-resize").attr("transform","scale("+1/e.scale+")")});return{zoom:d,transformOperator:t,reset:n,graphScale:function(){return e(d.scale())},setDefaultTransform:function(e,t){r=t,a=e[0],i=e[1],n()}}}(),H=function(){function e(){c.selectAll(".axi-graph-marker").style("fill",function(){return d3.select(this.parentNode).child().style("stroke")}),c.selectAll(".axi-graph-isOriented").classed("axi-graph-animate-link",n.isLinkAnimate()).select("path").attr("marker-end",n.isArrows()?function(){var e=d3.select(this).style("stroke"),t=d3.select(this).style("stroke-width").replace(/px/g,""),r=t?parseInt(t)+2:3;return"url("+i(e,n.minArcWidth>10?r:1)+")"}:null),navigator.isIE&&c.selectAll(".axi-graph-animate-link").select("path").call(t)}function t(e){e.transition().duration(1e3).ease("linear").style("stroke-dasharray","5px").styleTween("stroke-dashoffset",function(){return function(e){return e=.1*Math.floor(10*e),20*e+"px"}}).each("end",function(){d3.select(this).call(t)})}function a(e,t,a){if(e){e=e.replace(/\s/g,"");var i=(a?a:"axi-graph-"+e.replace(r.NON_WORD_PATTERN,"-"))+n.UID();return e=e.replace(/(;)?$/,";").replace(/(!important)?;/g,"!important;"),b[t][i]||(b[t][i]=!0,x[t].text(x[t].text()+"."+i+"{"+e+"}")),i}}function i(e,t){var r="#"+n.markerArrowId(e,t);return d3.select(r).empty()?n.createMarkerArrow(e,t):r}function o(e){var t,r,a,i,o,l,s,u,c,d=[[],[],[],[],[]],f=e.seriesMap;for(t in f)f.hasOwnProperty(t)&&(r=f[t].origin||f[t],a=r.params,c="nodeAlertExp"in r.vars.values?r.vars.values.nodeAlertExp:r.vars.values.alertExp,c!==!1&&null!=c&&(i=n.getAlertStyle()(c),o=n.getNodeAlertStyle()(c),l=d3.functor(e.nodeAlertStyle)(c),s=d3.functor(a.alertStyle)(c),u=d3.functor(a.nodeAlertStyle)(c),i&&d[h].push(i),o&&d[g].push(o),l&&d[v].push(l),s&&s!==i&&d[m].push(s),u&&d[y].push(u)));return d3.merge(d)}function l(e){var t,r,i,o,l,s,u,c,d,f=[],p=e.seriesMap;for(t in p)p.hasOwnProperty(t)&&(r=p[t].origin||p[t],i=r.params,d="linkAlertExp"in r.vars.values?r.vars.values.linkAlertExp:r.vars.values.alertExp,d!==!1&&null!=d&&(o=n.getAlertStyle()(d),l=n.getLinkAlertStyle()(d),s=d3.functor(e.linkAlertStyle)(d),u=d3.functor(i.alertStyle)(d),c=d3.functor(i.linkAlertStyle)(d),o&&f.push(a(o,h)),l&&f.push(a(l,g)),s&&f.push(a(s,v)),u&&u!==o&&f.push(a(u,m)),c&&f.push(a(c,y))));return f}function s(e){e.each(function(e){var t=d3.select(this);for(var n in k[e.GrUID])k[e.GrUID].hasOwnProperty(n)&&t.classed(n,!1)}),_&&e.each(function(e){var t={},n=d3.select(this);l(e).forEach(function(e){t[e]=!0}),k[e.GrUID]=t,n.classed(t)})}function u(e){e.attr("style",null),w&&e.attr("style",function(e){return o(e).join(";")})}function d(e,t){var a="axi-graph-link-threshold-";e.each(function(e){for(var i=r.linkSeriesValue(e.seriesData),o=0,l={};t.length>o&&i>=t[o];)l[a+o+n.UID()]=!1,l[a+o]=!1,++o;for(l[a+o+n.UID()]=!0,l[a+o]=!0,++o;t.length>=o;)l[a+o+n.UID()]=!1,l[a+o]=!1,++o;d3.select(this).classed(l)})}function f(e,t){var a="axi-graph-node-threshold-";e.each(function(e){for(var i=r.nodeSeriesValue(e.seriesData),o=0,l={};t.length>o&&i>=t[o];)l[a+o+n.UID()]=!1,l[a+o]=!1,++o;for(l[a+o+n.UID()]=!0,l[a+o]=!0,++o;t.length>=o;)l[a+o+n.UID()]=!1,l[a+o]=!1,++o;d3.select(this).classed(l)})}function p(){[0,1,2,3,4].forEach(function(e){x[e]=c.append("style")});for(var e=r.thresholdsNumber(F),t=r.thresholdsNumber(V);z.length<e+1;)z.push(z[z.length-1]);for(;W.length<e+1;)W.push(W[W.length-1]);for(;R.length<t+1;)R.push(R[R.length-1]);z.length>e+1&&(z=r.selectOnly(e+1,z)),R.length>t+1&&(R=r.selectOnly(t+1,R));var n,i,o;for(n=0;n<z.length;++n)i=z[n]?"stroke:"+z[n]+";":"",o=W[n]?"stroke-width:"+W[n]+"px !important;":"",a(i+o,h,"axi-graph-link-threshold-"+n);for(n=0;n<R.length;++n)"white"!=R[n]&&a(R[n]?"fill:"+R[n]+";":"",h,"axi-graph-node-style.axi-graph-node-threshold-"+n)}var h=0,g=1,v=2,m=3,y=4,x=[],b=[{},{},{},{},{}],k={};return{init:p,markerStyled:e,addStyleClass:a,applyLinkAlertStyle:s,applyLinkThresholdsStyle:d,applyNodeAlertStyle:u,applyNodeThresholdsStyle:f}}();return n._appendixLevel=0,n.minArcWidth=0,n.graphScale=U.graphScale,n.zoom=function(){return U.zoom},n.setDefaultTransform=U.setDefaultTransform,n.setPanelsHideBehavior=function(e){e.forEach(function(e){e.el().style("opacity","0")});var t;n.el().on("mousemove",function(){t&&clearTimeout(t),e.forEach(function(e){e.el().style("opacity","1")}),t=setTimeout(function(){e.forEach(function(e){e.el().style("opacity","0")})},r.CONTROLS_DELAY)}).on("mouseout",function(){e.forEach(function(e){e.el().style("opacity","0")})})},n.sortLinks=function(){var e=0;"top"===u?e=1:"bottom"===u&&(e=-1),e&&(c.selectAll(".axi-graph-link :first-child").each(function(e){e.linkWidth=Number(d3.select(this).style("stroke-width").slice(0,-2))}),c.selectAll(".axi-graph-link").sort(function(t,n){return(t.linkWidth-n.linkWidth)*e}))},n.getHierarchy=function(){function e(t,n){var a=new r.CloneNode(t);n.children.push(a),a.parent=n,t.children.forEach(function(t){e(t,a)})}var t={id:"root",parent:null,children:[]};return n.nodes().forEach(function(n){e(n,t)}),t},n.markerArrowId=function(e,t){return"axi-graph-arrow-width"+t+"-"+e.replace(/\s/g,"").replace(r.NON_WORD_PATTERN,"-")+n.UID()},n.calcNodeThresholds=function(){var e,t,n=c.selectAll(".axi-graph-node,.axi-graph-arc");return n=n.filter(function(e){return e.seriesData&&null!=r.nodeSeriesValue(e.seriesData)}),t=r.thresholdEvaluator(n.data().map(function(e){return e.seriesData}),r.nodeSeriesValue),e=t(V),e.sort(function(e,t){return e-t}),e},n.calcLinkThresholds=function(){var e,t,n=c.selectAll(".axi-graph-link");return n=n.filter(function(e){return e.seriesData&&null!=r.linkSeriesValue(e.seriesData)}),t=r.thresholdEvaluator(n.data().map(function(e){return e.seriesData}),r.linkSeriesValue),e=t(F),e.sort(function(e,t){return e-t}),e},n.linkStyled=function(e){var t,a;t=e?e:c.selectAll(".axi-graph-link"),t=t.filter(function(e){return e.seriesData}),H.applyLinkAlertStyle(t.child()),a=t.child(),a.each(function(e){var t=d3.select(this);e.hasOwnProperty("tip")&&("none"==t.style("display")||"0"==t.style("opacity")||"hidden"==t.style("visibility")?e.tip.display(!1):e.tip.display(!0))}),t=t.filter(function(e){return null!=r.linkSeriesValue(e.seriesData)}),a=t.child(),H.applyLinkThresholdsStyle(a,n.calcLinkThresholds()),H.markerStyled()},n.nodeStyled=function(e){var t;t=e?e:c.selectAll(".axi-graph-node,.axi-graph-arc"),t=t.filter(function(e){return e.seriesData}),H.applyNodeAlertStyle(t.selectAll(".axi-graph-node-style")),t=t.filter(function(e){return null!=r.nodeSeriesValue(e.seriesData)}),H.applyNodeThresholdsStyle(t.selectAll(".axi-graph-node-style"),n.calcNodeThresholds())},n.init=function(){return n},n.UID=function(){return l},EventListener(n),lib.updater(n),n.varNames(["alertExp","linkAlertExp","nodeAlertExp","nodeValue","linkValue"]),n.on("seriesupdate",function(e){e&&x&&(n.isLinkData()||n.isNodeData()?n.redraw():(n.linkStyled(),n.nodeStyled()))}),n.el=function(){return d},n.tooltip=function(){return g},n.rendered=function(e){return arguments.length?(x=e,n):x},n.resize=function(e,t){n.width(e).height(t),n.rendered(!0),n.el().style("width",n.width()+"px").style("height",n.height()+"px"),n.redraw()},n.redraw=function(){throw new Error("redraw not implemented")},n.destroy=function(){o(),n.destroyUpdater()},n.height=function(e){return arguments.length?(L=Math.max(e-10,0),n):L},n.width=function(e){return arguments.length?(P=Math.max(e-10,0),n):P},n.nodes=function(e){return arguments.length?(p=e,n):p},n.links=function(e){return arguments.length?(h=e,n):h},n.duration=function(e){return arguments.length?(void 0!=e&&(v=e),n):v},n.padding=function(e){return arguments.length?void 0==e?(N=[40,40],n):("object"==typeof e?(N=e,void 0==N[1]&&(N[1]=N[0])):N=[e,e],n):N},n.currentDuration=function(){return k},n.tension=function(e){return arguments.length?(void 0!=e&&(m=e),n):m},n.nodeDepth=function(e){return arguments.length?void 0==e?n:(e<=y&&e>0&&e-Math.floor(e)==0?s=e:doLog()&&log("WARNING: nodeDepth is incorrect [%d]",e),n):s},n.ringWidthBounds=function(e,t){return arguments.length?n:[void 0,void 0]},n.isData=function(e){return arguments.length?(void 0!==e&&(b=e),n):b},n.isNodeData=function(e){return arguments.length?(void 0!==e&&(w=e),n):w},n.isLinkData=function(e){return arguments.length?(void 0!==e&&(_=e),n):_},n.isLinkAnimate=function(e){return arguments.length?(void 0!=e&&(E=e),n):E},n.isZoomLinear=function(e){return arguments.length?(void 0!=e&&(M=e),n):M},n.maxNodeDepth=function(e){return arguments.length?(y=e,n):y},n.isBundled=function(e){return arguments.length?(void 0!=e&&(T=e),n):T},n.isEffects=function(e){return arguments.length?(void 0!=e&&(S=e,k=S?v:0),n):S},n.isArrows=function(e){return arguments.length?(void 0!=e&&(O=e),n):O},n.isNodeCollapsible=function(e){return arguments.length?(void 0!=e&&(D=e),n):D},n.getAlertStyle=function(){return null==A&&(A=d3.functor(r.getCfgFunction("alert",n.config.alertstyle,"styles"))),A},n.getLinkAlertStyle=function(){return null==C&&(C=d3.functor(r.getCfgFunction("alert",n.config.linkalertstyle,"styles"))),C},n.getNodeAlertStyle=function(){return null==I&&(I=d3.functor(r.getCfgFunction("alert",n.config.nodealertstyle,"styles"))),I},n.linkThresholds=function(e){return arguments.length?(void 0!=e&&(F=new Function(r.THRESHOLD_FUNTIONS,e)),n):F},n.nodeThresholds=function(e){return arguments.length?(void 0!=e&&(V=new Function(r.THRESHOLD_FUNTIONS,e)),n):V},n.linkColors=function(e){return arguments.length?(void 0!=e&&(z=e),n):z},n.nodeColors=function(e){return arguments.length?(void 0!=e&&(R=e),n):R},n.linkWidths=function(e){return arguments.length?(void 0!=e&&(W=e),n):W},n.linkWidthOrder=function(e){return arguments.length?(u=e,n):u},n.toggleMode=function(){var t;o(),"chord"===n.mode()?t=i(n,e).maxNodeDepth(n.maxNodeDepth()+1):"hierarchy"===n.mode()&&(t=a(n,e).maxNodeDepth(n.maxNodeDepth()-1)),t(n.el()).rendered(!0).redraw()},n.switchChordMode=function(){var t;o(),t=a(n,e),"hierarchy"===n.mode()&&t.maxNodeDepth(n.maxNodeDepth()-1),t(n.el()).rendered(!0).redraw()},n.switchHierarchyMode=function(){var t;o(),t=i(n,e),"chord"===n.mode()&&t.maxNodeDepth(n.maxNodeDepth()+1),t(n.el()).rendered(!0).redraw()},n.initFromConfig=function(e,t){function a(e){var t;if(e.id){if(d[e.id]){for(t=1;d[e.id+r.SEP+t];)++t;return d[e.id+r.SEP+t]=e,e.id+r.SEP+t}return d[e.id]=e,e.id}var n=e.nodes[0]+r.SEP+e.nodes[1];if(d[n]){for(t=1;d[n+r.SEP+t];)++t;return d[n+r.SEP+t]=e,n+r.SEP+t}return d[n]=e,n}function i(e){return f[e.id]=-1,e.parent?(f[e.parent]||i(c[e.parent]),f[e.parent]<0&&doLog()&&log("WARNING: cycle hierarchy [node "+e.id+"]"),f[e.id]=f[e.parent]+1,void(p=Math.max(p,f[e.id]))):(f[e.id]=1,void(p=Math.max(p,1)))}function o(e){var t={id:e,children:[]};c[e]=t,f[e]=p;for(var n=p-1;n>=1;--n)t={id:"h"+n+t.id,children:[t],label:t.label?t.label:e},c[t.id]=t,f[t.id]=n;s.push(t)}function l(e){for(var t,n,r=c[e],a=f[r.id];a<p;){if(++a,n="l"+a+e,c[n])t=c[n];else{t={id:n,children:[],unseen:!0,label:e};var i;for(i in r)r.hasOwnProperty(i)&&"id"!==i&&"children"!==i&&"unseen"!==i&&(t[i]=r[i]);c[n]=t,f[n]=a,r.children.push(t)}r=t}return r.id}var s=[],u=[],c={},d={},f={},p=0;t=r.cloneCollection(t),e=r.cloneCollection(e),t.forEach(function(e){var t;if(e.id||(doLog()&&log("WARNING: node with undefined id"),e.id="undefined"),c[e.id]){for(t=0;c[e.id+"("+t+")"];)++t;doLog()&&log("WARNING: node with duplicate id = %s changed to %s",e.id,e.id+"("+t+")"),e.id=e.id+"("+t+")"}else c[e.id]=e;f[e.id]=!1,e.children=[]});var h=[];return t.forEach(function(e){if(e.parent){var t=c[e.parent];t?t.children.push(e):(doLog()&&log("WARNING: node [id=%s] parent refer to non existing node [id=%s], will be created",e.id,e.parent),t={id:e.parent,children:[e]},c[e.parent]=t,s.push(t),h.push(t))}else s.push(e)}),t.forEach(function(e){f[e.id]||i(e)}),e.forEach(function(e){var t=e.nodes[0],n=e.nodes[1],r=e.nodes[2];return e.nodes=[t,n,r],t&&n?(c[t]||(doLog()&&log("WARNING: link refer to non existing node [id=%s]",t),o(t)),c[n]||(doLog()&&log("WARNING: link refer to non existing node [id=%s]",t),o(n)),f[t]!=p&&(doLog()&&log("WARNING: links should connect leafs! link [id=%s] connects node [id=%s] on depth=%d, while max depth=%d",e.id,n,f[n],p),e.nodes[0]=l(t)),f[n]!=p&&(doLog()&&log("WARNING: links should connect leafs! link [id=%s] connects node [id=%s] on depth=%d, while max depth=%d",e.id,n,f[n],p),e.nodes[1]=l(n)),e.nodes[2]<0?(e.nodes[0]=[e.nodes[1],e.nodes[1]=e.nodes[0]][0],e.nodes[2]="true"):e.nodes[2]>0&&(e.nodes[2]="true"),e.id=a(e),void u.push(e)):void(doLog()&&log("WARNING: ignoring bad link [nodes=%s, %s]",t,n))}),n.maxNodeDepth(p+n._appendixLevel).nodeDepth(p).links(u).nodes(s),n},function(){var t=[];e.linkwidths&&e.linkwidths.split(/\s*,\s*/).forEach(function(e){t.push(parseInt(e))}),n="hierarchy"===e.mode?i(n,e):a(n,e),n.initFromConfig(e.links,e.nodes).nodeDepth(e.depth).tension(e.tension).duration(e.duration).isData(e.data).isLinkData(e.linkdata).isNodeData(e.nodedata).isBundled(e.bundle).isEffects(e.effects).isArrows(e.arrows).isLinkAnimate(e.linkanimate).isNodeCollapsible(e.nodecollapse).isZoomLinear(e.linearzoom).linkThresholds(e.linkThresholds).nodeThresholds(e.nodeThresholds).linkWidths(t.length?t:void 0).linkColors(e.linkColors).nodeColors(e.nodeColors).linkWidthOrder(e.linkwidthorder)}(),n}},{"./ChordGraphWidget":59,"./GraphLib":60,"./HierarchyGraphWidget":61}],59:[function(e,t,n){var r=e("./GraphLib"),a=e("./AbstractGraphWidget");t.exports=function(e,t){function n(e){var t;for(t in e)e.hasOwnProperty(t)&&"alertStyle"!==t&&(this[t]=e[t]);this.GrUID=r.graphUID(),this.seriesMap={},this.linkAlertStyle=e.alertStyle,this.isOriented="true"==e.nodes[2]}function i(e){return p.indexOf(e.source)>0&&p.indexOf(e.target)>0}function o(e,t){return e.depth&&!t.depth?1:!e.depth&&t.depth?-1:0}function l(e){return I&&e?e.label?e.label:e.id:null}function s(e){return M&&e?e.label?e.label:e.id:null}function u(e){var t;t=e?e:y.selectAll(".axi-graph-node"),t=t.filter(".axi-graph-node").filter(function(e){return e.seriesData&&null!=r.nodeSeriesValue(e.seriesData)}),t.select(".axi-graph-node-style").each(function(e){var t=d3.select(this);e.class=t.attr("class"),e.style=t.attr("style")}),c(t.data())}function c(e){var t=m.calcNodeThresholds(),n=x.selectAll(".axi-graph-node-highlight").data(e,r.nodeId),a=n.enter().insert("g",":first-child").classed("axi-graph-node-highlight",!0);a.append("circle"),a.append("circle").attr("r",A+2),n.exit().remove(),n.transition().duration(m.currentDuration()).selectAll("circle").attr("cx",U.markerX).attr("cy",U.markerY),n.select("circle").attr("r",function(e){for(var n=0,a=r.nodeSeriesValue(e.seriesData);t.length>n&&a>=t[n];)++n;return D[n]}).attr("style",function(e){return e.style}).attr("class",function(e){return e.class})}function d(){(m.isNodeData()||I)&&R.forEach(U.showDatatip),U==H&&T&&r.alterVerticalPadding(R,y),(M||m.isLinkData())&&W.forEach(U.showLinkDatatip)}var f,p,h,g,v,m=e?e:a(),y=null,x=null,b={},_={},w={},k=!0,T=!0,S=!0,E=!0,M=!1,I=!1,C=!0,A=5,D=[A],O=0,P=0,L=d3.svg.arc(),N=d3.layout.bundle(),F=d3.layout.partition().sort(null).value(function(){return 1}),V=d3.svg.line.radial().interpolate("bundle"),z=d3.svg.line.radial().interpolate("bundle"),R=[],W=[];n.prototype.addSeries=function(e,t){this.seriesData||(this.seriesData=e),this.seriesMap[t]=e};var j=function(){function e(e){return Y=[],e.forEach(function(e){var t=b[e.nodes[0]],r=b[e.nodes[1]],a=new n(e);t.incidents||(t.incidents=[]),r.incidents||(r.incidents=[]),t.incidents.push(r),r.incidents.push(t),a.source=t,a.target=r,Y.push(a)}),Y}function t(e,t,n,r,a,i){var o=m.graphScale();return[Math.round(e[0]*o+i.width/2+t-r/2),Math.round(e[1]*o+i.height/2+n-a/2)]}function a(e,t,n,r,a,i){var o=e[0]>0?0:0==e[0]?.5:1,l=e[1]>0?0:0==e[1]?.5:1,s=m.graphScale(),u=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return t+=e[0]/u*(A+2)*s,n+=e[1]/u*(A+2)*s,[Math.round(e[0]*s+i.width/2+t-r*o),Math.round(e[1]*s+i.height/2+n-a*l)]}function u(e){var t,n=e[e.length-1].id+r.SEP+e[0].id;return w[n]&&(t=w[n][0])&&t.id<e.id?z(e):V(e)}function c(e){return e/r.CIRCLE*2*Math.PI}function d(e){return e.unseenY?e.unseenY:Math.pow(e.depth/m.maxNodeDepth(),.5)*Z}function h(e){return c(e.x+e.dx/2)}function _(e){e.classed("axi-graph-link",!0).classed("axi-graph-isOriented",function(e){return e.isOriented}).on("mousemove",function(e){v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)}),e.append("path"),e.append("path").classed("axi-graph-link-highlight",!0),m.isArrows()&&e.filter(".axi-graph-isOriented"),e.classed(g),e.each(function(e){e.tip=e.clink.tip=Tooltip().animationDuration(0).alignNode(y.select(".axi-graph-node-circle").node()).format(function(e){return[s(e),m.isLinkData()?r.seriesInfo(e,r.linkSeriesValue):null]}).translate(t),e.tip(f),e.tip.linkEl=this.firstChild,W.push(e.tip),e.tip.el().on("mousemove",function(){v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)}),e.seriesData&&e.tip.el().classed("axi-graph-ts-"+e.seriesData.graphNum,!0)})}function k(e){e.classed("axi-graph-node",!0).on("mouseover",function(e){var t={};t[e.GrUID]=!0,e.incidents&&e.incidents.forEach(function(e){t[e.GrUID]=!0}),X.classed("axi-graph-target",function(e){return t[e.GrUID]})}).on("mouseout",function(){X.classed("axi-graph-target",!1),v.visible(!1)}).on("mousemove",function(e){v.record(e,e.seriesData).showAt()}),e.append("circle").attr("r",A+"px").attr("cx","0").attr("cy","0"),e.append("circle").attr("cx","0").attr("cy","0").attr("r",A+"px").classed("axi-graph-node-style",!0),e.classed(g),e.each(function(e){e.tip=Tooltip().animationDuration(0).alignNode(y.select(".axi-graph-node-circle").node()).format(function(e){return[l(e),m.isNodeData()?r.seriesInfo(e,r.nodeSeriesValue):null]}).translate(a),e.tip(f),R.push(e.tip),e.tip.graphNode=e,e.tip.el().on("mousemove",function(){v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)}),e.seriesData&&e.tip.el().classed("axi-graph-ts-"+e.seriesData.graphNum,!0)})}function M(e){e.classed("axi-graph-arc",!0).classed(g).style("fill",function(e){return e.color}).append("path").classed("axi-graph-node-style",!0).on("mousemove",function(e){v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)})}function I(e){var t=e.transition().duration(m.currentDuration());return t.select("path").attr("d",u),t.select(".axi-graph-link-highlight").attr("d",u),e.each(function(e){e.tip&&(e.tip.record(null).showAt(),e.tip.record(e),setTimeout(function(){H(e.tip)},100+m.currentDuration()))}),t}function C(e){var t=e.transition().duration(m.currentDuration());return t.selectAll("circle").attr("cx",q).attr("cy",G),e.each(function(e){e.tip&&(e.tip.record(null).showAt(),e.tip.record(e),j(e.tip))}),t}function D(e){var t=e.transition().duration(m.currentDuration());return t.select(".axi-graph-node-style").attr("d",L),t}function j(e){var t=m.graphScale(),n=q(e.graphNode),r=G(e.graphNode);e.showAt([n,r]),t<P&&e.visible(!1)}function U(e){var t=e.linkEl,n=t.getTotalLength();if(!T)return t.getPointAtLength(n/2);var a=d3.select(t).data()[0],i=a.source.id,o=a.target.id,l=w[i+r.SEP+o],s=w[o+r.SEP+i],u=l.length+(s?s.length:0),c=0;return l.forEach(function(e,t){e.GrUID===a.GrUID&&(c=t)}),t.getPointAtLength(n*(1+c)/(u+1))}function H(e){var t=U(e),n=m.graphScale();e.showAt([t.x,t.y]),n<O&&e.visible(!1)}function q(e){return Z*Math.sin(Math.PI-c(e.x+e.dx/2))}function G(e){return Z*Math.cos(Math.PI-c(e.x+e.dx/2))}function K(){function e(e,t,n){var r=e.x+e.dx/2,a=t.x+t.dx/2,i=n.x+n.dx/2;return r>=a&&a>=i||r<=a&&a<=i}if(Z=Math.min(m.width()-2*m.padding()[0],m.height()-2*m.padding()[1])/2-A-1,Z<=0)return null;F.size([r.CIRCLE,Z]),p=F.nodes($);var t,n;if(m.isBundled()){var a=Y.filter(i);t=N(a),t.forEach(function(e,t){var r=a[t];for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);e.clink=r})}else t=[],Y.filter(i).forEach(function(e){var r=[e.source,$,e.target];for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.clink=e,t.push(r)});return m.isBundled()&&t.forEach(function(t){for(var n=1;n<t.length-1;++n)t[n-1].parent&&t[n].parent&&t[n+1].parent&&t[n-1].parent==t[n+1].parent&&!e(t[n-1],t[n],t[n+1])&&(t[n]={x:.5*(t[n-1].x+t[n+1].x),dx:.5*(t[n-1].dx+t[n+1].dx),depth:t[n].depth})}),{nodes:p.filter(function(e){return!e.hasOwnProperty("children")}),arcs:p.filter(function(e){return e.depth==m.maxNodeDepth()-1&&e.children&&e.children.length>1&&e.parent}),links:t}}function B(){if(!m.rendered())return x.insert("circle",":first-child").classed("axi-graph-node-circle",!0),m;var e=K();if(!e)return null;if(X=x.selectAll(".axi-graph-node").data(e.nodes,r.nodeId),X.exit().remove(),Q=x.selectAll(".axi-graph-arc").data(e.arcs,r.nodeId),Q.exit().remove(),!g){g={};var t;m.series.forEach(function(e){t="axi-graph-ts-"+e.graphNum,g[t]=function(t){return t.seriesData==e}})}if(J=x.selectAll(".axi-graph-link").data(e.links,r.bundleLinkId),J.exit().remove(),S&&Q.enter().append("g").call(M),J.enter().append("g").call(_),X.enter().append("g").call(k),y.attr("viewBox",Math.round(-m.width()/2)+" "+Math.round(-m.height()/2)+" "+m.width()+" "+m.height()),ee!=E){if(E)m.setDefaultTransform([0,0],1);else{var n=X.data().map(G).reduce(function(e,t){return[Math.min(e[0],t),Math.max(e[1],t)]},[1/0,-(1/0)]);m.setDefaultTransform([0,-(n[0]+n[1])/2],1)}ee=E}return L.innerRadius(function(e){return d(e.children[0])-2}).outerRadius(function(e){return d(e.children[0])+2}).startAngle(function(e){var t=e.children[0];return c(t.x+t.dx/2)}).endAngle(function(e){var t=e.children[e.children.length-1];return c(t.x+t.dx/2)}),x.select(".axi-graph-node-circle").style("opacity",E?1:0).transition().duration(m.currentDuration()).attr("r",Z),V.tension(m.tension()).radius(d).angle(h),z.tension(Math.max(m.tension()-.1,0)).radius(d).angle(h),m.minArcWidth=2*Z*Math.PI/2/X.size(),Q.call(D),J.call(I),X.call(C),m.linkStyled(J),m.nodeStyled(),y.selectAll(".axi-graph-node, .axi-graph-link").sort(o),m.sortLinks(),m.series.forEach(function(e){e.graphEl=m.el().selectAll(".axi-graph-ts-"+e.graphNum)}),m.fire("render"),m}var $,Y,Z,X,J,Q,ee=null;return{renderWidget:B,showDatatip:j,showLinkDatatip:H,markerX:q,markerY:G,setNodesTree:function(e){$=e},setLinks:e}}(),U=j,H=function(){function e(e){return J=[],e.forEach(function(e){var t=b[e.nodes[0]],r=b[e.nodes[1]],a=new n(e);t.incidents||(t.incidents=[]),r.incidents||(r.incidents=[]),t.incidents.push(r),r.incidents.push(t),a.source=t,a.target=r,J.push(a)}),J}function t(e,t,n,r,a,i){var o=m.graphScale();return[Math.round(e[0]*o+i.width/2+t-r/2),Math.round(e[1]*o+i.height/2+n-a/2)]}function a(e,t,n,a,i,o){var l=.5,s=.5,u=m.graphScale(),c=te/2,d=-c,f=ee/2,p=-f;return r.floatEq(e[1],d)&&(s=1,n-=(A+1)*u+2),r.floatEq(e[1],c)&&(s=0,n+=(A+1)*u+2),r.floatEq(e[0],p)&&(l=1,t-=(A+1)*u+2),r.floatEq(e[0],f)&&(l=0,t+=(A+1)*u+2),1!=l&&0!=l||(h=Math.max(a,h)),[Math.round(e[0]*u+o.width/2+t-a*l)-1,Math.round(e[1]*u+o.height/2+n-i*s)-1]}function u(e){var t,n,a=e/r.CIRCLE*2*(ee+te)+ee/2;return a<ee?(t=te/2,n=a-ee/2):a<ee+te?(a-=ee,t=te/2-a,n=ee/2):a<2*ee+te?(a-=ee+te,t=-te/2,n=ee/2-a):a<2*ee+2*te?(a-=2*ee+te,t=a-te/2,n=-ee/2):(a-=2*ee+2*te,t=te/2,n=a-ee/2),n>=0?Math.acos(t/Math.sqrt(t*t+n*n)):2*Math.PI-Math.acos(t/Math.sqrt(t*t+n*n))}function c(e){var t=e.unseenY?e.unseenY:Math.pow(e.depth/m.maxNodeDepth(),.5)*Q;if(0==t)return 0;var n=d(e),r=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n)),i=ee/Q*t/2,o=te/Q*t/2;return Math.min(i/r,o/a)}function d(e){return u(e.x+e.dx/2)}function _(e){function t(e,t){l=[2*t*(r.floatEq(e[0],ee/2)-r.floatEq(e[0],-ee/2)),2*t*(r.floatEq(e[1],te/2)-r.floatEq(e[1],-te/2))],u.push([e[0]+l[0],e[1]+l[1]])}function n(e,t){return r.floatEq(Math.abs(e[0]),ee/2)&&r.floatEq(Math.abs(t[0]),ee/2)&&e[0]*t[0]<0&&!r.floatEq(Math.abs(e[1]),te/2)||r.floatEq(Math.abs(e[1]),te/2)&&r.floatEq(Math.abs(t[1]),te/2)&&e[1]*t[1]<0&&!r.floatEq(Math.abs(e[0]),ee/2)}function a(e){return r.floatEq(e[0],-ee/2)?(e=[-ee/2,-te/2],s.push(e)):r.floatEq(e[1],te/2)?(e=[-ee/2,te/2],s.push(e)):r.floatEq(e[0],ee/2)?(e=[ee/2,te/2],s.push(e)):r.floatEq(e[1],-te/2)&&(e=[ee/2,-te/2],s.push(e)),e}for(var i,o,l,s=[],u=[],c=e.children[0],d=H(c),f=0;f<e.children.length&&(i=c,o=d,s.push(o),!(f+1>=e.children.length));++f)c=e.children[f+1],d=H(c),n(o,d)&&(o=a(o)),o[0]!=d[0]&&o[1]!=d[1]&&a(o);return s.forEach(function(e){t(e,1)}),s.reverse().forEach(function(e){t(e,-1)}),"M"+u.join("L")}function M(e){var t,n=e[e.length-1].id+r.SEP+e[0].id;return w[n]&&(t=w[n][0])&&t.id<e.id?z(e):V(e)}function I(e){e.classed("axi-graph-link",!0).classed("axi-graph-isOriented",function(e){return e.isOriented}).on("mousemove",function(e){var t=d3.select(this).child();"none"!=t.style("display")&&"0"!=t.style("opacity")&&"hidden"!=t.style("visibility")&&v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)}),e.append("path"),e.append("path").classed("axi-graph-link-highlight",!0),m.isArrows()&&e.filter(".axi-graph-isOriented"),e.classed(g),e.each(function(e){e.tip=e.clink.tip=Tooltip().animationDuration(0).alignNode(y.select(".axi-graph-node-circle").node()).format(function(e){return[s(e),m.isLinkData()?r.seriesInfo(e,r.linkSeriesValue):null]}).translate(t),e.tip(f),e.tip.linkEl=this.firstChild,W.push(e.tip),e.tip.el().on("mousemove",function(){v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)}),e.seriesData&&e.tip.el().classed("axi-graph-ts-"+e.seriesData.graphNum,!0)})}function C(e){e.classed("axi-graph-node",!0).on("mouseover",function(e){var t={};t[e.GrUID]=!0,e.incidents&&e.incidents.forEach(function(e){t[e.GrUID]=!0}),ne.classed("axi-graph-target",function(e){return t[e.GrUID]})}).on("mouseout",function(){ne.classed("axi-graph-target",!1),v.visible(!1)}).on("mousemove",function(e){v.record(e,e.seriesData).showAt()}),e.append("circle").attr("r",A+"px").attr("cx","0").attr("cy","0"),e.append("circle").attr("cx","0").attr("cy","0").attr("r",A+"px").classed("axi-graph-node-style",!0),e.classed(g),e.each(function(e){e.tip=Tooltip().animationDuration(0).alignNode(y.select(".axi-graph-node-circle").node()).format(function(e){return[l(e),m.isNodeData()?r.seriesInfo(e,r.nodeSeriesValue):null]}).translate(a),e.tip(f),R.push(e.tip),e.tip.graphNode=e,e.tip.el().on("mousemove",function(){v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)}),e.seriesData&&e.tip.el().classed("axi-graph-ts-"+e.seriesData.graphNum,!0)})}function D(e){e.classed("axi-graph-arc",!0).classed(g).style("fill",function(e){return e.color}).append("path").classed("axi-graph-node-style",!0).on("mousemove",function(e){v.record(e,e.seriesData).showAt()}).on("mouseout",function(){v.visible(!1)})}function L(e){var t=e.transition().duration(m.currentDuration());return t.select("path").attr("d",M),t.select(".axi-graph-link-highlight").attr("d",M),e.each(function(e){e.tip&&(e.tip.record(null).showAt(),e.tip.record(e),setTimeout(function(){$(e.tip)},100+m.currentDuration()))}),t}function j(e){var t=e.transition().duration(m.currentDuration());return t.selectAll("circle").attr("cx",q).attr("cy",G),e.each(function(e){e.tip&&(e.tip.record(null).showAt(),e.tip.record(e),K(e.tip))}),t}function U(e){var t=e.transition().duration(m.currentDuration());return t.select(".axi-graph-node-style").attr("d",_),t}function H(e){var t=c(e)*Math.sin(Math.PI-u(e.x+e.dx/2)),n=c(e)*Math.cos(Math.PI-u(e.x+e.dx/2)),r=Math.min(ee/2/Math.abs(t),te/2/Math.abs(n));return[t*r,n*r]}function q(e){var t=c(e)*Math.sin(Math.PI-u(e.x+e.dx/2)),n=c(e)*Math.cos(Math.PI-u(e.x+e.dx/2)),r=ee/2/Math.abs(t),a=te/2/Math.abs(n);return t*Math.min(a,r)}function G(e){var t=c(e)*Math.sin(Math.PI-u(e.x+e.dx/2)),n=c(e)*Math.cos(Math.PI-u(e.x+e.dx/2)),r=ee/2/Math.abs(t),a=te/2/Math.abs(n);return n*Math.min(a,r)}function K(e){var t=m.graphScale();e.showAt(H(e.graphNode)),t<P&&e.visible(!1)}function B(e){var t=e.linkEl,n=t.getTotalLength();if(!T)return t.getPointAtLength(n/2);var a=d3.select(t).data()[0],i=a.source.id,o=a.target.id,l=w[i+r.SEP+o],s=w[o+r.SEP+i],u=l.length+(s?s.length:0),c=0;return l.forEach(function(e,t){e.GrUID===a.GrUID&&(c=t)}),t.getPointAtLength(n*(1+c)/(u+1))}function $(e){var t=B(e),n=m.graphScale();e.showAt([t.x,t.y]),n<O&&e.visible(!1)}function Y(){function e(e,t,n){var r=e.x+e.dx/2,a=t.x+t.dx/2,i=n.x+n.dx/2;return r>=a&&a>=i||r<=a&&a<=i}if(Q=Math.min(m.width()-2*m.padding()[0],m.height()-2*m.padding()[1])/2-A-1,ee=m.width()-2*A-2*m.padding()[0],te=m.height()-2*A-2*m.padding()[1],Q<=0)return null;F.size([r.CIRCLE,Q]),p=F.nodes(X);var t,n;if(m.isBundled()){var a=J.filter(i);t=N(a),t.forEach(function(e,t){var r=a[t];for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);e.clink=r})}else t=[],J.filter(i).forEach(function(e){var r=[e.source,X,e.target];for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.clink=e,t.push(r)});return m.isBundled()&&t.forEach(function(t){for(var n=1;n<t.length-1;++n)t[n-1].parent&&t[n].parent&&t[n+1].parent&&t[n-1].parent==t[n+1].parent&&!e(t[n-1],t[n],t[n+1])&&(t[n]={x:.5*(t[n-1].x+t[n+1].x),dx:.5*(t[n-1].dx+t[n+1].dx),depth:t[n].depth})}),{links:t,nodes:p.filter(function(e){return!e.hasOwnProperty("children")}),arcs:p.filter(function(e){return e.depth==m.maxNodeDepth()-1&&e.children&&e.children.length>1&&e.parent})}}function Z(e){if(!m.rendered())return x.insert("rect",":first-child").classed("axi-graph-node-circle",!0),m;var t=Y();if(!t)return null;if(ne=x.selectAll(".axi-graph-node").data(t.nodes,r.nodeId),ne.exit().remove(),ae=x.selectAll(".axi-graph-arc").data(t.arcs,r.nodeId),ae.exit().remove(),!g){g={};var n;m.series.forEach(function(e){n="axi-graph-ts-"+e.graphNum,g[n]=function(t){return t.seriesData==e}})}if(re=x.selectAll(".axi-graph-link").data(t.links,r.bundleLinkId),re.exit().remove(),h=0,S&&ae.enter().append("g").call(D),re.enter().append("g").call(I),ne.enter().append("g").call(C),y.attr("viewBox",Math.round(-m.width()/2)+" "+Math.round(-m.height()/2)+" "+m.width()+" "+m.height()),ie!=E){if(E)m.setDefaultTransform([0,0],1);else{var a=ne.data().map(G).reduce(function(e,t){return[Math.min(e[0],t),Math.max(e[1],t)]},[1/0,-(1/0)]);m.setDefaultTransform([0,-(a[0]+a[1])/2],1)}ie=E}return x.select(".axi-graph-node-circle").style("opacity",E?1:0).transition().duration(m.currentDuration()).attr("y",-te/2).attr("x",-ee/2).attr("width",ee).attr("height",te),V.tension(m.tension()).radius(c).angle(d),z.tension(Math.max(m.tension()-.1,0)).radius(c).angle(d),m.minArcWidth=2*Q*Math.PI/2/ne.size(),ae.call(U),re.call(L),ne.call(j),!e&&k?(m.padding()[0]=Math.max(m.padding()[0],h+r.STD_OFFSET),Z(!0),m):(m.linkStyled(re),m.nodeStyled(),T&&r.alterVerticalPadding(R,y),y.selectAll(".axi-graph-node, .axi-graph-link").sort(o),m.sortLinks(),m.series.forEach(function(e){e.graphEl=m.el().selectAll(".axi-graph-ts-"+e.graphNum)}),void m.fire("render"))}var X,J,Q,ee,te,ne,re,ae,ie=null;return{renderWidget:Z,markerX:q,markerY:G,showDatatip:K,showLinkDatatip:$,setNodesTree:function(e){X=e},setLinks:e}}(),q=function(){function e(e){return function(t){return arguments.length?void(e=t):e}}function n(){m.isNodeData(!m.isNodeData()),U.renderWidget()}function a(){m.isLinkData(!m.isLinkData()),U.renderWidget()}function i(e){e.button||(e.button=d3.event.target.parentNode),e.alignNode(e.button).showAt(r.SLIDER_POSITION)}function o(e){e.isUsed()?setTimeout(function(){o(e)},r.TOOLTIP_DELAY):e.visible(!1)}function l(){m.isBundled(!m.isBundled()),U.renderWidget()}function s(){m.isEffects(!m.isEffects())}function u(){E=!E,U.renderWidget()}function c(){m.isLinkAnimate(!m.isLinkAnimate()),U.renderWidget()}function d(){M=!M,U.renderWidget()}function f(){I=!I,U.renderWidget()}function p(){function e(){return m.height()<m.width()+r.TEXT_HEIGHT&&U==j&&m.padding()[1]<r.TEXT_HEIGHT}function p(e,t){e.onItemAdd(function(e){e.data.isOn&&e.data.isOn()&&e.state("selected")}).data(t).on("itemclick",function(e){e.data.action&&e.data.action(e),e.data.isOn&&e.state(e.data.isOn()?"selected":null)}).renderTo(y)}if(m.rendered()){var w=.5*Math.min(m.height(),m.width()),k=.5*m.width(),T=Math.max(0,m.width()-m.height())/2;g.outerWidth(e()?.7*w+T:m.width()).outerHeight(24).translate(function(e){e[0]=-k,e[1]=-.5*m.height()+1}).redraw(),v.outerWidth(e()?.6*w+T:m.width()).outerHeight(24).translate(function(e){e[0]=-k,e[1]=-.5*m.height()+1+r.TEXT_HEIGHT}).redraw(),x.outerWidth(e()?.7*w+T:m.width()).outerHeight(24).translate(function(e,t){e[0]=k-t+9,e[1]=-.5*m.height()+1}).redraw(),b.outerWidth(e()?.7*w+T:m.width()).outerHeight(24).translate(function(e,t){e[0]=k-t+9,e[1]=-.5*m.height()+1+r.TEXT_HEIGHT}).redraw(),_.visible()&&_.alignNode(_.button).showAt(r.SLIDER_POSITION)}else p(g,["+",{title:"node-data",action:n,isOn:m.isNodeData},{title:"node-labels",action:f,isOn:function(){return I}},{title:"node-connect",action:u,isOn:function(){return E}}]),g.on("expandend",function(){g.index(1),x.index(0),g.redraw(),x.redraw()}),p(v,["+",{title:"link-data",action:a,isOn:m.isLinkData},{title:"link-labels",action:d,isOn:function(){return M}},{title:"link-animate",action:c,isOn:m.isLinkAnimate}]),v.on("expandend",function(){v.index(1),b.index(0),v.redraw(),b.redraw()}),p(x,[{action:function(){t.layout="circle",m.switchChordMode()},title:"chord-circle",isOn:d3.functor(U==j)},{action:function(){t.layout="rectangle",m.switchChordMode()},title:"chord-rectangle",isOn:d3.functor(U==H)},{action:m.toggleMode,title:"hierarchy",isOn:d3.functor(!1)},"+"]),x.on("expandend",function(){x.index(1),g.index(0),x.redraw(),g.redraw()}),p(b,[{title:"tension"},{action:l,title:"bundle",isOn:m.isBundled},{action:s,title:"effects",isOn:m.isEffects},"+"]),b.on("expandend",function(){b.index(1),v.index(0),b.redraw(),v.redraw()}),b[0].el.on("mousemove",function(){i(_)}).on("mouseout",function(){o(_)}),g.margin()[1]=function(){return g.index()<=x.index()&&!e()?x.totalWidth():0},x.margin()[3]=function(){return g.index()>x.index()&&!e()?g.totalWidth():0},v.margin()[1]=function(){return v.index()<=b.index()&&!e()?b.totalWidth():0},b.margin()[3]=function(){return v.index()>b.index()&&!e()?v.totalWidth():0},_.on("render",h),_(m.el()).el().style("z-index",getZIndex(y.node())+30),m.setPanelsHideBehavior([g,x,v,b])}function h(){var e=_.innerEl().append("table"),t=e.append("tr"),n=Scroller(t.append("td").append("div"),100,100)(Math.floor(100*m.tension())).on("move",function(e){m.tension(.01*e),r.text(Math.round(e)+"%"),m.redraw()}),r=t.append("td").append("div").text(Math.round(100*m.tension())+"%");_.isUsed=n.dragging,e.on("mousemove",function(){i(_)}).on("mouseout",function(){o(_)})}var g=Panel(),v=Panel(),x=Panel(),b=Panel(),_=Tooltip().hideDelay(r.TOOLTIP_DELAY);return g.index=e(1),x.index=e(0),v.index=e(1),b.index=e(0),{renderControls:p}}(),G=function(){var e=d3.map(),t=function(t,n){var a=t.params.alias||r.graphUID(),i=!1;return t.graphNum=n,e.set(a,t),t.params.nodes&&(t.params.batchGroup||(t.params.batchGroup="node"),t.params.nodes.forEach(function(e){var n;(n=b[e])?(n.seriesData=t,n.parent.parent||(i=!0),n.seriesMap[a]=t):doLog()&&log("WARNING: series [alias=%s] refer to non existing node [id=%s]",a,e)})),t.params.links&&(t.params.batchGroup||(t.params.batchGroup="link"),t.params.links.forEach(function(e){var n,i;"string"==typeof e?(n=e,(i=_[n])?i.addSeries(t,a):doLog()&&log("WARNING: series [alias=%s] refer to non existing link [id=%s]",a,n)):e[2]>=0&&(i=w[e[0]+r.SEP+e[1]])&&i[0]?i[0].addSeries(t,a):e[2]<=0&&(i=w[e[1]+r.SEP+e[0]])&&i[0]?i[0].addSeries(t,a):doLog()&&log("WARNING: series [alias=%s] refer to non existing link [nodes=[%s,%s]]",a,e[0],e[1])})),i},n=function(t){var r,a=!1;return t.series&&t.series.forEach(function(n,i){(r=e.get(n))?(r.params.batchGroup||(r.params.batchGroup="node"),0===i&&(t.seriesData=r),t.seriesMap[n]=r,t.parent.parent||(a=!0)):doLog()&&log("WARNING: link %s refer to non existing series %s",t.id,t.series)}),t.children&&t.children.forEach(n),a},a=function(t){var n;t.series&&t.series.forEach(function(r){(n=e.get(r))?(n.params.batchGroup||(n.params.batchGroup="link"),t.addSeries(n,r)):doLog()&&log("WARNING: link %s refer to non existing series %s",t.id,t.series)})};return{validateSeries:t,applySeriesToNodes:n,applySeriesToLinks:a}}();return function(){var e=m.nodeStyled;m.nodeStyled=function(){e.apply(this,arguments),u.apply(this,arguments)}}(),m.createMarkerArrow=function(e,t){var n=m.markerArrowId(e,t);return y.select(".axi-graph-arrows").append("marker").attr("id",n).classed("axi-graph-marker-arrow",!0).attr("markerWidth",10+A).attr("markerHeight",Math.max(10,2*t)).attr("refX",A).attr("refY","0").attr("viewBox","-10 -"+t+" "+(10+A)+" "+2*t).attr("orient","auto").attr("markerUnits","userSpaceOnUse").append("g").classed("axi-graph-marker-resize",!0).attr("transform","scale("+1/m.zoom().scale()+")").append("path").attr("d","M 0,0 L -10,-"+t+" L -10,"+t+" z").style("fill",e),"#"+n},m.init=function(){function e(t){b[t.id]=t,t.children&&t.children.forEach(e)}var t,n;y=m.el().select("svg"),f=m.el().append("div").classed("axi-graph-labels",!0),x=y.select(".axi-graph-resize"),v=m.tooltip(),t=m.getHierarchy(),U.setNodesTree(t),e(t),n=U.setLinks(m.links()),C||r.removeDisconnectedNodes(t),n.forEach(function(e){_[e.id]=e;var t=e.source.id+r.SEP+e.target.id;w[t]||(w[t]=[]),w[t].push(e)}),m.series.forEach(G.validateSeries),n.forEach(G.applySeriesToLinks),G.applySeriesToNodes(t);for(var a=r.thresholdsNumber(m.nodeThresholds());D.length<a+1;)D.push(D[D.length-1]);return U.renderWidget(),q.renderControls(),m.zoom().on("zoom.label",d),y.on("dblclick.zoom.labels",d),m},m.redraw=function(){return m.rendered()?null===U.renderWidget()?m:(q.renderControls(),m.series.forEach(function(e){e.graphEl.empty()||onSeriesClick(e,m,e.graphEl)}),m):m},m.isCircle=function(e){return arguments.length?(void 0!=e&&(E=e),m):E},m.isArcs=function(e){return arguments.length?(void 0!=e&&(S=e),m):S},m.nodeRadius=function(e){return arguments.length?(void 0!=e&&(A=e,D=[e]),m):A},m.nodeThresholdRadiuses=function(e){return arguments.length?(void 0!=e&&(D=e),m):D},m.layout=function(e){return"circle"==e?U=j:"rectangle"==e&&(U=H),m},m.isLinkLabels=function(e){return arguments.length?(void 0!=e&&(M=e),m):M},m.isNodeLabels=function(e){return arguments.length?(void 0!=e&&(I=e),m):I},m.isDisconnectedNodeDisplay=function(e){return arguments.length?(void 0!=e&&(C=e),m):I},m.linkLabelZoomThreshold=function(e){return arguments.length?(void 0!=e&&(O=e),m):O},m.nodeLabelZoomThreshold=function(e){return arguments.length?(void 0!=e&&(P=e),m):P},m.isAutoPadding=function(e){return arguments.length?(void 0!=e&&(k=e),m):k},m.mode=function(){return"chord"},m.getSliderRange=function(e){if("tension"==e)return[.01,.99]},m.sliderValue=function(e,t){if("tension"==e){if(arguments.length<2)return m.tension();m.tension(t),U.renderWidget()}},function(){var e=[];t.noderadiuses&&t.noderadiuses.split(/\s*,\s*/).forEach(function(t){e.push(parseInt(t))}),m.isCircle(t.nodeconnect).nodeRadius(t.noderadius).nodeThresholdRadiuses(e.length?e:void 0).isArcs(t.arcs).layout(t.layout).isLinkLabels(t.linklabels).isNodeLabels(t.nodelabels).isDisconnectedNodeDisplay(t.disconnectednodedisplay).linkLabelZoomThreshold(t.linklabelzoomthreshold).nodeLabelZoomThreshold(t.nodelabelzoomthreshold).padding(t.padding&&t.padding.split(",").forEach(parseInt)).isAutoPadding(t.autopadding)}(),m}},{"./AbstractGraphWidget":58,"./GraphLib":60}],60:[function(e,t,n){var r,a=1e7;n.CIRCLE=360,n.STD_OFFSET=4,n.TEXT_HEIGHT=16,n.SLIDER_POSITION=[-70,0],n.TOOLTIP_DELAY=250,n.CONTROLS_DELAY=3e3,n.SEP="-",n.NON_WORD_PATTERN=/[^A-Za-z0-9]/g,n.TIME_FORMAT=getDefaultTimeFormat({isUTC:!1}),n.getCfgFunction=function(e,t,n){function r(){for(var e=0;e<c.length;e++)try{var n=c[e].apply(this,arguments),r=typeof n;if(!i||"undefined"!==r&&"function"!==r&&("object"!==r||n==t||null==n))return n}catch(e){}}if(!(t=[].concat(t).filter(function(e){return null!=e})).length)return null;var a="styles"==n,i="label"==n,o="script"==n,l=a&&t.join(";"),s=a&&/^(\s*\w+\s*:\s*[+.\w-]+\s*(;|$))+$/i.test(l),u=t.join("\n")||'""',c=[];if(!s){if(!o)try{c.push(Function(e,"return ("+u+");"))}catch(e){}try{c.push(Function(e,u))}catch(e){}}return a?c.push(d3.functor(l)):i&&c.push(d3.functor(t)),r.body=u,c.length?r:null};var i=n.floatEq=function(e,t){return Math.abs(e-t)<.001};n.isNumber=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},n.removeDisconnectedNodes=function(e){function t(e){var n;if(e.children.length){e.childrenStash=[];for(var r=e.children.length,a=0;a<r;++a)n=e.children.pop(),t(n)?e.childrenStash.push(n):e.children.unshift(n);return 0===e.children.length}return!e.incidents||0===e.incidents.length}return t(e),e},n.alterVerticalPadding=function(e,t){function n(e,t){return i(t.top,e.top+e.offset)&&t.left<e.right}var r=t.select(".axi-graph-node-circle").node().getBoundingClientRect(),a=.5*(r.top+r.bottom),o=[];e.forEach(function(e){var t=e.el().node().getBoundingClientRect();o.push({tip:e,top:t.top<a?t.bottom:t.top,height:t.height,left:t.left,right:t.right})}),o.sort(function(e,t){return i(e.top,t.top)?e.left-t.left:e.top-t.top});var l,s=o[0];s.offset=0;for(var u=1;u<o.length;++u)l=s,s=o[u],n(l,s)?s.offset=s.top<a?-l.height:l.height:s.offset=0;o.forEach(function(e){var t=e.tip.el(),n=Number(t.style("top").slice(0,-2));t.style("top",n+e.offset+"px")})};var o=n.range=function(e,t){for(var n=[],r=0;r<e;++r)n.push(t(r));return n};n.graphUID=r=function(){return""+Math.floor(a*Math.random())},n.nodeId=function(e){return e.GrUID},n.bundleLinkId=function(e){return e.GrUID},n.nodeSeriesValue=function(e){var t=e.vars.values.nodeValue;if(t)return t;var n=e.mainParams.getLast();return n?n.v:null},n.linkSeriesValue=function(e){var t=e.vars.values.linkValue;if(t)return t;var n=e.mainParams.getLast();return n?n.v:null};var l=function(e){var t=e.mainParams.getLast();return t?t.v:null};n.seriesInfo=function(e,t){t||(t=l);var n=e&&e.seriesData;if(n){var r=t(n);return 0===r||r?n.mainParams.getFormat()(r):"N/A"}},n.isLink=function(e){return e instanceof Array},n.THRESHOLD_FUNTIONS="percentile,sum,avg,max,min",n.thresholdEvaluator=function(e,t){function n(e){return s[Math.quantile(e/100,s.length)]}function r(){var e=0;return s.forEach(function(t){e+=t}),e}function a(){return r()/s.length}function i(){return s[0]}function o(){return s[s.length-1]}t||(t=l);var s=[];return e.forEach(function(e){s.indexOf(e)<0&&s.push(e)}),s=s.map(function(e){return t(e)}).sort(function(e,t){return e-t}),s.length?function(e){return e(n,r,a,o,i)}:function(){return[]}},n.thresholdsNumber=function(){function e(){return 1}return function(t){return t.apply(this,o(t.length,function(){return e})).length}}(),n.selectOnly=function(e,t){for(var n=Math.floor((t.length-1)/(e-1)),r=(t.length-1)%(e-1),a=0,i=0,o=[];a<t.length;)o.push(t[a]),++i,i<=r&&++a,a+=n;return o},n.cloneCollection=function(){function e(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}return function(t){var n=[];return t.forEach(function(t){n.push(e(t))}),n}}(),n.CloneNode=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"children"!==t&&"parent"!==t&&"alertStyle"!==t&&(this[t]=e[t]);this.GrUID=r(),this.children=[],this.seriesMap={},this.nodeAlertStyle=e.alertStyle}},{}],61:[function(e,t,n){var r=e("./GraphLib"),a=e("./AbstractGraphWidget");t.exports=function(e,t){function n(e){var t;for(t in e)e.hasOwnProperty(t)&&"alertStyle"!==t&&(this[t]=e[t]);this.GrUID=r.graphUID(),this.seriesMap={},this.linkAlertStyle=e.alertStyle,this.isOriented="true"==e.nodes[2]}function i(e,t){e.children?e.children.push(t):e.children=[t]}function o(){(T||d.isLinkData())&&S.forEach(E.showLinkLabel)}var l,s,u,c,d=e?e:a(),f=null,p=null,h={},g={},v={},m={},y=.5,x=.3,b=d3.layout.bundle(),_=d3.layout.partition().sort(null).value(function(){return 1}),w=d3.svg.line.radial().interpolate("bundle").tension(d.tension()),k=d3.svg.arc(),T=!1,S=[];d._appendixLevel=1,n.prototype.addSeries=function(e,t){this.source.seriesData||(this.source.seriesData=e),this.source.seriesMap[t]=e,this.target.seriesData||(this.target.seriesData=e),this.target.seriesMap[t]=e,this.seriesData||(this.seriesData=e),this.seriesMap[t]=e};var E=function(){function e(e){return se=[],e.forEach(function(e){var t=h[e.nodes[0]],a=h[e.nodes[1]],o=new r.CloneNode(e),l=new r.CloneNode(e),s=new n(e);t.unseen&&(o.unseen=!0),a.unseen&&(l.unseen=!0),o.parent=t,l.parent=a,o.incident=l,l.incident=o,o.isOriented="true"==e.nodes[2],i(t,o),i(a,l),s.source=o,s.target=l,se.push(s)}),se}function t(e){var t={parent:e,id:e.id+"...",unseen:!0,GrUID:r.graphUID(),origin:e.children};return t.incident=t,t}function a(e){1==e.depth&&e.children.length&&(e.children[0].origin?e.children=e.children[0].origin:d.isNodeCollapsible()&&(e.children=[t(e)]),E.renderWidget())}function o(e,t){var n=e.getTotalLength();return function(){return function(r){var a=r<1?e.getPointAtLength(r*n):e.getPointAtLength(0);return"cx"==t?a.x:"cy"==t?a.y:void(doLog()&&log("marker error"))}}}function g(){var e=d3.select(this).select("path").node();d3.select(this).select("circle").attr("cx",0).attr("cy",0).transition().duration(d.currentDuration()).attrTween("cx",o(e,"cx")).attrTween("cy",o(e,"cy"))}function v(e){return s.indexOf(e.source)>0&&s.indexOf(e.target)>0}function M(e,t){return e.depth&&!t.depth?1:!e.depth&&t.depth?-1:0}function I(e){return T&&e?e.label?e.label:e.id:null}function C(e,t,n,r,a,i){var o=d.graphScale();return[Math.round(e[0]*o+i.width/2+t-r/2),Math.round(e[1]*o+i.height/2+n-a/2)]}function A(e){function t(e){r[e.GrUID]=!0,e.children&&e.children.forEach(t),e.incident&&n(e.incident),e.origin&&e.origin.forEach(t)}function n(e){r[e.GrUID]=!0,e.parent&&n(e.parent)}var r={};t(e),ce.classed("axi-graph-target",function(t){return r[t.GrUID]&&t.depth>=e.depth})}function D(){ce.classed("axi-graph-target",!1)}function O(e){var t=e.enter().append("g").classed("axi-graph-link",!0).classed("axi-graph-isOriented",function(e){return e[0].isOriented}).on("click",g).on("mousemove",function(e){c.record(e,e.seriesData).showAt()}).on("mouseout",function(){c.visible(!1)});t.append("path"),t.append("path").classed("axi-graph-link-highlight",!0),d.isArrows()&&t.filter(".axi-graph-isOriented").append("circle").attr("r","3px").classed("axi-graph-marker",!0),t.classed(u),t.each(function(e){var t=e[0];t.tip||(t.tip=Tooltip().animationDuration(0).alignNode(d.el().select(".axi-graph-resize").node()).format(function(e){return[I(e),d.isLinkData()?r.seriesInfo(e,r.linkSeriesValue):null]}).translate(C),t.tip(l),t.tip.linkEl=this.firstChild,S.push(t.tip),t.tip.el().on("mousemove",function(){c.record(t,t.seriesData).showAt()}).on("mouseout",function(){c.visible(!1)}),t.seriesData&&t.tip.el().classed("axi-graph-ts-"+t.seriesData.graphNum,!0))})}function P(e){var t=e.enter().append("g").attr("class",function(e){return 1==e.depth?"axi-graph-node axi-graph-out":"axi-graph-node axi-graph-in"}).attr("clip-path",function(e){return"url(#clip_"+r.nodeId(e)+")"}).classed("axi-graph-unseen",function(e){return e.unseen}).on("mouseover",A).on("mousemove",function(e){c.record(e,e.seriesData).showAt()}).on("mouseout",function(){c.visible(!1),D()});t.append("path").attr("id",function(e){return"arc_"+r.nodeId(e)}),t.append("path").classed("axi-graph-node-style",!0),t.append("clipPath").attr("id",function(e){return"clip_"+r.nodeId(e)}).append("path").classed("axi-graph-clipper",!0),t.filter(".axi-graph-node.axi-graph-out").append("text").classed("axi-graph-textPathName",!0).append("textPath").attr("xlink:href",function(e){return"#arc_"+r.nodeId(e)}).attr("text-anchor","middle"),t.filter(".axi-graph-node.axi-graph-out").append("text").classed("axi-graph-textPathInfo",!0).attr("dy","-18px").append("textPath").attr("xlink:href",function(e){return"#arc_"+r.nodeId(e)}).attr("text-anchor","middle"),t.filter(".axi-graph-node.axi-graph-in").append("text").attr("dy",".31em").attr("text-anchor","start").classed("axi-graph-info",!0),t.filter(".axi-graph-node.axi-graph-in").append("text").attr("dy",".31em").attr("text-anchor","start").classed("axi-graph-name",!0).text(function(e){return e.label?e.label:e.id}),t.classed(u)}function L(e){var t=e.transition().duration(d.currentDuration());return t.select("path").attr("d",w),t.select(".axi-graph-link-highlight").attr("d",w),t.select(".axi-graph-marker").attr("cx",Q).attr("cy",ee).attr("r",Math.min(3,d.minArcWidth/3)+"px"),e.each(function(e){var t=e[0];t.tip&&(t.tip.record(null).showAt(),t.tip.record(t),t.tip.linkEl=this.querySelector("path"),setTimeout(function(){N(t.tip)},100+d.currentDuration()))}),t}function N(e){var t=e.linkEl,n=t.getTotalLength(),r=t.getPointAtLength(n/2);e.showAt([r.x,r.y])}function F(e){var t=e.transition().duration(d.currentDuration());return t.select("path").attr("d",k),t.select(".axi-graph-node-style").attr("d",k),t.select(".axi-graph-clipper").attr("d",k),t.select(".axi-graph-textPathName").attr("dy",ne()).select(":first-child").attr("startOffset",te),t.select(".axi-graph-name").attr("transform",B).attr("text-anchor",$).attr("dx",Y),t.select(".axi-graph-info").attr("transform",B).attr("text-anchor",$).attr("dx",Z).style("display",function(){return d.isNodeData()?null:"none"}),t.select(".axi-graph-textPathInfo").attr("dy",re()).select(":first-child").attr("text-anchor","middle").attr("startOffset",te).text(function(e){return r.seriesInfo(e,r.nodeSeriesValue)}),setTimeout(function(){e.filter(".axi-graph-node.axi-graph-out").each(ae)},50),t}function V(){for(var e=0,t=2;t<=d.nodeDepth();t++)e+=fe[t];return e}function z(){return d.isNodeData()&&pe?2*r.TEXT_HEIGHT:r.TEXT_HEIGHT}function R(){return 1==d.nodeDepth()?0:V()>ue*y-z()?ue*y-z():V()<ue*x-z()?ue*x-z():V()}function W(e){return fe[e]?R()==V()?fe[e]:R()*fe[e]/V():0}function j(e){for(var t=0,n=2;n<e;n++)t+=W(n);return t}function U(){return ue-z()-R()}function H(e){return ue-e+U()}function q(e){return e/r.CIRCLE*2*Math.PI}function G(e){return e.unseenY?e.unseenY:Math.pow(e.depth/d.maxNodeDepth(),.5)*U()}function K(e){return q(e.x+e.dx/2)}function B(e){return e.x+e.dx/2>180?"rotate("+Math.round(e.x+e.dx/2+90)+")translate("+-H(e.y+e.dy)+")":"rotate("+Math.round(e.x+e.dx/2-90)+")translate("+H(e.y+e.dy)+")"}function $(e){return e.x+e.dx/2>180?"end":"start"}function Y(e){var t=d3.select(this.parentNode).select(".axi-graph-info").node().getComputedTextLength()+2*r.STD_OFFSET;return e.x+e.dx/2>180?d.isNodeData()?"-"+t+"px":"-"+r.STD_OFFSET+"px":d.isNodeData()?t+"px":r.STD_OFFSET+"px"}function Z(e){return e.x+e.dx/2>180?"-"+r.STD_OFFSET+"px":r.STD_OFFSET+"px"}function X(){var e=d3.select(this.parentNode).select(".axi-graph-info").node().getComputedTextLength()+2*r.STD_OFFSET,t=d3.select(this).data()[0].depth;fe[t]=Math.max(fe[t],d.isNodeData()?this.getComputedTextLength()+e+r.STD_OFFSET:this.getComputedTextLength()+2*r.STD_OFFSET)}function J(e){1==e.depth?(e.y=ue-z()-R(),e.dy=z()):(e.dy=W(e.depth),e.y=ue-R()+j(e.depth))}function Q(e){return G(e[0])*Math.sin(Math.PI-q(e[0].x+e[0].dx/2))}function ee(e){return G(e[0])*Math.cos(Math.PI-q(e[0].x+e[0].dx/2))}function te(e){return q(e.dx/2)*ue}function ne(){return r.TEXT_HEIGHT*(1+pe*d.isNodeData())-r.STD_OFFSET}function re(){return r.TEXT_HEIGHT*(pe*d.isNodeData())-r.STD_OFFSET}function ae(){var e=d3.select(this).select(".axi-graph-textPathName").node().firstChild,t=d3.select(this).data()[0];for(e.textContent=t.label||t.id;e.textContent.length>4&&e.getComputedTextLength()>q(t.dx)*(ue-z());)e.textContent=e.textContent.replace(/....$/,"...")}function ie(){function e(e,t,n){var r=e.x+e.dx/2,a=t.x+t.dx/2,i=n.x+n.dx/2;return r>=a&&a>=i||r<=a&&a<=i}function t(e,t,n){for(var r,a=t.id,i=t.seriesData,o=t.x,l=t.dx;t.unseen;)t.depth>d.nodeDepth()?t=t.parent:(r={x:o,dx:l,isOriented:e[0].isOriented,unseenY:H(t.y)},n>0?e.unshift(r):e.push(r),t=t.parent);r&&(r.id=a,r.seriesData=i)}function n(){s.forEach(J),a.forEach(function(e){var n=e[0],r=e[e.length-1];n.unseen&&t(e,n,1),r.unseen&&t(e,r,-1)}),d.minArcWidth=2*U()*Math.PI/2/a.length}if(ue=Math.floor(Math.min(d.width()-2*d.padding()[0],d.height()-2*d.padding()[1])/2),ue<=0)return null;fe=r.range(1+d.nodeDepth(),function(e){return e<2?0:r.STD_OFFSET}),_.size([r.CIRCLE,ue]),s=_.nodes(le);var a,i;return d.isBundled()?(a=b(se.filter(v)),a.forEach(function(e){var t=m[e[0].GrUID];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})):(a=[],se.filter(v).forEach(function(e){var t=[e.source,le,e.target];for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);a.push(t)})),d.isBundled()&&a.forEach(function(t){for(var n=1;n<t.length-1;++n)t[n-1].parent&&t[n].parent&&t[n+1].parent&&t[n-1].parent==t[n+1].parent&&!e(t[n-1],t[n],t[n+1])&&(t[n]={x:.5*(t[n-1].x+t[n+1].x),dx:.5*(t[n-1].dx+t[n+1].dx),depth:t[n].depth})}),{nodes:s.filter(function(e){return e.depth<=d.nodeDepth()&&0!=e.depth}),links:a,fixRadius:n}}function oe(){var e=ie();if(e){if(ce=p.selectAll(".axi-graph-node").data(e.nodes,r.nodeId),ce.exit().remove(),!u){u={};var t;d.series.forEach(function(e){t="axi-graph-ts-"+e.graphNum,u[t]=function(t){return t[0]?t[0].seriesData==e:t.seriesData==e}})}de=p.selectAll(".axi-graph-link").data(e.links,r.bundleLinkId),de.exit().each(function(e){var t=e[0];t.tip&&(t.tip.destroy(),delete t.tip)}).remove(),O(de),P(ce),d.rendered()&&(f.attr("viewBox",Math.round(-d.width()/2)+" "+Math.round(-d.height()/2)+" "+d.width()+" "+d.height()),w.tension(d.tension()).radius(G).angle(K),k.startAngle(function(e){return q(e.x+e.dx)}).endAngle(function(e){return q(e.x)}).innerRadius(function(e){return H(e.y+e.dy)}).outerRadius(function(e){return H(e.y)}),ce.select(".axi-graph-info").text(function(e){return e.depth==d.maxNodeDepth()?r.seriesInfo(e,r.linkSeriesValue):r.seriesInfo(e,r.nodeSeriesValue)}).style("display",null),ce.select(".axi-graph-name").each(X),e.fixRadius(),de.call(L),ce.filter(".axi-graph-node.axi-graph-out").on("click",a),ce.call(F),d.linkStyled(de),d.nodeStyled(ce),f.selectAll(".axi-graph-node, .axi-graph-link").sort(M),d.sortLinks(),d.series.forEach(function(e){e.graphEl=f.selectAll(".axi-graph-ts-"+e.graphNum)}),d.fire("render"))}}var le,se,ue,ce,de,fe,pe=!1;return{renderWidget:oe,setOuterNodeData:function(e){pe=e},setLinks:e,setNodesTree:function(e){le=e},showLinkLabel:N}}(),M=function(){function e(e){return function(t){return 0==arguments.length?e:void(e=t)}}function n(){d.isNodeData(!d.isNodeData()),E.renderWidget()}function a(){S.el().attr("display",function(){return S.el().attr("display")?null:"none"})}function i(e){e.button||(e.button=d3.event.target.parentNode),e.alignNode(e.button).showAt(r.SLIDER_POSITION)}function o(e){e.isUsed()?setTimeout(function(){o(e)},r.TOOLTIP_DELAY):e.visible(!1)}function l(){d.isBundled(!d.isBundled()),E.renderWidget()}function s(){d.isEffects(!d.isEffects())}function u(){d.isNodeCollapsible(!d.isNodeCollapsible())}function c(){d.isLinkAnimate(!d.isLinkAnimate()),E.renderWidget()}function p(){d.isLinkData(!d.isLinkData()),E.renderWidget()}function h(){T=!T,E.renderWidget()}function g(){function e(){return d.height()<d.width()+r.TEXT_HEIGHT&&d.padding()[1]<r.TEXT_HEIGHT}function g(e,t){e.onItemAdd(function(e){e.data.isOn&&e.data.isOn()&&e.state("selected")}).data(t).on("itemclick",function(e){e.data.action&&e.data.action(e),e.data.isOn&&e.state(e.data.isOn()?"selected":null)}).renderTo(f)}if(d.rendered()){var y=.5*Math.min(d.height(),d.width()),x=.5*d.width(),C=Math.max(0,d.width()-d.height())/2;b.outerWidth(e()?.7*y+C:d.width()).outerHeight(24).translate(function(e){e[0]=-x,e[1]=-.5*d.height()+1}).redraw(),_.outerWidth(e()?.6*y+C:d.width()).outerHeight(24).translate(function(e){e[0]=-x,e[1]=-.5*d.height()+1+r.TEXT_HEIGHT}).redraw(),w.outerWidth(e()?.7*y+C:d.width()).outerHeight(24).translate(function(e,t){e[0]=x-t+9,e[1]=-.5*d.height()+1}).redraw(),k.outerWidth(e()?.6*y+C:d.width()).outerHeight(24).translate(function(e,t){e[0]=x-t+9,e[1]=-.5*d.height()+1+r.TEXT_HEIGHT}).redraw(),S.outerWidth(d.height()>d.width()+r.TEXT_HEIGHT?d.width():.5*y).outerHeight(24).translate(function(e){e[0]=-x,e[1]=-.5*d.height()+2*r.TEXT_HEIGHT}).redraw(),M.visible()&&M.alignNode(M.button).showAt(r.SLIDER_POSITION),I.visible()&&I.alignNode(I.button).showAt(r.SLIDER_POSITION)}else g(b,["+",{action:n,title:"node-data",isOn:d.isNodeData},{action:u,title:"node-collapse",isOn:d.isNodeCollapsible},{title:"width"}]),b.on("expandend",function(){b.index(1),w.index(0),b.redraw(),w.redraw()}),b[3].el.on("mousemove",function(){i(I)}).on("mouseout",function(){o(I)}),g(_,["+",{action:a,title:"depth",isOn:function(){return S.el()&&!S.el().attr("display")}},{title:"link-data",action:p,isOn:d.isLinkData},{title:"link-labels",action:h,isOn:function(){return T}},{action:c,title:"link-animate",isOn:d.isLinkAnimate}]),_.on("expandend",function(){_.index(1),k.index(0),_.redraw(),k.redraw()}),g(w,[{action:function(){t.layout="circle",d.toggleMode()},title:"chord-circle",isOn:d3.functor(!1)},{action:function(){t.layout="rectangle",d.toggleMode()},title:"chord-rectangle",isOn:d3.functor(!1)},{title:"hierarchy",isOn:d3.functor(!0)},"+"]),w.on("expandend",function(){w.index(1),b.index(0),w.redraw(),b.redraw()}),g(k,[{title:"tension"},{action:l,title:"bundle",isOn:d.isBundled},{action:s,title:"effects",isOn:d.isEffects},"+"]),k.on("expandend",function(){k.index(1),_.index(0),k.redraw(),_.redraw()}),k[0].el.on("mousemove",function(){i(M)}).on("mouseout",function(){o(M)}),b.margin()[1]=function(){return b.index()<w.index()&&!e()?w.totalWidth():0},w.margin()[3]=function(){return b.index()>w.index()&&!e()?b.totalWidth():0},_.margin()[1]=function(){return _.index()<k.index()&&!e()?k.totalWidth():0},k.margin()[3]=function(){return _.index()>k.index()&&!e()?_.totalWidth():0},S.onItemAdd(function(e){e.data.value===d.nodeDepth()&&e.state("selected")}).data(r.range(d.maxNodeDepth(),function(e){return e+1})).on("itemclick",function(e){S.forEach(function(e){e.state(null)}),e.state("selected"),d.nodeDepth(e.data.value),E.renderWidget()}),S.renderTo(f),S.el().attr("display","none"),M.on("render",v),I.on("render",m),M(d.el()).el().style("z-index",getZIndex(f.node())+30),I(d.el()).el().style("z-index",getZIndex(f.node())+30),d.setPanelsHideBehavior([b,w,_,k,S])}function v(){var e=M.innerEl().append("table"),t=e.append("tr"),n=Scroller(t.append("td").append("div"),100,100)(Math.floor(100*d.tension())).on("move",function(e){d.tension(.01*e),r.text(Math.round(e)+"%"),d.redraw()}),r=t.append("td").append("div").text(Math.round(100*d.tension())+"%");M.isUsed=n.dragging,e.on("mousemove",function(){i(M)}).on("mouseout",function(){o(M)})}function m(){var e=I.innerEl().append("table"),t=e.append("tr"),n=e.append("tr");t.append("td").append("div").text("min"),n.append("td").append("div").text("max");var r=Scroller(t.append("td").append("div"),100,100)(Math.floor(100*x)).on("move",function(e){return e>100*y?void r(Math.round(100*y)):(x=.01*e,l.text(Math.round(e)+"%"),void d.redraw())}),a=Scroller(n.append("td").append("div"),100,100)(Math.floor(100*y)).on("move",function(e){return e<100*x?void a(Math.round(100*x)):(y=.01*e,s.text(Math.round(e)+"%"),void d.redraw())}),l=t.append("td").append("div").text(Math.round(100*x)+"%"),s=n.append("td").append("div").text(Math.round(100*y)+"%");I.isUsed=function(){return r.dragging()||a.dragging()},e.on("mousemove",function(){i(I)}).on("mouseout",function(){o(I)})}var b=Panel(),_=Panel(),w=Panel(),k=Panel(),S=Panel(),M=Tooltip().hideDelay(r.TOOLTIP_DELAY),I=Tooltip().hideDelay(r.TOOLTIP_DELAY);return b.index=e(1),w.index=e(0),_.index=e(1),k.index=e(0),{renderControls:g}}(),I=function(){var e=d3.map(),t=function(t,n){var a=t.params.alias||r.graphUID(),i=!1;return t.graphNum=n,e.set(a,t),t.params.nodes&&(t.params.batchGroup||(t.params.batchGroup="node"),t.params.nodes.forEach(function(e){var n;(n=h[e])?(n.seriesData=t,n.parent.parent||(i=!0),n.seriesMap[a]=t):doLog()&&log("WARNING: series [alias=%s] refer to non existing node [id=%s]",a,e)})),t.params.links&&(t.params.batchGroup||(t.params.batchGroup="link"),t.params.links.forEach(function(e){var n,i;"string"==typeof e?(n=e,(i=g[n])?i.addSeries(t,a):doLog()&&log("WARNING: series [alias=%s] refer to non existing link [id=%s]",a,n)):e[2]>=0&&(i=v[e[0]+r.SEP+e[1]])?i.addSeries(t,a):e[2]<=0&&(i=v[e[1]+r.SEP+e[0]])?i.addSeries(t,a):doLog()&&log("WARNING: series [alias=%s] refer to non existing link [nodes=[%s,%s]]",a,e[0],e[1])})),i},n=function(t){var r,a=!1;return t.series&&t.series.forEach(function(n,i){(r=e.get(n))?(0===i&&(t.seriesData=r),t.seriesMap[n]=r,t.parent.parent||(a=!0)):doLog()&&log("WARNING: link %s refer to non existing series %s",t.id,t.series)}),t.children&&t.children.forEach(n),a},a=function(t){var n;t.series&&t.series.forEach(function(r){(n=e.get(r))?(n.params.batchGroup||(n.params.batchGroup="link"),t.addSeries(n,r)):doLog()&&log("WARNING: link %s refer to non existing series %s",t.id,t.series)})};return{validateSeries:t,applySeriesToNodes:n,applySeriesToLinks:a}}();return d.createMarkerArrow=function(e,t){var n=d.markerArrowId(e,t);return f.select(".axi-graph-arrows").append("marker").attr("id",n).classed("axi-graph-marker-arrow",!0).attr("markerWidth",10).attr("markerHeight",Math.max(10,2*t)).attr("refX","0").attr("refY","0").attr("viewBox","-10 -"+t+" 10 "+2*t).attr("orient","auto").attr("markerUnits","userSpaceOnUse").append("g").classed("axi-graph-marker-resize",!0).attr("transform","scale("+1/d.zoom().scale()+")").append("path").attr("d","M 0,0 L -10,-"+t+" L -10,"+t+" z").style("fill",e),"#"+n},d.init=function(){function e(t){h[t.id]=t,t.children&&t.children.forEach(e)}var t,n;f=d.el().select("svg"),l=d.el().append("div").classed("axi-graph-labels",!0),p=f.select(".axi-graph-resize"),c=d.tooltip(),t=d.getHierarchy(),E.setNodesTree(t),e(t),n=E.setLinks(d.links()),n.forEach(function(e){g[e.id]=e,v[e.source.parent.id+r.SEP+e.target.parent.id]=e,m[e.source.GrUID]=e}),d.series.forEach(function(e,t){var n=I.validateSeries(e,t);n&&E.setOuterNodeData(!0)}),n.forEach(I.applySeriesToLinks);var a=I.applySeriesToNodes(t);return a&&E.setOuterNodeData(!0),E.renderWidget(),M.renderControls(),d.zoom().on("zoom.label",o),f.on("dblclick.zoom.labels",o),d},d.redraw=function(){return d.rendered()?(E.renderWidget(),M.renderControls(),d.series.forEach(function(e){e.graphEl.empty()||onSeriesClick(e,d,e.graphEl)}),d):d},d.ringWidthBounds=function(e,t){return arguments.length?void 0==e&&void 0==t?d:(void 0==e&&(e=x),void 0==t&&(t=y),e<=.1&&(e=.1),t>=.9&&(t=.9),e<=t?(x=e,y=t):doLog()&&log("WARNING: incorrect ringWidthBounds ",[e,t]),d):[x,y]},d.mode=function(){return"hierarchy"},d.getSliderRange=function(e){if("tension"===e||"maxWidth"===e||"minWidth"===e)return[.01,.99]},d.sliderValue=function(e,t){if("tension"==e){if(arguments.length<2)return d.tension();d.tension(t),E.renderWidget()}else if("maxWidth"===e){if(arguments.length<2)return y;y=t,E.renderWidget()}else if("minWidth"===e){if(arguments.length<2)return x;x=t,E.renderWidget()}},d.isLinkLabels=function(e){return arguments.length?(void 0!=e&&(T=e),d):T},function(){var e=t.padding&&t.padding.split(",").forEach(parseInt);d.ringWidthBounds(t.minringwidth,t.maxringwidth).padding(e||0).isLinkData(!0).isLinkLabels(t.linklabels)}(),d}},{"./AbstractGraphWidget":58,"./GraphLib":60}],62:[function(e,t,n){t.exports=function(t){t.GraphWidget=e("./AbstractGraphWidget")}},{"./AbstractGraphWidget":58}],63:[function(e,t,n){t.exports=function(e){"use strict";function t(e){function t(e){return o?o(e):defaultValueFormat(e)}function n(){var e=l.el().node(),t=e.querySelector(".axi-chart-grid"),n=e.querySelector(".axi-chart-controls");e.removeChild(t),e.insertBefore(t,n),l.el().append("rect").attr("class","axi-histogram-grid-border").style("fill","none").style("stroke","black")}function r(){m();var e=l.series.length,t=l.padding().map(function(e){return e()}),n=l.xScale.range()[1]-l.xScale.range()[0]+t[1]+t[3],r=(n-2*p.xScaleMargin())%((u+c)*e);l.padding()[1]=l.padding()[3]=d3.functor(r/2)}var a=4;e||(e={});var i,o,l=Chart(),s=500,u=50,c=0,d=!1;lib.updater(l),l.varNames(["alertExp","displayExp","enabledExp"]),l.on("seriesupdate",function(e){e&&(l.redraw(),o=l.series.reduce(function(e,t,n){var r=t.mainParams.getFormat();return 0===n?r:e&&r&&e(1)===r(1)?e:void 0},null))}).on("render",function(e){l.el().classed("axi-histogram",!0),n(),h.render(e)});var f=function(){function e(){var e=a.extent();l.fire("rangeselectstart",e[0],e[1])}function t(){var e;e=a.empty()?p.getXScale().domain():a.extent(),l.fire("rangeselectend",e[0],e[1])}function n(){a.empty(!0).extent([0,0]),l.fire("rangeselectexit")}function r(){if(a.rendered())return l;a.scale(p.getXScale()).on("brushstart",e).on("brushend",t);var r=function(){var e=l.el().selectAll(i);a(l.el(),e).el().selectAll(".axi-brush-mask").on("click",n)};l.rendered()?r():l.on("render",r)}var a=Brush(),i=".axi-chart-series, .axi-chart-background";return{build:r,redraw:function(){a.height(l.innerHeight()).redraw()},destroy:function(){a.destroy()},reset:n,range:function(e,t){return arguments.length?(a.extent([e,t]),void l.fire("rangeselectstart",e,t).fire("rangeselectend",e,t)):a.extent().slice()}}}(),p=function(){function e(e){return 1.1*e}function n(e){var t=d3.max(e,function(e){return e.dy+e.y});return[0,t||1]}function r(e,t,n){var r,a=m[e];if(e%2&&("density"===t||"fractions"===t))r=c;else if(e%2&&"frequency"===t)r=s;else if(e%2||"values"!==t){if(e%2||"percentiles"!==t)return"none"===t?void(m[e]=null):void 0;r=d}else r=o;a||(a=m[e]=Axis(e)),n&&e%2?h=e:!n||e%2||(p=e),a.fit=r,"values"!==t&&a.title(t)}function i(){k().el().style("z-index",getZIndex(l.el().node())+1),m.forEach(function(e,n){if(e){var r=n%2?v:g;e.scale(r).background(!0),e.fit==d&&e.ticks(!1),h===n?(e.grid=Axis(n).tickFormat(!1).scale(r),l.grid.add(e.grid)):p===n&&(e.grid=Axis((n+2)%4).scale(r).ticks(0).tickFormat(e.fit==d&&t),l.grid.add(e.grid),e.grid.el().style("stroke-dasharray","10")),l.axis.add(e)}}),m[2]&&m[2].rotate(w),b(l.el().select(".axi-chart-axis"),l.el().select(".axi-chart-axis")),y=!0}function o(e){var n,r,a=this,i=g.domain(),o=d3.set(),l=(i[1]-i[0])/50;if(e.forEach(function(e){o.add(e.interval[0]),o.add(e.interval[1])}),n=o.values().map(parseFloat).sort(d3.ascending),r=n[1]-n[0],r<l){var s=Math.floor(l/r)+1;n=s>u?[n[0],n[0]+l]:n.filter(function(e,t){return t%s===1}),r=n[1]-n[0]}for(;n[0]-r>=i[0];)n.unshift(n[0]-r);for(;n[n.length-1]+r<=i[1];)n.push(n[n.length-1]+r);a.tickValues(n).tickFormat(t)}function s(){}function c(e){var t=this,n=d3.sum(e,function(e){return e.dy});n&&t.tickFormat(function(e){return defaultValueFormat(e/n,a)})}function d(e){var t,n=this,r=d3.merge(e).sort(d3.ascending);return r.length?(t=x.map(function(e){return d3.quantile(r,e/100)}),void n.tickValues(t).tickFormat(function(e){return x[t.indexOf(e)]+"%"})):void n.ticks(0)}function f(t){if(y||i(),t.bins.length){var r=t.bins,a=.8*l.outerWidth()()-2*T,o=t.valuesRange[1]-t.valuesRange[0],s=a<=0?0:T/a*o;_||(g.domain([t.valuesRange[0]-s,t.valuesRange[1]+s]),v.domain(n(r).map(e))),m.forEach(function(e){e&&(e.fit(r),e.grid&&e.grid.tickValues(e.tickValues()))})}}var p,h,g=LinearScale(),v=LinearScale(),m=[],y=!1,x=[1,10,50,90,99],b=l.zoom=ChartZoom().chart(l),_=!1,w=0,k=Tooltip(),T=0;return k.format(function(e){return defaultValueFormat(e,a)}),ValueScale(g,b),ValueScale(v,b),b.on("changed",function(){d3.event&&"click"===d3.event.type||(_=!0,l.redraw(0))}).on("reset",function(){_=!1,l.redraw()}),l.xScale.add(g),l.yScale.add(v),{xScaleMargin:function(e){return arguments.length?void(T=e):T},fitAxes:f,setAxis:r,redraw:function(){m.forEach(function(e){e&&e.fit==d&&e.el().selectAll("text").on("mousemove",function(){var e=d3.select(this).data()[0];k.record(e).showAt()}).on("mouseleave",function(){k.visible(!1)})})},destroy:function(){k.destroy()},getXScale:function(){return g},getYScale:function(){return v},percentiles:function(e){return arguments.length?void(x=e):x},bottomTicksRotation:function(e){return arguments.length?void(w=e):w},isZoomed:function(){return _}}}(),h=function(){function t(e){a.data([{title:"stack",state:function(){return d?"selected":null},onclick:function(){d=!d}}]).el().style("display","none");var t=[5,10,20,50,100],n=d3.bisectLeft(t,u);t[n]!==u&&t.splice(n,0,u),i.data(t.map(function(e){return{title:e,state:function(){return e===u?"selected":null},onclick:function(){u=e}}})),l.el().on("mousemove",function(){a.el().style("display",null),i.el().style("display",null)}).on("mouseleave",function(){a.el().style("display","none"),i.el().style("display","none")}),o&&o.renderTo(e)}function n(){o&&(o.forEach(function(e){e.display(e.data.displayInLegend()),e.state(!e.data.isVisible()&&"hidden")}),o.update(),o.redraw()),s&&s.display(o.some(function(e){return e.display()})),i.translate(function(e,t){e[0]=r.range()[1]-t}).redraw()}var r=p.getXScale(),a=Panel().onItemAdd(function(e){e.state(e.data.state())}).on("itemclick",function(e){e.data.onclick(),e.state(e.data.state()),l.redraw()}),i=Panel().onItemAdd(function(e){var t;e.state(t=e.data.state()),"selected"===t&&(i.selectedItem=e)}).on("itemclick",function(e){var t;e.data.onclick(),e.state(t=e.data.state()),"selected"===t&&(i.selectedItem&&i.selectedItem.state(null),i.selectedItem=e),l.redraw(0)}),o=l.legend=AddLegend(null,l,e.legendPosition,"top"),s=o&&getLegendControl(o);return l.panels.add(a),l.panels.add(i),l.series.onItemAdd(function(e){o&&o.datum(e.mainParams)}),s&&l.panels.add(s),o&&o.active(function(e,t,n,r){var a=e.data;if(arguments.length<2)return"hidden"!==e.state();var i=e.data.series.vars;i.calc.enabledExp=d3.functor(!0),i.values.enabledExp=!0;var o=!t;e.state(o&&"hidden"),a.params.hidden=o,a.series.config&&(a.series.config.hidden=o),r||l.redraw()}).on("toggle",function(){l.redraw()}),{render:t,redraw:n,destroy:function(){o&&o.destroy()}}}(),g=function(){function e(){null!=p[0]&&(f[0]=null==f[0]?p[0]:Math.max(p[0],f[0])),null!=p[1]&&(f[1]=null==f[1]?p[1]:Math.min(p[1],f[1])),s=!0}function t(e,t,n,r){function a(){if(void 0!==l)return l;for(l=o,s=1;l%1;)l*=10,s*=10;return l}var i=e[1]-e[0]||Math.abs(e[0]);if(i>=0&&lib.isFinite(i)){var o=i&&Math.pow(t,roundNumber(Math.log(i)/Math.log(t),.33)-1);if(o>0&&lib.isFinite(o)){var l,s;n&&(e[0]=Math.floor(e[0]/o)*a()/s),r&&(e[1]=Math.ceil(e[1]/o)*a()/s),e[0]<e[1]||(!n&&r||(e[0]-=o),!r&&n||(e[1]+=o))}else o=1,r||!n?e[1]+=o:e[0]-=o}}function n(){var n,r,a,i;return c=0,s||e(),l.series.length?(n=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],l.series.forEach(function(e){e.mainParams.isVisible()&&e.data.len&&(n[0]=Math.min(n[0],d3.min(e.data.v)),n[1]=Math.max(n[1],d3.max(e.data.v)))}),n[0]>n[1]?n=h.slice():0===n[1]&&0===n[0]?n=[-1,1]:n[1]===n[0]&&(n=[Math.min(n[0],0),Math.max(n[0],0)]),t(n,10,!0,!0),r=null!=f[1]?f[1]:n[1],a=null!=f[0]?f[0]:n[0],i=(r-a)/u,null!=f[0]&&(null!=p[0]&&n[0]<p[0]?n[0]=p[0]:n[0]<f[0]?(n[0]=f[0]-i,++c):n[0]=f[0]),null!=f[1]&&(null!=p[1]&&n[1]>p[1]?n[1]=p[1]:n[1]>f[1]?(n[1]=f[1]+i,++c):n[1]=f[1]),n):h}function r(e){var t={};e.forEach(function(e){var n=e.x,r=t[n];e.dy=e.y,r?(r.nextBin=e,e.y=r.y+r.dy):e.y=0,e.interval=[e.x,e.x+e.dx],t[n]=e})}function a(e){var t=l.series.filter(function(e){return e.mainParams.isVisible()}),n=t.length||1,r={};e.forEach(function(e){var a=t.indexOf(e.series),i=r[e.x];i&&(e.previousBin=i),e.series.mainParams.isVisible()&&(r[e.x]=e),e.dy=e.y,e.y=0,e.interval=[e.x,e.x+e.dx],e.dx=e.dx/n,e.x=e.x+a*e.dx})}function i(){var e,t=[],i=n();return o.range(i).bins(u+c),l.series.forEach(function(e){var n=e.mainParams.isVisible(),r=(n?e.data.v:[]).filter(function(e){return(null==p[0]||e>=p[0])&&(null==p[1]||e<=p[1])}).map(function(e){return null!=f[0]&&e<f[0]?i[0]:null!=f[1]&&e>f[1]?i[1]:e}),a=o(r);a.forEach(function(t){t.series=e}),t.push(a)}),e=d3.merge(t),d?r(e):a(e),{bins:e,valuesRange:i}}var o=d3.layout.histogram(),s=!1,f=[null,null],p=[null,null],h=[0,1];return{layout:i,range:function(e,t){return arguments.length?(null!=e&&(f[0]=e),void(null!=t&&(f[1]=t))):f},rangeForce:function(e,t){return arguments.length?(null!=e&&(p[0]=e),void(null!=t&&(p[1]=t))):p}}}(),v=function(){function e(e,t){o.rendered()||o().el().style("z-index",getZIndex(l.el().node())+1);var d=l.el().select(".axi-chart-series").selectAll(".axi-histogram-bar").data(e.bins);null!=t&&(n=t);var f=l.el().select(".axi-chart-background");l.el().select(".axi-histogram-grid-border").attr("transform",f.attr("transform")).attr("height",f.attr("height")).attr("width",f.attr("width")),d.exit().remove();var p=d.enter().append("g").on("mousemove",function(e){o.record(e).showAt()}).on("mouseleave",function(){o.visible(!1)}).attr("class","axi-histogram-bar").attr("transform","translate("+r.range()[0]+","+a.range()[0]+")");p.append("rect"),p.append("text");var h=d.style("fill",c.color).transition().duration(n).attr("transform",c.transform);h.select("rect").attr("width",c.width).attr("height",c.height).each("end",function(){d3.select(this).crisp()}),h.select("text").text(u?c.text:null).attr("x",function(e){return c.width(e)/2}).attr("y","-.1em"),n=s,d.each(function(e){i(e.series,l,d3.select(this))})}var n=0,r=p.getXScale(),a=p.getYScale(),o=Tooltip(),u=!1;o.format(function(e){var n=e.interval.map(t);return[].concat(e.series.mainParams.getTitle()).concat("frequency: "+e.dy).concat("interval: ["+n+"]")});var c={color:function(e){var t=e.series.params.color;return"function"==typeof t?t():t},transform:function(e){var t=d||!e.previousBin?r(e.x):e.previousBin.tx+c.width(e.previousBin);return e.tx=t,"translate("+t+","+Math.floor(a(e.y+e.dy))+")"},width:function(e){return d?r(e.dx)-r(0):Math.floor(r(e.dx)-r(0)+1e-4)},height:function(e){return Math.ceil(a(0)-a(e.dy))},text:function(e){if(e.dy){for(var t=e;t=t.nextBin;)if(t.dy>0)return;return d?e.dy+e.y:e.dy}}};return{redraw:e,displayValues:function(e){return arguments.length?void(u=e):u},destroy:function(){o.destroy()}}}(),m=l.redraw;l.redraw=function(e){if(!l.rendered()||!l.display())return l;h.redraw();var t=g.layout();h.redraw(),p.fitAxes(t),!p.isZoomed()&&t.bins.length&&r();var n=m();return v.redraw(t,e),p.redraw(),f.redraw(),n};var y=l.destroy;return l.destroy=function(){return l.destroyUpdater(),f.destroy(),h.destroy(),v.destroy(),p.destroy(),y()},l.barCount=function(e){return arguments.length?(e&&(u=e),l):u},l.onSeriesClick=function(e){return arguments.length?(null!=e&&(i=e),l):i},l.leftAxis=function(e,t){return e&&p.setAxis(3,e,t),l},l.rightAxis=function(e,t){return e&&p.setAxis(1,e,t),l},l.topAxis=function(e,t){return e&&p.setAxis(0,e,t),l},l.bottomAxis=function(e,t){return e&&p.setAxis(2,e,t),l},l.mode=function(e){return arguments.length?(d="stack"===e,l):d?"stack":"default"},l.range=function(e,t){return arguments.length?(g.range(e,t),l):g.range()},l.rangeForce=function(e,t){return arguments.length?(g.rangeForce(e,t),l):g.rangeForce()},l.percentiles=function(e){return arguments.length?(e&&p.percentiles(e),l):p.percentiles()},l.displayValues=function(e){return arguments.length?(null!=e&&v.displayValues(e),l):v.displayValues()},l.bottomTicksRotation=function(e){return arguments.length?(null!=e&&p.bottomTicksRotation(e),l):p.bottomTicksRotation()},l.addRangeSelector=function(){return f.build(),l},l.resetRangeSelector=function(){return f.reset(),l},l.rangeSelector=function(e,t){return arguments.length?(null!=e&&null!=t&&f.range(e,t),l):f.range()},l.rangeOffset=function(e){return arguments.length?(null!=e&&p.xScaleMargin(e),l):p.xScaleMargin()},l}e.HistogramWidget=t}},{}],64:[function(e,t,n){t.exports=function(e,t){function n(){function e(n){return l=(r=n).classed("axi-page",!0).append("iframe").attr("type","text/html"),c=!0,l.on("load",function(){x&&d3.select(x).remove(),e.displayFrame(!0),v=m=y=x=null;try{if(y=(m=(v=l.node().contentWindow).document).documentElement instanceof v.SVGElement?m.documentElement:m.getElementsByTagName("svg")[0]){o&&m.body&&m.body.setAttribute("style",(m.body.getAttribute("style")||"")+"; margin: 0; overflow: hidden; ");var r=m.head?v:null,i=null==g?o&&!!r:g;i&&(r||(e.displayFrame(!1),n.node().appendChild(y),x=y),null==getZoomSVG(y,r,f)&&r&&d3.select(m.head).append("script").attr("src",e.d3Src).on("load",function(){getZoomSVG(y,r,f)}))}t(!0),a&&(v.alert=d3.functor())}catch(e){}e.fire("reqload",d)}),e}function t(e){if(o&&y){if(e){var t=y.getAttribute("width"),n=y.getAttribute("height"),r=null==t||!isFinite(t=+t),a=null==n||!isFinite(n=+n),i=(r||a)&&getNodeRect(y);y.setAttribute("viewBox","0 0 "+(r?i.width:t)+" "+(a?i.height:n))}y.setAttribute("width",h+""),y.setAttribute("height",s+"")}}function n(){l.attr("width",(i?h:0)+"").attr("height",(i?s:0)+"")}var r=null,a=!1,i=!0,o=!0,l=null,s=0,u=e.phMap=GetPlaceholders(),c=!1,d={get:{}},f=null,p=null,h=0,g=null,v=null,m=null,y=null,x=null;return EventListener(e),e.el=function(){return r},e.frame=function(){return l},e.win=function(){return v},e.doc=function(){return m},e.svg=function(){return y},e.getWin=function(){return m&&v},e.d3Src=getLocation("JavaScript/d3.v2.mod.js").href,e.destroy=function(){return e.realtime(-1),c&&(c=!1),e},e.resize=function(r,a){return c?(u({width:h=r,height:s=a}),n(),u.exp().width||u.exp().height?e.reload():t(),e):e},e.realtime=function(t){return lib.setPeriod(e.realtimeFn,t),e},e.realtimeFn=function(){e.reload(!0)},e.reload=function(t){if(arguments.length||(t=1),c&&null!=p){var n=u.getValue(p);setFrameSrc(l.node(),n,t)&&(e.fire("reqsend",d),doLog()&&log(n))}return e},e.displayFrame=function(t){return arguments.length?(i!=t&&(i=t,c&&(l.style("display",i?"block":"none"),n())),e):i},e.url=function(t){return arguments.length?(p=t,u.exp(p),e):p},e.fitSvg=function(t){return arguments.length?(o=t,e):o},e.unscale=function(t){return arguments.length?(f=t,e):f},e.zoomSvg=function(t){return arguments.length?(g=t,e):g},e.disableAlert=function(t){return arguments.length?(a=t,e):a},e}e.PageWidget=n}},{}],65:[function(e,t,n){t.exports=function(e,t){function n(e){function t(e){return e.classed("axi-piechart-container",!0),X=e.append("svg").attr("class","axi-piechart").classed("axi-piechart-ring",G),C=X.append("g"),ae&&ae.renderTo(C),A=C.append("g"),R=A.append("g").attr("class","axi-piechart-series"),U=A.append("g").attr("class","axi-piechart-links"),Q=A.append("g").attr("class","axi-piechart-ticks"),ne.renderTo(e).el().style("z-index",getZIndex(C.node())+30),V.renderTo(C),null==O&&t.displayPanels(!P),P&&e.on("mouseleave",function(){t.displayPanels(!1)}).on("mouseover",function(){t.displayPanels(!0)}),T=re("icon"),t.config.caption&&(T=d3.functor(T)),T&&(k=WidgetIcon(T()).alert(re("iconalertexpression")).alertStyle(t.config.iconalertstyle).forceColor(t.config.iconcolor).onReady(function(){ie.pushBack(k.el()),k.onReady(null)}).caption(t.config.caption).captionStyle(t.config.captionstyle).minCaptionFont(t.config.minfontsize).maxCaptionFont(t.config.maxfontsize),A.call(k)),K.filter(function(e){return e.params.icon||e.params.caption}).forEach(function(e){e.icon=WidgetIcon(null).alert(function(){return e.series.vars.values.alertExp}).alertStyle(e.params.alertStyle).forceAlertStyle(e.params.iconAlertStyle).caption(e.params.caption).captionStyle(e.params.captionstyle).minCaptionFont(e.params.minFontSize).maxCaptionFont(e.params.maxFontSize).color(e.params.color).forceColor(e.params.iconColor).onReady(function(){e.icon.el().style("display","none"),e.isSelected&&ie.pushFront(e.icon.el()),e.icon.onReady(null)}),R.append("g").call(e.icon),e.params.icon||(e.params.icon=d3.functor(null))}),t.fire("render"),t}function n(e){if(e.isVisible())return!1;if(e.series.params.display===!1)return!1;if(e.series.keys.key.multipleSeries)return!1;var t=e.series;return!!t.vars&&(!!t.vars.calc.displayExp&&!t.vars.values.displayExp)}function a(e){return!(I||!n(e))||e.isVisible()}function i(e){return!(I||!n(e))||e.isDisplayed()}function o(e){e.shift=e.isSelected,e.el.getTransition(E/3).attr("transform",h),s(E/3)}function l(){var e=!K.some(function(e){return e.isSelected});A.selectAll(".axi-piechart-arc").classed("axi-piechart-deselected",function(t){return!e&&!t.slice.isSelected})}function s(e){U.children().size()&&c(),Q.children().size()&&u(),Q.children().getTransition(e||0).attr("transform",function(e){return"translate("+[e.xx[0],-e.yy[0]]+")"}).attr("fill",function(e){return e.tickIsInside?e.rect.width>q-N?null:adjustTextColor(e.slice.getColor(),.51):null}).style("opacity",p).style("text-anchor",f),U.children().attr("d",function(e){var t,n=q*(1+Y),r=Math.round(e.sinA*n);return t=r>e.yy[2]&&r<e.yy[0]?r:e.horizontal?r<e.yy[2]?e.yy[2]:r>e.yy[0]?e.yy[0]:r:Math.round(e.yy[1]),["M",Math.round(e.cosA*q),",",-Math.round(e.sinA*q),"L",Math.round(e.cosA*n),",",-r,"L",Math.round(e.xx[1]),",",-t].join("")}).attr("stroke",function(e){return e.slice.getColor()}).crisp(U)}function u(){function e(e){var t=e.rect.width,a=e.rect.height,i=Math.round(e.cosA*n-t/2),o=Math.round(e.sinA*n-a/2),l=i+t,s=o+a;return!r(i,l,o,s,e.a0,e.a1)}var t=G?.5:.67,n=q*t+N*(1-t);J.forEach(function(t){var r=n<q&&(t.slice.tickInside||!t.slice.tickOutside&&e(t)),a=r?n:q;a+=t.slice.shift*q*Y,r||(a+=5),t.tickIsInside=r,t.xx=[Math.round(t.cosA*a)],t.yy=[Math.round(t.sinA*a)]})}function c(){function e(e,t,n){var r,a=t.rect.height,i=Math.round(e);return((r=-s-i)>0||(r=(n&&n.yy[2]<s?n.yy[2]:s)-(i+a))<0)&&(e+=r,i+=r),u||(e+=a/2,i+=a/2),[i,e,i]}function n(e,t,n,r){r&&n&&(e=-e);var a,i=t.rect.width,o=Math.round(e);return((a=-l-(o-i))>0||(a=l-(o+i))<0)&&(e+=a,o+=a),[o,e,o+i]}function r(t,r,a,o){var l,s;t.horizontal=o,o?(t.yy=e(t.sinA*i,t,r),s=t.yy[1],t.xx=n(Math.sqrt(Math.max(0,c-s*s)),t,a,o)):(t.xx=n(t.cosA*i,t,a,o),l=t.xx[1],t.yy=e(Math.sqrt(Math.max(0,c-l*l))*(t.sinA<0?-1:1),t,r))}function a(e,t){e.sort(function(e,t){return t.sinA-e.sinA}).forEach(function(n,a){r(n,e[a-1],t,u)})}var i=q*(1+Y),o=i*Math.SQRT2,l=Math.ceil(t.totalWidth()/2),s=Math.ceil(t.totalHeight()/2),u=s<l,c=o*o,d=[],f=[];H.forEach(function(e){e.cosA<0?d.push(e):f.push(e)}),a(d,!0),a(f,!1)}function d(){!D&&K.some(function(e){return e.series.vars.calc.displayExp})&&(D=Panel().data([{title:"display-filter"}]).on("itemclick",function(e){e.state((I=!I)&&"selected"),F=!0,t.redraw(E)}).translate(function(e,t,n){var r=3==ae.side?ae.totalWidth()+L.w:5,a=0==ae.side?ae.totalHeight()+L.h:5;e[0]=Math.max(r,Math.max(r,L.w)-t),e[1]=Math.max(a,Math.max(a,L.h)-n)}).padding([0,0,0,0]),D[0].display(!0).state(I&&"selected"),V.add(D))}function f(e){if(!e.tickIsInside){var t=e.deg;return t%=360,t<0&&(t+=360),t>180?"end":"start"}}function p(e){if(!e.tickIsInside)return 1;if(q<e.rect.width)return 0;if(e.endAngle-e.startAngle>2*Math.PI)return 1;var t=q*Math.sin(e.endAngle),n=N*Math.sin(e.startAngle);return+(Math.abs(t-n)>e.rect.width)}function h(e){return v(e).join("")}function g(e){var t=d3.interpolate(e.prev?e.prev.deg:0,e.deg),n=v(e);return function(e){return n[1]=t(e),n.join("")}}function v(e){var t=e.value>=Z?0:-e.slice.shift*q*Y;return["rotate(",e.deg,")translate(0,"+t+")"]}function m(e){var t=d3.interpolate({startAngle:e.prev?e.prev.startAngle:0,endAngle:e.prev?e.prev.endAngle:0},{startAngle:e.startAngle,endAngle:e.endAngle});return function(e){return M(t(e))}}function y(e){var t=e.slice,n=((e.a0=e.startAngle)+(e.a1=e.endAngle))/2,r=e.ampl=e.endAngle-e.startAngle||0,a=r/2;e.cosA=Math.sin(n),e.sinA=Math.cos(n),e.deg=(a+(e.startAngle||0))/Math.PI*180,e.endAngle=a,e.startAngle=-a,t.el=d3.select(this),t.pathEl=t.el.select("path"),K.fireRenderSeries(t);var i=t.series,o=i.vars.values.alertExp,l=joinStyles([i.params.style,o&&d3.functor(i.params.alertStyle)(o)]),s=getColorStyle(t.pathEl,l);t.getColor=null==s?t.getDefaultColor:d3.functor(s)}function x(){Z=t.resetRequests&&!t.resetRequests.sent.length?0:null,null!=Z&&d();var e=null,r=-1,i=K.map(function(t,i){if(null==Z)return 0;t.params.isRemain&&(r=i);var o=t.getLastValue()||0;return o?(a(t)?Z+=o:n(t)?(e+=o,o=0):o=0,o):o}),o=te&&te._value,l=null!=o&&null!=Z&&Z<o;if(l&&i.push(-Z+(Z=o)),r>=0){var s=K[r];s.isVisible()&&(s=s.series).data.len&&(s.data.last.v=i[r]=s.data.v[s.data.len-1]+e,Z+=e)}z=W(i),l&&z.pop(),z.forEach(function(e,t){var n=K[t];e.slice=n,e.prev=n.data,n.data=e});var u=R.selectAll(".axi-piechart-arc").data(z);u.exit().remove(),u.enter().append("g").attr("class","axi-piechart-arc").append("path").on("mousemove",function(e){ne.record(e.slice,e.slice.getLast(),Z).showAt()}).on("mouseout",function(){ne.visible(!1)}),u.each(y);var c=z.filter(function(e){return e.value&&e.slice.displayTick});J=[],H=[],c.forEach(function(e){e.slice.tickConnected?H.push(e):J.push(e)});var f=Q.children().data(c);f.exit().remove(),f.enter().append("text").style("cursor",function(e){return e.slice.el.style("cursor")}).on("click",function(e){fireEvent(e.slice.el.node(),"click")}),f.text(b).each(function(e){e.rect=getNodeRect(this)});var p=U.children().data(H);p.exit().remove(),p.enter().append("path")}function b(e){var t,n=e.slice.series,r=e.slice.getFormat()(e.value);return n.params.markerFormat?(t=lib.series.getLabel(n,n.params.markerFormat),t+": "+r):r}function _(){var e=t.totalWidth()/2,n=t.totalHeight()/2;q=Math.min(n,e),J.concat(H).forEach(function(t){if(t.slice.tickOutside){var r=(n-t.rect.height)/Math.abs(t.sinA),a=(e-t.rect.width)/Math.abs(t.cosA),i=Math.min(r,a);q=Math.min(q,i)}}),q=Math.max(1,Math.floor(q))*(1-Y);var r=j.radius!==q;return j.radius=q,r&&(N=G?null!=S?Math.max(0,q-S):.5*q:0,M.innerRadius(N).outerRadius(q)),r}function w(e){return a(e.slice)?e.slice.getDefaultColor():"none"}e||(e={}),EventListener(t),lib.updater(t);var k,T,S,E=500,M=t.arcFn=d3.svg.arc(),I=!0,C=null,A=null,D=null,O=null,P=!1,L={w:2,h:2},N=0,F=!0,V=t.panels=Group(),z=null,R=null,W=t.pieFn=d3.layout.pie().sort(null),j=t.prev={},U=null,H=[],q=0,G=!1,K=t.tseries=Group(),B="expand",$=t.series,Y=.1,Z=0,X=null,J=null,Q=null,ee=getDefaultTimeFormat(e),te=null,ne=Tooltip(),re=function(){function e(e){var n=null;return t.series.forEach(function(t){n||t.config.alias!==e||(n=t.mainParams.getLastValue())}),n}function n(n){var r,a=t.config[n];return a?(r=new Function("value",lib.parseValue(a)),function(){try{var t=r(e);return null==t?a:t}catch(e){return a}}):null}return n}();WidgetDiv(t),t.el=function(){return A},t.svgEl=function(){return X},V.methods(["redraw","destroy"]).addOption("renderTo").onItemAdd(function(e){var t=!1;e.hidden=function(r){return arguments.length?(t=r,e.display(n),e):t};var n=e.display(),r=e.display;e.display=function(a){return arguments.length?(n=a,r(e.display())):n&&!t}}).options({hidden:!1,outerWidth:t.totalWidth,outerHeight:t.totalHeight}),t.selectSlice=function(e){e.isSelected=!e.isSelected,t.fire("selectslices",K),"expand"===B?o(e):"highlight"===B&&l(),e.icon&&(e.isSelected?(ie.pushFront(e.icon.el()),e.icon.resize()):(ie.remove(e.icon.el()),k&&k.resize(),K.filter(function(e){return e.icon}).forEach(function(e){e.icon.resize()})))},t.selectSlices=function(e){return K.forEach(function(e){e.isSelected=!1}),e.forEach(function(e){e.isSelected=!0}),t.fire("selectslices",K),z?void("expand"===B?K.forEach(o):"highlight"===B&&l()):void("expand"===B&&K.forEach(function(e){e.shift=e.isSelected?1:0}))},t.on("seriesupdate",function(e){F=!0,e&&t.redraw(E)}),t.resize=function(e,n){return t.outerWidth(e).outerHeight(n).redraw()},t.destroy=function(){return t.destroyUpdater(),ne.destroy(),ae&&ae.destroy(),V.destroy(),t.rendered()&&(C.remove(),t.rendered(!1)),t};var ae=t.legend=AddLegend(null,t,e.legendPosition);ae&&ae.active(function(e,n,r,a){var i=e.data;if(arguments.length<2)return"hidden"!==e.state();var o=e.data.series.vars;o.calc.enabledExp=d3.functor(!0),o.values.enabledExp=!0;var l=!n;if(e.state(l&&"hidden"),i.params.hidden=l,i.series.config&&(i.series.config.hidden=l),arguments.length<3&&(r=[])||a){var s=i.getLastValue();r.push(l||null!=s?!!s&&null:i.series)}if(!a){var u=r.filter(identity);if(u.length&&t.calcSeries(!0,u).reload(),u.length<r.length){var c=!r.every(function(e){return null!=e});t.redraw(E,c)}}}),ne.format(function(e,t,n){return[].concat(e.getTitle()).concat(t?[e.getFormat()(t.v)+(n?" ("+defaultValueFormat(100*t.v/n)+"%)":""),ee(t.t)]:"N/A")}),AddEvent(K,"RenderSeries"),t.varNames(["alertExp","ticks","displayExp","enabledExp"]),t.on("ticks",function(e,t){var n=e.slice;n&&(n.tickConnected="connected"===t,n.tickInside="inside"===t,n.tickOutside="outside"===t,n.tickAuto="auto"===t,n.displayTick=n.tickConnected||n.tickInside||n.tickOutside||n.tickAuto)}).on("enabledExp",function(e,t){e.params.hidden=!t;var n=ae.map(function(e){return e.data}).indexOf(e.slice);ae[n].state(!t&&"hidden")}),$.onItemAdd(function(e){var t=e.params.isRemain;if(t&&e.data?e.params.display=!0:e.params.display){t&&(e.vars.origins.displayExp=!0);var n=e.slice=extendObject({},e.mainParams);return n.getDefaultColor=n.getColor,e.params.expand&&"expand"===B?(n.shift=1,n.isSelected=!0):(n.shift=0,n.isSelected=!1),K.add(n),ae&&ae.datum(n).state(e.params.hidden&&"hidden"),n}}),t.redraw=function(e,n){if(!t.rendered()||!t.display())return t;F=F||n,F&&x(),ae&&(ae.forEach(function(e){var t=e.data,n=i(t);e.display(n),n&&(e.color=e.data.getDefaultColor())}),ae.update(),ae.redraw()),t.setSize();var r=_(),a=R.selectAll(".axi-piechart-arc").getTransition(e);return a.attrTween?a.attrTween("transform",g).select("path").attrTween("d",m).attrTween("fill",function(e,t,n){var r=w(e);return n&&"none"!==n?function(e){return 1===e?r:n}:function(){return r}}):a.attr("transform",h).select("path").attr("d",M).attr("fill",w),"highlight"===B&&l(),s(),t.position[0]+=t.totalWidth()/2,t.position[1]+=t.totalHeight()/2,t.align(),V.redraw(),F=!1,k&&(k=k.refresh(T()),r&&k.resize(N*Math.SQRT2)),K.filter(function(e){return e.params.icon}).forEach(function(e){var t=e.series,n=t.mainParams.getLast(),a=t.params.icon(n?n.v:null);a instanceof Array&&(a=a[0]),e.icon=e.icon.refresh(a),r&&e.icon.resize(N*Math.SQRT2)}),t},t.initOtherSeries=function(e){if(!e.series.some(function(e){return e.isRemain})){var n=lib.parseValue(e.totalvalue),r=e.series.some(function(e){return e.isOther&&0!=e.display&&!(e.entity&&e.metric)&&!e.value});if(!r)return void t.total(n);r.isRemain=!0;var a=e.series.filter(function(e){return 0!=e.display&&!e.isRemain}),i=!a.some(function(e){return e.displayExp}),o=n&&lib.data.getCalcValue(t.series.varNamesString,n);(o||(r.display=!1)||!i)&&(r.displayExp=null,r.value=function(e){var t=o&&o.apply(this,arguments),n=this.calculator,r=n.valueFilter(),l=a.length&&n.series.reduce(function(t,n){if(a.indexOf(n.config)>=0){var i=e(n.data);r(i)&&(t+=i)}return t},null);return null==l?null:o&&r(lib.isEvalMethod(t)?t=t():t)?Math.max(0,t-l):i?null:0})}},t.displayPanels=function(e){return arguments.length?(O!=(e=e===!0)&&(O=e,V.hidden(!O).redraw()),t):O},t.displayPanelsIfHover=function(e){return arguments.length?(P=e,t):P},t.collapsible=function(e){return arguments.length?(I=e,t):I},t.total=function(e){return arguments.length?(te=t.addVariable(e),t):te},t.timeFormat=function(e){return arguments.length?(ee=e,t):ee},t.ring=function(e){return arguments.length?(G=e,t):G},t.ringWidth=function(e){return arguments.length?(null!=e&&(S=e),t):S},t.selectorMode=function(e){return arguments.length?(null!=e&&(B=e),t):B},t.getSlices=function(){return K},t.getSlice=function(e){return e.slice},t.replaceSeries=function(e,n){K.forEach(function(e){e.icon&&e.icon.destroy()}),K.splice(0),$.splice(0),ae.remove(0),initWidgetSeries(e,t,t.config),n?(t.loader.startTime(n.startTime),t.loader.endTime(n.endTime),t.reset(0)):t.loader(2)};var ie=function(){function e(e){r.length>0&&r[0].style("display","none"),e.style("display",null),r.unshift(e)}function t(e){0===r.length?e.style("display",null):e.style("display","none"),r.push(e)}function n(e){var t=r.map(function(e){return e.node()}).indexOf(e.node());return!(t<0)&&(0===t&&(e.style("display","none"),r[1]&&r[1].style("display",null)),r.splice(t,1),!0)}var r=[];return{pushFront:e,remove:n,pushBack:t}}();return t}function r(e,t,n,r,a,i){function o(e){var t=Math.asin(e[1]/Math.sqrt(e[0]*e[0]+e[1]*e[1]));return e[0]<0&&(t=-Math.PI-t),Math.PI/2-t}var l=[[e,n],[e,r],[t,r],[t,n]],s=l.map(o);return s.some(function(e){return e<a||e>i})}e.PieChart=n}},{}],66:[function(e,t,n){t.exports=function(e,t){function n(){function e(e,t){return e&&t&&c.every(function(n){var r,a,i=s.findProperty(e,n),o=s.findProperty(t,n);return i&&o&&((r=i[n])&&(a=o[n])&&r===a||"object"==typeof r&&r&&"object"==typeof a&&a&&JSON.stringify(r)===JSON.stringify(a))})}function t(e,t,n){var r=["type","date"];Object.keys(t).forEach(function(a){r.indexOf(a)>=0||(e(a,t,n),"object"==typeof t[a]&&Object.keys(t[a]).forEach(function(r){var i=n?n[a]:null;e(r,t[a],i)}))})}function n(e){var n={},r=c&&c.indexOf("key")>=0;return e.forEach(function(e){t(function(t,a){if("object"!=typeof a[t]){n[t]||(n[t]={types:[]}),n[t].types.indexOf(e.type)<0&&n[t].types.push(e.type);var i=a===findProperty(e.key,t);n[t].isKeyField=n[t].isKeyField||r&&i}},e)}),c?(Object.keys(n).forEach(function(e){var t=n[e].isKeyField||c.indexOf(e)>=0;n[e].addType=!t&&n[e].types.length>1}),Object.keys(n).forEach(function(e){Object.keys(n).forEach(function(t){!n[e].addType&&n[t].addType&&n[t].types.forEach(function(r){n[e].addType=e==r+t})})}),n):n}function r(e,n){var r={};return e.forEach(function(e){t(function(e,t,n){"object"==typeof t[e]?n[e]||(n[e]={}):n[e]=t[e]},e,r)}),r}function a(e,n){e.forEach(function(e){t(function(t,r){"object"!=typeof r[t]&&n[t].addType&&(r[e.type+"."+t]=r[t],delete r[t])},e)})}function i(e){return e.reduce(function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e},{})}function o(t,n){a(t,n);var o=i(t);return t=[],Object.keys(o).forEach(function(a){var i=[];t.forEach(function(t){var l=o[a].reduce(function(a,o){return e(t,o)?(i.push(r([t,o],n)),o.merged=!0,!0):a},!1);l||i.push(r([t],n))}),o[a].forEach(function(e){e.merged||i.push(r([e],n))}),t=i}),t}function l(e){function t(e,t){if(t){s.defaultValues[t]||(s.defaultValues[t]=function(t){return t[e]});var r=d3Format("%e-%b %H:%M");s.isUTC()&&(r=r.utc),n.push({key:t,style:"text-align: center; white-space: pre",format:r})}else n.push(e)}s.columns().forEach(function(e){e.mode=5});var n=[];["entity","timestamp"].forEach(function(n){if(e[n]&&e[n].addType)e[n].types.forEach(function(e){var r="timestamp"===n?e+".time":null;t(e+"."+n,r)});else{var r="timestamp"===n?"time":null;t(n,r)}}),s.columns(n)}var s=StreamingTable(),u=["entity","key"],c=u;s.findProperty=function(e,t){return e._tags?findProperty(e._tags,t)||(e.hasOwnProperty(t)?e:null):findProperty(e,t)},s.getTags=function(e){return null==e._tags?extendObject(e.key,e.tags)||!1:e._tags},s.on("render",function(){s.el().classed("axi-property",!0)}),s.post={queries:[]},s.loader.postParams(function(e,t,n,r,a){return s.post.queries.map(function(e){var t=extendObject({},e),n=new Date(a[0]).toISOString(),r=new Date(a[1]).toISOString();return null==t.startTime&&null==t.startDate?t.startDate=n:null==t.startDate&&(t.startDate=new Date(t.startTime).toISOString()),delete t.startTime,null==t.endTime&&null==t.endDate?t.endDate=r:null==t.endDate&&(t.endDate=new Date(t.endTime).toISOString()),delete t.endTime,t})});var d=s.tbodyData;s.tbodyData=function(e){if(!arguments.length)return d();e.forEach(function(e){var t=new Date(e.date),n=t.getTime();e.timestamp=n});var t=n(e);return l(t),c&&e.length&&(e=o(e,t)),d(e),s},s.joinRows=function(e){return arguments.length?(c=1==e?u:e,s):c},s.properties=function(e){return arguments.length?void(e.length?s.post.queries=e:s.post=null):s.post.queries};var f=s.getExpandedKeys;return s.getExpandedKeys=function(e){return f(e,identity)},s}e.PropertyTable=n}},{}],67:[function(e,t,n){t.exports=function(t){var n=e("./timechart").TimeChart,r=e("./tchart");n.seriesComparator=r.seriesComparator,t.TimeChart=n}},{"./tchart":70,"./timechart":71}],68:[function(e,t,n){function r(e,t){function n(e,n){for(var l,c=s.length,d=1/0;c-- >0;){for(var f,p=s[c],h=i[p];o[p]<h.xArr.length;){if(f=h.xArr[o[p]]+h.shift,f>e){d>f&&(d=f,l=p);break}++o[p]}o[p]>=h.xArr.length&&s.splice(c,1)}var g=s.length?(u=r(l),Math.min(d-e,a)):a;return g=Math.max(0,g+u-n-t),Math.min(a,g)}function r(e){var t=i[e],n=l[e],r=!0;if(null!=n){for(var a=t.styles.changes,s=o[e];(s>a[n]||(r=!1))&&++n<a.length;);l[e]=n}return t.strokeRanges[r?t.styles?t.styles.indices[t.styles.indices.length-1]:0:t.styles.indices[n]][0]}null==t&&(t=1);var a=e.width,i=e.next,o=i.map(d3.functor(0)),l=i.map(function(e){return e.styles&&e.styles.changes.length?0:null}),s=i.map(function(e,t){return t}),u=0;return n}function a(e,t,n,r){var a=e.lows=t?[]:n;if(t){var i=null;e.xArr.forEach(function(e,r){if(i==e)return a.push(a[r-1]);i=e;for(var o,l,s,u=t.length;u-- >0;)if(e>(l=(o=t[u]).xArr)[o.len-1])t.splice(u,1);else if((s=searchIndex(e,l,!0))&&e==l[--s])return a.push(o.yArr[s]);return a.push(n)})}}function i(e,t,n,r){function a(e){if(!arguments.length)if(h<n.length)e=l(p,n[h],f[h]);else{if(!d)return;e=r}var t=u.length-1;t!=-1&&p==u[t]&&e==c[t]||(u.push(p),c.push(e))}function i(e){f.splice(e,1),f.gaps.splice(e,1),n.splice(e,1)}function s(){var e=t,r=h,a=g;g=-1,h=0;for(var l;h<n.length;h++){var s=o(p,l=n[h],f,h,a,r);if(null==s)i(h--),a--,r--;else{var u=l.xArr[f[h]+1];if(e>u&&(e=u,g=h),s)break}}return e}var u=[],c=[],d=null!=r,f=n.map(function(){return-1});f.gaps=n.map(function(e){return e.gaps.length?0:null});for(var p=e,h=-1,g=-1;;){var v=s();if(a(),p=v,g==-1){a();break}h!=g&&a(),a(n[g].yArr[f[g]+1])}return{xArr:u,yArr:c}}function o(e,t,n,r,a,i){var o=t.len-1,l=n[r],s=l+1,u=r>i?searchIndex(e,t.xArr,!0,s,o)-1:r==a||r>a&&t.xArr[s]==e?s:l,c=u==o;if(n[r]=c?null:u,c)return null;var d=u>=0;if(d){var f=n.gaps[r];if(null!=f&&u!=l){var p=t.gaps.length-1;f=searchIndex(u,t.gaps,!1,f,p),n.gaps[r]=f>p?null:f}d=u!=t.gaps[f]}return d}function l(e,t,n){var r=t.xArr[n],a=t.yArr[n],i=e-r,o=i&&++n<t.len&&t.yArr[n]-a;return o&&(a=Math.round(a+o*i/(t.xArr[n]-r))),a}function s(e,t){var n,r=0,a=e.gaps,i=a.length,o=e.styles,l=o&&o.indices,s=o&&o.changes;if(!s||!s.length||(s.forEach(function(e,o){n=l[o];for(var s;r<i&&(s=a[r])<e;r++)t(s,n,r);t(e,n,s==e?r++:null)}),s[s.length-1]!=e.len-1)){for(n=l?l[l.length-1]:null;r<i;r++)t(a[r],n,r);t(e.len-1,n,null)}}n.drawColumnPath=function(e,t){var n=e.styles?e.styles.map(function(){return[]}):[[]],a=e.xArr,i=e.yArr,o=e.lows,l=!o.length,u=e.shift,c=0,d=r(e,t);return a.length?(s(e,function(t,r){for(var s=null==r?n[r=0]:n[r],f=e.strokeRanges[r],p=Math.ceil(f[1]),h=(f[0]+f[1])/2,g=f[1]-f[0],v=c;v<=t;v++){var m=a[v]+u,y=d(m,p),x=i[v],b=l?o:o[v],_=b!=x;_?y||(x+=h,b+=h):(y+=g,m-=h),s.push("M"),s.push(m),s.push(","),s.push(x),_&&(s.push("V"),s.push(b)),y&&(s.push("H"),s.push(m+y),_&&(s.push("V"),s.push(x),s.push("Z")))}c=v}),n.map(function(e){return e.join("")})):n.map(function(){return""})},n.drawLinePath=function(e,t){var n=e.xArr,r=e.yArr,a=e.styles?e.styles.map(function(){return[]}):[[]],i=0;return n.length?(s(e,function(e,o){var l=null==o?a[0]:a[o],s=n[i],u=r[i];for(l.push("M"),l.push(s),l.push(","),l.push(u);++i<=e;){var c=s!=(s=n[i]),d=u!=(u=r[i]);c&&d?(l.push("L"),l.push(s),l.push(","),l.push(u)):c?(l.push("H"),l.push(s)):d&&(l.push("V"),l.push(u))}t&&l.push("Z")}),a.map(function(e){return e.join("")})):a.map(function(){return""})},n.drawConstantPath=function(e,t,n){return[["M",t[0],",",n(e.last.v),"H",t[1]].join("")]},n.setColumnsWidth=function(e,t,n,r,a){var i=Math.min(r,n),o=Math.ceil(i),l=(r-i)/2;e.forEach(function(n,r){var s=t?r:0;n.shift=Math.round(i*s+(a?l*(2*s+1):0)),n.width=o,n.next=t?[e[(r+1)%e.length]]:e})},n.encloseColumnPaths=function(e,t,n){for(var r=e.length;r-- >0;)a(e[r],r&&e.slice(0,r),t,n)},n.encloseLinePath=function(e,t,n){var r=0,a=[],o=null,l=null,u=e.styles,c=null,d=[];return s(e,function(s,u,f){var p=e.xArr.slice(r,++s),h=e.yArr.slice(r,r=s),g=i(p[0],p[p.length-1],t,n);o=(o?o.concat(p):p).concat(g.xArr.reverse()),l=(l?l.concat(h):h).concat(g.yArr.reverse()),null!=f&&a.push(o.length-1),null!=u&&(null==c||c!=u&&d.push(o.length-1))&&(c=u)}),d.length&&(u=extendObject(u.slice(0),{changes:d,indices:u.indices})),{xArr:o,yArr:l,gaps:a,len:o.length,styles:u}},n.pathIsDisconnected=function(e,t,n){var r=t.gaps;if(null==n){var a=t.xArr,i=searchIndex(function(t){return e<=a[r[t]]},0,r.length-1)-1;return e<a[r[i]+1]}return n==r[searchIndex(n,r)]},n.getPathCoordinates=function(e,t,n,r,a,i,o,l,s,u,c,d,f){function p(e,t){var n=a(c?Math.round(e/c)*c:e),r=i(t),l=I&&g(f(e));M<0||l&&(o&&h(n,r),I.changes.push(M))?(k.push(n),T.push(r),M++):h(n,r)}function h(e,t){var n=k[M],r=T[M],a=e-n,i=t-r;_&&a>_?(w&&(k.push(n+w),T.push(r)),S.push(k.length-1)):u&&a&&i&&(k.push(e),T.push(r)),(a||i)&&(k.push(e),T.push(t)),M=k.length-1}function g(e){var t=I.indexOf(e);return t!=E&&I.indices.push(E=t<0?I.push(e)-1:t)}for(var v,m=s?Math.max(a(s)-a(0),0):0,y="function"==typeof d?d():d,x=1,b=y?Math.max(a(y)-a(0),0)+x:0,_=b,w=Math.min(_,m),k=[],T=[],S=[],E=0,M=-1,I=f&&extendObject([],{changes:[],indices:[]}),C=n;C<=r;C++)v=t[C],p(e.t[v],e.v[v]);return u&&m&&M>-1&&(k.push(k[M]+m),T.push(T[M])),{xArr:k,yArr:T,gaps:S,len:k.length,styles:I}}},{}],69:[function(e,t,n){function r(e,t,n,r){if(t>n)return[];var i=[],o=-1;return a(e,t,n,r,function(e){o!=e&&i.push(o=e)}),i}function a(e,t,n,r,a){for(var o,l,s=Math.round(r*e.t[t]),u=0==t||Math.round(r*e.t[t-1])+1<s,c=i.getRangeFn(e)().getRange,d=t;d<=n;d++)u&&a(d),l=d<n?searchIndex(Math.ceil((s+.5)/r),e.t,!1,d+1,n)-1:n,o=c(d,d,d+1,l),d=l,o[0]<o[1]?(a(o[0]),a(o[1])):(a(o[1]),a(o[0])),u=d==e.len-1||s+1<(s=Math.round(r*e.t[d+1])),u&&a(d)}var i=e("./tchart");n.concatPoints=function(e,t,n,a){var i=t.length;if(!i)return n;var o=n.length;if(!o)return t;for(var l=Math.round(a*e.t[t[i-1]]),s=Math.ceil((l+.5)/a)-1,u=-1;o&&e.t[n[0]]<=s&&(u=n.shift(),o--,!0););if(u<0)return t.concat(n);for(var c=Math.ceil((l-.5)/a),d=-1;i&&e.t[t[i-1]]>=c&&(d=t.pop(),i--,!0););return t.concat(r(e,d,u,a)).concat(n)},n.getPoints=r},{"./tchart":70}],70:[function(e,t,n){function r(e,t,n,r){if(n>r){if(n>=e.len||r<0)return null;n=r++}var i=t.range;return i&&i.i0==n&&i.i1==r||(i=a(e)().getRange(n,n,n+1,r).map(function(t){return e.v[t]}),t.range=i,i.i0=n,i.i1=r),i}function a(e){return e.rangeFn||(e.rangeFn=RangeFn())}function i(e,t){var n=e.isThreshold-t.isThreshold||e.isThreshold&&(e.axisIndex-t.axisIndex||e.entIndex-t.entIndex||-1);if(n)return n;var r=s.indexOf(e.mode()),a=s.indexOf(t.mode());return(a<0?0:a)-(r<0?0:r)||l[r<0?"line":e.mode()].apply(this,arguments)}var o=e("./path");n.TChart=function(e,t){function n(e){var t=v.axis[e+1];if(t){var n=null;S.some(function(t){if(t.axisIndex==e&&t.available){var r=t.color();if(null==n)n=r;else if(n!=r)return n=null,!0}}),t.color(n)}}function l(e){var t=e.getOwnPath(),n=t.styles,r=e.pathNodes(),a=r.length,i=n?n.length:1;if(a!=i){var o=r[0].parentNode;if(a<i)for(var l=d3.select(o),s=a;s<i;s++){var u=l.append("path"),c=u.node(),d=r[s-1].nextElementSibling;c!=d&&o.insertBefore(c,d),e.fire("renderpath",u),r.push(c)}else for(var s=a-i;s-- >0;)o.removeChild(r.pop())}var f=e.filled=e.column()||null!=e.sub;e.pathEl().classed("axi-chart-series-filled",f).attr("fill-opacity",f&&!e.isStacked()?".5":null),r.lastIndex=i>1?n.indices[n.indices.length-1]:0,r.forEach(function(t,r){e.setStyle(d3.select(t),n&&n[r])}),e._stylesApplied=!0}function s(e){var t=e.pathNodes(),n=e.pathEl(),r=t.length>1&&d3.select(t[t.lastIndex]),a=e.getMarkers()||null,i=e.prev.i1==e.data().len-1&&e.getEndMarker()||null,o=e.getMarkerLink(n,a,e.prev.markers),l=e.getMarkerLink(r||n,i,e.prev.endMarker,!0);n.attr("marker-start",o).attr("marker-mid",o).attr("marker-end",!r&&l||o),r&&l&&r.attr("marker-end",l),navigator.isIE&&(l||o)&&(!o&&r||n).each(function(){this.parentNode.appendChild(this.parentNode.removeChild(this))})}function p(){var e=v.innerWidth();S.forEach(function(t){if(t.display()){var n=t.series.data,r=n.disconnect&&0!=t.connectValues()&&!t.series.isStacked;if(t.data(n.disconnect?n=n.disconnect(r):n),w||x){var i=lib.data.getVisibleInterval([n],M);t.domain.i0=searchIndex(i[0],n.t),t.domain.i1=searchIndex(i[1],n.t,!1,t.domain.i0,n.len-1)-1}1!=t.yScale().scope()&&(t.domain.range=null),a(n).array()||n.rangeFn(n.v,e)}})}function h(e,t){var n=t.autoScale();return S.reduce(function(a,i){if(i.display()&&i.axisIndex==t.axisIndex){if(!n){var o;null!=(o=i.params.maxRange)&&extend(e,o),null!=(o=i.params.minRange)&&extend(e,o)}var l=i.data();extend(e,r(l,i.domain,n?i.domain.i0:0,n?i.domain.i1:l.len-1)),f.indexOf(i.mode())>=0&&extend(e,g(i)),a=!0}return a},!1)}function g(e,t){var n=0;return t?e.prev.sy(n):n}var v=Chart(),m=!1,y=!1,x=null,b=!1,_=v.prev,w=!1,k=!1,T=[],S=v.series,E=TimeScale(LinearScale(),t,null,e.isUTC),M=E.domain(),I=v.yScale;v.on("render",function(){v.clipPath()&&v.clipPathRect().attr("y",-2)}),v.seriesChange=function(){return w},v.extentChange=function(){return null==x?x=domainChange(E,_):x},v.xScale.add(E),v.axis.add(Axis(2,!!e.isUTC).scale(E).tickFormat(getTimeAxisFormat(e))),I.methods("setDomain").options({extendDomain:h,autoScale:!1}),[0,1].forEach(function(e){I.add(ValueScale(LinearScale(),t,e))});var C=["auto","left","right","true",!0];S.onItemAdd(function(e){function t(){return!e.alertChanging()&&r.vars&&r.vars.values.alertExp||0}function n(t){var n=e.data(),r=w[0]&&x.call(n,t,0),a=r&&w[0](r);if(e.useAdditionalStyles()){var i=w[1]&&n.interpolate(t,lib.getMaximumPeriod(n.period)[1]||null,n.interpolateMode,n.roundTo),o=i&&i[1]<0&&w[1](),l=w[2]&&t==lib.roundTime(v.updateTime,n.period,0,n.isUTC)&&w[2](),s=w[3]&&w[3]();return t==lib.roundTime(v.updateTime,n.period,0,n.isUTC)&&log(l),joinStyles([a,s,l,o])}return a||null}var r=e.series,a=r.params,o=I[e.axisIndex],l=C.indexOf(e.getLastValueLabel()),s=!1,f=!1,p=S.length-1,h=null,g=!1,m=!0,y=null,x=r.vars&&r.vars.calc.alertExp,b=0,_=v.axis[e.axisIndex+1];e.getFormat=function(){return r.mainParams.getFormat(o.domain(),_&&_.ticks()*_.ticks())};var w=null;if(e.allStyles=function(t){return arguments.length?(w=t,e):w},e.resetAllStyles=function(){var t=[e.alertChanging()];return e.useAdditionalStyles()&&(t=t.concat(e.getAdditionalStyles())),e.allStyles(!!t.some(identity)&&t)},e.alertChanging=function(){return e.column()&&x&&a.alertStyle},e.useAdditionalStyles=e.column,e.getAdditionalStyles=function(){return[a.negativeStyle,e.step()&&a.currentPeriodStyle,r.keys.isStat&&a.forecastStyle]},e.updateOwnPath=function(){return e.resetAllStyles(),e.setOwnPath(e.roundTo(),e.disconnectStep,w&&n),e.getOwnPath()},a.format&&!o.format()&&o.format(a.format),e.yScale(o),e.getBaseData=function(){return r.origin?r.origin.data:e.data()},e.prev.markers={data:null,link:null},e.prev.endMarker={data:null,link:null},l>=0){var k=l?Math.min(1,l-1):e.axisIndex;e.lastTip=Tooltip().arrow(k?"left":"right").translate(function(e,t,n,r,a,i){return[k*i.width-(1-k)*r+t+k,e+n-a/2]})}e.connectValues=function(t){return arguments.length?(y=t,e):y},e.collapsible=function(t){return arguments.length?(m=t,e.setDisplay(),e):m},e.collapsed=function(t){return arguments.length?(g=t,e.setDisplay(),e):m&&g},e.enabled=function(t){return e.params.hidden=!t,e};var T=null;e.color=function(){return null==T?e.stroke():T},e.setStyle=function(n,r,i){var o=null==n,l=o?!e.removed()&&e.pathEl():n;if(l){var s=[].concat(a.style);b=t(),a.alertStyle?b&&(s=s.concat(a.alertStyle(b))):l.classed("axi-chart-series-alert",b);var u=getColorStyle(l,joinStyles(s.concat(r))),c=null!=u;return l.attr("style",joinStyles([c&&"stroke: "+u,e.filled&&"fill: "+(c?u:"function"==typeof e.stroke()?e.stroke()():e.stroke()),l.attr("style"),c&&!e.filled&&"fill: none"])).crisp(),(o||i)&&(T=u),u}return null},e.reorder=function(){S.splice(p,1);var t=Math.max(0,searchIndex(function(t){return i(e,S[t])<0},0,S.length-1));S.splice(t,0,e),p!=t&&S.forEach(function(e,t){e.index(t)})},e.mode=function(n){if(!arguments.length)return h;if(e.main&&(r.params.mode=n,r.config&&(r.config.mode=n)),h!=(n=e.getMode(n))){var a=h;h=n,E=c.indexOf(h)>=0,M=d.indexOf(h)>=0,e.column(u.indexOf(h)>=0),e.allowTranslate(!M),e.reorder(),b!=t()&&e.setStyle(),e.fire("modechange",h,a)}return e};var E=!1,M=!1,A=!1,D=null;e.isStacked=function(){return E},e.isConnectable=function(){return M},e.getStep=function(t){return t?(e.series.origin||e.series).data.getMedianDistance():e.step()||(null==D?e.getStep(!0):D)},e.roundTo=function(e){return arguments.length?D!=e&&(D=e,!0):D},e.inline=function(t){return arguments.length?(A=t,e):A},e.markers=function(t){return arguments.length?(s=t,e):s},e.endMarker=function(t){return arguments.length?(f=t,e):f},e.index=function(t){return arguments.length?(p=t,e):p}}).ownOptions({lastValueLabel:!1,chart:v}).options({xScale:E,allowRemove:!0,on:{stepchange:function(){k=!0},modechange:function(e,t){this.display()&&(b=f.indexOf(e)>=0!=f.indexOf(t)>=0)},datachange:function(){w=!0},displaychange:function(){w=!0},visibilitychange:function(){_.visibilitychange=!0,this.available&&(_.seriesactivate=!0)},steplinechange:function(){var e=this;e.pathEl().classed("axi-chart-series-stepline",e.stepline())},render:function(){var t=this;t.fire("renderpath",t.pathEl()),t.setStyle(),t.lastTip&&!t.lastTip.rendered()&&(t.lastTip.alignNode(v.backgroundEl().node()).renderTo(e.tooltipContEl).el().classed("axi-tooltip-default",!1).style("z-index",getZIndex(v.el().node())+10),T.push(t.lastTip.el().node()))},renderpath:function(e){var t=this.series.keys.key.statistic[0];t&&e.classed("axi-chart-series-"+t.replace(/_[0-9]+$/,""),!0),e.datum({tseries:this}).attr("stroke",this.stroke())}}}),_.t0=-(_.t1=1/0),v.getReloadInterval=function(){if(v.display()){var e=lib.data.roundInterval(M,1),t=e[0],n=e[1],r=_.t0,a=_.t1;if(t<n&&(_.seriesactivate||t<r||n>a)){if(_.seriesactivate||t>a||n<r)_.seriesactivate=!1,_.t0=t,_.t1=n;else if(t<r?_.t0=t:e[0]=a,n>a?_.t1=n:e[1]=r,!(e[0]<e[1]))return;return e}}};var A=v.redraw;return v.redraw=function(){if(!v.rendered()||!v.display())return A.apply(this,arguments);v.extentChange(),p();var e=_.autoScale!=I.autoScale()&&(_.autoScale=I.autoScale(),!0),t=e||b||w||x,r=I.setDomain(t).some(function(e){return e[0]});if(r&&y){var a=I.map(function(e){return lib.isFinite(e(1))}),u=!1;v.horGrid.forEach(function(e){e.display(!u&&(u=a[e.index]))})}w=b=!1,x=null;var c=A.apply(this,arguments),d=v.seriesEl().node().childNodes;k&&(S.sort(i).forEach(function(e,t){e.index(t)}),k=!1);var f=S.reduce(function(e,t){return t.removed()?e:e.concat(t.pathNodes())},[]);f.some(function(e,t){return e!=d[t]})&&d3.selectAll(f).order();var h=null,T=!1,M=[],C=S.filter(function(e){return e.displayed()});C.forEach(function(e){e._stylesApplied=!1,e.above=null;var t=e.isConnectable(),n=h&&(t||e.column())&&!i(h,e,!0)?h:e.isStacked()?0:null,r=e.connectsTo!=n&&(e.connectsTo=n,!0),a=e.sub=t?n:null,o=a&&e.series.keys.key.statistic[1]==lib.series.typeIndices.lower_confidence,l=null==e.getOwnPath();a&&(a.above=e),(l||r||a&&T)&&(e.pathChanged=!0),!e.column()||n&&M.some(function(t){return t[t.length-1]==n&&t.push(e)})||M.push([e]),o||(h=e,T=l)});var D=M.reduce(function(e,t){var n=t.one=t[0];if(t.some(function(e){return e.pathChanged})){e.push(t);var r=!n.step(),a=n.isStacked(),i=t.length>1,s=r&&i?t.reduce(function(e,t){var n=t.getStep(!0);return e&&n?Math.min(e,n):e||n},0):null,u=!(a||r&&!s),c=t.paths=t.reduce(function(e,t){t.pathChanged=!0;var n=t.getOwnPath(),r=null==n,a=t.inline(u).roundTo(s);(r||a)&&(n=t.updateOwnPath(),r&&l(t),n.strokeRanges=t.pathNodes().map(function(e){return e.__strokeRange__})),e.push(n)},[]);if(i&&a){var d=g(n,!0);o.encloseColumnPaths(c,d,!1)}}},[]);if(D.length){var O=M.reduce(function(e,t){var n=t.one.getStep(),r=(E(n)-E(0))/(t.one.inline()?t.length:1);e[n]=e.hasOwnProperty(n)?Math.min(e[n],r):r},{}),P=E.range(),L=Math.round((P[1]-P[0])/30);D.forEach(function(e){o.setColumnsWidth(e.paths,e.one.inline(),L,O[e.one.getStep()],m)})}return C.forEach(function(e){if(e.pathChanged){var t=e.isStacked(),n=e.column(),r=e.sub,a=!n&&null!=r,i=e.getOwnPath(),s=g(e,!0);if(null==i&&(n||e.inline(!1).roundTo(null),i=e.updateOwnPath(),l(e)),a){var u=t?[]:[r.getOwnPath()];if(t)for(var c=e;c.sub;)c=c.sub,u.push(c.getOwnPath());i=o.encloseLinePath(i,u,t?s:null,!e.step())}n&&null==i.lows&&(i.lows=s);var d=e.isThreshold?o.drawConstantPath(e.data(),E.range(),e.prev.sy):n?o.drawColumnPath(i):o.drawLinePath(i,a),f=e.pathNodes();d.forEach(function(e,t){f[t].setAttribute("d",e)})}}),C.forEach(function(e){if(e.pathEl().classed("axi-chart-subseries",!!e.above),!e._stylesApplied){var t=e._mode!=e.mode()&&(e._mode=e.mode(),!0);(t||e.pathChanged)&&l(e)}s(e),e.pathChanged=!1}),S.forEach(function(e){var t,n,r=e.lastTip,a=null;if(r&&r.display())if(t=e.displayed()&&e.series.data,t&&t.len){for(var i=E.domain(),o=t.len-1;o>=0;--o)if(t.t[o]<i[1]){a=t.v[o];break}a=null===a?t.v[0]:a,(n=e.yScale()(a))>=-1&&n<=v.innerHeight()+1&&r.color(e.color()).format(e.getFormat()).record(a).showAt(n)}else r.visible(!1)}),n(0),n(1),v.clipPathRect()&&v.clipPathRect().attr("height",v.innerHeight()+5),c},v.displayHorGrid=function(e){return arguments.length?(y!=e&&(y=e,v.horGrid=v.grid.filter(function(e){return(e.index=I.indexOf(e.scale()))>=0}),y||v.horGrid.forEach(function(e){e.display(!1)})),v):y},v.targets=function(e){return arguments.length?(T=e,v):T},v.centralizeColumns=function(e){return arguments.length?(m=e,v):m},v},n.getRangeFn=a;var l={line:function(e,t){return e.step()-t.step()||e.axisIndex-t.axisIndex||e.entIndex-t.entIndex||t.typeWeight()-e.typeWeight()},column:function(e,t,n){return e.step()-t.step()||e.axisIndex-t.axisIndex||e.classIndex-t.classIndex||t.rangeIndex()-e.rangeIndex()||!n&&e.entIndex-t.entIndex},columnstack:null,range:function(e,t,n){return e.step()-t.step()||e.axisIndex-t.axisIndex||e.entIndex-t.entIndex||!t.isStat-!e.isStat||e.forecastNameIndex-t.forecastNameIndex||!n&&e.rangeIndex()-t.rangeIndex()},stack:function(e,t,n){return e.step()-t.step()||e.axisIndex-t.axisIndex||e.classIndex-t.classIndex||(n?!t.series.subData||t.series.subData.indexOf((e.series.origin||e.series).data)<0:t.rangeIndex()-e.rangeIndex()||e.entIndex-t.entIndex)}},s=Object.getOwnPropertyNames(l),u=["column","columnstack"],c=["stack","columnstack"],d=c.concat("range"),f=c.concat("column");n.seriesComparators=l,n.drawModes=s,n.stackModes=c,l.legend=function(e,t){return e.axisIndex-t.axisIndex||e.isThreshold-t.isThreshold||e.entIndex-t.entIndex||t.typeWeight()-e.typeWeight()||e.step()-t.step()},l.columnstack=l.stack,n.seriesComparator=i},{"./path":68}],71:[function(e,t,n){function r(e,t){var n=lib.series.create(null,lib.series.getKeys.apply(this,lib.series.getKey({value:u.value})));n.params=e.params,n.origin=e,n.isStacked=!0,extendObject(n,u,d3.functor(!1)),e.stacked=n,t.addSeries(n);var r=n.stackData=n.data;return r.period=e.data.period,r.setTransformInterval(),t.setValue(n),n}function a(e,t,n,r,a,i,o){function l(e){return r?Math.round(e/r)*r:e}function s(n){return t(l(e.t[n]))+a}var u=t.invert(n-a),c=Math.max(searchIndex(function(t){return u<l(e.t[t])},0,e.len-1)-1,0);return c<e.len-1&&(s(c)+i+s(c+1))/2<=n+o&&c++,c}function i(e,t,n,r,a,i,o,l,s,u){function c(e){return o?Math.round(e/o)*o:e}function d(e,o){var l=m==o?y:y=Math.pow(n(m=o)-a,2);l<i&&(l+=v==e?x:x=Math.pow(t(v=e)-r,2),i>l&&(i=l,w=p))}function f(i){var o=t.invert(r),s=o-_,u=o+_,f=p=searchIndex(function(t){return s<c(e.t[t])},0,e.len-1),v=searchIndex(function(t){return u<=c(e.t[t])},f,e.len-1)-1;if(k&&f<=v){var m=Math.abs(n.invert(b)-n.invert(0)),y=n.invert(a);h=y-m,g=y+m,k=!1}for(var x,w,T=f;p<=v;p++){var S=l&&T;(T=h<(w=e.v[p])&&w<g)&&d(x=c(e.t[p]),w),S&&(d(T?x:c(e.t[p]),e.v[--p]),p++)}var E=!i&&e.period[1];if(E&&s<(x=c(e.t[p=e.len-1]+E))&&x<u){var w=e.v[p];(k||h<w&&w<g)&&d(x,w)}}var p,h,g,v=null,m=null,y=0,x=0,b=Math.sqrt(i),_=t.invert(b)-t.invert(0),w=-1,k=!0;return r-=s,f(),u&&(r-=u,f(!0)),w<0?null:[i,w]}var o=e("./tchart"),l=e("./timeseries").TimeSeries;n.TimeChart=function(e){function t(e){return X=e.classed("axi-timechart",!0),ke.renderTo(e),K(e),$.display()&&($(X),$.el().classed("axi-chart-context",!0),$.el().node().insertBefore($.backgroundEl().node(),$.series.renderTo().node()),q($.el())),K.panels.reorder(),m(),$.display(),ce=!0,me.push(K.el().node().ownerSVGElement),be.forEach(function(e){me.push(e.el().node())}),G(),n(),t}function n(){var e=q.extent();q.on("brushstart",function(){we.setTimer(0)}).on("brush",function(){we.domain(e)&&G.fire("changed",we,!0)}).on("brushend",function(){((q.empty()?we.scope()&&(we.scope(null),!0):we.domain(e))||we.zoomed())&&G.fire("changed",we,!1)})}function u(e){e&&(Me=null,c());var t=we.setDomain(e)[0];if(Ee=Math.max(Ee,we.domain()[1]),$.display()&&(e||t)){var n;we.scope()&&(e&&(n=extend(n,c())),we.scope().isDefault||(n=extend(n,Z.domain()))),n=extend(n,we.domain()),q.extent(we.domain()),Z.domain(n)}}function c(){if(null==Me){var e=f(),t=e&&!e.hasFutureData&&!ne.startTime()&&!ne.endTime()&&ne.lookAhead();t&&transformExtent(e,[0,t]),Me=e||!1,Me&&(Ee=Math.max(Ee,Me[1]))}return Me}function d(e){function t(){var e=ne.getInterval(2);return e.fixed?e:null}var n=e.fixed?t:e.tspan?we.getScope(e,e.now):null,r=we.scope();return n&&(n.isDefault=!0),we.scope(n),!(!r&&!n)}function f(e){return lib.data.getVisibleInterval(pe.reduce(function(t,n){!n.data||!C(n)||n.keys.isThreshold||e&&!e(n)||t.push(n.data)},[]))}function p(e){var t=e.getTotalXY(),n=1-(t[1]*t[1]-t[0]*t[0])*(1-Ie)/100;return Math.max(Ie,n)}function h(e,n){var r=this,a=e&&e.interval,i=n&&n.interval,o=lib.getMiddleInterval(a,i),l=o&&t.addIntervalControl(o,r);return l&&g(r,1),l}function g(e,t){var n=e.expand(),r=n>0;e.expand(r?n+t:null,r,!0)}function v(e){return 0===e}function m(){var n=e.tooltipContEl=e.getTooltipCont&&e.getTooltipCont(),r=t.axisTooltipData;pe.some(function(e){return e.vars&&e.vars.calc.displayExp})||r.some(function(e,t){return e.set==_e.collapsible&&(r.splice(t,1),!0)}),pe.some(function(e){return e.data.disconnectValue})||r.some(function(e,t){return e.set==_e.connectValues&&(r.splice(t,1),!0)});var a=getZIndex(X.node());xe.alignNode(K.backgroundEl().node()).renderTo(n).el().classed("axi-tooltip-default",!1).style("z-index",a+30),U.alignNode(K.backgroundEl().node()).renderTo(n).el().style("z-index",a+40),y(),ve&&ve.renderTo(n).el().classed("axi-tooltip-scroller",!0).style("z-index",a+40)}function y(){var e=ie.filter(function(e){return e.value.some(function(e){return B.indexOf(e)>=0})});e.length&&(ve=t.statTooltip=x(),ve.controls=e,be.add(ve))}function x(){var e=d3Format(".1f"),n=Tooltip().hideDelay(te).translate(function(e,t,n,r,a,i){return[t+(i.width-r)/2,n+i.height+5]}).on("render",function(){function r(e){return(e=Math.round(e))<i?i:e>o?o:e}function a(){p.text("&#177; "+(he[0]<.1?"0.1":e(he[0]))),f.text(x+"%")}var i=1,o=99.99,l=Math.floor(o-i),s=n.innerEl(),u=s.append("div"),c=s.append("div"),d=s.append("div"),f=u.append("span").text("99%"),p=c.append("span").text("&#177; 0.0"),h=d.append("span").text("1%"),g=d.append("span"),v=d.append("span").text("99%");u.append("span").text("Confidence Interval: "),c.append("span").text("Standard Deviation: ");var m=Math.max(getNodeRect(u.node()).width,getNodeRect(c.node()).width),y=Math.max(m-getNodeRect(h.node()).width-getNodeRect(v.node()).width,l);s.style("min-width",m+"px");var x=r(he[1]);a(),n.scroller=Scroller(g,y,l)(Math.round(y*(x-i)/(o-i))).on("move",function(e){x=r(e/y*(o-i)+i),t.confidenceLevel(lib.series.getLevelValue(x)),a(),t.redraw(!0)}).on("start",function(){n.visible(!0)}).on("end",function(){n.visible(!1)}),n.isUsed=n.scroller.dragging});return n}function b(){return Y.map(function(e){return e.getReloadInterval()}).reduce(extend)}function _(){oe[0]&&!oe[0].interval[0]&&oe[0].state(j?"selected":null),oe.forEach(function(e){e.interval[0]&&e.state(e.state()&&(j?"highlighted":"selected"))})}function w(e,t,n,r){var a=e.panels._map[t];if(a){var i="interval"===t,o=a.some(function(e){return instanceofArray(e.value)?e.value.indexOf(n)>=0:e.value===n});return o&&o.state(r?i&&j?"highlighted":"selected":null)}}function k(e){var t=e.index();if(1==t||3==t){var n=K.panels;n[t]=n[t-1],n[t-1]=e,n.resetIndices()}}function T(e){return e.stacked?e.stacked.tseries.concat(e.tseries):e.tseries}function S(e){var t=e.series.origin||e.series;t.vars&&t.vars.calc.displayExp&&e.collapsed(!t.vars.values.displayExp)}function E(e){var t=e.series.origin||e.series;t.vars&&t.vars.calc.enabledExp&&e.enabled(t.vars.values.enabledExp)}function M(e){var t=e.series,n=t.legendItem=ke.datum(e),r=-1;return ke.some(function(t,n){return n<ke.length-1&&o.seriesComparators.legend(e,t.data)<0&&(r=n,!0)}),r>=0&&(ke.splice(r,0,ke.pop()),ke.preference.splice(r,0,ke.preference.pop())),n.state(e.params.hidden&&"hidden"),n}function I(e){var t=e.series,n=e.chart.display();if(t.origin){var r=n&&(!t.isStacked||ge)&&!!t.origin.tseries.some(function(t){return t.chart==e.chart&&t.available});e.available=r&&!!t.origin.data.len,e.visible(r)}else{var a,i=t.display&&t.initialDisplay&&P(t,e.chart)&&(e.chart==$||!t.contextOnly);e.chart==K&&(t.displayInMain=i,t.legendItem.display(i&&e.displayInLegend()).state(t.params.hidden&&"hidden")),a=n&&i&&!t.params.hidden,e.available!=a&&(e.available=a,e.fire("visibilitychange")),e.visible(e.available&&!(ge&&t.keys.isStackable))}}function C(e){return e.tseries.some(function(e){return e.available})}function A(e,t,n,r,a){var i=!1,o=r?n[0]:n;if(e.forEach(function(e){O(e,t,o,r,!0)&&(i=!0)}),i||a){var l=pe["select"+t[0].toUpperCase()+t.substr(1)];pe.forEach(function(e){D(e,t)&&(L(e,t)==o?N(e,!0):l&&r&&e.initialDisplay&&l(e,n))})}return i}function D(e,t){return!e.origin&&(e.keys.key.period[0]?!e.forceInterval||"interval"===t:!e.keys.isThreshold)}function O(e,t,n,r,a){return!!n&&(a&&w.apply(this,arguments),!(t=e.selectableKeys[t])[n]!=!(t[n]=r))}function P(e,t){return de.every(function(n){var r=D(e,n)&&L(e,n);return!r||t.selectableKeys[n][r]})}function L(e,t){return"type"===t?e.keys.key.statistic[0]:"interval"===t?e.keys.key.period[0]:e.keys.key[t][0]}function N(e,t){var n=!!Y.some(function(t){return P(e,t)});return e.display!=n&&(e.display=n&&(!t||!!Oe[e.keys.metricId]&&(e.initialDisplay=!0)),!0)}function F(e,t){return e||(e=_e),e.reduce(function(e,n){n.available&&(!t||t(n))&&(n=n.series.data)&&e.indexOf(n)<0&&e.push(n)},[])}function V(){function e(e){var t=e.keys.key,n=t.period[0]||e.data.period[0],r=t.statistic[0]||!n&&"detail"||"";return[e.params.axisIndex,n,r,e.keys.classIndex].join(":")}var t=!1,n="columnstack"===Q,a=pe.filter(function(e){return e.isStacked?(e.tseries.forEach(I),!1):e.keys.isStackable&&e.data.len&&C(e)&&e.tseries.some(function(e){return!e.collapsed()})}).sort(function(e,t){return e.keys.entIndex-t.keys.entIndex}),i=a.reduce(function(n,a){var i=e(a),o=n[i]||(n[i]=[]),l=o.length&&o[o.length-1],s=a.stacked||(t=!0,r(a,pe)),u=l?s.stackData:a.data;o.push(s),s.data!=u&&(s.data=u,s.tseries.forEach(function(e){e.data(u)}),t=!0);var c=l?[l.origin.data].concat(l.subData):[];s.setSubData(c)&&(t=!0)},{});for(var o in i)z(i[o],n);return t}function z(e,t){var n=t&&e.length>1&&!e[0].data.period[1]&&e.reduce(function(e,t){var n=t.origin.data.getMedianDistance();return e&&n?Math.min(e,n):e||n},0);e.forEach(function(e){e.stackData.roundTo=n,e.setInterpolateMode(t?0:-e.origin.data.interpolateMode)})}function R(e){var n=t.getAutoInterval();if(ue.interval[0]!=n[0]||e)return ue.interval=n,W(re,fe,n,e)}function W(e,t,n,r){var a=!1;return t.forEach(function(t){e.reduce(function(e,n){return e.concat(Object.getOwnPropertyNames(n.selectableKeys[t]))},[]).forEach(function(i){n&&i==n[0]||!A(e,t,i,!1,r)||(a=!0)}),n&&A(e,t,n,!0,r)&&(a=!0),"interval"==t&&e.indexOf(K)>=0&&pe.autoInterval(n)}),a}e||(e={}),EventListener(t),lib.updater(t,null,!0),t.loader.lastQuery(!1);var j=!1,U=Tooltip(),H=document.body,q=t.brush=Brush(),G=t.zoom=ChartZoom(),K=t.chart=o.TChart(e,G),B=["lower_confidence","upper_confidence"],$=t.context=o.TChart(e),Y=t.charts=Group([$,K]),Z=$.xScale[0],X=null,J=displayDatesFormat,Q=null,ee=0,te=250,ne=t.loader,re=[K],ae=27,ie=Panel(),oe=Panel(!0),le=Panel(!0),se=Panel(),ue=t.prev={contextIntv:!1,defIntv:!1,interval:!1,stack:!1},ce=!1,de=["type","interval"],fe=de.slice(1),pe=t.series.updateable(function(e){return!!e.keys.key.multipleSeries||e.tseries.some(function(e){return e.available})}),he=pe.confidenceLevel(),ge=!1,ve=t.statTooltip=null,me=[],ye=getDefaultTimeFormat(e),xe=t.tooltip=Tooltip(),be=Group(),_e=t.tseries=Group(),we=K.xScale[0],ke=t.legend=AddLegend(we,K,e.legendPosition,"top"),Te=getLegendControl(ke,le,ie),Se=0;G.chart(K).tooltips(be).targets(me).on("scroll",function(e,t){e!=we||Me.hasFutureData||t[1]>Ee&&(t[0]=-t[1]+t[0]+(t[1]=Ee))},!0).on("changed",function(e){e==we?t.redraw():t.draw()}).on("timerends",function(e){e==we&&t.reload(lib.RELOAD_MODE)}).on("move",function(e){var n=e[0],r=e[1],a=t.getNearestSeries(n,r,10,3);if(a?xe.color(a[0].color()).record.apply(this,a).showAt([n,r]):xe.visible(!1),Ae=ee-K.xy[1]-(ke.display()&&ke.positionIndex>5&&ke.positionIndex<9?ke.totalHeight():0),n>4||r<0||r>Ae?U.visible(!1):U.showAt(r),ve&&!ve.isUsed()){var i=d3.event.target.parentNode;ve.controls.some(function(e){return e.node==i})?ve.alignNode(i).showAt(0):ve.visible(!1)}}),t.getNearestSeries=function(e,t,n,r){var o=null;if(!(e>-n&&t>-n&&e<K.innerWidth()+n&&t<K.innerHeight()+n))return o;var l,s=d3.event.target.__data__,u=-1;if(s&&s.tseries&&s.tseries.column())o=s.tseries,l=o.getOwnPath(),u=a(o.data(),we,e,o.roundTo(),l.shift,l.width,2);else for(var c=K.series.length,d=n*n;c-- >0;){var f=K.series[c];if(f.displayed()&&!f.isThreshold){var p=+f.column();l=p&&f.getOwnPath();var h=i(f.data(),f.xScale(),f.yScale(),e,t,d,f.roundTo(),!p&&f.stepline(),p&&l.shift,p&&l.width);if(h&&(o=f,u=h[1],d=h[0],d<r))break}}if(o){var g,v=o.data(),m=o.getBaseData(),y=v.t[u];if(m!=v){var x=m.interpolate(y,null,1,v.roundTo);if(!(x&&x.length>1))return;g=x[1]}else g=v.v[u];return[o,y,g,m,o.getFormat()]}};var Ee=0;we.extendDomain(function(e){extend(e,c()||we.domain()),Ee=e[1]}).getNow=function(){return(new Date).getTime()};var Me=!1,Ie=.1;G.on("controldrag",function(e,t){function n(){var e=t.getTotalXY();return e&&e[0]*e[0]+e[1]*e[1]>9}e.attr("opacity",p(t)),n()&&(e.isAstray=!0)}).on("controldragend",function(e,t){if(p(t)>Ie){if(e.attr("opacity",null),!e.isAstray){var n=d3.event.sourceEvent;fireEvent(e.node(),"click",{pageX:n.pageX,pageY:n.pageY},!0)}}else{var r=e.datum();r.group.remove(r.group.indexOf(r),1),g(r.group,-1)}}),oe.on("spaceclick",h),le.on("spaceclick",h);var Ce=t.reset;t.reset=function(){function e(){return d(r)}var n=[2,Date.now(),null].concat(Array.prototype.slice.call(arguments,0)),r=n[2]=ne.getInterval.apply(this,n),a=ue.tspan,i=ue.tspan=null!=r.tspan&&r.tspan;if(le.forEach(function(e){e.state(e.value[1]===i&&"selected")}),v(i)||d(r),null==a)return Ce.apply(this,n);if(!v(i))return t.redraw(),t.reload(a&&i&&i<a?lib.UPDATE_MODE:lib.RELOAD_MODE);n[0]=lib.RELOAD_MODE;var o=t.reload.apply(this,n);return o.sent.length?ne.on("reqload",function(){e(),ne.un("reqload",arguments.callee)},!0):e()&&t.redraw(),o},ne.lookAhead(null==e.aheadTimeSpan?.1:e.aheadTimeSpan).on("dataupdate",function(){_e.forEach(function(e){e.allStyles()&&e.fire("pathchange")}),t.redraw()},!0),t.on("emptyload",function(){t.redraw()}),t.on("reset",function(n){if(n){var r=e.retainTimeSpan&&!v(ue.tspan);r||we.scope(null),Y.forEach(function(e){e.prev.seriesactivate=!1,e.prev.t0=1/0,e.prev.t1=-(1/0)}),t.redraw()}}),t.el=function(){return X},t.rendered=function(){return ce},t.width=function(e){return arguments.length?(Se=e,t):Se},t.height=function(e){return arguments.length?(ee=e,t):ee},ne.reloadInterval(b),t.varNames(["alertExp","displayExp","enabledExp"]),Y.options({targets:me}).methods("destroy"),_e.options({mode:null,collapsible:!0,connectValues:null}).addOption("markers").addOption("stepline"),Y.forEach(function(e){e.selectableKeys=de.reduce(function(e,t){e[t]={}},{})}),Y.forEach(function(e){e.panels._map={}}),t.panels=K.panels._map,K.outerWidth(t.width).outerHeight(t.height).paddingFn(function(e){return e.map(function(e,t){return G.dragging()?Math.max(e,K.axisPadding[t]):e})}),K.margin()[2]=2==ke.side?function(){return $.totalHeight()+ke.totalHeight()}:$.totalHeight,$.height(71).translate(function(e){e[0]=K.xy[0],e[1]=K.xy[1]-K.axisPadding[0]+K.height()+Math.max(this.padding()[0](),K.padding()[2]())}),$.setSize=function(){return this.totalHeight(this.height()+this.padding()[2]()+this.padding()[0]())},$.setSize(),K.grid.add(Axis(2).scale(we).tickFormat(!1).display(!1)),K.grid.add(Axis(3).scale(K.yScale[0]).tickFormat(!1).display(!1)),K.grid.add(Axis(1).scale(K.yScale[1]).tickFormat(!1).display(!1)),K.displayHorGrid(!0),K.axis.add(Axis(3).background(!0).scale(K.yScale[0])),K.axis.add(Axis(1).background(!0).scale(K.yScale[1])),K.axis[0].background(!0).title(function(){var t=J&&(e.isUTC?J.utc:J),n=0;return t?t(we.domain()).reduce(function(e,t){return e+(1==++n?" "+longDash+" ":" (")+t+(2==n?")":"")}):""}),$.grid.add(Axis(2).scale(Z).tickFormat(!1)),q.scale(Z),xe.format(function(e,t,n,r,a){var i=e.series.keys.key.timeOffset;return i&&i.total>0&&(t=lib.shiftDate(new Date(t),i,-1,r.isUTC)),[].concat(e.getTitle()).concat(ye(t)).concat(a(n)).concat(e.params.tooltipHtml)}),t.axisTooltipData=[{title:"Auto Scale",set:function(e){K.yScale.autoScale(e),$.yScale.autoScale(e)},get:K.yScale.autoScale},{title:"Step Line",set:_e.stepline,get:function(){var e=_e.stepline();return null==e?0!=pe.parameters().defaultValues.stepline:e}},{title:"Markers",set:_e.markers,get:function(){var e=_e.markers();return null==e?0!=pe.parameters().defaultValues.markers:e}},{title:"Display Filter",set:_e.collapsible,get:_e.collapsible},{title:"Connect Values",set:_e.connectValues,get:_e.connectValues}];var Ae=0;U.hideDelay(te).translate(function(e,t,n,r,a){return[t+5,n+Math.min(Math.max(e-a/2,le.totalHeight()+se.totalHeight()),Ae-a)]}).on("render",function(){U.el().classed("axi-tooltip-axistooltip",!0),U.innerEl().selectAll("div").data(t.axisTooltipData).enter().append("div").each(function(e,n){var r=d3.select(this);r.append("input").attr("type","checkbox").attr("checked",0==e.get()?null:"checked").on("change",function(){e.set(0==e.get()),e.set==_e.collapsible?t.redraw():t.draw()}),r.append("span").html(e.title)})}),be.methods("destroy").add(xe).add(U);var De=["threshold_count",{value:"threshold_percent",title:"percent"},{value:"threshold_duration",title:"duration"}];t.addTypeControl=function(e){function t(e){var t;return ie.some(function(n,r){return n.type.some(function(n){return n[0]==e&&(t=r,!0)})})?t:-1}var n=null;if(!e||!e[0]||t(e[0])>=0)return n;var r,a=e[1];if(a>=s.threshold_count&&a<=s.threshold_duration)n=De.map(function(e,t){return ie.datum(e,t)});else{var i=s.percentile;if(a==i&&(r=t("percentile_50"))>=0)for(;++r<ie.length&&ie[r].type[0][1]==i&&ie[r].type[0][2][0]>e[2][0];);else r=t("detail")+1;n=ie.datum(e[0],r)}return ie.reorder(),n},ie.onItemAdd(function(e){e.type=[].concat(e.value).map(lib.series.getTypeValue),e.value=e.type.reduceRight(function(t,n,r){t.indexOf(n[0])<0?t.push(n[0]):e.type.splice(r,1)},[]),null==e.data.title&&(e.data.title=e.type.map(function(e){return lib.series.getTypeTitle(e)}).join(", "));var t=e.value.filter(function(e){return K.selectableKeys.type[e]});e.state(t.length?t.length<e.value.length?"highlighted":"selected":null)}).data(["detail","avg","max","min","delta","counter","percentile_50","percentile_99","percentile_95","percentile_90","percentile_75","sum","forecast","first","last",{value:B,title:"confidence"},"count","+"]).on("itemclick",function(e){var n="selected"!=e.state(),r=!1;e.type.forEach(function(e){A(Y,"type",n?e:e[0],n)&&(r=!0)}),r&&t.redraw().reload(lib.RELOAD_MODE)}),t.addIntervalControl=function(e,t,n){t!=le&&(t=oe);for(var r=null,a=-1,i=0;i<t.length;i++){var o=t[i].interval;if(o[1]){var l=o[1]-e[1];if(l>0){a=i;break}if(!(l<0)){a=-1;break}a=i+1}}return a>=0&&(r=t.datum({value:e},a,n)),r},oe.backgroundTitle("Add new period").onItemAdd(function(e){var t=e.value;e.interval=lib.getIntervalValue(t),e.value=e.interval[0],e.isEditable&&e.interval[1]<=0&&(e.isEditable=e.isDraggable=null),null==e.data.title&&(e.data.title=e.interval[1]<0?"all":lib.getIntervalValueTitle(e.interval)||t),(e.value?K.selectableKeys.interval[e.value]:j)&&e.state(e.value&&j?"highlighted":"selected")}).data(["auto","1 minute","5 minute","10 minute","15 minute","30 minute","1 hour","6 hour","1 day","1 week","1 month","+"]).on("itemclick",function(e){var n=e.interval,r=!1;if(t.series.forEach(function(e){delete e.contextOnly}),n[0]){var a="selected"!=e.state();t.autoInterval(!1),W(re,fe,a&&n)&&(r=!0)}else t.autoInterval(r=!j);r&&t.redraw().reload(lib.RELOAD_MODE)}),le.backgroundTitle("Add new timespan").onItemAdd(function(e){var t=e.value;e.value=e.interval=lib.getIntervalValue(t),e.isEditable&&!e.interval[0]&&(e.isEditable=e.isDraggable=null),null==e.data.title&&(e.data.title=lib.getIntervalValueTitle(e.value)||t)}).data(["+","1 hour","1 day","1 week","1 month","1 year","all"]).on("itemclick",function(e){ne.timeSpan(e.value[1],!0),t.reset()}),se.onItemAdd(function(e){e.value===Q&&e.state("selected")}).data(["+"].concat(o.drawModes.map(function(e){return"columnstack"==e?{value:e,title:"column-stack"}:e}))).on("itemclick",function(e){t.mode(e.value)&&(ge||ue.stack!=ge?t.redraw():t.draw(!0))}),ke.on("toggle",function(){var e=ke.display();e&&ke.updateValue(),t.draw(!0)}).active(function(e,n,r,a){var i=e.data.series;return arguments.length<2?!i.params.hidden:((arguments.length<3&&(r=[])||a)&&r.push(t.setSeriesVisibility(i,n)),void(!a&&r.some(identity)&&t.redraw().reload(lib.RELOAD_MODE)))}),K.panels.onItemAdd(function(e){e.index&&e.on("expandstart",function(){k(e)})}).add(K.panels._map.timespan=le).add(K.panels._map.type=ie).add(K.panels._map.interval=oe).add(K.panels._map.mode=se).add(K.panels._map.legend=Te),ie.translate(function(e,t,n,r){e[0]+=r-t}),oe.translate(ie.translate()),oe.margin()[0]=ie.totalHeight,oe.padding()[0]=d3.functor(3),ie.padding()[2]=d3.functor(0),se.margin()[0]=le.totalHeight,se.padding()[0]=d3.functor(3),le.padding()[2]=d3.functor(0),se.padding()[2]=d3.functor(se.space()[1]),ie.margin()[3]=function(){return ie.index()>le.index()?le.totalWidth():ae},le.margin()[1]=function(){return le.index()>ie.index()?ie.totalWidth():ae},oe.margin()[3]=function(){return oe.index()>se.index()?se.totalWidth():ae},se.margin()[1]=function(){return se.index()>oe.index()?oe.totalWidth():ae},le.expand(3),ie.expand(3),oe.expand(5),se.expand(0);var Oe={},Pe=0,Le=[],Ne=[""];pe.onItemAdd(function(e){var n=e.keys.key.statistic;e.params.display&&!e.keys.isConfidence&&(t.addTypeControl(n),e.keys.key.period[0]&&t.addIntervalControl(e.keys.key.period));var r=e.rel[3],a=e.rel[1],i=Ne.indexOf(e.params.seriesClass);e.keys.classIndex=i<0?Ne.push(e.params.seriesClass)-1:i,e.keys.entIndex=r?r.keys.entIndex:Pe++,e.keys.typeWeight=!a||a.type?r.keys.typeWeight:lib.series.getTypeWeight(n,pe.confidenceLevel),e.keys.rangeIndex=!a||a.type?r.keys.rangeIndex:lib.series.getRangeIndex(n,e.keys.typeWeight);var o=-1;e.keys.isStat&&(o=Le.indexOf(e.keys.key.forecastName))<0&&(Le[o=Le.length]=e.keys.key.forecastName),e.keys.forecastNameIndex=o}).onSetValue(function(e){var t=e.data;e.origin?t.disconnectStep=e.origin.data.disconnectStep:!t||t.getMedianDistance||e.keys.isThreshold||(t.on("change",function(){t.distance=null}),t.getMedianDistance=function(){if(t.len>1&&null==t.distance){for(var e=[],n=t.len-1;n>0;e.push(t.t[n]-t.t[--n]));return t.distance=e.sort(lib.number.ascending)[Math.quantile(.51,e.length)]}return t.distance})},!0).onSetValue(function(e){function t(e){return e.main&&("line"===e.mode()||"range"===e.mode()&&null==e.sub)}var n=e.params;e.keys.isStackable=!e.isStacked&&!e.keys.isConfidence&&!e.keys.isThreshold,e.tseries=[],e.displayInMain=!1;var r=e.initialDisplay=n.display,a=e.isStacked?function(e){return o.stackModes.indexOf(e)<0?o.stackModes[0]:e}:e.keys.isThreshold?"line":e.keys.isConfidence?"range":e.keys.isStat&&!e.keys.key.dataType?function(e){return"line"==e?"range":e}:e.keys.rangeIndex==-1?function(e){return o.stackModes.indexOf(e)>=0||"range"==e?"line":e}:function(e){return o.stackModes.indexOf(e)<0?e:"line"},i=n.colorIsDefault?lib.series.getColor(n.color,e.keys.typeWeight):n.color,s="function"!=typeof i?function(){return i}:i,u=extendObject(extendObject({},e.mainParams),{getColor:function(){var t=this;return e.stacked&&e.stacked.tseries.some(function(e){return e.chart===t.chart&&!e.removed()&&(t=e)}),t.color()},stroke:s,getMode:d3.functor(a),classIndex:e.keys.classIndex,typeWeight:d3.functor(e.keys.typeWeight),rangeIndex:d3.functor(e.keys.rangeIndex),axisIndex:n.axisIndex,isStat:e.keys.isStat,entIndex:e.keys.entIndex,forecastNameIndex:e.keys.forecastNameIndex,isThreshold:e.keys.isThreshold,getMarkers:function(){return t(this)&&!this.isThrehsold&&this.markers()},getEndMarker:function(){return t(this)&&this.endMarker()},getLastValueLabel:function(){return this.main&&n.lastValueLabel},disconnectStep:e.data.disconnectStep},d3.functor(!1));Y.forEach(function(t){var a=extendObject(l(),u).data(e.data),i=n.mode;a.main=re.indexOf(t)>-1,a.chart=t,e.tseries.push(a),t.series.add(a),a.stepline(n.stepline).markers(n.markers).endMarker(n.lastMarker),_e.add(a),o.drawModes.indexOf(i)>=0&&a.mode(i),r&&e.original&&D(e)&&(t==$||!e.contextOnly)&&de.forEach(function(n){O(t,n,L(e,n),!0,!0)})}),r&&(Oe[e.keys.metricId]=!0),e.origin?delete e.vars.calc.displayExp:M(e.tseries[Y.indexOf(K)]),N(e),e.tseries.forEach(I),e.isStacked&&e.tseries.forEach(S)}),t.on("alertExp",function(e){e.tseries.forEach(function(e){e.alertChanging()||e.setStyle()})}).on("displayExp",function(e){T(e).forEach(S)}).on("enabledExp",function(e){T(e).forEach(E)}),t.setSeriesVisibility=function(e,n,r){var a=null!=n,i=a?!n:!e.params.hidden;if(a&&!e.params.hidden==!i)return!1;if(e.params.hidden=i,!r&&e.displayInMain){var o,l=e.keys.metricId;i?(o=ke.some(function(e){return e.display()&&!(e=e.data).params.hidden&&e.series.keys.metricId==l}),o||(pe.parameters().hiddenMetrics[l]=!0,pe.forEach(function(n){n!=e&&n.keys.metricId==l&&t.setSeriesVisibility(n,!1,!0)}))):pe.parameters().hiddenMetrics[l]=!1}return!0},t.toggleKey=A,t.selectType=function(e,n){return n=arguments.length<2||!!n,[].concat(e).map(lib.series.getTypeValue).forEach(function(e){A(Y,"type",n?e:e[0],n)}),t},t.redraw=function(e,n){function r(){return Y.some(function(e){return e.seriesChange()})}var a=!ce||e&&!r();if(a)return t;var i=ue.stack!=ge,l=i||!n;ue.stack=ge,l&&_e.forEach(I),u(!0),j&&R()&&(K.series.forEach(I),l=!0);var s=lib.series.getUpdateTime(pe,t.updateTime),c=[];if(Y.forEach(function(e,t){if(e.display()){e.updateTime=s;var n=F(e.series,function(e){return!(e=e.series).isStacked&&(!e.keys.isThreshold||c.indexOf(e)<0&&c.push(e))});lib.data.process(n,[lib.data.roundInterval(e.xScale[0].domain(),1)],s)}}),t.calcVariables(pe.filter(function(e){return!e.origin}),s),ge){var d=V();Y.forEach(function(e){if(e.display()){var t=F(e.series,function(e){return e.series.isStacked}),n=lib.data.roundInterval(e.xScale[0].domain(),1);lib.data.process(t,[n],s)}}),d&&Y.forEach(function(e){e.series.sort(o.seriesComparator).forEach(function(e,t){e.index(t)})})}return t.calcVariables(pe.filter(function(e){return e.origin}),s),oe.display(pe.some(function(e){var t=e.keys.key;return t.period[0]&&(!t.statistic[0]||K.selectableKeys.type[t.statistic[0]])})),ke.forEach(function(e){e.display()&&e.display(!e.data.collapsed())}).updateValue(),t.draw(!0),t},t.draw=function(e){return ke.redraw(),Te.display(ke.some(function(e){return e.display()})),K.redraw(),$.width(K.innerWidth()).redraw(),q.display($.display()).height($.innerHeight()).redraw(),e&&ke.display()&&ke.updateColor(),t},t.resize=function(e,n,r){return t.width(e).height(n),r?t.redraw():t.draw()},t.destroy=function(){return t.destroyUpdater(),_e.forEach(function(e){e.lastTip&&e.lastTip.destroy()}),Y.destroy(),ke.destroy(),be.destroy(),ce&&(X.remove(),H.unMove(t.onMove),H.unMouseWheel(t.onMouseWheel),ce=!1),t},t.getAutoInterval=function(){var e=we.domain();return lib.adjustPeriod(e[1]-e[0])},t.mode=function(e){return arguments.length?(o.drawModes.indexOf(e)<0&&(e=o.drawModes[0]),Q!=e&&(null!=Q&&w(K,"mode",Q,!1),w(K,"mode",e,!0),Q=e,ge=o.stackModes.indexOf(Q)>=0,_e.mode(Q),!0)):Q},t.mode(null);var Fe=$.display;return $.display=function(e){return arguments.length?(Fe()!=e&&(Fe(e),ue.contextIntv=!1),$):Fe()},t.autoInterval=function(e){return arguments.length?(j!=e&&(j=e,_(),ue.interval=!1),t):j},t.confidenceLevel=function(e){return arguments.length?(he=e,pe.confidenceLevel(he),t):he},t.hideDelay=function(e){return arguments.length?(te=e,t):te},t.timeFormat=function(e){return arguments.length?(ye=e,t):ye},t.displayDates=function(e){return arguments.length?(J=e,t):J},t.removeSeries=function(e){var n;return e.lastTip.destroy(),e.destroy(),_e.splice(_e.indexOf(e),1),K.series.splice(K.series.indexOf(e),1),pe.splice(pe.indexOf(e.series),1),n=ke.some(function(t){if(t.data===e)return t}),n&&ke.remove(ke[0]),t},t.replaceSeries=function(e,n){_e.forEach(function(e){e.lastTip&&e.lastTip.destroy(),e.destroy()}),_e.splice(0),pe.splice(0),K.series.splice(0),ke.remove(0),initWidgetSeries(e,t),n&&(t.loader.startTime(n.startTime),t.loader.endTime(n.endTime),t.reset(0)),t.loader(2)},t};var s=lib.series.typeIndices,u={value:function(e){var t=this.series[0];if(t.subData.length){var n=e(t.origin.data);return null!=n&&(n=t.subData.reduce(function(t,n){return t+e(n)},n)),n}},subData:[],setInterpolateMode:function(e){if(this.stackData.interpolateMode!=e)return this.stackData.interpolateMode=e,this.stackData.spliceData(),!0},setSubData:function(e){var t=this,n=this.subData,r=!1;return arrayEquals(n,e)||(n.forEach(function(n){e.indexOf(n)<0&&(r=!0,t.stackData.removeCallee(n))}),(r||n.length<e.length&&(r=!0))&&(this.stackData.spliceData(),this.subData=e)),r}}},{"./tchart":70,"./timeseries":72}],72:[function(e,t,n){var r=e("./path"),a=e("./points");n.TimeSeries=function(){function e(t){return k=t.node(),S=!0,e}function t(e,t){return t?e<1.5?7:e<2?5:e<3?4:2.5:e<1.5?5:e<2?4:e<3?3:2.5}function n(e,t){return e.attr("viewBox","-4 -4 8 8").attr("markerUnits","strokeWidth").attr("markerWidth",t[2]).attr("markerHeight",t[2]).attr("orient","0"),e.append("circle").attr("stroke-dasharray",navigator.ffVersion>=37?"none":"0").attr("r","3").attr("fill","white").attr("stroke",t[1]).attr("stroke-width","2"),e}function i(){var t=y.i0,n=y.i1;if(t>=h.len||n<0)return void o();var r=C.factor(),i=A.factor();if(!(r>0&&i<0))return void o();T&&(T=!1,p?(p.forEach(function(e){k.appendChild(e)}),e.setStyle()):(f=d3.select(k).append(d?"g":"path"),p=f[0],b=d?f.append("path"):f,e.fire("render")));var u=w.step!=(M=h.period[1])&&(w.step=M,e.fire("stepchange"),!0),v=w.stepline!=e.stepline()&&(w.stepline=e.stepline(),e.fire("steplinechange"),!0),S=w.column!=c&&(w.column=c,!0),E=!!e.disconnectStep,I=w.connect!=E&&(w.connect=E,!0),D=u||v||S||I;D&&e.fire("pathchange"),t=Math.max(0,t-1),n=Math.min(h.len-1,n+1);var O,P=Math.round(C(0)),L=Math.round(A(0)),N=function(e){return Math.round(r*e)+P},F=function(e){return Math.round(i*e)+L},V=0,z=g;if(m||(m=!0,f.attr("display",null),z=!0),s&&f.attr("transform",null),b.crisp(),!x&&!z&&t<=w.i1&&n>=w.i0&&l(N,w.sx,h.t[t],h.t[n])){if(t>=w.i0&&n<=w.i1){var R,W=P-w.sx(0),j=L-w.sy(0);if((s||!W&&!j)&&l(F,w.sy,(R=y.range||A.domain())[0],R[1]))return void((W||j)&&f.attr("transform",function(){return(this.getAttribute("transform")||"")+"translate("+W+","+j+")"}))}O=_.length-1;var U;t!=w.i0&&(t<w.i0?(_=a.concatPoints(h,a.getPoints(h,t,w.i0-1,r),_,r),O=_.length-1):(U=h.t[t],V=searchIndex(function(e){return U<=h.t[_[e]]},V,O))),n!=w.i1&&(n>w.i1?(_=a.concatPoints(h,_,a.getPoints(h,w.i1+1,n,r),r),O=_.length-1):(U=h.t[n],O=searchIndex(function(e){return U<h.t[_[e]]},V,O)-1))}else _=x?[t,n]:a.getPoints(h,t,n,r),O=_.length-1;w.sx=N,w.sy=F,w.i0=t,w.i1=n,w.p0=V,w.p1=O,D||e.fire("pathchange")}function o(){m&&(m=!1,b.attr("d","M0,0"),f.attr("display","none"),e.fire("pathchange"))}function l(e,t,n,r){var a=e(0)-t(0);return e(n)-t(n)==a&&e(r)-t(r)==a}var s=!0,u=!1,c=!1,d=!1,f=null,p=null,h=!1,g=!1,v=!1,m=!1,y=e.domain={},x=!1,b=null,_=[],w=e.prev={},k=null,T=!0,S=!1,E=!1,M=0,I=!1,C=null,A=null,D=!1;e.renderTo=e,EventListener(e),e.el=function(){return f},e.pathEl=function(){return b},e.pathNodes=function(){return b&&b[0]},e.rendered=function(){return S},e.display=function(){return v},e.displayed=function(){return m},e.removed=function(){return T},e.step=function(){return h&&h.period[1]||M},e.points=function(){return _},e.displayAsParent=!1,e.redraw=function(){if(!S)return e;if(v||e.displayAsParent?(i(),g=!1):(o(),u&&!T&&(T=!0,f.remove())),e.series.rel&&e.series.rel[3]&&e.series.rel[3].data&&e.series.rel[3].data.len){var t=e.series.rel[3].tseries[0];e.dataIsEmpty()&&I?(D=!0,t.displayAsParent=!0,t.redraw()):D&&(D=!1,t.displayAsParent=!1,t.redraw())}return e},e.getMarkerLink=function(r,a,i,o){var l=null;if(a){var s=r.style("stroke");if(s&&"none"!=s){var u=parseFloat(r.style("stroke-width"))||0;if(u>0){var c=t(u,o);(o||y.i1<=y.i0||(C(h.t[y.i1])-C(h.t[y.i0]))/(y.i1-y.i0)>c*u*(e.stepline()?1.5:.75))&&(l=["string"==typeof a?a:"circle",d3.rgb(s).toString(),c])}}}var d=l&&"axi-marker-"+l.join("-").replace(/[#.]/g,"_"),f=d&&d3.select("#"+d).empty(),g=!arrayEquals(i.data,l)&&(i.data=l,!0);if(g||f){if(f){var v=getSvgDefs(p[0]);v?n(v.append("marker"),l).attr("id",d):(d=null,g=!0)}g&&(i.link=d&&"url(#"+d+")")}return i.link};var O=!1;return e.getOwnPath=function(){return O},e.setOwnPath=function(t,n,a){if(x)O=!1;else{var i=!c;O=r.getPathCoordinates(h,_,w.p0,w.p1,w.sx,w.sy,i,e.isStacked(),i&&M,i&&e.stepline(),t,n,a)}return O},e.on("pathchange",function(){O=null}),e.destroy=function(){return e.data(null).un(),S&&(T||f.remove(),S=!1),e},e.setDisplay=function(){var t=!!v,n=!(!I||e.collapsed()||e.dataIsEmpty());return t!=n&&(v=!v,e.fire("displaychange")),e},e.dataChange=function(){return e.setDisplay(),y.range=null,g=!0,e.fire("datachange"),e},e.dataIsEmpty=function(){return!h||!h.len},e.data=function(t){return arguments.length?(h!=t&&(h&&h.un("change",e.dataChange),h=t,h&&h.on("change",e.dataChange),x=h&&h.isConstant(),e.dataChange()),e):h},e.visible=function(t){return arguments.length?(I!=t&&(I=t,e.setDisplay()),e):I},e.column=function(t){return arguments.length?(c=t,e):c},e.xScale=function(t){return arguments.length?(C=t,e):C},e.yScale=function(t){return arguments.length?(A=t,e):A},e.allowRemove=function(t){return arguments.length?(u=t,e):u},e.allowTranslate=function(t){return arguments.length?(s=t,e):s},e.complex=function(t){return arguments.length?(d=t,e):d},e.stepline=function(t){return arguments.length?(E=t,e):E},e}},{"./path":68,"./points":69}],73:[function(e,t,n){t.exports=function(e,t){function n(){function e(e){var t=e.data.t,n=u.loader.getTimespanWindow();return[d3.bisectLeft(t,n.start),d3.bisectRight(t,n.end)]}function t(t){return function(n,r){var a=r.row.map[n[0]],i=e(a),o=Array.prototype.slice.call(n,1);return o.unshift(a.data.v.slice(i[0],i[1])),t.apply(this,o)}}function n(e,t){var n=m&&m[1],r=e.meta.updateTime=m&&n==lib.RESET_MODE?m[2]:u.updateTime;return e.call(t,r,0,n)}function r(e){if("function"==typeof e)return e;if(e=lib.parseValue(e),!e)return null;var t=g.variables.concat(c),n=g.varNamesString+","+d,r=lib.data.calculator().isUTC(g.isUTC()).vars(t,n).getPointValue(g.getPointValue);return r.value(e),r.series=g,r}function a(e){return i(e)?e:e.series[0]}function i(e){return e&&!(!e.keys||!e.params)}function o(e){return f&&"number"==typeof(e==f?e=f.last.v:e)?f.mainParams.getFormat()(e):e}function l(){var e=g.filter(function(e){return e.mainParams.isVisible()&&(e.last&&!e.last.expired||!(e.params.hideIfEmpty||null==e.params.hideIfEmpty&&p))});return h?s(e):e}function s(e){return e.reduce(function(e,t){e.push(t),e.some(function(n,r){function a(e){var t=u.findProperty(e.keys.key.tags,l)||u.findProperty(e.keys.key,l);t&&(n.map[t[l]]=e)}var o=i(n),l=h((o?n:n.series[0]).keys.key,t.keys.key);if(l)return o&&(n=e[r]={map:{},series:[n],seriesIndex:n.seriesIndex},a(n.series[0])),r<e.length-1&&(e.pop(),a(t),n.series.push(t)),!0})},[])}var u=StreamingTable(!0).varNames(["alertExp","displayExp"]).rowKey(function(e){return e.seriesIndex}).columns(["entity",{key:"metric",format:function(e){if(f){if(null!=f.params.metricLabel)return f.params.metricLabel;if(null!=f.params.label)return f.params.label}return e}},{key:"tags",hidden:!0},{key:"time",style:"text-align: center; white-space: pre",format:d3Format("%H:%M:%S")},{key:"value",format:o}]),c=[{varName:"column_max",varValue:t(d3.max)},{varName:"column_min",varValue:t(d3.min)},{varName:"column_avg",varValue:t(d3.mean)},{varName:"column_sum",varValue:t(d3.sum)},{varName:"column_count",varValue:t(function(e){return e.length})},{varName:"column_max_value_time",varValue:function(t,n){var r=n.row.map[t[0]],a=e(r),i=r.data,o={t:null,v:Number.NEGATIVE_INFINITY};return o=i.v.slice(a[0],a[1]).reduce(function(e,t,n){t>e.v&&(e.v=t,e.t=i.t[n])},o),o.t}},{varName:"column_min_value_time",varValue:function(t,n){var r=n.row.map[t[0]],a=e(r),i=r.data,o={t:null,v:Number.POSITIVE_INFINITY};return o=i.v.slice(a[0],a[1]).reduce(function(e,t,n){t<e.v&&(e.v=t,e.t=i.t[n])},o),o.t}},{varName:"column_percentile",varValue:t(function(e,t){return e.sort(),d3.quantile(e,t/100)})},{varName:"column_first",varValue:t(function(e){return e[0]})},{varName:"column_last",varValue:t(function(e){return e[e.length-1]})},{varName:"column_delta",varValue:function(t,n){var r=n.row.map[t[0]],a=e(r),i=r.data.v;return a[0]===a[1]?null:i[a[1]-1]-i[a[0]&&a[0]-1]}}],d=c.map(function(e){return e.varName}).join(","),f=null,p=!0,h=null,g=u.series;u.on("render",function(){u.el().classed("axi-table-widget",!0)}).on("rendertbodyrow",function(e,t){if(i(e)){var n=u.findProperty(e,"tooltip"),r=n&&null!=n.tooltip?n.tooltip:(n=u.findProperty(e,"label"))&&null!=n.label?n.label:"";t.attr("title",getTooltipText(r)),onSeriesClick(e,u,t)}});var v=0;u.setRowIndex=function(e){e.index=e.seriesIndex},g.onItemAdd(function(e){function t(){e.last=e.mainParams.getLast()||0}return t(),e.data&&e.data.on("change",t),e.seriesIndex=v++,u});var m=null;u.on("preprocess",function(){m=arguments,u.redraw(!0),m=null}),u.on("columnschange",function(){u.columns().forEach(function(e){e.seriesValue=r(e.seriesValue),null==e.format&&e.seriesValue&&e.seriesValue.vars&&(e.format=o)})}),extendObject(u.defaultValues,{metric:function(e){return((f=e=a(e)).config||e.keys.rec).metric||""},time:function(t){var n=a(t),r=n.last.t,i=u.loader.getTimespanWindow(u.loader.getLastRequestTime());if(i.contains(r))return r;var o=e(n);return n.data.t[o[1]]},value:function(t){var n=a(t),r=n.last.t,i=u.loader.getTimespanWindow(u.loader.getLastRequestTime());if(f=a(t),i.contains(r))return f.last.v;var o=e(n);return n.data.v[o[1]]},statistic:function(e){return a(e).keys.key.statistic[0]}}),u.getExpandedKeys=extendFunction(u.getExpandedKeys,function(e){return[e.reduce(function(e,t){return i(t)?void e.push(t):e.concat(t.series)},[]),identity]},!0);var y=u.getDefaultValue;u.getDefaultValue=function(e,t){if(i(e)||"object"!=typeof e||e.map&&Object.keys(e.map).length||!Array.isArray(e.series)||(e=e.series[0]),t.seriesValue&&!t.isTag&&"tags"!==t.key){i(e)?f=e:t.seriesValue.row=e;var r=n(t.seriesValue,e.data);if(null!=r)return r}return y.apply(this,arguments)};var x=g.getCalculator(function(e){return e(this)},null,!0);u.processValue=function(e,t){var r=e;if(!t[7])return r;var a=this.__series__=i(e)?e:i(t[0])?t[0]:null,l=t[3];a&&(f=a,null==l.format&&(l.format=o),null!=l.value&&a!=e||(r=n(x,a.data),a.config&&null==a.config.format&&l.format&&l.format!=o&&(a.config.format=l.format)));for(var s in b)a?(null==l[s]||l[s].changeable)&&((l[s]=b[s](a)).changeable=!0):l[s]&&l[s].changeable&&(l[s]=null);return r};var b={onClick:function(e){return[function(){u.fire("clickseriescell",e)}]},title:function(e){return new String(e.mainParams.getTooltip())}};u.on("updatetbody",function(e){e.each(function(e){if(i(e)){var t=e.alert=e.vars.values.alertExp,n=d3.select(this).classed("axi-table-row-alert",t);getColorStyle(n,joinStyles([getNodeInitStyles(this),e.params.style,t&&d3.functor(e.params.alertStyle)(t)]))}})});var _=u.tbodyData;return u.tbodyData=function(e){return arguments.length?(e.length&&_(l()),u):_()},u.hideEmptySeries=function(e){return arguments.length?(p=e,u):p},u.merge=function(e){return arguments.length?(h=e,u):h},u}e.TableWidget=n}},{}],74:[function(e,t,n){t.exports=function(e,t){function n(){function e(t){return c=t.classed("axi-text-widget",!0),d=c.node(),c.append("div").attr("class","axi-text-widget-inner").call(n),m=!0,e.fire("render"),e}function t(e){return e.keys.isReal?lib.series.getLabel(e,e.params.labelFormat||p,e.params.axisLabel):e.params.legendLabel}function n(n){v=n.selectAll(".axi-text-widget-item").data(y.filter(function(e){return e.mainParams.isVisible()})),v.exit().remove();var r=v.enter().append("div").attr("class","axi-text-widget-item").classed("axi-text-widget-item-circle",u);e.fire("itemsenter",r);var a=r.append("div").attr("class","axi-text-widget-item-inner");a.append("p").style("color",function(e){return e.config.color}).style("fill",function(e){return e.config.color}).filter(function(e){return!!e.config.value||e.config.entity&&e.config.metric}).append("span").classed("axi-text-widget-value",!0).text(" "),a.filter(function(e){return e.config.icon}).select("p").each(function(t){t.icon=WidgetIcon(null).alert(function(){return t.vars.values.alertExp}).alertStyle(t.params.alertStyle).forceAlertStyle(t.params.iconAlertStyle).color(t.params.color).forceColor(t.params.iconColor).position(t.params.iconPosition).onReady(function(){t.icon.el().classed("axi-text-widget-icon",!0),e.redraw()}),d3.select(this).call(t.icon)}),a.append("p").classed("axi-text-widget-caption",!0).text(t),r.each(function(e){var n=this;e.on("labelchanged",function(){d3.select(n).select("p.axi-text-widget-caption").text(t)})})}function r(){c.style("overflow","hidden");var e=null==h.cur;adjustParameter(a,h.min,h.max,h.cur,function(t,n,r){return e?Math.round((t+n)/2):r<t?t:n}),"auto"===s&&adjustParameter(i,h.cur,d.clientWidth,h.cur,function(t,n,r){return e?Math.round((t+n)/2):r<t?t:n}),c.style("overflow","auto")}function a(e){var t=Math.max(h.captionMinSize,Math.round(e*h.coeff));return c.style("font-size",e+"px"),v.selectAll(".axi-text-widget-caption").style("font-size",t+"px"),v.filter(function(e){return e.icon}).each(function(t){t.icon.resize(e)}),u&&o(),h.cur=e,!l()}function i(e){return v.filter(function(e){return e.icon}).each(function(t){t.icon.resize(e)}),u&&o(),!l()}function o(){v.style({width:"auto",height:"auto"});var e=v.select(".axi-text-widget-item-inner").style("margin","auto"),t=v[0].map(getNodeRect),n=Math.ceil(Math.sqrt(t.reduce(function(e,t){return Math.max(e,t.width*t.width+t.height*t.height)},0)));v.style({width:n+"px",height:n+"px"}),e.style("margin",function(e,r){return(n-t[r].height)/2+"px "+(n-t[r].width)/2+"px"})}function l(){return d.clientWidth<d.scrollWidth||d.clientHeight<d.scrollHeight}EventListener(e),lib.updater(e);var s,u=!1,c=null,d=null,f=!1,p="label\nstatistic - period: dataType - forecastName: rate",h=e.fontSize={coeff:.333,captionMinSize:8},g=0,v=null,m=!1,y=e.series,x=0;return e.varNames(["alertExp"]).on("seriesupdate",function(t){f=!0,t&&e.redraw()}),e.el=function(){return c},e.items=function(){return v},e.resize=function(t,n){return e.width(t).height(n).redraw()},e.destroy=function(){return e.destroyUpdater(),m&&(c.remove(),m=!1),e},e.redraw=function(){return m?(f&&(c.select(".axi-text-widget-inner").call(n),v.each(function(e){var t=e.mainParams.getLast(),n=e.vars.values.alertExp,r=t?e.mainParams.getFormat()(t.v):" ",a=d3.select(this).classed("axi-text-alert",n);if(e.icon){var i=e.params.icon(t?t.v:null);i instanceof Array&&(i=i[0]),e.icon=e.icon.refresh(i)}a.select(".axi-text-widget-value").text(r),getColorStyle(a,joinStyles(["vertical-align: "+(r?"top":"bottom"),e.params.style,!(n===!1||null==n)&&d3.functor(e.params.alertStyle)(n)]))})),c.style("width",x+"px").style("height",g+"px"),r(),f=!1,e):e},e.height=function(t){return arguments.length?(g=t,e):g},e.width=function(t){return arguments.length?(x=t,e):x},e.circles=function(t){return arguments.length?(u=t,e):u},e.iconSize=function(t){return arguments.length?(null!=t&&(s=t),e):s},e}e.TextWidget=n}},{}],75:[function(e,t,n){t.exports=function(e){function t(e){function t(n){return s=n.classed("axi-treemap",!0).style("font-size",d+"px").append("g"),f||(f=defaultValueFormat),h&&h.render(n),v=s.classed("axi-treemap-series",!0),T.renderTo(v),T.forEach(function(e){e.rectEl().attr("style",e.series.params.style||"")}),x.renderTo(e.getTooltipCont&&e.getTooltipCont()).el().style("z-index",getZIndex(s.node())+30),u&&(r()&&(p.margin()[3]=function(){return _&&_.width+2*_.x}),b=n.append("text").attr("dx",".5em").attr("dy","1em")),w&&!g.some(i)&&(c={getSize:o,isEmpty:!0}),t.fire("render",n),t}function r(){return p&&p.display()&&0==p.side}function a(e,t){var n=e.series.thresholds.root.groups;if(n&&n.length){for(var r,a=n.length;a-- >0&&(!n[a].range||(r=n[a].range)[0]>t););return r}}function i(e){return w&&e.params.display&&!e.vars.calc.size&&e.params.isOther}function o(){return Math.max(0,l(!1)-l(!0))}function l(e){switch(e){case!0:return T.reduce(function(e,t){return t.isRemain?e:e+t.getSize()},null);case!1:return w&&lib.isFiniteNumber(w._value)?w._value:null}var t=l(!1),n=l(!0);return null==t?n:null==n?t:Math.max(t,n)}e||(e={}),EventListener(t),lib.updater(t),WidgetDiv(t);var s=null,u=!0,c=null,d=null,f=null,p=t.legend=AddLegend(null,t,e.legendPosition,Controls),h=t.paletteLegend=p&&getPaletteLegend(p,t),g=t.series,v=null,m=null,y=getDefaultTimeFormat(e),x=t.tooltip=Tooltip(),b=null,_=0,w=null,k=t.treemap=d3.layout.treemap(),T=t.tseries=Group();return t.loader.lastQuery(!1),t.el=function(){return s},t.varNames(["colorValue","size","alertExp"]),lib.setThresholds(t).setDefaultThresholds(!0),t.on("seriesupdate",function(e,n){x.prev.record=null,T.setColor(),t.redraw()}),t.margin()[0]=function(){var e=r()?p.totalHeight():0;return Math.max(_&&_.height,e)},x.format(function(e,t,n){var r,i=e.getFormat();return[].concat(e.getTitle()).concat(null==t?"N/A":i(t)+((r=a(e,t))?" (out of "+r.map(function(e){return i(e)}).join(", ")+")":"")).concat(n?y(n.t):null).concat("Size: "+f(e.getSize())).concat(e.params.tooltipHtml)}),T.methods(["destroy","setColor"]).addOption("renderTo").ownOptions({defaultSize:1}).options({tooltip:x,displayText:!0,defaultColor:null}),k.value(function(e){return e.getSize?e.getSize():0}).sort(function(e,t){return t.isEmpty-e.isEmpty||t.value-e.value}),g.onItemAdd(function(e){function t(){if(e.vars.calc.size){var t=e.vars.values.size;return lib.isFiniteNumber(t)&&t>0?t:0}return T.defaultSize()}if(e.mainParams.isVisible()){var r=e.tseries=extendObject(n(),e.mainParams),a=r.isRemain=i(e);r.isEmpty=!1,r.getSize=a?o:t,e&&e.params&&null!=e.params.labelFormat?(r.title(lib.series.getLabel(e,e.params.labelFormat)),r.series.on("labelchanged",function(e){r.title(e),r.displayText()&&r.redrawLabel()})):r.title(e.params.axisLabel),T.add(r),r.lastValue(r.params.lastValue);var l=r.params.isOther?r.series.config.color:null;null!=l&&r.defaultColor(l)}}),t.redraw=function(){if(!t.display()||!t.rendered())return t;u&&(b.text("Total"+(null==m?"":" "+m)+": "+f(l()||0)),_=b.node().getBBox(),_={x:Math.floor(_.x),y:Math.floor(_.y),width:Math.ceil(_.width),height:Math.ceil(_.height)}),h&&h.redraw(),s.select("rect").crisp(s.attr("transform",null));var e=s.attr("transform");t.setSize().align(),s.attr("transform",(e||"")+(s.attr("transform")||""));var n=T.filter(function(e){var t=!!e.getSize();return e.el().attr("display",t?null:"none"),t}),r=c?n.concat(c):n;return k.size([t.width()-1,t.height()-1]).nodes({children:r}),n.forEach(function(e){e.el().transform("translate",[e.x,e.y]);var n=Math.max(0,e.dx),r=Math.max(0,e.dy);if(e.rectEl().attr("width",n).attr("height",r),e.displayText()){var a=Math.floor((n-e.textRect.width)/2),i=Math.floor((r-e.textRect.height)/2),o=a>=1&&i>=0,l=!1;o||(a=Math.floor((n-e.textRect.height)/2),i=Math.floor((r-e.textRect.width)/2),o=a>=2&&i>=0,l=!0),e.text.attr("display",o?null:"none"),o&&e.text.attr("transform","translate("+a+","+(i+(l?e.textRect.width:0))+")"+(l?"rotate(-90)":""))}onSeriesClick(e.series,t,e.el())}),u&&(b.attr("x",t.xy[0]),p&&p.display()&&0==p.side&&b.attr("y",p.xy[1])),t},t.resize=function(e,n){return t.outerWidth(e).outerHeight(n).redraw()},t.destroy=function(){return t.destroyUpdater(),x.destroy(),h&&h.destroy(),t.rendered()&&(s.remove(),t.rendered(!1)),t},t.displayTotal=function(e){return arguments.length?(u=e,t):u},t.formatSize=function(e){return arguments.length?(f=e,t):f},t.sizeName=function(e){return arguments.length?(m=e,t):m},t.timeFormat=function(e){return arguments.length?(y=e,t):y},t.fontSize=function(e){return arguments.length?(d=e,t):d},t.totalSize=function(e){return arguments.length?(w=t.addVariable(e),t):w},t}function n(){function e(t){return r=t.append(n?"g":"rect").on("mousemove",function(){e.fire("move")}).on("mouseover",function(){e.fire("over")}).on("mouseleave",function(){e.fire("out")}),i=n?r.append("rect"):r,n&&(e.text=r.append("text").attr("dy","1em"),e.redrawLabel()),o=!0,e.setColor(),e}var t=null,n=!0,r=null,a=null,i=null,o=!1,l=null,s=null;return e.redrawLabel=function(){e.text.text(l),e.textRect=getNodeRect(e.text.node())},e.renderTo=e,e.el=function(){return r},e.rectEl=function(){return i},e.rendered=function(){return o},EventListener(e),e.on("out",function(){s.visible(!1)}).on("move",function(){s.record(e,e.lastV,e.series.data.last).showAt()}),e.setColor=function(){var r=e.series,l=r.data;if(!o||!l)return e;var s=e.lastV=null==a?l.last.v:a,u=(r.vars.calc.colorValue?r.vars.values.colorValue:r.thresholds(s).tint)||t;return i.attr("fill",u),n&&e.text.attr("fill",adjustTextColor(i.style("fill")||u)),e},e.tooltip=function(t){return arguments.length?(s=t,e):s},e.lastValue=function(t){return arguments.length?(a=t,e):a},e.defaultColor=function(n){return arguments.length?(t=n,e):t},e.displayText=function(t){return arguments.length?(n=t,e):n},e.title=function(t){return arguments.length?(l=t,e):l},e}e.Treemap=t}},{}]},{},[5]);